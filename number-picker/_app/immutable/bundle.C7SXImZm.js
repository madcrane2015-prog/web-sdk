var HQ=Object.defineProperty;var vN=Ue=>{throw TypeError(Ue)};var jQ=(Ue,fe,ut)=>fe in Ue?HQ(Ue,fe,{enumerable:!0,configurable:!0,writable:!0,value:ut}):Ue[fe]=ut;var E=(Ue,fe,ut)=>jQ(Ue,typeof fe!="symbol"?fe+"":fe,ut),_N=(Ue,fe,ut)=>fe.has(Ue)||vN("Cannot "+ut);var ae=(Ue,fe,ut)=>(_N(Ue,fe,"read from private field"),ut?ut.call(Ue):fe.get(Ue)),ot=(Ue,fe,ut)=>fe.has(Ue)?vN("Cannot add the same private member more than once"):fe instanceof WeakSet?fe.add(Ue):fe.set(Ue,ut),Ti=(Ue,fe,ut,Ps)=>(_N(Ue,fe,"write to private field"),Ps?Ps.call(Ue,ut):fe.set(Ue,ut),ut);this.__sveltekit_f105mh=this.__sveltekit_f105mh||{};this.__sveltekit_f105mh.app=(function(Ue){"use strict";var mn,lr,fN,dN,qa,ka,Oa,Ba,La,Fa,Da,Ua,pN,Wa,gN,Na,mN,Ga,za,vn,ws,Ha,wi;var fe=typeof document<"u"?document.currentScript:null;const ut=!1;var Ps=Array.isArray,MN=Array.prototype.indexOf,IN=Array.from,xS=Object.defineProperty,Ai=Object.getOwnPropertyDescriptor,wS=Object.getOwnPropertyDescriptors,qN=Object.prototype,kN=Array.prototype,bl=Object.getPrototypeOf;function ON(r){return typeof r=="function"}const Nr=()=>{};function BN(r){return r()}function Va(r){for(var e=0;e<r.length;e++)r[e]()}const cr=2,SS=4,Xa=8,Ka=16,Gr=32,Cs=64,Za=128,Vt=256,Ja=512,xt=1024,zr=2048,Ri=4096,Pi=8192,Qa=16384,TS=32768,Ci=65536,LN=1<<17,FN=1<<19,AS=1<<20,$n=Symbol("$state"),RS=Symbol("legacy props"),DN=Symbol("");function PS(r){return r===this.v}function CS(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function xl(r){return!CS(r,this.v)}function UN(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function WN(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function NN(r){throw new Error("https://svelte.dev/e/effect_orphan")}function GN(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zN(){throw new Error("https://svelte.dev/e/hydration_failed")}function HN(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function jN(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function $N(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function YN(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function VN(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ei=!1,XN=!1;function KN(){Ei=!0}const ZN=1,JN=2,QN=4,eG=8,tG=16,rG=4,nG=1,iG=2,ES="[",MS="[!",IS="]",Es={},Mt=Symbol();function wl(r){console.warn("https://svelte.dev/e/hydration_mismatch")}function qS(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Me=null;function kS(r){Me=r}function Ms(r){return OS().get(r)}function eo(r,e){return OS().set(r,e),e}function wt(r,e=!1,t){Me={p:Me,c:null,e:null,m:!1,s:r,x:null,l:null},Ei&&!e&&(Me.l={s:null,u:null,r1:[],r2:It(!1)})}function St(r){const e=Me;if(e!==null){const a=e.e;if(a!==null){var t=Ce,n=Re;e.e=null;try{for(var i=0;i<a.length;i++){var s=a[i];Ar(s.effect),Tr(s.reaction),no(s.fn)}}finally{Ar(t),Tr(n)}}Me=e.p,e.m=!0}return{}}function to(){return!Ei||Me!==null&&Me.l===null}function OS(r){return Me===null&&qS(),Me.c??(Me.c=new Map(sG(Me)||void 0))}function sG(r){let e=r.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}function It(r,e){var t={f:0,v:r,reactions:null,equals:PS,rv:0,wv:0};return t}function it(r){return BS(It(r))}function Sl(r,e=!1){var n;const t=It(r);return e||(t.equals=xl),Ei&&Me!==null&&Me.l!==null&&((n=Me.l).s??(n.s=[])).push(t),t}function Tl(r,e=!1){return BS(Sl(r,e))}function BS(r){return Re!==null&&!Xt&&(Re.f&cr)!==0&&(Rr===null?yG([r]):Rr.push(r)),r}function pe(r,e){return Re!==null&&!Xt&&to()&&(Re.f&(cr|Ka))!==0&&(Rr===null||!Rr.includes(r))&&VN(),aG(r,e)}function aG(r,e){return r.equals(e)||(r.v,r.v=e,r.wv=rT(),LS(r,zr),to()&&Ce!==null&&(Ce.f&xt)!==0&&(Ce.f&(Gr|Cs))===0&&($r===null?bG([r]):$r.push(r))),e}function LS(r,e){var t=r.reactions;if(t!==null)for(var n=to(),i=t.length,s=0;s<i;s++){var a=t[s],o=a.f;(o&zr)===0&&(!n&&a===Ce||(Pr(a,e),(o&(xt|Vt))!==0&&((o&cr)!==0?LS(a,Ri):go(a))))}}let Je=!1;function Mi(r){Je=r}let He;function Hr(r){if(r===null)throw wl(),Es;return He=r}function ro(){return Hr(Vn(He))}function pt(r){if(Je){if(Vn(He)!==null)throw wl(),Es;He=r}}function oG(){for(var r=0,e=He;;){if(e.nodeType===8){var t=e.data;if(t===IS){if(r===0)return e;r-=1}else(t===ES||t===MS)&&(r+=1)}var n=Vn(e);e.remove(),e=n}}function We(r,e=null,t){if(typeof r!="object"||r===null||$n in r)return r;const n=bl(r);if(n!==qN&&n!==kN)return r;var i=new Map,s=Ps(r),a=It(0);s&&i.set("length",It(r.length));var o;return new Proxy(r,{defineProperty(u,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&jN();var h=i.get(l);return h===void 0?(h=It(c.value),i.set(l,h)):pe(h,We(c.value,o)),!0},deleteProperty(u,l){var c=i.get(l);if(c===void 0)l in u&&i.set(l,It(Mt));else{if(s&&typeof l=="string"){var h=i.get("length"),d=Number(l);Number.isInteger(d)&&d<h.v&&pe(h,d)}pe(c,Mt),FS(a)}return!0},get(u,l,c){var p;if(l===$n)return r;var h=i.get(l),d=l in u;if(h===void 0&&(!d||(p=Ai(u,l))!=null&&p.writable)&&(h=It(We(d?u[l]:Mt,o)),i.set(l,h)),h!==void 0){var f=ie(h);return f===Mt?void 0:f}return Reflect.get(u,l,c)},getOwnPropertyDescriptor(u,l){var c=Reflect.getOwnPropertyDescriptor(u,l);if(c&&"value"in c){var h=i.get(l);h&&(c.value=ie(h))}else if(c===void 0){var d=i.get(l),f=d==null?void 0:d.v;if(d!==void 0&&f!==Mt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(u,l){var f;if(l===$n)return!0;var c=i.get(l),h=c!==void 0&&c.v!==Mt||Reflect.has(u,l);if(c!==void 0||Ce!==null&&(!h||(f=Ai(u,l))!=null&&f.writable)){c===void 0&&(c=It(h?We(u[l],o):Mt),i.set(l,c));var d=ie(c);if(d===Mt)return!1}return h},set(u,l,c,h){var x;var d=i.get(l),f=l in u;if(s&&l==="length")for(var p=c;p<d.v;p+=1){var g=i.get(p+"");g!==void 0?pe(g,Mt):p in u&&(g=It(Mt),i.set(p+"",g))}d===void 0?(!f||(x=Ai(u,l))!=null&&x.writable)&&(d=It(void 0),pe(d,We(c,o)),i.set(l,d)):(f=d.v!==Mt,pe(d,We(c,o)));var m=Reflect.getOwnPropertyDescriptor(u,l);if(m!=null&&m.set&&m.set.call(h,c),!f){if(s&&typeof l=="string"){var _=i.get("length"),y=Number(l);Number.isInteger(y)&&y>=_.v&&pe(_,y+1)}FS(a)}return!0},ownKeys(u){ie(a);var l=Reflect.ownKeys(u).filter(d=>{var f=i.get(d);return f===void 0||f.v!==Mt});for(var[c,h]of i)h.v!==Mt&&!(c in u)&&l.push(c);return l},setPrototypeOf(){$N()}})}function FS(r,e=1){pe(r,r.v+e)}var DS,US,WS,NS;function Al(){if(DS===void 0){DS=window,US=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype;WS=Ai(e,"firstChild").get,NS=Ai(e,"nextSibling").get,r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__styles=null,r.__e=void 0,Text.prototype.__t=void 0}}function Yn(r=""){return document.createTextNode(r)}function Ii(r){return WS.call(r)}function Vn(r){return NS.call(r)}function gt(r,e){if(!Je)return Ii(r);var t=Ii(He);if(t===null)t=He.appendChild(Yn());else if(e&&t.nodeType!==3){var n=Yn();return t==null||t.before(n),Hr(n),n}return Hr(t),t}function lt(r,e){if(!Je){var t=Ii(r);return t instanceof Comment&&t.data===""?Vn(t):t}return He}function je(r,e=1,t=!1){let n=Je?He:r;for(var i;e--;)i=n,n=Vn(n);if(!Je)return n;var s=n==null?void 0:n.nodeType;if(t&&s!==3){var a=Yn();return n===null?i==null||i.after(a):n.before(a),Hr(a),a}return Hr(n),n}function uG(r){r.textContent=""}function jr(r){var e=cr|zr,t=Re!==null&&(Re.f&cr)!==0?Re:null;return Ce===null||t!==null&&(t.f&Vt)!==0?e|=Vt:Ce.f|=AS,{ctx:Me,deps:null,effects:null,equals:PS,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??Ce}}function lG(r){const e=jr(r);return e.equals=xl,e}function GS(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)yn(e[t])}}function cG(r){for(var e=r.parent;e!==null;){if((e.f&cr)===0)return e;e=e.parent}return null}function hG(r){var e,t=Ce;Ar(cG(r));try{GS(r),e=iT(r)}finally{Ar(t)}return e}function zS(r){var e=hG(r),t=(bn||(r.f&Vt)!==0)&&r.deps!==null?Ri:xt;Pr(r,t),r.equals(e)||(r.v=e,r.wv=rT())}function HS(r){Ce===null&&Re===null&&NN(),Re!==null&&(Re.f&Vt)!==0&&Ce===null&&WN(),Cl&&UN()}function fG(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function qi(r,e,t,n=!0){var i=(r&Cs)!==0,s=Ce,a={ctx:Me,deps:null,nodes_start:null,nodes_end:null,f:r|zr,first:null,fn:e,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,wv:0};if(t)try{El(a),a.f|=TS}catch(l){throw yn(a),l}else e!==null&&go(a);var o=t&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(AS|Za))===0;if(!o&&!i&&n&&(s!==null&&fG(a,s),Re!==null&&(Re.f&cr)!==0)){var u=Re;(u.effects??(u.effects=[])).push(a)}return a}function dG(){return Re!==null&&!Xt}function pG(r){const e=qi(Xa,null,!1);return Pr(e,xt),e.teardown=r,e}function Xn(r){HS();var e=Ce!==null&&(Ce.f&Gr)!==0&&Me!==null&&!Me.m;if(e){var t=Me;(t.e??(t.e=[])).push({fn:r,effect:Ce,reaction:Re})}else{var n=no(r);return n}}function jS(r){return HS(),io(r)}function gG(r){const e=qi(Cs,r,!0);return(t={})=>new Promise(n=>{t.outro?ao(e,()=>{yn(e),n(void 0)}):(yn(e),n(void 0))})}function no(r){return qi(SS,r,!1)}function io(r){return qi(Xa,r,!0)}function Kn(r,e=[],t=jr){const n=e.map(t);return so(()=>r(...n.map(ie)))}function so(r,e=0){return qi(Xa|Ka|e,r,!0)}function Is(r,e=!0){return qi(Xa|Gr,r,!0,e)}function $S(r){var e=r.teardown;if(e!==null){const t=Cl,n=Re;eT(!0),Tr(null);try{e.call(null)}finally{eT(t),Tr(n)}}}function YS(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var n=t.next;yn(t,e),t=n}}function mG(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&Gr)===0&&yn(e),e=t}}function yn(r,e=!0){var t=!1;if((e||(r.f&FN)!==0)&&r.nodes_start!==null){for(var n=r.nodes_start,i=r.nodes_end;n!==null;){var s=n===i?null:Vn(n);n.remove(),n=s}t=!0}YS(r,e&&!t),po(r,0),Pr(r,Qa);var a=r.transitions;if(a!==null)for(const u of a)u.stop();$S(r);var o=r.parent;o!==null&&o.first!==null&&VS(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function VS(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function ao(r,e){var t=[];XS(r,t,!0),vG(t,()=>{yn(r),e&&e()})}function vG(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function XS(r,e,t){if((r.f&Pi)===0){if(r.f^=Pi,r.transitions!==null)for(const a of r.transitions)(a.is_global||t)&&e.push(a);for(var n=r.first;n!==null;){var i=n.next,s=(n.f&Ci)!==0||(n.f&Gr)!==0;XS(n,e,s?t:!1),n=i}}}function KS(r){ZS(r,!0)}function ZS(r,e){if((r.f&Pi)!==0){r.f^=Pi,(r.f&xt)===0&&(r.f^=xt),Os(r)&&(Pr(r,zr),go(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&Ci)!==0||(t.f&Gr)!==0;ZS(t,i?e:!1),t=n}if(r.transitions!==null)for(const s of r.transitions)(s.is_global||e)&&s.in()}}let qs=[],Rl=[];function JS(){var r=qs;qs=[],Va(r)}function _G(){var r=Rl;Rl=[],Va(r)}function Pl(r){qs.length===0&&queueMicrotask(JS),qs.push(r)}function QS(){qs.length>0&&JS(),Rl.length>0&&_G()}let oo=!1,uo=!1,lo=null,co=!1,Cl=!1;function eT(r){Cl=r}let ks=[],$Q=[],Re=null,Xt=!1;function Tr(r){Re=r}let Ce=null;function Ar(r){Ce=r}let Rr=null;function yG(r){Rr=r}let Tt=null,Wt=0,$r=null;function bG(r){$r=r}let tT=1,ho=0,bn=!1;function rT(){return++tT}function Os(r){var h;var e=r.f;if((e&zr)!==0)return!0;if((e&Ri)!==0){var t=r.deps,n=(e&Vt)!==0;if(t!==null){var i,s,a=(e&Ja)!==0,o=n&&Ce!==null&&!bn,u=t.length;if(a||o){var l=r,c=l.parent;for(i=0;i<u;i++)s=t[i],(a||!((h=s==null?void 0:s.reactions)!=null&&h.includes(l)))&&(s.reactions??(s.reactions=[])).push(l);a&&(l.f^=Ja),o&&c!==null&&(c.f&Vt)===0&&(l.f^=Vt)}for(i=0;i<u;i++)if(s=t[i],Os(s)&&zS(s),s.wv>r.wv)return!0}(!n||Ce!==null&&!bn)&&Pr(r,xt)}return!1}function xG(r,e){for(var t=e;t!==null;){if((t.f&Za)!==0)try{t.fn(r);return}catch{t.f^=Za}t=t.parent}throw oo=!1,r}function wG(r){return(r.f&Qa)===0&&(r.parent===null||(r.parent.f&Za)===0)}function fo(r,e,t,n){if(oo){if(t===null&&(oo=!1),wG(e))throw r;return}t!==null&&(oo=!0);{xG(r,e);return}}function nT(r,e,t=!0){var n=r.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];(s.f&cr)!==0?nT(s,e,!1):e===s&&(t?Pr(s,zr):(s.f&xt)!==0&&Pr(s,Ri),go(s))}}function iT(r){var f;var e=Tt,t=Wt,n=$r,i=Re,s=bn,a=Rr,o=Me,u=Xt,l=r.f;Tt=null,Wt=0,$r=null,bn=(l&Vt)!==0&&(Xt||!co||Re===null),Re=(l&(Gr|Cs))===0?r:null,Rr=null,kS(r.ctx),Xt=!1,ho++;try{var c=(0,r.fn)(),h=r.deps;if(Tt!==null){var d;if(po(r,Wt),h!==null&&Wt>0)for(h.length=Wt+Tt.length,d=0;d<Tt.length;d++)h[Wt+d]=Tt[d];else r.deps=h=Tt;if(!bn)for(d=Wt;d<h.length;d++)((f=h[d]).reactions??(f.reactions=[])).push(r)}else h!==null&&Wt<h.length&&(po(r,Wt),h.length=Wt);if(to()&&$r!==null&&!Xt&&h!==null&&(r.f&(cr|Ri|zr))===0)for(d=0;d<$r.length;d++)nT($r[d],r);return i!==null&&ho++,c}finally{Tt=e,Wt=t,$r=n,Re=i,bn=s,Rr=a,kS(o),Xt=u}}function SG(r,e){let t=e.reactions;if(t!==null){var n=MN.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&(e.f&cr)!==0&&(Tt===null||!Tt.includes(e))&&(Pr(e,Ri),(e.f&(Vt|Ja))===0&&(e.f^=Ja),GS(e),po(e,0))}function po(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)SG(r,t[n])}function El(r){var e=r.f;if((e&Qa)===0){Pr(r,xt);var t=Ce,n=Me,i=co;Ce=r,co=!0;try{(e&Ka)!==0?mG(r):YS(r),$S(r);var s=iT(r);r.teardown=typeof s=="function"?s:null,r.wv=tT;var a=r.deps,o;ut&&XN&&r.f&zr}catch(u){fo(u,r,t,n||r.ctx)}finally{co=i,Ce=t}}}function TG(){try{GN()}catch(r){if(lo!==null)fo(r,lo,null);else throw r}}function sT(){try{for(var r=0;ks.length>0;){r++>1e3&&TG();var e=ks,t=e.length;ks=[];for(var n=0;n<t;n++){var i=e[n];(i.f&xt)===0&&(i.f^=xt);var s=RG(i);AG(s)}}}finally{uo=!1,lo=null}}function AG(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var n=r[t];if((n.f&(Qa|Pi))===0)try{Os(n)&&(El(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?VS(n):n.fn=null))}catch(i){fo(i,n,null,n.ctx)}}}function go(r){uo||(uo=!0,queueMicrotask(sT));for(var e=lo=r;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Cs|Gr))!==0){if((t&xt)===0)return;e.f^=xt}}ks.push(e)}function RG(r){for(var e=[],t=r.first;t!==null;){var n=t.f,i=(n&Gr)!==0,s=i&&(n&xt)!==0;if(!s&&(n&Pi)===0){if((n&SS)!==0)e.push(t);else if(i)t.f^=xt;else{var a=Re;try{Re=t,Os(t)&&El(t)}catch(l){fo(l,t,null,t.ctx)}finally{Re=a}}var o=t.first;if(o!==null){t=o;continue}}var u=t.parent;for(t=t.next;t===null&&u!==null;)t=u.next,u=u.parent}return e}function aT(r){var e;for(QS();ks.length>0;)uo=!0,sT(),QS();return e}async function Ml(){await Promise.resolve(),aT()}function ie(r){var e=r.f,t=(e&cr)!==0;if(Re!==null&&!Xt){Rr!==null&&Rr.includes(r)&&YN();var n=Re.deps;r.rv<ho&&(r.rv=ho,Tt===null&&n!==null&&n[Wt]===r?Wt++:Tt===null?Tt=[r]:(!bn||!Tt.includes(r))&&Tt.push(r))}else if(t&&r.deps===null&&r.effects===null){var i=r,s=i.parent;s!==null&&(s.f&Vt)===0&&(i.f^=Vt)}return t&&(i=r,Os(i)&&zS(i)),r.v}function Zn(r){var e=Xt;try{return Xt=!0,r()}finally{Xt=e}}const PG=-7169;function Pr(r,e){r.f=r.f&PG|e}function CG(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if($n in r)Il(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&$n in t&&Il(t)}}}function Il(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{Il(r[n],e)}catch{}const t=bl(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=wS(t);for(let i in n){const s=n[i].get;if(s)try{s.call(r)}catch{}}}}}const EG=["touchstart","touchmove"];function MG(r){return EG.includes(r)}function oT(r){var e=Re,t=Ce;Tr(null),Ar(null);try{return r()}finally{Tr(e),Ar(t)}}const uT=new Set,ql=new Set;function IG(r){if(!Je)return;r.onload&&r.removeAttribute("onload"),r.onerror&&r.removeAttribute("onerror");const e=r.__e;e!==void 0&&(r.__e=void 0,queueMicrotask(()=>{r.isConnected&&r.dispatchEvent(e)}))}function lT(r,e,t,n={}){function i(s){if(n.capture||Bs.call(e,s),!s.cancelBubble)return oT(()=>t==null?void 0:t.call(this,s))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Pl(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function cT(r,e,t,n={}){var i=lT(e,r,t,n);return()=>{r.removeEventListener(e,i,n)}}function mo(r,e,t,n,i){var s={capture:n,passive:i},a=lT(r,e,t,s);(e===document.body||e===window||e===document)&&pG(()=>{e.removeEventListener(r,a,s)})}function hT(r){for(var e=0;e<r.length;e++)uT.add(r[e]);for(var t of ql)t(r)}function Bs(r){var y;var e=this,t=e.ownerDocument,n=r.type,i=((y=r.composedPath)==null?void 0:y.call(r))||[],s=i[0]||r.target,a=0,o=r.__root;if(o){var u=i.indexOf(o);if(u!==-1&&(e===document||e===window)){r.__root=e;return}var l=i.indexOf(e);if(l===-1)return;u<=l&&(a=u)}if(s=i[a]||r.target,s!==e){xS(r,"currentTarget",{configurable:!0,get(){return s||t}});var c=Re,h=Ce;Tr(null),Ar(null);try{for(var d,f=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var g=s["__"+n];if(g!==void 0&&(!s.disabled||r.target===s))if(Ps(g)){var[m,..._]=g;m.apply(s,[r,..._])}else g.call(s,r)}catch(x){d?f.push(x):d=x}if(r.cancelBubble||p===e||p===null)break;s=p}if(d){for(let x of f)queueMicrotask(()=>{throw x});throw d}}finally{r.__root=e,delete r.currentTarget,Tr(c),Ar(h)}}}function qG(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function xn(r,e){var t=Ce;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function Nt(r,e){var t=(e&nG)!==0,n=(e&iG)!==0,i,s=!r.startsWith("<!>");return()=>{if(Je)return xn(He,null),He;i===void 0&&(i=qG(s?r:"<!>"+r),t||(i=Ii(i)));var a=n||US?document.importNode(i,!0):i.cloneNode(!0);if(t){var o=Ii(a),u=a.lastChild;xn(o,u)}else xn(a,a);return a}}function kG(r=""){if(!Je){var e=Yn(r+"");return xn(e,e),e}var t=He;return t.nodeType!==3&&(t.before(t=Yn()),Hr(t)),xn(t,t),t}function Cr(){if(Je)return xn(He,null),He;var r=document.createDocumentFragment(),e=document.createComment(""),t=Yn();return r.append(e,t),xn(e,t),r}function Ge(r,e){if(Je){Ce.nodes_end=He,ro();return}r!==null&&r.before(e)}let kl=!0;function ki(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function fT(r,e){return dT(r,e)}function OG(r,e){Al(),e.intro=e.intro??!1;const t=e.target,n=Je,i=He;try{for(var s=Ii(t);s&&(s.nodeType!==8||s.data!==ES);)s=Vn(s);if(!s)throw Es;Mi(!0),Hr(s),ro();const a=dT(r,{...e,anchor:s});if(He===null||He.nodeType!==8||He.data!==IS)throw wl(),Es;return Mi(!1),a}catch(a){if(a===Es)return e.recover===!1&&zN(),Al(),uG(t),Mi(!1),fT(r,e);throw a}finally{Mi(n),Hr(i)}}const Oi=new Map;function dT(r,{target:e,anchor:t,props:n={},events:i,context:s,intro:a=!0}){Al();var o=new Set,u=h=>{for(var d=0;d<h.length;d++){var f=h[d];if(!o.has(f)){o.add(f);var p=MG(f);e.addEventListener(f,Bs,{passive:p});var g=Oi.get(f);g===void 0?(document.addEventListener(f,Bs,{passive:p}),Oi.set(f,1)):Oi.set(f,g+1)}}};u(IN(uT)),ql.add(u);var l=void 0,c=gG(()=>{var h=t??e.appendChild(Yn());return Is(()=>{if(s){wt({});var d=Me;d.c=s}i&&(n.$$events=i),Je&&xn(h,null),kl=a,l=r(h,n)||{},kl=!0,Je&&(Ce.nodes_end=He),s&&St()}),()=>{var p;for(var d of o){e.removeEventListener(d,Bs);var f=Oi.get(d);--f===0?(document.removeEventListener(d,Bs),Oi.delete(d)):Oi.set(d,f)}ql.delete(u),h!==t&&((p=h.parentNode)==null||p.removeChild(h))}});return Ol.set(l,c),l}let Ol=new WeakMap;function BG(r,e){const t=Ol.get(r);return t?(Ol.delete(r),t(e)):Promise.resolve()}function Gt(r,e,t=!1){Je&&ro();var n=r,i=null,s=null,a=Mt,o=t?Ci:0,u=!1;const l=(h,d=!0)=>{u=!0,c(d,h)},c=(h,d)=>{if(a===(a=h))return;let f=!1;if(Je){const p=n.data===MS;!!a===p&&(n=oG(),Hr(n),Mi(!1),f=!0)}a?(i?KS(i):d&&(i=Is(()=>d(n))),s&&ao(s,()=>{s=null})):(s?KS(s):d&&(s=Is(()=>d(n))),i&&ao(i,()=>{i=null})),f&&Mi(!0)};so(()=>{u=!1,e(l),u||c(null,null)},o),Je&&(n=He)}function vo(r,e,...t){var n=r,i=Nr,s;so(()=>{i!==(i=e())&&(s&&(yn(s),s=null),s=Is(()=>i(n,...t)))},Ci),Je&&(n=He)}function Bl(r,e,t){Je&&ro();var n=r,i,s;so(()=>{i!==(i=e())&&(s&&(ao(s),s=null),i&&(s=Is(()=>t(n,i))))},Ci),Je&&(n=He)}function _o(r,e,t,n){var i=r.__attributes??(r.__attributes={});Je&&(i[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="style"&&"__styles"in r&&(r.__styles={}),e==="loading"&&(r[DN]=t),t==null?r.removeAttribute(e):typeof t!="string"&&LG(r).includes(e)?r[e]=t:r.setAttribute(e,t))}var pT=new Map;function LG(r){var e=pT.get(r.nodeName);if(e)return e;pT.set(r.nodeName,e=[]);for(var t,n=r,i=Element.prototype;i!==n;){t=wS(n);for(var s in t)t[s].set&&e.push(s);n=bl(n)}return e}const FG=()=>performance.now(),Er={tick:r=>requestAnimationFrame(r),now:()=>FG(),tasks:new Set};function gT(){const r=Er.now();Er.tasks.forEach(e=>{e.c(r)||(Er.tasks.delete(e),e.f())}),Er.tasks.size!==0&&Er.tick(gT)}function mT(r){let e;return Er.tasks.size===0&&Er.tick(gT),{promise:new Promise(t=>{Er.tasks.add(e={c:r,f:t})}),abort(){Er.tasks.delete(e)}}}function yo(r,e){oT(()=>{r.dispatchEvent(new CustomEvent(e))})}function DG(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function vT(r){const e={},t=r.split(";");for(const n of t){const[i,s]=n.split(":");if(!i||s===void 0)break;const a=DG(i.trim());e[a]=s.trim()}return e}const UG=r=>r;function WG(r,e,t,n){var i=(r&rG)!==0,s="both",a,o=e.inert,u=e.style.overflow,l,c;function h(){var m=Re,_=Ce;Tr(null),Ar(null);try{return a??(a=t()(e,(n==null?void 0:n())??{},{direction:s}))}finally{Tr(m),Ar(_)}}var d={is_global:i,in(){e.inert=o,yo(e,"introstart"),l=Ll(e,h(),c,1,()=>{yo(e,"introend"),l==null||l.abort(),l=a=void 0,e.style.overflow=u})},out(m){e.inert=!0,yo(e,"outrostart"),c=Ll(e,h(),l,0,()=>{yo(e,"outroend"),m==null||m()})},stop:()=>{l==null||l.abort(),c==null||c.abort()}},f=Ce;if((f.transitions??(f.transitions=[])).push(d),kl){var p=i;if(!p){for(var g=f.parent;g&&(g.f&Ci)!==0;)for(;(g=g.parent)&&(g.f&Ka)===0;);p=!g||(g.f&TS)!==0}p&&no(()=>{Zn(()=>d.in())})}}function Ll(r,e,t,n,i){var s=n===1;if(ON(e)){var a,o=!1;return Pl(()=>{if(!o){var m=e({direction:s?"in":"out"});a=Ll(r,m,t,n,i)}}),{abort:()=>{o=!0,a==null||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return i(),{abort:Nr,deactivate:Nr,reset:Nr,t:()=>n};const{delay:u=0,css:l,tick:c,easing:h=UG}=e;var d=[];if(s&&t===void 0&&(c&&c(0,1),l)){var f=vT(l(0,1));d.push(f,f)}var p=()=>1-n,g=r.animate(d,{duration:u});return g.onfinish=()=>{var m=(t==null?void 0:t.t())??1-n;t==null||t.abort();var _=n-m,y=e.duration*Math.abs(_),x=[];if(y>0){var b=!1;if(l)for(var T=Math.ceil(y/16.666666666666668),S=0;S<=T;S+=1){var w=m+_*h(S/T),M=vT(l(w,1-w));x.push(M),b||(b=M.overflow==="hidden")}b&&(r.style.overflow="hidden"),p=()=>{var q=g.currentTime;return m+_*h(q/y)},c&&mT(()=>{if(g.playState!=="running")return!1;var q=p();return c(q,1-q),!0})}g=r.animate(x,{duration:y,fill:"forwards"}),g.onfinish=()=>{p=()=>n,c==null||c(n,1-n),i()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=Nr)},deactivate:()=>{i=Nr},reset:()=>{n===0&&(c==null||c(1,0))},t:()=>p()}}function _T(r,e){return r===e||(r==null?void 0:r[$n])===e}function Fl(r={},e,t,n){return no(()=>{var i,s;return io(()=>{i=s,s=[],Zn(()=>{r!==t(...s)&&(e(r,...s),i&&_T(t(...i),r)&&e(null,...i))})}),()=>{Pl(()=>{s&&_T(t(...s),r)&&e(null,...s)})}}),r}function Dl(r=!1){const e=Me,t=e.l.u;if(!t)return;let n=()=>CG(e.s);if(r){let i=0,s={};const a=jr(()=>{let o=!1;const u=e.s;for(const l in u)u[l]!==s[l]&&(s[l]=u[l],o=!0);return o&&i++,i});n=()=>ie(a)}t.b.length&&jS(()=>{yT(e,n),Va(t.b)}),Xn(()=>{const i=Zn(()=>t.m.map(BN));return()=>{for(const s of i)typeof s=="function"&&s()}}),t.a.length&&Xn(()=>{yT(e,n),Va(t.a)})}function yT(r,e){if(r.l.s)for(const t of r.l.s)ie(t);e()}const Bi=[];function Ul(r,e=Nr){let t=null;const n=new Set;function i(o){if(CS(r,o)&&(r=o,t)){const u=!Bi.length;for(const l of n)l[1](),Bi.push(l,r);if(u){for(let l=0;l<Bi.length;l+=2)Bi[l][0](Bi[l+1]);Bi.length=0}}}function s(o){i(o(r))}function a(o,u=Nr){const l=[o,u];return n.add(l),n.size===1&&(t=e(i,s)||Nr),o(r),()=>{n.delete(l),n.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:a}}let bo=!1;function NG(r){var e=bo;try{return bo=!1,[r(),bo]}finally{bo=e}}const GG={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function zG(r,e,t){return new Proxy({props:r,exclude:e},GG)}function Wl(r,e,t,n){var S;var i=(t&ZN)!==0,s=!Ei||(t&JN)!==0,a=(t&eG)!==0,o=(t&tG)!==0,u=!1,l;a?[l,u]=NG(()=>r[e]):l=r[e];var c=$n in r||RS in r,h=a&&(((S=Ai(r,e))==null?void 0:S.set)??(c&&e in r&&(w=>r[e]=w)))||void 0,d=n,f=!0,p=!1,g=()=>(p=!0,f&&(f=!1,o?d=Zn(n):d=n),d);l===void 0&&n!==void 0&&(h&&s&&HN(),l=g(),h&&h(l));var m;if(s)m=()=>{var w=r[e];return w===void 0?g():(f=!0,p=!1,w)};else{var _=(i?jr:lG)(()=>r[e]);_.f|=LN,m=()=>{var w=ie(_);return w!==void 0&&(d=void 0),w===void 0?d:w}}if((t&QN)===0)return m;if(h){var y=r.$$legacy;return function(w,M){return arguments.length>0?((!s||!M||y||u)&&h(M?m():w),w):m()}}var x=!1,b=Sl(l),T=jr(()=>{var w=m(),M=ie(b);return x?(x=!1,M):b.v=w});return i||(T.equals=xl),function(w,M){if(arguments.length>0){const q=M?ie(T):s&&a?We(w):w;return T.equals(q)||(x=!0,pe(b,q),p&&d!==void 0&&(d=q),Zn(()=>ie(T))),w}return ie(T)}}function HG(r){return class extends jG{constructor(e){super({component:r,...e})}}}class jG{constructor(e){ot(this,mn);ot(this,lr);var s;var t=new Map,n=(a,o)=>{var u=Sl(o);return t.set(a,u),u};const i=new Proxy({...e.props||{},$$events:{}},{get(a,o){return ie(t.get(o)??n(o,Reflect.get(a,o)))},has(a,o){return o===RS?!0:(ie(t.get(o)??n(o,Reflect.get(a,o))),Reflect.has(a,o))},set(a,o,u){return pe(t.get(o)??n(o,u),u),Reflect.set(a,o,u)}});Ti(this,lr,(e.hydrate?OG:fT)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:e.intro??!1,recover:e.recover})),(!((s=e==null?void 0:e.props)!=null&&s.$$host)||e.sync===!1)&&aT(),Ti(this,mn,i.$$events);for(const a of Object.keys(ae(this,lr)))a==="$set"||a==="$destroy"||a==="$on"||xS(this,a,{get(){return ae(this,lr)[a]},set(o){ae(this,lr)[a]=o},enumerable:!0});ae(this,lr).$set=a=>{Object.assign(i,a)},ae(this,lr).$destroy=()=>{BG(ae(this,lr))}}$set(e){ae(this,lr).$set(e)}$on(e,t){ae(this,mn)[e]=ae(this,mn)[e]||[];const n=(...i)=>t.call(this,...i);return ae(this,mn)[e].push(n),()=>{ae(this,mn)[e]=ae(this,mn)[e].filter(i=>i!==n)}}$destroy(){ae(this,lr).$destroy()}}mn=new WeakMap,lr=new WeakMap;function Yr(r){Me===null&&qS(),Ei&&Me.l!==null?$G(Me).m.push(r):Xn(()=>{const e=Zn(r);if(typeof e=="function")return e})}function $G(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}new URL("sveltekit-internal://");function YG(r,e){return r==="/"||e==="ignore"?r:e==="never"?r.endsWith("/")?r.slice(0,-1):r:e==="always"&&!r.endsWith("/")?r+"/":r}function VG(r){return r.split("%25").map(decodeURI).join("%25")}function XG(r){for(const e in r)r[e]=decodeURIComponent(r[e]);return r}function Nl({href:r}){return r.split("#")[0]}function KG(r,e,t,n=!1){const i=new URL(r);Object.defineProperty(i,"searchParams",{value:new Proxy(i.searchParams,{get(a,o){if(o==="get"||o==="getAll"||o==="has")return l=>(t(l),a[o](l));e();const u=Reflect.get(a,o);return typeof u=="function"?u.bind(a):u}}),enumerable:!0,configurable:!0});const s=["href","pathname","search","toString","toJSON"];n&&s.push("hash");for(const a of s)Object.defineProperty(i,a,{get(){return e(),r[a]},enumerable:!0,configurable:!0});return i}function ZG(...r){let e=5381;for(const t of r)if(typeof t=="string"){let n=t.length;for(;n;)e=e*33^t.charCodeAt(--n)}else if(ArrayBuffer.isView(t)){const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);let i=n.length;for(;i;)e=e*33^n[--i]}else throw new TypeError("value must be a string or TypedArray");return(e>>>0).toString(36)}function JG(r){const e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}const QG=window.fetch;window.fetch=(r,e)=>((r instanceof Request?r.method:(e==null?void 0:e.method)||"GET")!=="GET"&&Ls.delete(Gl(r)),QG(r,e));const Ls=new Map;function ez(r,e){const t=Gl(r,e),n=document.querySelector(t);if(n!=null&&n.textContent){let{body:i,...s}=JSON.parse(n.textContent);const a=n.getAttribute("data-ttl");return a&&Ls.set(t,{body:i,init:s,ttl:1e3*Number(a)}),n.getAttribute("data-b64")!==null&&(i=JG(i)),Promise.resolve(new Response(i,s))}return window.fetch(r,e)}function tz(r,e,t){if(Ls.size>0){const n=Gl(r,t),i=Ls.get(n);if(i){if(performance.now()<i.ttl&&["default","force-cache","only-if-cached",void 0].includes(t==null?void 0:t.cache))return new Response(i.body,i.init);Ls.delete(n)}}return window.fetch(e,t)}function Gl(r,e){let n=`script[data-sveltekit-fetched][data-url=${JSON.stringify(r instanceof Request?r.url:r)}]`;if(e!=null&&e.headers||e!=null&&e.body){const i=[];e.headers&&i.push([...new Headers(e.headers)].join(",")),e.body&&(typeof e.body=="string"||ArrayBuffer.isView(e.body))&&i.push(e.body),n+=`[data-hash="${ZG(...i)}"]`}return n}const rz=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function nz(r){const e=[];return{pattern:r==="/"?/^\/$/:new RegExp(`^${sz(r).map(n=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(n);if(i)return e.push({name:i[1],matcher:i[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const s=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(n);if(s)return e.push({name:s[1],matcher:s[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!n)return;const a=n.split(/\[(.+?)\](?!\])/);return"/"+a.map((u,l)=>{if(l%2){if(u.startsWith("x+"))return zl(String.fromCharCode(parseInt(u.slice(2),16)));if(u.startsWith("u+"))return zl(String.fromCharCode(...u.slice(2).split("-").map(g=>parseInt(g,16))));const c=rz.exec(u),[,h,d,f,p]=c;return e.push({name:f,matcher:p,optional:!!h,rest:!!d,chained:d?l===1&&a[0]==="":!1}),d?"(.*?)":h?"([^/]*)?":"([^/]+?)"}return zl(u)}).join("")}).join("")}/?$`),params:e}}function iz(r){return!/^\([^)]+\)$/.test(r)}function sz(r){return r.slice(1).split("/").filter(iz)}function az(r,e,t){const n={},i=r.slice(1),s=i.filter(o=>o!==void 0);let a=0;for(let o=0;o<e.length;o+=1){const u=e[o];let l=i[o-a];if(u.chained&&u.rest&&a&&(l=i.slice(o-a,o+1).filter(c=>c).join("/"),a=0),l===void 0){u.rest&&(n[u.name]="");continue}if(!u.matcher||t[u.matcher](l)){n[u.name]=l;const c=e[o+1],h=i[o+1];c&&!c.rest&&c.optional&&h&&u.chained&&(a=0),!c&&!h&&Object.keys(n).length===s.length&&(a=0);continue}if(u.optional&&u.chained){a++;continue}return}if(!a)return n}function zl(r){return r.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function oz({nodes:r,server_loads:e,dictionary:t,matchers:n}){const i=new Set(e);return Object.entries(t).map(([o,[u,l,c]])=>{const{pattern:h,params:d}=nz(o),f={id:o,exec:p=>{const g=h.exec(p);if(g)return az(g,d,n)},errors:[1,...c||[]].map(p=>r[p]),layouts:[0,...l||[]].map(a),leaf:s(u)};return f.errors.length=f.layouts.length=Math.max(f.errors.length,f.layouts.length),f});function s(o){const u=o<0;return u&&(o=~o),[u,r[o]]}function a(o){return o===void 0?o:[i.has(o),r[o]]}}function bT(r,e=JSON.parse){try{return e(sessionStorage[r])}catch{}}function xT(r,e,t=JSON.stringify){const n=t(e);try{sessionStorage[r]=n}catch{}}function uz(r){pe(r,r.v+1)}function lz(r){let e=0,t=It(0),n;return()=>{dG()&&(ie(t),io(()=>(e===0&&(n=Zn(()=>r(()=>uz(t)))),e+=1,()=>{Ml().then(()=>{e-=1,e===0&&(n==null||n(),n=void 0)})})))}}const Kt=((fN=globalThis.__sveltekit_f105mh)==null?void 0:fN.base)??"",cz=((dN=globalThis.__sveltekit_f105mh)==null?void 0:dN.assets)??Kt,hz="1764461550975",wT="sveltekit:snapshot",ST="sveltekit:scroll",TT="sveltekit:states",fz="sveltekit:pageurl",Li="sveltekit:history",Fs="sveltekit:navigation",xo={tap:1,hover:2,viewport:3,eager:4,off:-1,false:-1},Ds=location.origin;function AT(r){if(r instanceof URL)return r;let e=document.baseURI;if(!e){const t=document.getElementsByTagName("base");e=t.length?t[0].href:document.URL}return new URL(r,e)}function Hl(){return{x:pageXOffset,y:pageYOffset}}function Fi(r,e){return r.getAttribute(`data-sveltekit-${e}`)}const RT={...xo,"":xo.hover};function PT(r){let e=r.assignedSlot??r.parentNode;return(e==null?void 0:e.nodeType)===11&&(e=e.host),e}function CT(r,e){for(;r&&r!==e;){if(r.nodeName.toUpperCase()==="A"&&r.hasAttribute("href"))return r;r=PT(r)}}function jl(r,e,t){let n;try{if(n=new URL(r instanceof SVGAElement?r.href.baseVal:r.href,document.baseURI),t&&n.hash.match(/^#[^/]/)){const o=location.hash.split("#")[1]||"/";n.hash=`#${o}${n.hash}`}}catch{}const i=r instanceof SVGAElement?r.target.baseVal:r.target,s=!n||!!i||So(n,e,t)||(r.getAttribute("rel")||"").split(/\s+/).includes("external"),a=(n==null?void 0:n.origin)===Ds&&r.hasAttribute("download");return{url:n,external:s,target:i,download:a}}function wo(r){let e=null,t=null,n=null,i=null,s=null,a=null,o=r;for(;o&&o!==document.documentElement;)n===null&&(n=Fi(o,"preload-code")),i===null&&(i=Fi(o,"preload-data")),e===null&&(e=Fi(o,"keepfocus")),t===null&&(t=Fi(o,"noscroll")),s===null&&(s=Fi(o,"reload")),a===null&&(a=Fi(o,"replacestate")),o=PT(o);function u(l){switch(l){case"":case"true":return!0;case"off":case"false":return!1;default:return}}return{preload_code:RT[n??"off"],preload_data:RT[i??"off"],keepfocus:u(e),noscroll:u(t),reload:u(s),replace_state:u(a)}}function ET(r){const e=Ul(r);let t=!0;function n(){t=!0,e.update(a=>a)}function i(a){t=!1,e.set(a)}function s(a){let o;return e.subscribe(u=>{(o===void 0||t&&u!==o)&&a(o=u)})}return{notify:n,set:i,subscribe:s}}const MT={v:()=>{}};function dz(){const{set:r,subscribe:e}=Ul(!1);let t;async function n(){clearTimeout(t);try{const i=await fetch(`${cz}/_app/version.json`,{headers:{pragma:"no-cache","cache-control":"no-cache"}});if(!i.ok)return!1;const a=(await i.json()).version!==hz;return a&&(r(!0),MT.v(),clearTimeout(t)),a}catch{return!1}}return{subscribe:e,check:n}}function So(r,e,t){return r.origin!==Ds||!r.pathname.startsWith(e)?!0:t?!(r.pathname===e+"/"||r.pathname===e+"/index.html"||r.protocol==="file:"&&r.pathname.replace(/\/[^/]+\.html?$/,"")===e):!1}function pz(r){const e=mz(r),t=new ArrayBuffer(e.length),n=new DataView(t);for(let i=0;i<t.byteLength;i++)n.setUint8(i,e.charCodeAt(i));return t}const gz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function mz(r){r.length%4===0&&(r=r.replace(/==?$/,""));let e="",t=0,n=0;for(let i=0;i<r.length;i++)t<<=6,t|=gz.indexOf(r[i]),n+=6,n===24&&(e+=String.fromCharCode((t&16711680)>>16),e+=String.fromCharCode((t&65280)>>8),e+=String.fromCharCode(t&255),t=n=0);return n===12?(t>>=4,e+=String.fromCharCode(t)):n===18&&(t>>=2,e+=String.fromCharCode((t&65280)>>8),e+=String.fromCharCode(t&255)),e}const vz=-1,_z=-2,yz=-3,bz=-4,xz=-5,wz=-6;function Sz(r,e){if(typeof r=="number")return i(r,!0);if(!Array.isArray(r)||r.length===0)throw new Error("Invalid input");const t=r,n=Array(t.length);function i(s,a=!1){if(s===vz)return;if(s===yz)return NaN;if(s===bz)return 1/0;if(s===xz)return-1/0;if(s===wz)return-0;if(a||typeof s!="number")throw new Error("Invalid input");if(s in n)return n[s];const o=t[s];if(!o||typeof o!="object")n[s]=o;else if(Array.isArray(o))if(typeof o[0]=="string"){const u=o[0],l=e==null?void 0:e[u];if(l){let c=o[1];return typeof c!="number"&&(c=t.push(o[1])-1),n[s]=l(i(c))}switch(u){case"Date":n[s]=new Date(o[1]);break;case"Set":const c=new Set;n[s]=c;for(let f=1;f<o.length;f+=1)c.add(i(o[f]));break;case"Map":const h=new Map;n[s]=h;for(let f=1;f<o.length;f+=2)h.set(i(o[f]),i(o[f+1]));break;case"RegExp":n[s]=new RegExp(o[1],o[2]);break;case"Object":n[s]=Object(o[1]);break;case"BigInt":n[s]=BigInt(o[1]);break;case"null":const d=Object.create(null);n[s]=d;for(let f=1;f<o.length;f+=2)d[o[f]]=i(o[f+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const f=globalThis[u],p=new f(i(o[1]));n[s]=o[2]!==void 0?p.subarray(o[2],o[3]):p;break}case"ArrayBuffer":{const f=o[1],p=pz(f);n[s]=p;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const f=u.slice(9);n[s]=Temporal[f].from(o[1]);break}case"URL":{const f=new URL(o[1]);n[s]=f;break}case"URLSearchParams":{const f=new URLSearchParams(o[1]);n[s]=f;break}default:throw new Error(`Unknown type ${u}`)}}else{const u=new Array(o.length);n[s]=u;for(let l=0;l<o.length;l+=1){const c=o[l];c!==_z&&(u[l]=i(c))}}else{const u={};n[s]=u;for(const l in o){if(l==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const c=o[l];u[l]=i(c)}}return n[s]}return i(0)}const IT=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...IT],[...new Set([...IT])];function Tz(r){return r.filter(e=>e!=null)}class To{constructor(e,t){this.status=e,typeof t=="string"?this.body={message:t}:t?this.body=t:this.body={message:`Error: ${e}`}}toString(){return JSON.stringify(this.body)}}class $l{constructor(e,t){this.status=e,this.location=t}}class Yl extends Error{constructor(e,t,n){super(n),this.status=e,this.text=t}}const Az="x-sveltekit-invalidated",Rz="x-sveltekit-trailing-slash";function Ao(r){return r instanceof To||r instanceof Yl?r.status:500}function Pz(r){return r instanceof Yl?r.text:"Internal Error"}let mt,Us,Vl;Yr.toString().includes("$$")||/function \w+\(\) \{\}/.test(Yr.toString())?(mt={data:{},form:null,error:null,params:{},route:{id:null},state:{},status:-1,url:new URL("https://example.com")},Us={current:null},Vl={current:!1}):(mt=new(pN=class{constructor(){ot(this,qa,it({}));ot(this,ka,it(null));ot(this,Oa,it(null));ot(this,Ba,it({}));ot(this,La,it({id:null}));ot(this,Fa,it({}));ot(this,Da,it(-1));ot(this,Ua,it(new URL("https://example.com")))}get data(){return ie(ae(this,qa))}set data(e){pe(ae(this,qa),e)}get form(){return ie(ae(this,ka))}set form(e){pe(ae(this,ka),e)}get error(){return ie(ae(this,Oa))}set error(e){pe(ae(this,Oa),e)}get params(){return ie(ae(this,Ba))}set params(e){pe(ae(this,Ba),e)}get route(){return ie(ae(this,La))}set route(e){pe(ae(this,La),e)}get state(){return ie(ae(this,Fa))}set state(e){pe(ae(this,Fa),e)}get status(){return ie(ae(this,Da))}set status(e){pe(ae(this,Da),e)}get url(){return ie(ae(this,Ua))}set url(e){pe(ae(this,Ua),e)}},qa=new WeakMap,ka=new WeakMap,Oa=new WeakMap,Ba=new WeakMap,La=new WeakMap,Fa=new WeakMap,Da=new WeakMap,Ua=new WeakMap,pN),Us=new(gN=class{constructor(){ot(this,Wa,it(null))}get current(){return ie(ae(this,Wa))}set current(e){pe(ae(this,Wa),e)}},Wa=new WeakMap,gN),Vl=new(mN=class{constructor(){ot(this,Na,it(!1))}get current(){return ie(ae(this,Na))}set current(e){pe(ae(this,Na),e)}},Na=new WeakMap,mN),MT.v=()=>Vl.current=!0);function Cz(r){Object.assign(mt,r)}const Ez="/__data.json",Mz=".html__data.json";function Iz(r){return r.endsWith(".html")?r.replace(/\.html$/,Mz):r.replace(/\/$/,"")+Ez}const qz=new Set(["icon","shortcut icon","apple-touch-icon"]),Jn=bT(ST)??{},Ws=bT(wT)??{},Vr={url:ET({}),page:ET({}),navigating:Ul(null),updated:dz()};function Xl(r){Jn[r]=Hl()}function kz(r,e){let t=r+1;for(;Jn[t];)delete Jn[t],t+=1;for(t=e+1;Ws[t];)delete Ws[t],t+=1}function Di(r){return location.href=r.href,new Promise(()=>{})}async function qT(){if("serviceWorker"in navigator){const r=await navigator.serviceWorker.getRegistration(Kt||"/");r&&await r.update()}}function kT(){}let Kl,Zl,Ro,Xr,Jl,tt;const Po=[],Co=[];let Zt=null;const OT=new Set,Oz=new Set,Ns=new Set;let Fe={branch:[],error:null,url:null},Ql=!1,Eo=!1,BT=!0,Gs=!1,zs=!1,LT=!1,ec=!1,FT,_t,Jt,Qn;const Hs=new Set;async function Bz(r,e,t){var i,s,a,o;document.URL!==location.href&&(location.href=location.href),tt=r,await((s=(i=r.hooks).init)==null?void 0:s.call(i)),Kl=oz(r),Xr=document.documentElement,Jl=e,Zl=r.nodes[0],Ro=r.nodes[1],Zl(),Ro(),_t=(a=history.state)==null?void 0:a[Li],Jt=(o=history.state)==null?void 0:o[Fs],_t||(_t=Jt=Date.now(),history.replaceState({...history.state,[Li]:_t,[Fs]:Jt},""));const n=Jn[_t];n&&(history.scrollRestoration="manual",scrollTo(n.x,n.y)),t?await $z(Jl,t):await zz(tt.hash?KT(new URL(location.href)):location.href,{replaceState:!0}),jz()}function Lz(){Po.length=0,ec=!1}function DT(r){Co.some(e=>e==null?void 0:e.snapshot)&&(Ws[r]=Co.map(e=>{var t;return(t=e==null?void 0:e.snapshot)==null?void 0:t.capture()}))}function UT(r){var e;(e=Ws[r])==null||e.forEach((t,n)=>{var i,s;(s=(i=Co[n])==null?void 0:i.snapshot)==null||s.restore(t)})}function WT(){Xl(_t),xT(ST,Jn),DT(Jt),xT(wT,Ws)}async function tc(r,e,t,n){return js({type:"goto",url:AT(r),keepfocus:e.keepFocus,noscroll:e.noScroll,replace_state:e.replaceState,state:e.state,redirect_count:t,nav_token:n,accept:()=>{e.invalidateAll&&(ec=!0),e.invalidate&&e.invalidate.forEach(Hz)}})}async function Fz(r){if(r.id!==(Zt==null?void 0:Zt.id)){const e={};Hs.add(e),Zt={id:r.id,token:e,promise:HT({...r,preload:e}).then(t=>(Hs.delete(e),t.type==="loaded"&&t.state.error&&(Zt=null),t))}}return Zt.promise}async function rc(r){var t;const e=(t=await qo(r,!1))==null?void 0:t.route;e&&await Promise.all([...e.layouts,e.leaf].map(n=>n==null?void 0:n[1]()))}function NT(r,e,t){var s;Fe=r.state;const n=document.querySelector("style[data-sveltekit]");n&&n.remove(),Object.assign(mt,r.props.page),FT=new tt.root({target:e,props:{...r.props,stores:Vr,components:Co},hydrate:t,sync:!1}),UT(Jt);const i={from:null,to:{params:Fe.params,route:{id:((s=Fe.route)==null?void 0:s.id)??null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};Ns.forEach(a=>a(i)),Eo=!0}function Mo({url:r,params:e,branch:t,status:n,error:i,route:s,form:a}){let o="never";if(Kt&&(r.pathname===Kt||r.pathname===Kt+"/"))o="always";else for(const f of t)(f==null?void 0:f.slash)!==void 0&&(o=f.slash);r.pathname=YG(r.pathname,o),r.search=r.search;const u={type:"loaded",state:{url:r,params:e,branch:t,error:i,route:s},props:{constructors:Tz(t).map(f=>f.node.component),page:sc(mt)}};a!==void 0&&(u.props.form=a);let l={},c=!mt,h=0;for(let f=0;f<Math.max(t.length,Fe.branch.length);f+=1){const p=t[f],g=Fe.branch[f];(p==null?void 0:p.data)!==(g==null?void 0:g.data)&&(c=!0),p&&(l={...l,...p.data},c&&(u.props[`data_${h}`]=l),h+=1)}return(!Fe.url||r.href!==Fe.url.href||Fe.error!==i||a!==void 0&&a!==mt.form||c)&&(u.props.page={error:i,params:e,route:{id:(s==null?void 0:s.id)??null},state:{},status:n,url:new URL(r),form:a??null,data:c?l:mt.data}),u}async function nc({loader:r,parent:e,url:t,params:n,route:i,server_data_node:s}){var c,h,d;let a=null,o=!0;const u={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},l=await r();if((c=l.universal)!=null&&c.load){let f=function(...g){for(const m of g){const{href:_}=new URL(m,t);u.dependencies.add(_)}};const p={route:new Proxy(i,{get:(g,m)=>(o&&(u.route=!0),g[m])}),params:new Proxy(n,{get:(g,m)=>(o&&u.params.add(m),g[m])}),data:(s==null?void 0:s.data)??null,url:KG(t,()=>{o&&(u.url=!0)},g=>{o&&u.search_params.add(g)},tt.hash),async fetch(g,m){let _;g instanceof Request?(_=g.url,m={body:g.method==="GET"||g.method==="HEAD"?void 0:await g.blob(),cache:g.cache,credentials:g.credentials,headers:[...g.headers].length?g.headers:void 0,integrity:g.integrity,keepalive:g.keepalive,method:g.method,mode:g.mode,redirect:g.redirect,referrer:g.referrer,referrerPolicy:g.referrerPolicy,signal:g.signal,...m}):_=g;const y=new URL(_,t);return o&&f(y.href),y.origin===t.origin&&(_=y.href.slice(t.origin.length)),Eo?tz(_,y.href,m):ez(_,m)},setHeaders:()=>{},depends:f,parent(){return o&&(u.parent=!0),e()},untrack(g){o=!1;try{return g()}finally{o=!0}}};a=await l.universal.load.call(null,p)??null}return{node:l,loader:r,server:s,universal:(h=l.universal)!=null&&h.load?{type:"data",data:a,uses:u}:null,data:a??(s==null?void 0:s.data)??null,slash:((d=l.universal)==null?void 0:d.trailingSlash)??(s==null?void 0:s.slash)}}function GT(r,e,t,n,i,s){if(ec)return!0;if(!i)return!1;if(i.parent&&r||i.route&&e||i.url&&t)return!0;for(const a of i.search_params)if(n.has(a))return!0;for(const a of i.params)if(s[a]!==Fe.params[a])return!0;for(const a of i.dependencies)if(Po.some(o=>o(new URL(a))))return!0;return!1}function ic(r,e){return(r==null?void 0:r.type)==="data"?r:(r==null?void 0:r.type)==="skip"?e??null:null}function Dz(r,e){if(!r)return new Set(e.searchParams.keys());const t=new Set([...r.searchParams.keys(),...e.searchParams.keys()]);for(const n of t){const i=r.searchParams.getAll(n),s=e.searchParams.getAll(n);i.every(a=>s.includes(a))&&s.every(a=>i.includes(a))&&t.delete(n)}return t}function zT({error:r,url:e,route:t,params:n}){return{type:"loaded",state:{error:r,url:e,route:t,params:n,branch:[]},props:{page:sc(mt),constructors:[]}}}async function HT({id:r,invalidating:e,url:t,params:n,route:i,preload:s}){if((Zt==null?void 0:Zt.id)===r)return Hs.delete(Zt.token),Zt.promise;const{errors:a,layouts:o,leaf:u}=i,l=[...o,u];a.forEach(b=>b==null?void 0:b().catch(()=>{})),l.forEach(b=>b==null?void 0:b[1]().catch(()=>{}));let c=null;const h=Fe.url?r!==ko(Fe.url):!1,d=Fe.route?i.id!==Fe.route.id:!1,f=Dz(Fe.url,t);let p=!1;const g=l.map((b,T)=>{var M;const S=Fe.branch[T],w=!!(b!=null&&b[0])&&((S==null?void 0:S.loader)!==b[1]||GT(p,d,h,f,(M=S.server)==null?void 0:M.uses,n));return w&&(p=!0),w});if(g.some(Boolean)){try{c=await YT(t,g)}catch(b){const T=await Ui(b,{url:t,params:n,route:{id:r}});return Hs.has(s)?zT({error:T,url:t,params:n,route:i}):Io({status:Ao(b),error:T,url:t,route:i})}if(c.type==="redirect")return c}const m=c==null?void 0:c.nodes;let _=!1;const y=l.map(async(b,T)=>{var q;if(!b)return;const S=Fe.branch[T],w=m==null?void 0:m[T];if((!w||w.type==="skip")&&b[1]===(S==null?void 0:S.loader)&&!GT(_,d,h,f,(q=S.universal)==null?void 0:q.uses,n))return S;if(_=!0,(w==null?void 0:w.type)==="error")throw w;return nc({loader:b[1],url:t,params:n,route:i,parent:async()=>{var k;const O={};for(let U=0;U<T;U+=1)Object.assign(O,(k=await y[U])==null?void 0:k.data);return O},server_data_node:ic(w===void 0&&b[0]?{type:"skip"}:w??null,b[0]?S==null?void 0:S.server:void 0)})});for(const b of y)b.catch(()=>{});const x=[];for(let b=0;b<l.length;b+=1)if(l[b])try{x.push(await y[b])}catch(T){if(T instanceof $l)return{type:"redirect",location:T.location};if(Hs.has(s))return zT({error:await Ui(T,{params:n,url:t,route:{id:i.id}}),url:t,params:n,route:i});let S=Ao(T),w;if(m!=null&&m.includes(T))S=T.status??S,w=T.error;else if(T instanceof To)w=T.body;else{if(await Vr.updated.check())return await qT(),await Di(t);w=await Ui(T,{params:n,url:t,route:{id:i.id}})}const M=await Uz(b,x,a);return M?Mo({url:t,params:n,branch:x.slice(0,M.idx).concat(M.node),status:S,error:w,route:i}):await $T(t,{id:i.id},w,S)}else x.push(void 0);return Mo({url:t,params:n,branch:x,status:200,error:null,route:i,form:e?void 0:null})}async function Uz(r,e,t){for(;r--;)if(t[r]){let n=r;for(;!e[n];)n-=1;try{return{idx:n+1,node:{node:await t[r](),loader:t[r],data:{},server:null,universal:null}}}catch{continue}}}async function Io({status:r,error:e,url:t,route:n}){const i={};let s=null;if(tt.server_loads[0]===0)try{const o=await YT(t,[!0]);if(o.type!=="data"||o.nodes[0]&&o.nodes[0].type!=="data")throw 0;s=o.nodes[0]??null}catch{(t.origin!==Ds||t.pathname!==location.pathname||Ql)&&await Di(t)}try{const o=await nc({loader:Zl,url:t,params:i,route:n,parent:()=>Promise.resolve({}),server_data_node:ic(s)}),u={node:await Ro(),loader:Ro,universal:null,server:null,data:null};return Mo({url:t,params:i,branch:[o,u],status:r,error:e,route:null})}catch(o){if(o instanceof $l)return tc(new URL(o.location,location.href),{},0);throw o}}function Wz(r){let e;try{if(e=tt.hooks.reroute({url:new URL(r)})??r,typeof e=="string"){const t=new URL(r);tt.hash?t.hash=e:t.pathname=e,e=t}}catch{return}return e}async function qo(r,e){if(r&&!So(r,Kt,tt.hash)){const t=Wz(r);if(!t)return;const n=Nz(t);for(const i of Kl){const s=i.exec(n);if(s)return{id:ko(r),invalidating:e,route:i,params:XG(s),url:r}}}}function Nz(r){return VG(tt.hash?r.hash.replace(/^#/,"").replace(/[?#].+/,""):r.pathname.slice(Kt.length))||"/"}function ko(r){return(tt.hash?r.hash.replace(/^#/,""):r.pathname)+r.search}function jT({url:r,type:e,intent:t,delta:n}){let i=!1;const s=XT(Fe,t,r,e);n!==void 0&&(s.navigation.delta=n);const a={...s.navigation,cancel:()=>{i=!0,s.reject(new Error("navigation cancelled"))}};return Gs||OT.forEach(o=>o(a)),i?null:s}async function js({type:r,url:e,popped:t,keepfocus:n,noscroll:i,replace_state:s,state:a={},redirect_count:o=0,nav_token:u={},accept:l=kT,block:c=kT}){const h=Qn;Qn=u;const d=await qo(e,!1),f=jT({url:e,type:r,delta:t==null?void 0:t.delta,intent:d});if(!f){c(),Qn===u&&(Qn=h);return}const p=_t,g=Jt;l(),Gs=!0,Eo&&Vr.navigating.set(Us.current=f.navigation);let m=d&&await HT(d);if(!m){if(So(e,Kt,tt.hash))return await Di(e);m=await $T(e,{id:null},await Ui(new Yl(404,"Not Found",`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404)}if(e=(d==null?void 0:d.url)||e,Qn!==u)return f.reject(new Error("navigation aborted")),!1;if(m.type==="redirect")if(o>=20)m=await Io({status:500,error:await Ui(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}});else return await tc(new URL(m.location,e).href,{},o+1,u),!1;else m.props.page.status>=400&&await Vr.updated.check()&&(await qT(),await Di(e));if(Lz(),Xl(p),DT(g),m.props.page.url.pathname!==e.pathname&&(e.pathname=m.props.page.url.pathname),a=t?t.state:a,!t){const b=s?0:1,T={[Li]:_t+=b,[Fs]:Jt+=b,[TT]:a};(s?history.replaceState:history.pushState).call(history,T,"",e),s||kz(_t,Jt)}if(Zt=null,m.props.page.state=a,Eo){Fe=m.state,m.props.page&&(m.props.page.url=e);const b=(await Promise.all(Array.from(Oz,T=>T(f.navigation)))).filter(T=>typeof T=="function");if(b.length>0){let T=function(){b.forEach(S=>{Ns.delete(S)})};b.push(T),b.forEach(S=>{Ns.add(S)})}FT.$set(m.props),Cz(m.props.page),LT=!0}else NT(m,Jl,!1);const{activeElement:_}=document;await Ml();const y=t?t.scroll:i?Hl():null;if(BT){const b=e.hash&&document.getElementById(decodeURIComponent(tt.hash?e.hash.split("#")[2]??"":e.hash.slice(1)));y?scrollTo(y.x,y.y):b?b.scrollIntoView():scrollTo(0,0)}const x=document.activeElement!==_&&document.activeElement!==document.body;!n&&!x&&Yz(),BT=!0,m.props.page&&Object.assign(mt,m.props.page),Gs=!1,r==="popstate"&&UT(Jt),f.fulfil(void 0),Ns.forEach(b=>b(f.navigation)),Vr.navigating.set(Us.current=null)}async function $T(r,e,t,n){return r.origin===Ds&&r.pathname===location.pathname&&!Ql?await Io({status:n,error:t,url:r,route:e}):await Di(r)}function Gz(){let r,e;Xr.addEventListener("mousemove",a=>{const o=a.target;clearTimeout(r),r=setTimeout(()=>{i(o,2)},20)});function t(a){a.defaultPrevented||i(a.composedPath()[0],1)}Xr.addEventListener("mousedown",t),Xr.addEventListener("touchstart",t,{passive:!0});const n=new IntersectionObserver(a=>{for(const o of a)o.isIntersecting&&(rc(new URL(o.target.href)),n.unobserve(o.target))},{threshold:0});async function i(a,o){const u=CT(a,Xr);if(!u||u===e)return;const{url:l,external:c,download:h}=jl(u,Kt,tt.hash);if(c||h)return;const d=wo(u),f=l&&ko(Fe.url)===ko(l);if(!d.reload&&!f)if(o<=d.preload_data){e=u;const p=await qo(l,!1);p&&Fz(p)}else o<=d.preload_code&&(e=u,rc(l))}function s(){n.disconnect();for(const a of Xr.querySelectorAll("a")){const{url:o,external:u,download:l}=jl(a,Kt,tt.hash);if(u||l)continue;const c=wo(a);c.reload||(c.preload_code===xo.viewport&&n.observe(a),c.preload_code===xo.eager&&rc(o))}}Ns.add(s),s()}function Ui(r,e){if(r instanceof To)return r.body;const t=Ao(r),n=Pz(r);return tt.hooks.handleError({error:r,event:e,status:t,message:n})??{message:n}}function zz(r,e={}){return r=new URL(AT(r)),r.origin!==Ds?Promise.reject(new Error("goto: invalid URL")):tc(r,e,0)}function Hz(r){if(typeof r=="function")Po.push(r);else{const{href:e}=new URL(r,location.href);Po.push(t=>t.href===e)}}function jz(){var e;history.scrollRestoration="manual",addEventListener("beforeunload",t=>{let n=!1;if(WT(),!Gs){const i=XT(Fe,void 0,null,"leave"),s={...i.navigation,cancel:()=>{n=!0,i.reject(new Error("navigation cancelled"))}};OT.forEach(a=>a(s))}n?(t.preventDefault(),t.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&WT()}),(e=navigator.connection)!=null&&e.saveData||Gz(),Xr.addEventListener("click",async t=>{if(t.button||t.which!==1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.defaultPrevented)return;const n=CT(t.composedPath()[0],Xr);if(!n)return;const{url:i,external:s,target:a,download:o}=jl(n,Kt,tt.hash);if(!i)return;if(a==="_parent"||a==="_top"){if(window.parent!==window)return}else if(a&&a!=="_self")return;const u=wo(n);if(!(n instanceof SVGAElement)&&i.protocol!==location.protocol&&!(i.protocol==="https:"||i.protocol==="http:")||o)return;const[c,h]=(tt.hash?i.hash.replace(/^#/,""):i.href).split("#"),d=c===Nl(location);if(s||u.reload&&(!d||!h)){jT({url:i,type:"link"})?Gs=!0:t.preventDefault();return}if(h!==void 0&&d){const[,f]=Fe.url.href.split("#");if(f===h){if(t.preventDefault(),h===""||h==="top"&&n.ownerDocument.getElementById("top")===null)window.scrollTo({top:0});else{const p=n.ownerDocument.getElementById(decodeURIComponent(h));p&&(p.scrollIntoView(),p.focus())}return}if(zs=!0,Xl(_t),r(i),!u.replace_state)return;zs=!1}t.preventDefault(),await new Promise(f=>{requestAnimationFrame(()=>{setTimeout(f,0)}),setTimeout(f,100)}),await js({type:"link",url:i,keepfocus:u.keepfocus,noscroll:u.noscroll,replace_state:u.replace_state??i.href===location.href})}),Xr.addEventListener("submit",t=>{if(t.defaultPrevented)return;const n=HTMLFormElement.prototype.cloneNode.call(t.target),i=t.submitter;if(((i==null?void 0:i.formTarget)||n.target)==="_blank"||((i==null?void 0:i.formMethod)||n.method)!=="get")return;const o=new URL((i==null?void 0:i.hasAttribute("formaction"))&&(i==null?void 0:i.formAction)||n.action);if(So(o,Kt,!1))return;const u=t.target,l=wo(u);if(l.reload)return;t.preventDefault(),t.stopPropagation();const c=new FormData(u),h=i==null?void 0:i.getAttribute("name");h&&c.append(h,(i==null?void 0:i.getAttribute("value"))??""),o.search=new URLSearchParams(c).toString(),js({type:"form",url:o,keepfocus:l.keepfocus,noscroll:l.noscroll,replace_state:l.replace_state??o.href===location.href})}),addEventListener("popstate",async t=>{var n;if((n=t.state)!=null&&n[Li]){const i=t.state[Li];if(Qn={},i===_t)return;const s=Jn[i],a=t.state[TT]??{},o=new URL(t.state[fz]??location.href),u=t.state[Fs],l=Fe.url?Nl(location)===Nl(Fe.url):!1;if(u===Jt&&(LT||l)){a!==mt.state&&(mt.state=a),r(o),Jn[_t]=Hl(),s&&scrollTo(s.x,s.y),_t=i;return}const h=i-_t;await js({type:"popstate",url:o,popped:{state:a,scroll:s,delta:h},accept:()=>{_t=i,Jt=u},block:()=>{history.go(-h)},nav_token:Qn})}else if(!zs){const i=new URL(location.href);r(i)}}),addEventListener("hashchange",()=>{zs?(zs=!1,history.replaceState({...history.state,[Li]:++_t,[Fs]:Jt},"",location.href)):tt.hash&&Fe.url.hash===location.hash&&js({type:"goto",url:KT(Fe.url)})});for(const t of document.querySelectorAll("link"))qz.has(t.rel)&&(t.href=t.href);addEventListener("pageshow",t=>{t.persisted&&Vr.navigating.set(Us.current=null)});function r(t){Fe.url=mt.url=t,Vr.page.set(sc(mt)),Vr.page.notify()}}async function $z(r,{status:e=200,error:t,node_ids:n,params:i,route:s,server_route:a,data:o,form:u}){Ql=!0;const l=new URL(location.href);let c;({params:i={},route:s={id:null}}=await qo(l,!1)||{}),c=Kl.find(({id:f})=>f===s.id);let h,d=!0;try{const f=n.map(async(g,m)=>{const _=o[m];return _!=null&&_.uses&&(_.uses=VT(_.uses)),nc({loader:tt.nodes[g],url:l,params:i,route:s,parent:async()=>{const y={};for(let x=0;x<m;x+=1)Object.assign(y,(await f[x]).data);return y},server_data_node:ic(_)})}),p=await Promise.all(f);if(c){const g=c.layouts;for(let m=0;m<g.length;m++)g[m]||p.splice(m,0,void 0)}h=Mo({url:l,params:i,branch:p,status:e,error:t,form:u,route:c??null})}catch(f){if(f instanceof $l){await Di(new URL(f.location,location.href));return}h=await Io({status:Ao(f),error:await Ui(f,{url:l,params:i,route:s}),url:l,route:s}),r.textContent="",d=!1}h.props.page&&(h.props.page.state={}),NT(h,r,d)}async function YT(r,e){var s;const t=new URL(r);t.pathname=Iz(r.pathname),r.pathname.endsWith("/")&&t.searchParams.append(Rz,"1"),t.searchParams.append(Az,e.map(a=>a?"1":"0").join(""));const n=window.fetch,i=await n(t.href,{});if(!i.ok){let a;throw(s=i.headers.get("content-type"))!=null&&s.includes("application/json")?a=await i.json():i.status===404?a="Not Found":i.status===500&&(a="Internal Error"),new To(i.status,a)}return new Promise(async a=>{var d;const o=new Map,u=i.body.getReader(),l=new TextDecoder;function c(f){return Sz(f,{...tt.decoders,Promise:p=>new Promise((g,m)=>{o.set(p,{fulfil:g,reject:m})})})}let h="";for(;;){const{done:f,value:p}=await u.read();if(f&&!h)break;for(h+=!p&&h?`
`:l.decode(p,{stream:!0});;){const g=h.indexOf(`
`);if(g===-1)break;const m=JSON.parse(h.slice(0,g));if(h=h.slice(g+1),m.type==="redirect")return a(m);if(m.type==="data")(d=m.nodes)==null||d.forEach(_=>{(_==null?void 0:_.type)==="data"&&(_.uses=VT(_.uses),_.data=c(_.data))}),a(m);else if(m.type==="chunk"){const{id:_,data:y,error:x}=m,b=o.get(_);o.delete(_),x?b.reject(c(x)):b.fulfil(c(y))}}}})}function VT(r){return{dependencies:new Set((r==null?void 0:r.dependencies)??[]),params:new Set((r==null?void 0:r.params)??[]),parent:!!(r!=null&&r.parent),route:!!(r!=null&&r.route),url:!!(r!=null&&r.url),search_params:new Set((r==null?void 0:r.search_params)??[])}}function Yz(){const r=document.querySelector("[autofocus]");if(r)r.focus();else{const e=document.body,t=e.getAttribute("tabindex");e.tabIndex=-1,e.focus({preventScroll:!0,focusVisible:!1}),t!==null?e.setAttribute("tabindex",t):e.removeAttribute("tabindex");const n=getSelection();if(n&&n.type!=="None"){const i=[];for(let s=0;s<n.rangeCount;s+=1)i.push(n.getRangeAt(s));setTimeout(()=>{if(n.rangeCount===i.length){for(let s=0;s<n.rangeCount;s+=1){const a=i[s],o=n.getRangeAt(s);if(a.commonAncestorContainer!==o.commonAncestorContainer||a.startContainer!==o.startContainer||a.endContainer!==o.endContainer||a.startOffset!==o.startOffset||a.endOffset!==o.endOffset)return}n.removeAllRanges()}})}}}function XT(r,e,t,n){var u,l;let i,s;const a=new Promise((c,h)=>{i=c,s=h});return a.catch(()=>{}),{navigation:{from:{params:r.params,route:{id:((u=r.route)==null?void 0:u.id)??null},url:r.url},to:t&&{params:(e==null?void 0:e.params)??null,route:{id:((l=e==null?void 0:e.route)==null?void 0:l.id)??null},url:t},willUnload:!e,type:n,complete:a},fulfil:i,reject:s}}function sc(r){return{data:r.data,error:r.error,form:r.form,params:r.params,route:r.route,state:r.state,status:r.status,url:r.url}}function KT(r){const e=new URL(r);return e.hash=decodeURIComponent(r.hash),e}const XQ="modulepreload",KQ=function(r,e){return new URL(r,e).href},ZQ={},$s=function(e,t,n){let i=Promise.resolve();function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},Vz={},Xz="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xz);var Kz=Nt('<div id="svelte-announcer" aria-live="assertive" aria-atomic="true" style="position: absolute; left: 0; top: 0; clip: rect(0 0 0 0); clip-path: inset(50%); overflow: hidden; white-space: nowrap; width: 1px; height: 1px"><!></div>'),Zz=Nt("<!> <!>",1);function Jz(r,e){wt(e,!0);let t=Wl(e,"components",23,()=>[]),n=Wl(e,"data_0",3,null),i=Wl(e,"data_1",3,null);jS(()=>e.stores.page.set(e.page)),Xn(()=>{e.stores,e.page,e.constructors,t(),e.form,n(),i(),e.stores.page.notify()});let s=it(!1),a=it(!1),o=it(null);Yr(()=>{const g=e.stores.page.subscribe(()=>{ie(s)&&(pe(a,!0),Ml().then(()=>{pe(o,We(document.title||"untitled page"))}))});return pe(s,!0),g});const u=jr(()=>e.constructors[1]);var l=Zz(),c=lt(l);{var h=g=>{var m=Cr();const _=jr(()=>e.constructors[0]);var y=lt(m);Bl(y,()=>ie(_),(x,b)=>{Fl(b(x,{get data(){return n()},get form(){return e.form},children:(T,S)=>{var w=Cr(),M=lt(w);Bl(M,()=>ie(u),(q,O)=>{Fl(O(q,{get data(){return i()},get form(){return e.form}}),k=>t()[1]=k,()=>{var k;return(k=t())==null?void 0:k[1]})}),Ge(T,w)},$$slots:{default:!0}}),T=>t()[0]=T,()=>{var T;return(T=t())==null?void 0:T[0]})}),Ge(g,m)},d=g=>{var m=Cr();const _=jr(()=>e.constructors[0]);var y=lt(m);Bl(y,()=>ie(_),(x,b)=>{Fl(b(x,{get data(){return n()},get form(){return e.form}}),T=>t()[0]=T,()=>{var T;return(T=t())==null?void 0:T[0]})}),Ge(g,m)};Gt(c,g=>{e.constructors[1]?g(h):g(d,!1)})}var f=je(c,2);{var p=g=>{var m=Kz(),_=gt(m);{var y=x=>{var b=kG();Kn(()=>ki(b,ie(o))),Ge(x,b)};Gt(_,x=>{ie(a)&&x(y)})}pt(m),Ge(g,m)};Gt(f,g=>{ie(s)&&g(p)})}Ge(r,l),St()}const Qz=HG(Jz),eH=[()=>$s(()=>Promise.resolve().then(()=>BQ),void 0,fe&&fe.tagName.toUpperCase()==="SCRIPT"&&fe.src||new URL("_app/immutable/bundle.C7SXImZm.js",document.baseURI).href),()=>$s(()=>Promise.resolve().then(()=>DQ),void 0,fe&&fe.tagName.toUpperCase()==="SCRIPT"&&fe.src||new URL("_app/immutable/bundle.C7SXImZm.js",document.baseURI).href),()=>$s(()=>Promise.resolve().then(()=>WQ),void 0,fe&&fe.tagName.toUpperCase()==="SCRIPT"&&fe.src||new URL("_app/immutable/bundle.C7SXImZm.js",document.baseURI).href)],tH=[],rH={"/":[2]},ZT={handleError:(({error:r})=>{console.error(r)}),reroute:(()=>{}),transport:{}},JT=Object.fromEntries(Object.entries(ZT.transport).map(([r,e])=>[r,e.decode])),nH=Object.freeze(Object.defineProperty({__proto__:null,decode:(r,e)=>JT[r](e),decoders:JT,dictionary:rH,hash:!1,hooks:ZT,matchers:Vz,nodes:eH,root:Qz,server_loads:tH},Symbol.toStringTag,{value:"Module"}));function iH(r,e){Bz(nH,r,e)}const sH=Object.freeze(Object.defineProperty({__proto__:null,prerender:!0,ssr:!1,trailingSlash:"ignore"},Symbol.toStringTag,{value:"Module"}));KN();const aH=r=>r;function oH(r,{delay:e=0,duration:t=400,easing:n=aH}={}){const i=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:n,css:s=>`opacity: ${s*i}`}}const uH=r=>new Promise(e=>r(e)),Ys=r=>new Promise(e=>{const t=setTimeout(()=>{clearTimeout(t),e()},r)});var lH=Nt('<img alt="loader" class="loader svelte-198cz70" draggable="false">');function cH(r,e){wt(e,!0);var t=lH();Kn(()=>{_o(t,"style",`--max-width-value: ${e.maxWidth??""}px`),_o(t,"src",e.src)}),mo("load",t,function(...n){var i;(i=e.onload)==null||i.apply(this,n)}),IG(t),Ge(r,t),St()}var hH=Nt('<div class="wrap svelte-1qznkct"><div class="gif-loader-wrap svelte-1qznkct"><!></div></div>');function QT(r,e){wt(e,!0);let t=it(!0);var n=Cr(),i=lt(n);{var s=a=>{var o=hH(),u=gt(o),l=gt(u);cH(l,{get maxWidth(){return e.maxWidth},get src(){return e.src},onload:async()=>{var c;await Ys(e.timeout),pe(t,!1),(c=e.oncomplete)==null||c.call(e)}}),pt(u),pt(o),Kn(()=>{_o(o,"style",`--wrap-background: ${e.backgroundColor??""};`),_o(u,"style",`--loader-wrap-background: ${e.backgroundColor??""};`)}),WG(3,o,()=>oH),Ge(a,o)};Gt(i,a=>{ie(t)&&a(s)})}Ge(r,n),St()}function fH(r,e){wt(e,!0),QT(r,{get src(){return e.src},maxWidth:400,backgroundColor:"#041721",timeout:2e3,get oncomplete(){return e.oncomplete}}),St()}var dH=Nt('<span class="add-your-loader svelte-1ay1qhf">Add Your Loader</span>'),pH=Nt("<!> <!>",1);function gH(r,e){wt(e,!0);let t=it(!0);var n=pH(),i=lt(n);QT(i,{maxWidth:200,backgroundColor:"#000000",timeout:2e3,get src(){return e.src},oncomplete:()=>pe(t,!1)});var s=je(i,2);{var a=o=>{var u=dH();Ge(o,u)};Gt(s,o=>{ie(t)&&o(a)})}Ge(r,n),St()}function mH(){const r=new Set,e=o=>(r.add(o),()=>r.delete(o)),t=o=>e(u=>{const l=o==null?void 0:o[u.type];if(l)return l(u)});return{eventEmitter:{subscribeOnMount:o=>{Yr(()=>t(o))},broadcast:o=>{r.forEach(u=>{u(o)})},broadcastAsync:o=>{const u=()=>Array.from(r).map(l=>l(o));return Promise.all(u())}}}}const eA="@@eventEmitter";function vH(r){eo(eA,r)}function _H(){return Ms(eA)}const yH=()=>{let r=[];return{add:s=>new Promise(async a=>{r.push(a),await s(),a({interrupted:!1})}),clear:()=>r=[],getLength:()=>r.length,interrupt:()=>r.forEach(s=>s({interrupted:!0}))}},bH={get error(){return mt.error},get status(){return mt.status},get url(){return mt.url}};Vr.updated.check;const ac=bH,Wi=r=>ac.url.searchParams.get(r),Qt={lang:()=>Wi("lang")==="br"?"pt":Wi("lang")||"en",sessionID:()=>Wi("sessionID")||"",rgsUrl:()=>Wi("rgs_url")||"",force:()=>Wi("force")==="true",social:()=>Wi("social")==="true"},xH=We({betModeMeta:{BASE:{mode:"BASE",costMultiplier:1,type:"default",parent:"",children:"",assets:{icon:"",dialogImage:"",dialogVolatility:"",volatility:"",button:""},text:{title:"",dialog:"",button:"",betAmountLabel:"",tickerIdle:"",tickerSpin:"",bannerText:""},maxWin:8888},ANTE:{mode:"ANTE",costMultiplier:1.2,type:"activate",parent:"",children:"",assets:{icon:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/icon_doubleboost.webp",dialogImage:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/doubleboost_image.webp",dialogVolatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_01.webp",volatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_white_01.webp",button:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/button_activate.webp",bannerText:"example banner text"},text:{title:"DOUBLE BOOST",dialog:"Double the chance to trigger the FREE SPINS round when activated for 1.2x the player bet amount. DOUBLE BOOST remains active until disabled by the player.",description:"Greatly increase your chance of landing a bonus symbol each spin.",button:"ACTIVATE",betAmountLabel:"DOUBLE BOOST",tickerIdle:"DOUBLE BOOST IS ACTIVE",tickerSpin:"GOOD LUCK",bannerText:"example banner text"}},SUPERANTE:{mode:"SUPERANTE",costMultiplier:5,type:"activate",parent:"",children:"",assets:{icon:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/icon_superboost.webp",dialogImage:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/superboost_image.webp",dialogVolatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_02.webp",volatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_white_02.webp",button:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/button_activate.webp"},text:{title:"SUPER BOOST",dialog:"1 in 20 chance to trigger the FREE SPINS round when activated for 5x the player bet amount. Guarantees 1 or more Scatter symbols every spin. SUPER BOOST remains active until disabled by the player.",description:"Guaranteed to land at least 1+ bonus symbol each spin.",button:"ACTIVATE",betAmountLabel:"SUPER BOOST",tickerIdle:"SUPER BOOST IS ACTIVE",tickerSpin:"GOOD LUCK",bannerText:"example banner text"}},SUPERSPIN:{mode:"SUPERSPIN",costMultiplier:25,type:"activate",parent:"",children:"",assets:{icon:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/icon_superspin.webp",dialogImage:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/superspin_image.webp",dialogVolatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_03.webp",volatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_white_03.webp",button:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/button_activate.webp"},text:{title:"SAMURAI SPIN",dialog:"All game features are boosted when activated for 25x the player bet amount. SAMURAI SPIN remains active until disabled by the player.",description:"SAMURAI SPIN is AWESOME! ",button:"ACTIVATE",betAmountLabel:"SAMURAI SPIN",tickerIdle:"SAMURAI SPIN IS ACTIVE",tickerSpin:"GOOD LUCK",bannerText:"example banner text"}},BONUS:{mode:"BONUS",costMultiplier:100,type:"buy",parent:"",children:"",assets:{icon:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/icon_bonusbuy.webp",dialogImage:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/bonus_image.webp",dialogVolatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_04.webp",volatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_white_04.webp",button:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_8_97/betModes/button_buy.webp"},text:{title:"BONUS",dialog:"Triggers FREE SPINS feature when activated for 100x the player bet amount. The Global Multiplier can reach up to 64x and remains active for the duration of FREE SPINS.",description:"Each spin may have a random multiplier applied to winning lines.",button:"BUY",tickerIdle:"PLACE YOUR BET",tickerSpin:"BONUS BUY ACTIVATED",bannerText:"example banner text"}},SUPER:{mode:"SUPER",costMultiplier:200,type:"buy",parent:"",children:"",assets:{icon:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/icon_superbonusbuy.webp",dialogImage:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/superbonus_image.webp",dialogVolatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_05.webp",volatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_white_05.webp",button:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_8_97/betModes/button_buy.webp"},text:{title:"SUPER BONUS",dialog:"Triggers FREE SPINS feature when activated for 200x the player bet amount. The Global Multiplier can reach up to 256x and remains active for the duration of FREE SPINS.",description:"Enter the mothership! Land values and multiply them with action symbols.",button:"BUY",tickerIdle:"PLACE YOUR BET",tickerSpin:"SUPER BONUS BUY ACTIVATED",bannerText:"example banner text"}}},gameRuleMeta:{payTable:[{containers:[{title:"WILD SYMBOL",text:"The Wild symbol substitutes all other symbols except Scatter.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:0,column:0},{title:"FREE SPINS",text:"Scatter Symbols are on all reels. If at least 3 Scatters land in a spin sequence, FREE SPINS is triggered. 3 Scatters award 8 FREE SPINS. 4 Scatters award 12 FREE SPINS. 5 Scatters award 16 FREE SPINS. ",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:1,column:0},{title:"FREE SPINS RETRIGGER",text:"During FREE SPINS, Scatter Symbols are on all reels. If at least 3 Scatters land in a spin sequence, additional FREE SPINS rounds are triggered. 3 Scatters award 4 additional FREE SPINS. 4 Scatters award 6 additional FREE SPINS. 5 Scatters award 8 additional FREE SPINS. ",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:2,column:0}],rows:3,columns:1,title:"PAYTABLE"},{containers:[{title:"",text:`5	|	10x
4	|	5x
3	|	2x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:0,column:0},{title:"",text:`5	|	5x
4	|	2x
3	|	1x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:0,column:1},{title:"",text:`5	|	5x
4	|	2x
3	|	1x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:0,column:2},{title:"",text:`5	|	3x
4	|	1x
3	|	0.5x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:1,column:0},{title:"",text:`5	|	3x
4	|	1x
3	|	0.5x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:1,column:1},{title:"",text:`5	|	2x
4	|	0.8x
3	|	0.4x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:3,column:0},{title:"",text:`5	|	2x
4	|	0.8x
3	|	0.4x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:3,column:1},{title:"",text:`5	|	1.5x
4	|	0.5x
3	|	0.2x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:3,column:2},{title:"",text:`5	|	1.5x
4	|	0.5x
3	|	0.2x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:4,column:0},{title:"",text:`5	|	1x
4	|	0.3x
3	|	0.1x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:4,column:1},{title:"",text:`5	|	1x
4	|	0.3x
3	|	0.1x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:4,column:2}],rows:5,columns:3,title:"SYMBOLS"},{containers:[{title:"",text:"All symbols pay from left to right. Starting from the left most reel. Only symbols on adjacent reels will be a valid win way. This does not apply to Scatter. ",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/winWays.be45a8a4.png",imagePosition:"top",row:0,column:0}],rows:1,columns:1,title:"WIN WAYS"}],gameRules:[{containers:[{title:"",text:`The normal mode of this game has a theoretical expected return of 97.0%.

The player also has the option to select an ANTE BET mode. This costs 1.25x the underlying bet. The ANTE BET mode has a theoretical expected return of 97.0%. The ANTE BET doubles the chance of FREE SPINS.

The player also has the option to buy FREE SPINS. This costs 100x the underlying bet. The FREE SPINS buy mode has a theoretical expected return of 97.0%. 

The player has the option to buy a SUPER SPIN. This costs 25x the underlying bet. The SUPER SPIN buy mode has a theoretical expected return of 97.0%. In SUPER SPIN one spin is initially awarded. On each spin stacked Wild Symbols are on Reel Strips

 The maximum win in each Bet Mode is 5000x the underlining bet.`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/rtp97.d2febd7d.svg",imagePosition:"top",row:0,column:0}],rows:1,columns:1,title:"BET MODES"},{containers:[{title:"",text:"Malfunction voids all pays and plays. A consistent internet connection is required. In the event of a disconnection, reload the game to finish any uncompleted bets. The theoretical expected return is calculated over many spins. Movement of reels are not representative of any physical device, and is for illustrative purposes only. TM and  2023 Twist Gaming.",image:"",row:0,column:0}],rows:1,columns:1,title:"LEGAL NOTICE"},{containers:[{title:"",text:"SPIN BUTTON | Initiates the Betting Round.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleSpin.daacc43a.webp",imagePosition:"left",row:0,column:0},{title:"",text:"STOP BUTTON | Stops the current Spin.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleStop.30db74c5.webp",imagePosition:"left",row:1,column:0},{title:"",text:"INFORMATION | Provides Game Information.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:2,column:0},{title:"",text:"SETTINGS | Adjust Game Settings.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:4,column:0},{title:"",text:"PAY TABLE | View the Paytable to see Symbol Values.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:6,column:0},{title:"",text:"AUTO SPIN | Open the Auto Spin pop-up menu.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleAutoSpin.d542a3b0.webp",imagePosition:"left",row:7,column:0},{title:"",text:"TURBO | Activate Turbo Mode.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleTurbo.a0fcfd04.webp",imagePosition:"left",row:9,column:0},{title:"",text:"MENU | Expands the Sidebar Menu for more Options.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:10,column:0},{title:"",text:"CLOSE | Exit the pop-up menu.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:11,column:0},{title:"",text:"SOUND | Mute or Unmute Game Audio.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:12,column:0},{title:"",text:"INCREASE | Increase your Bet Amount",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:13,column:0},{title:"",text:"DECREASE | Decrease your Bet Amount",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:14,column:0}],rows:16,columns:1,title:"USER INTERFACE GUIDE"}],splashScreen:[]}}),K=We({currency:"USD",balanceAmount:0,betAmount:1,wageredBetAmount:1,lastBet:null,activeBetModeKey:"BASE",winBookEventAmount:0,autoSpinsLoss:0,autoSpinsCounter:0,autoSpinsLossLimitAmount:1/0,autoSpinsSingleWinLimitAmount:1/0,isSpaceHold:!1,isTurbo:!1}),tA=r=>{if(r<=0)return 0;const e=nA();if(e===0)return 0;const t=K.balanceAmount/e;return r>=t?t:r},wH=r=>{K.betAmount=tA(r)},SH=r=>{K.betAmount=tA(r(K.betAmount))};let rA=!1;const TH=(r,e)=>{const{persistent:t}=e;!t&&rA||(t&&(rA=r),K.isTurbo=r)},AH=()=>{var r;return((r=xH.betModeMeta)==null?void 0:r[K.activeBetModeKey])||null},RH=()=>K.autoSpinsCounter>1||K.isSpaceHold,PH=()=>K.isTurbo?2:1,nA=()=>{const r=uc.activeBetMode();return(r==null?void 0:r.type)==="activate"?r.costMultiplier:1},oc=()=>K.betAmount*nA(),uc={setBetAmount:wH,updateBetAmount:SH,updateIsTurbo:TH,activeBetMode:AH,isContinuousBet:RH,timeScale:PH,betCost:oc,isBetCostAvailable:()=>oc()>0&&oc()<=K.balanceAmount,hasAutoBetCounter:()=>K.autoSpinsCounter!==0},Oo=We({jurisdiction:{socialCasino:!1,disabledFullscreen:!1,disabledTurbo:!1,disabledSuperTurbo:!1,disabledAutoplay:!1,disabledSlamstop:!1,disabledSpacebar:!1,disabledBuyFeature:!1,displayNetPosition:!1,displayRTP:!1,displaySessionTimer:!1,minimumRoundDuration:0},betAmountOptions:[1,5,25,50,75,100,200,500,800,1e3],betMenuOptions:[1,5,25,50,75,100,200,500,800,1e3]}),$e=We({selectedPastBetIndex:0,pastBets:[],force:!1,forceType:"api",forceBetModeKey:"BASE",forceSearch:{bookID:void 0,kind:"Any",symbol:"Any",hasWild:"Any",wildMult:"Any",gameType:"Any"},forceJson:""}),CH={selectedPastBet:()=>{var r;return(r=$e.pastBets)==null?void 0:r[$e.selectedPastBetIndex]}},ei=We({modal:null}),lc=75;We({volumeValueMaster:lc,volumeValueMusic:lc,volumeValueSoundEffect:lc});const iA="";We({autoSpinsText:"10",autoSpinsLossLimitText:iA,autoSpinsSingleWinLimitText:iA,freeSpinCounterShow:!1,freeSpinCounterCurrent:0,freeSpinCounterTotal:0,menuOpen:!1,drawerFold:!1,drawerButtonShow:!1});var Bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lo(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var cc={},hc={},sA;function EH(){return sA||(sA=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.errorMessages=r.ErrorType=void 0;var e;(function(t){t.MalformedUnicode="MALFORMED_UNICODE",t.MalformedHexadecimal="MALFORMED_HEXADECIMAL",t.CodePointLimit="CODE_POINT_LIMIT",t.OctalDeprecation="OCTAL_DEPRECATION",t.EndOfString="END_OF_STRING"})(e=r.ErrorType||(r.ErrorType={})),r.errorMessages=new Map([[e.MalformedUnicode,"malformed Unicode character escape sequence"],[e.MalformedHexadecimal,"malformed hexadecimal character escape sequence"],[e.CodePointLimit,"Unicode codepoint must not be greater than 0x10FFFF in escape sequence"],[e.OctalDeprecation,'"0"-prefixed octal literals and octal escape sequences are deprecated; for octal literals use the "0o" prefix instead'],[e.EndOfString,"malformed escape sequence at end of string"]])})(hc)),hc}var aA;function MH(){return aA||(aA=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.unraw=r.errorMessages=r.ErrorType=void 0;const e=EH();Object.defineProperty(r,"ErrorType",{enumerable:!0,get:function(){return e.ErrorType}}),Object.defineProperty(r,"errorMessages",{enumerable:!0,get:function(){return e.errorMessages}});function t(f){return!f.match(/[^a-f0-9]/i)?parseInt(f,16):NaN}function n(f,p,g){const m=t(f);if(Number.isNaN(m)||g!==void 0&&g!==f.length)throw new SyntaxError(e.errorMessages.get(p));return m}function i(f){const p=n(f,e.ErrorType.MalformedHexadecimal,2);return String.fromCharCode(p)}function s(f,p){const g=n(f,e.ErrorType.MalformedUnicode,4);if(p!==void 0){const m=n(p,e.ErrorType.MalformedUnicode,4);return String.fromCharCode(g,m)}return String.fromCharCode(g)}function a(f){return f.charAt(0)==="{"&&f.charAt(f.length-1)==="}"}function o(f){if(!a(f))throw new SyntaxError(e.errorMessages.get(e.ErrorType.MalformedUnicode));const p=f.slice(1,-1),g=n(p,e.ErrorType.MalformedUnicode);try{return String.fromCodePoint(g)}catch(m){throw m instanceof RangeError?new SyntaxError(e.errorMessages.get(e.ErrorType.CodePointLimit)):m}}function u(f,p=!1){if(p)throw new SyntaxError(e.errorMessages.get(e.ErrorType.OctalDeprecation));const g=parseInt(f,8);return String.fromCharCode(g)}const l=new Map([["b","\b"],["f","\f"],["n",`
`],["r","\r"],["t","	"],["v","\v"],["0","\0"]]);function c(f){return l.get(f)||f}const h=/\\(?:(\\)|x([\s\S]{0,2})|u(\{[^}]*\}?)|u([\s\S]{4})\\u([^{][\s\S]{0,3})|u([\s\S]{0,4})|([0-3]?[0-7]{1,2})|([\s\S])|$)/g;function d(f,p=!1){return f.replace(h,function(g,m,_,y,x,b,T,S,w){if(m!==void 0)return"\\";if(_!==void 0)return i(_);if(y!==void 0)return o(y);if(x!==void 0)return s(x,b);if(T!==void 0)return s(T);if(S==="0")return"\0";if(S!==void 0)return u(S,!p);if(w!==void 0)return c(w);throw new SyntaxError(e.errorMessages.get(e.ErrorType.EndOfString))})}r.unraw=d,r.default=d})(cc)),cc}var IH=MH();const wn=r=>typeof r=="string",qH=r=>typeof r=="function",oA=new Map,uA="en";function fc(r){return[...Array.isArray(r)?r:[r],uA]}function dc(r,e,t){const n=fc(r);t||(t="default");let i;if(typeof t=="string")switch(i={day:"numeric",month:"short",year:"numeric"},t){case"full":i.weekday="long";case"long":i.month="long";break;case"short":i.month="numeric";break}else i=t;return Fo(()=>Do("date",n,t),()=>new Intl.DateTimeFormat(n,i)).format(wn(e)?new Date(e):e)}function kH(r,e,t){let n;if(t||(t="default"),typeof t=="string")switch(n={second:"numeric",minute:"numeric",hour:"numeric"},t){case"full":case"long":n.timeZoneName="short";break;case"short":delete n.second}else n=t;return dc(r,e,n)}function pc(r,e,t){const n=fc(r);return Fo(()=>Do("number",n,t),()=>new Intl.NumberFormat(n,t)).format(e)}function lA(r,e,t,{offset:n=0,...i}){const s=fc(r),a=e?Fo(()=>Do("plural-ordinal",s),()=>new Intl.PluralRules(s,{type:"ordinal"})):Fo(()=>Do("plural-cardinal",s),()=>new Intl.PluralRules(s,{type:"cardinal"}));return i[t]??i[a.select(t-n)]??i.other}function Fo(r,e){const t=r();let n=oA.get(t);return n||(n=e(),oA.set(t,n)),n}function Do(r,e,t){const n=e.join("-");return`${r}-${n}-${JSON.stringify(t)}`}const cA=/\\u[a-fA-F0-9]{4}|\\x[a-fA-F0-9]{2}/,hA="%__lingui_octothorpe__%",OH=(r,e,t={})=>{const n=e||r,i=a=>typeof a=="object"?a:t[a],s=(a,o)=>{const u=Object.keys(t).length?i("number"):void 0,l=pc(n,a,u);return o.replace(new RegExp(hA,"g"),l)};return{plural:(a,o)=>{const{offset:u=0}=o,l=lA(n,!1,a,o);return s(a-u,l)},selectordinal:(a,o)=>{const{offset:u=0}=o,l=lA(n,!0,a,o);return s(a-u,l)},select:BH,number:(a,o)=>pc(n,a,i(o)||{style:o}),date:(a,o)=>dc(n,a,i(o)||o),time:(a,o)=>kH(n,a,i(o)||o)}},BH=(r,e)=>e[r]??e.other;function LH(r,e,t){return(n={},i)=>{const s=OH(e,t,i),a=(u,l=!1)=>Array.isArray(u)?u.reduce((c,h)=>{if(h==="#"&&l)return c+hA;if(wn(h))return c+h;const[d,f,p]=h;let g={};f==="plural"||f==="selectordinal"||f==="select"?Object.entries(p).forEach(([_,y])=>{g[_]=a(y,f==="plural"||f==="selectordinal")}):g=p;let m;if(f){const _=s[f];m=_(n[d],g)}else m=n[d];return m==null?c:c+m},""):u,o=a(r);return wn(o)&&cA.test(o)?IH.unraw(o):wn(o)?o:o?String(o):""}}var FH=Object.defineProperty,DH=(r,e,t)=>e in r?FH(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,UH=(r,e,t)=>(DH(r,e+"",t),t);let WH=class{constructor(){UH(this,"_events",{})}on(e,t){var n;return(n=this._events)[e]??(n[e]=[]),this._events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){const n=this._getListeners(e);if(!n)return;const i=n.indexOf(t);~i&&n.splice(i,1)}emit(e,...t){const n=this._getListeners(e);n&&n.map(i=>i.apply(this,t))}_getListeners(e){const t=this._events[e];return Array.isArray(t)?t:!1}};var NH=Object.defineProperty,GH=(r,e,t)=>e in r?NH(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ti=(r,e,t)=>(GH(r,typeof e!="symbol"?e+"":e,t),t);class zH extends WH{constructor(e){super(),ti(this,"_locale",""),ti(this,"_locales"),ti(this,"_localeData",{}),ti(this,"_messages",{}),ti(this,"_missing"),ti(this,"_messageCompiler"),ti(this,"t",this._.bind(this)),e.missing!=null&&(this._missing=e.missing),e.messages!=null&&this.load(e.messages),e.localeData!=null&&this.loadLocaleData(e.localeData),(typeof e.locale=="string"||e.locales)&&this.activate(e.locale??uA,e.locales)}get locale(){return this._locale}get locales(){return this._locales}get messages(){return this._messages[this._locale]??{}}get localeData(){return this._localeData[this._locale]??{}}_loadLocaleData(e,t){const n=this._localeData[e];n?Object.assign(n,t):this._localeData[e]=t}setMessagesCompiler(e){return this._messageCompiler=e,this}loadLocaleData(e,t){typeof e=="string"?this._loadLocaleData(e,t):Object.keys(e).forEach(n=>this._loadLocaleData(n,e[n])),this.emit("change")}_load(e,t){const n=this._messages[e];n?Object.assign(n,t):this._messages[e]=t}load(e,t){typeof e=="string"&&typeof t=="object"?this._load(e,t):Object.entries(e).forEach(([n,i])=>this._load(n,i)),this.emit("change")}loadAndActivate({locale:e,locales:t,messages:n}){this._locale=e,this._locales=t||void 0,this._messages[this._locale]=n,this.emit("change")}activate(e,t){this._locale=e,this._locales=t,this.emit("change")}_(e,t,n){if(!this.locale)throw new Error("Lingui: Attempted to call a translation function without setting a locale.\nMake sure to call `i18n.activate(locale)` before using Lingui functions.\nThis issue may also occur due to a race condition in your initialization logic.");let i=n==null?void 0:n.message;e||(e=""),wn(e)||(t=e.values||t,i=e.message,e=e.id);const s=this.messages[e],a=s===void 0,o=this._missing;if(o&&a)return qH(o)?o(this._locale,e):o;a&&this.emit("missing",{id:e,locale:this._locale});let u=s||i||e;return wn(u)&&(this._messageCompiler?u=this._messageCompiler(u):console.warn(`Uncompiled message detected! Message:

> ${u}

That means you use raw catalog or your catalog doesn't have a translation for the message and fallback was used.
ICU features such as interpolation and plurals will not work properly for that message. 

Please compile your catalog first. 
`)),wn(u)&&cA.test(u)?JSON.parse(`"${u}"`):wn(u)?u:LH(u,this._locale,this._locales)(t,n==null?void 0:n.formats)}date(e,t){return dc(this._locales||this._locale,e,t)}number(e,t){return pc(this._locales||this._locale,e,t)}}function HH(r={}){return new zH(r)}const jH=HH(),Uo=We({i18n:jH}),ue={init:(r,e)=>{Uo.i18n.load(r,e),Uo.i18n.activate(r)},translate:r=>Uo.i18n._(Uo.i18n.t(r))},Vs=1e6,$H=100,YH=[0,2,5,7,10,13,15,16,20,23,25,26,28,29,30,32,36,37,38],fA=r=>{const{method:e,endpoint:t,variables:n}=r;return(r.fetch??fetch)(t,{method:e,headers:{"Content-Type":"application/json"},...e==="GET"?{}:{body:JSON.stringify(n)}})},Wo={post:async function(e){const t=await fA({method:"POST",variables:e.variables,endpoint:`https://${e.rgsUrl}${e.url}`});return t.status!==200&&console.error("error",t),await t.json()},get:async function(e){const t=await fA({method:"GET",endpoint:`https://${e.rgsUrl}${e.url}`});return t.status!==200&&console.error("error",t),await t.json()}},VH=async r=>await Wo.post({rgsUrl:r.rgsUrl,url:"/wallet/authenticate",variables:{sessionID:r.sessionID,language:r.language}}),XH=async r=>await Wo.post({rgsUrl:r.rgsUrl,url:"/wallet/end-round",variables:{sessionID:r.sessionID}}),KH=async r=>await Wo.post({rgsUrl:r.rgsUrl,url:"/game/search",variables:{mode:r.mode,search:r.search}}),ZH=async r=>await Wo.post({rgsUrl:r.rgsUrl,url:"/wallet/play",variables:{mode:r.mode,currency:r.currency,sessionID:r.sessionID,amount:r.amount*Vs}});function JH(r,e){wt(e,!0);let t=it(!1);const n=async()=>{var o,u,l,c,h;if(window.location.hostname==="localhost"){console.log("Development mode: Skipping RGS authentication"),K.betAmount=1,K.wageredBetAmount=1,K.activeBetModeKey="normal";return}try{const d=await VH({rgsUrl:Qt.rgsUrl(),sessionID:Qt.sessionID(),language:Qt.lang()});if(d!=null&&d.error)throw d;if(d!=null&&d.balance&&(K.currency=d.balance.currency,K.balanceAmount=d.balance.amount/Vs),d!=null&&d.config&&(Oo.jurisdiction=(o=d==null?void 0:d.config)==null?void 0:o.jurisdiction,Oo.betAmountOptions=(((u=d.config)==null?void 0:u.betLevels)||[]).map(f=>f/Vs),Oo.betMenuOptions=Oo.betAmountOptions.filter((f,p)=>YH.includes(p))),d!=null&&d.round){if((l=d.round)!=null&&l.state&&(K.lastBet=d.round),(c=d.round)!=null&&c.amount){const f=d.round.amount>0?d.round.amount/Vs:0;K.betAmount=f,K.wageredBetAmount=f}(h=d.round)!=null&&h.mode&&(K.activeBetModeKey=d.round.mode)}}catch(d){window.location.hostname==="localhost"?(console.warn("Development mode: RGS authentication failed (expected):",d),K.betAmount=1,K.wageredBetAmount=1,K.activeBetModeKey="normal"):(console.error(d),ei.modal={name:"error",error:d})}};Yr(async()=>{await n(),pe(t,!0)});var i=Cr(),s=lt(i);{var a=o=>{var u=Cr(),l=lt(u);vo(l,()=>e.children),Ge(o,u)};Gt(s,o=>{ie(t)&&o(a)})}Ge(r,i),St()}function QH(r,e){wt(e,!0);let t=it(!1);const n=o=>{const u=e.messagesMap[o];return e.debug&&console.log({messages:u}),u};Yr(()=>{try{const o=n(Qt.lang());ue.init(Qt.lang(),o)}catch(o){console.error("Loading fallback locale 'en' because of error",o);try{const u=n("en");ue.init("en",u)}catch(u){console.error("Loading fallback locale 'en' without any messages because of error",u),ue.init("en",{})}}pe(t,!0)});var i=Cr(),s=lt(i);{var a=o=>{var u=Cr(),l=lt(u);vo(l,()=>e.children),Ge(o,u)};Gt(s,o=>{ie(t)&&o(a)})}Ge(r,i),St()}hT(["click"]),hT(["change"]);class dA{constructor(e,t){ot(this,Ga);ot(this,za);Ti(this,Ga,e),Ti(this,za,lz(t))}get current(){return ae(this,za).call(this),ae(this,Ga).call(this)}}Ga=new WeakMap,za=new WeakMap;function pA(r){return Object.prototype.toString.call(r)==="[object Date]"}function e4(r){return r}function t4(r){return--r*r*((1.70158+1)*r+1.70158)+1}function gc(r,e){if(r===e||r!==r)return()=>r;const t=typeof r;if(t!==typeof e||Array.isArray(r)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(r)){const n=e.map((i,s)=>gc(r[s],i));return i=>n.map(s=>s(i))}if(t==="object"){if(!r||!e)throw new Error("Object cannot be null");if(pA(r)&&pA(e)){const s=r.getTime(),o=e.getTime()-s;return u=>new Date(s+u*o)}const n=Object.keys(e),i={};return n.forEach(s=>{i[s]=gc(r[s],e[s])}),s=>{const a={};return n.forEach(o=>{a[o]=i[o](s)}),a}}if(t==="number"){const n=e-r;return i=>r+i*n}return()=>e}const mS=class mS{constructor(e,t={}){ot(this,vn,It(void 0));ot(this,ws,It(void 0));ot(this,Ha);ot(this,wi,null);ae(this,vn).v=ae(this,ws).v=e,Ti(this,Ha,t)}static of(e,t){const n=new mS(e(),t);return io(()=>{n.set(e())}),n}set(e,t){var h;pe(ae(this,ws),e);let{delay:n=0,duration:i=400,easing:s=e4,interpolate:a=gc}={...ae(this,Ha),...t};if(i===0)return(h=ae(this,wi))==null||h.abort(),pe(ae(this,vn),e),Promise.resolve();const o=Er.now()+n;let u,l=!1,c=ae(this,wi);return Ti(this,wi,mT(d=>{if(d<o)return!0;if(!l){l=!0;const p=ae(this,vn).v;u=a(p,e),typeof i=="function"&&(i=i(p,e)),c==null||c.abort()}const f=d-o;return f>i?(pe(ae(this,vn),e),!1):(pe(ae(this,vn),u(s(f/i))),!0)})),ae(this,wi).promise}get current(){return ie(ae(this,vn))}get target(){return ie(ae(this,ws))}set target(e){this.set(e)}};vn=new WeakMap,ws=new WeakMap,Ha=new WeakMap,wi=new WeakMap;let mc=mS;const Kr=1e3,Xs=()=>typeof navigator<"u"?navigator.userAgent:"",No=()=>typeof navigator<"u"&&(/iPad|iPhone|iPod/.test(Xs())||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),r4=()=>typeof navigator<"u"&&/Android/.test(Xs()),n4=()=>typeof navigator<"u"&&/Mac OS X/.test(Xs())&&!No(),i4=()=>typeof navigator<"u"&&/Safari/.test(Xs())&&!/Chrome/.test(Xs()),s4=()=>No()||r4(),a4=()=>{if(typeof window>"u")return;const r=()=>{const e=window.innerHeight*.01;if(document.documentElement.style.setProperty("--vh",`${e}px`),No()){const t=parseInt(getComputedStyle(document.documentElement).getPropertyValue("env(safe-area-inset-bottom)")||"0");document.documentElement.style.setProperty("--safe-area-bottom",`${t}px`)}};if(r(),window.addEventListener("resize",r),window.addEventListener("orientationchange",()=>{const e=No()?500:300;setTimeout(r,e)}),s4()){let e=0;document.addEventListener("touchend",t=>{const n=new Date().getTime();n-e<=300&&t.preventDefault(),e=n},!1)}document.body.addEventListener("touchstart",e=>{if(e.touches.length!==1)return;const t=e.touches[0].clientY,n=e.target;t<=10&&n.scrollTop<=0&&e.preventDefault()},{passive:!1}),document.body.addEventListener("touchmove",e=>{e.target.closest(".scrollable")||e.preventDefault()},{passive:!1}),n4()&&i4()&&(document.body.style.overscrollBehavior="none"),typeof navigator<"u"&&navigator.platform&&navigator.platform.includes("Linux")&&(document.body.style.setProperty("font-smooth","always"),document.body.style.setProperty("-webkit-font-smoothing","antialiased"),document.body.style.setProperty("-moz-osx-font-smoothing","grayscale")),window.addEventListener("webglcontextlost",e=>{console.warn("WebGL context lost. Preventing default to allow restoration."),e.preventDefault()}),window.addEventListener("webglcontextrestored",()=>{console.log("WebGL context restored."),window.dispatchEvent(new CustomEvent("pixi-context-restore"))})},o4=`
	:root {
		--vh: 1vh;
		--safe-area-top: env(safe-area-inset-top, 0px);
		--safe-area-bottom: env(safe-area-inset-bottom, 0px);
		--safe-area-left: env(safe-area-inset-left, 0px);
		--safe-area-right: env(safe-area-inset-right, 0px);
	}
	
	/* Cross-platform viewport fixes */
	html, body {
		height: 100vh;
		height: calc(var(--vh, 1vh) * 100);
		overflow: hidden;
		position: fixed;
		width: 100%;
		-webkit-overflow-scrolling: none;
		-webkit-user-select: none;
		-webkit-tap-highlight-color: transparent;
		-webkit-touch-callout: none;
		
		/* macOS Safari elastic scrolling fix */
		overscroll-behavior: none;
		-webkit-overscroll-behavior: none;
	}
	
	/* Prevent text selection and context menus in games */
	* {
		-webkit-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
		-webkit-tap-highlight-color: transparent;
		-webkit-touch-callout: none;
	}
	
	/* iOS safe area support */
	@supports (padding: max(0px)) {
		.ios-safe-area-top {
			padding-top: max(var(--safe-area-top), 0px);
		}
		.ios-safe-area-bottom {
			padding-bottom: max(var(--safe-area-bottom), 0px);
		}
	}
	
	/* Mobile landscape optimizations */
	@media screen and (orientation: landscape) and (max-device-width: 1024px) {
		html, body {
			min-height: 100vh;
			min-height: calc(var(--vh, 1vh) * 100);
		}
	}
	
	/* iOS specific fixes */
	@media screen and (-webkit-min-device-pixel-ratio: 2) {
		body {
			-webkit-text-size-adjust: 100%;
		}
	}
	
	/* Linux font rendering improvements */
	@media screen and (platform: linux) {
		* {
			font-smooth: always;
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;
		}
	}
	
	/* High DPI display optimizations */
	@media screen and (-webkit-min-device-pixel-ratio: 2),
	       screen and (min-resolution: 192dpi) {
		canvas {
			image-rendering: -webkit-optimize-contrast;
			image-rendering: crisp-edges;
		}
	}
	
	/* Scrollable areas (for modal content etc.) */
	.scrollable {
		-webkit-overflow-scrolling: touch;
		overflow-scrolling: touch;
	}
	
	/* WebKit appearance fixes */
	input, button, textarea, select {
		-webkit-appearance: none;
		-moz-appearance: none;
		appearance: none;
		border-radius: 0;
	}
	
	/* Focus outline improvements for keyboard navigation */
	button:focus-visible,
	input:focus-visible,
	[tabindex]:focus-visible {
		outline: 2px solid #4A90E2;
		outline-offset: 2px;
	}
`;function u4(r,e){wt(e,!1),Yr(()=>{const t=document.createElement("style");return t.textContent=o4,document.head.appendChild(t),()=>{document.head.contains(t)&&document.head.removeChild(t)}}),Dl(),St()}const l4=r=>r/$H,c4=r=>{const e=l4(r);return K.wageredBetAmount*e},h4=new dA(()=>window.innerWidth,r=>cT(window,"resize",r)),f4=new dA(()=>window.innerHeight,r=>cT(window,"resize",r)),gA={wideSquare:1.3,narrowSquare:.8},Go={smallMobile:375,mobile:480,tablet:820,largeTablet:1024};let vc=null,mA=it(We({width:1,height:1}));const vA=()=>{vc&&clearTimeout(vc),vc=setTimeout(()=>{pe(mA,We({width:h4.current??1,height:f4.current??1}))},100)},_A=r=>r.width/(r.height||1),d4={desktop:{width:1920,height:1080},tablet:{width:1920,height:1920},landscape:{width:1920,height:1080},portrait:{width:1080,height:1920}},p4=r=>{if(typeof window<"u"&&a4(),typeof window<"u"){vA();const g=()=>{vA()};window.addEventListener("resize",g),window.addEventListener("orientationchange",g)}const e=()=>ie(mA),t=()=>_A(e()),n=()=>t()>=gA.wideSquare?"longWidth":t()<=gA.narrowSquare?"longHeight":"almostSquare",i=()=>{const g=Math.min(e().width,e().height);return g<=Go.smallMobile?"smallMobile":g<=Go.mobile?"mobile":g<=Go.tablet?"tablet":g<=Go.largeTablet?"largeTablet":"desktop"},s=()=>{t();const g=e().width,m=e().height,_=i()==="mobile"||i()==="smallMobile",y=i()==="tablet",x=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;return _||x&&y?m>g?"portrait":"landscape":n()==="almostSquare"?"tablet":n()==="longHeight"?"portrait":i()==="mobile"||i()==="smallMobile"?"landscape":"desktop"},a=()=>["portrait","almostSquare"].includes(s()),o=g=>()=>{const m=e().width*.5,_=e().height*.5,y=g[s()],x=e().width/y.width,b=e().height/y.height;let T=Math.min(x,b);return(i()==="mobile"||i()==="smallMobile")&&(T=Math.min(T,1)),T=Math.max(.3,Math.min(T,2)),{x:m,y:_,scale:T,width:y.width,height:y.height,anchor:.5}},u=o(r.mainSizesMap),l=o(d4),c=({scale:g,ratio:m})=>{const _=_A(e()),y=e();if(_<m){const T=y.height*g,S=y.height*1.1;return{x:y.width/2,y:y.height/2,height:Math.max(T,S)}}const x=y.width*g,b=y.width*1.1;return{x:y.width/2,y:y.height/2,width:Math.max(x,b)}},h=({scale:g})=>c({scale:g,ratio:r.backgroundRatio.normal}),d=({scale:g})=>c({scale:g,ratio:r.backgroundRatio.portrait});return{stateLayout:We({showLoadingScreen:!0}),stateLayoutDerived:{canvasSizes:e,canvasRatio:t,canvasRatioType:n,canvasSizeType:i,layoutType:s,isStacked:a,mainLayout:u,mainLayoutStandard:l,normalBackgroundLayout:h,portraitBackgroundLayout:d}}},yA="@@layout";function g4(r){eo(yA,r)}function m4(){return Ms(yA)}const v4={bet:()=>ue.translate("BET"),max:()=>ue.translate("MAX"),betMenu:()=>ue.translate("BET MENU"),selectYourBet:()=>ue.translate("SELECT YOUR BET"),confirm:()=>ue.translate("CONFIRM"),masterVolume:()=>ue.translate("MASTER VOLUME"),musicVolume:()=>ue.translate("MUSIC VOLUME"),soundEffectVolume:()=>ue.translate("SOUND EFFECT VOLUME"),autoSpins:()=>ue.translate("AUTO SPINS"),numberOfRounds:()=>ue.translate("NUMBER OF ROUNDS"),advanced:()=>ue.translate("ADVANCED"),singleWinLimit:()=>ue.translate("SINGLE WIN LIMIT"),lossLimit:()=>ue.translate("LOSS LIMIT"),startAutoplay:()=>ue.translate("START AUTOPLAY"),notification:()=>ue.translate("NOTIFICATION"),autoSpinsStopInfo:()=>ue.translate("AUTO PLAY HAS STOPPED DUE TO"),insufficientFunds:()=>ue.translate("INSUFFICIENT FUNDS TO PLACE THIS BET. PLEASE ADD FUNDS TO YOUR ACCOUNT OR LOWER THE BET LEVEL."),lossLimitReached:()=>ue.translate("LOSS LIMIT REACHED"),singleWinLimitReached:()=>ue.translate("SINGLE WIN LIMIT REACHED"),settings:()=>ue.translate("SETTINGS")};We({selectedBetModeKey:"BASE"});var Ks={},zo={},Ho={},bA;function xA(){if(bA)return Ho;bA=1,Object.defineProperty(Ho,"__esModule",{value:!0});var r=function(e){if("getBBox"in e){var t=e.getBBox();return Object.freeze({height:t.height,left:0,top:0,width:t.width})}else{var n=window.getComputedStyle(e);return Object.freeze({height:parseFloat(n.height||"0"),left:parseFloat(n.paddingLeft||"0"),top:parseFloat(n.paddingTop||"0"),width:parseFloat(n.width||"0")})}};return Ho.ContentRect=r,Ho}var wA;function _4(){if(wA)return zo;wA=1,Object.defineProperty(zo,"__esModule",{value:!0});var r=xA(),e=(function(){function t(n){this.target=n,this.$$broadcastWidth=this.$$broadcastHeight=0}return Object.defineProperty(t.prototype,"broadcastWidth",{get:function(){return this.$$broadcastWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"broadcastHeight",{get:function(){return this.$$broadcastHeight},enumerable:!0,configurable:!0}),t.prototype.isActive=function(){var n=r.ContentRect(this.target);return!!n&&(n.width!==this.broadcastWidth||n.height!==this.broadcastHeight)},t})();return zo.ResizeObservation=e,zo}var jo={},SA;function y4(){if(SA)return jo;SA=1,Object.defineProperty(jo,"__esModule",{value:!0});var r=xA(),e=(function(){function t(n){this.target=n,this.contentRect=r.ContentRect(n)}return t})();return jo.ResizeObserverEntry=e,jo}var TA;function b4(){if(TA)return Ks;TA=1,Object.defineProperty(Ks,"__esModule",{value:!0});var r=_4(),e=y4(),t=[],n=(function(){function T(S){this.$$observationTargets=[],this.$$activeTargets=[],this.$$skippedTargets=[];var w=a(S);if(w)throw TypeError(w);this.$$callback=S}return T.prototype.observe=function(S){var w=o("observe",S);if(w)throw TypeError(w);var M=u(this.$$observationTargets,S);M>=0||(this.$$observationTargets.push(new r.ResizeObservation(S)),i(this))},T.prototype.unobserve=function(S){var w=o("unobserve",S);if(w)throw TypeError(w);var M=u(this.$$observationTargets,S);M<0||(this.$$observationTargets.splice(M,1),this.$$observationTargets.length===0&&s(this))},T.prototype.disconnect=function(){this.$$observationTargets=[],this.$$activeTargets=[],s(this)},T})();Ks.ResizeObserver=n;function i(T){var S=t.indexOf(T);S<0&&(t.push(T),_())}function s(T){var S=t.indexOf(T);S>=0&&(t.splice(S,1),x())}function a(T){if(typeof T>"u")return"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.";if(typeof T!="function")return"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function."}function o(T,S){if(typeof S>"u")return"Failed to execute '"+T+"' on 'ResizeObserver': 1 argument required, but only 0 present.";if(!(S&&S.nodeType===window.Node.ELEMENT_NODE))return"Failed to execute '"+T+"' on 'ResizeObserver': parameter 1 is not of type 'Element'."}function u(T,S){for(var w=0;w<T.length;w+=1)if(T[w].target===S)return w;return-1}var l=function(T){t.forEach(function(S){S.$$activeTargets=[],S.$$skippedTargets=[],S.$$observationTargets.forEach(function(w){if(w.isActive()){var M=p(w.target);M>T?S.$$activeTargets.push(w):S.$$skippedTargets.push(w)}})})},c=function(){return t.some(function(T){return!!T.$$activeTargets.length})},h=function(){return t.some(function(T){return!!T.$$skippedTargets.length})},d=function(){var T=1/0;return t.forEach(function(S){if(S.$$activeTargets.length){var w=[];S.$$activeTargets.forEach(function(M){var q=new e.ResizeObserverEntry(M.target);w.push(q),M.$$broadcastWidth=q.contentRect.width,M.$$broadcastHeight=q.contentRect.height;var O=p(M.target);O<T&&(T=O)}),S.$$callback(w,S),S.$$activeTargets=[]}}),T},f=function(){var T=new window.ErrorEvent("ResizeLoopError",{message:"ResizeObserver loop completed with undelivered notifications."});window.dispatchEvent(T)},p=function(T){for(var S=0;T.parentNode;)T=T.parentNode,S+=1;return S},g=function(){var T=0;for(l(T);c();)T=d(),l(T);h()&&f()},m,_=function(){m||y()},y=function(){m=window.requestAnimationFrame(function(){g(),y()})},x=function(){m&&!t.some(function(T){return!!T.$$observationTargets.length})&&(window.cancelAnimationFrame(m),m=void 0)},b=function(){return window.ResizeObserver=n};return Ks.install=b,Ks}b4();function x4(r,e){wt(e,!0);var t=Cr(),n=lt(t);vo(n,()=>e.children),Ge(r,t),St()}const w4={en:{"MASTER VOLUME":"MASTER VOLUME"},zh:{"MASTER VOLUME":""}};function S4(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function T4(){const r=S4();if(r.__xstate__)return r.__xstate__}const A4=r=>{if(typeof window>"u")return;const e=T4();e&&e.register(r)};class AA{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const RA=".",R4="",PA="",P4="#",C4="*",CA="xstate.init",$o="xstate.stop";function E4(r,e){return{type:`xstate.after.${r}.${e}`}}function _c(r,e){return{type:`xstate.done.state.${r}`,output:e}}function M4(r,e){return{type:`xstate.done.actor.${r}`,output:e,actorId:r}}function I4(r,e){return{type:`xstate.error.actor.${r}`,error:e,actorId:r}}function EA(r){return{type:CA,input:r}}function Zr(r){setTimeout(()=>{throw r})}const q4=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yc(r,e){const t=MA(r),n=MA(e);return typeof n=="string"?typeof t=="string"?n===t:!1:typeof t=="string"?t in n:Object.keys(t).every(i=>i in n?yc(t[i],n[i]):!1)}function bc(r){if(kA(r))return r;const e=[];let t="";for(let n=0;n<r.length;n++){switch(r.charCodeAt(n)){case 92:t+=r[n+1],n++;continue;case 46:e.push(t),t="";continue}t+=r[n]}return e.push(t),e}function MA(r){if(fj(r))return r.value;if(typeof r!="string")return r;const e=bc(r);return k4(e)}function k4(r){if(r.length===1)return r[0];const e={};let t=e;for(let n=0;n<r.length-1;n++)if(n===r.length-2)t[r[n]]=r[n+1];else{const i=t;t={},i[r[n]]=t}return e}function IA(r,e){const t={},n=Object.keys(r);for(let i=0;i<n.length;i++){const s=n[i];t[s]=e(r[s],s,r,i)}return t}function qA(r){return kA(r)?r:[r]}function Sn(r){return r===void 0?[]:qA(r)}function xc(r,e,t,n){return typeof r=="function"?r({context:e,event:t,self:n}):r}function kA(r){return Array.isArray(r)}function O4(r){return r.type.startsWith("xstate.error.actor")}function Ni(r){return qA(r).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function OA(r){if(!(r===void 0||r===R4))return Sn(r)}function wc(r,e,t){var s,a,o;const n=typeof r=="object",i=n?r:void 0;return{next:(s=n?r.next:r)==null?void 0:s.bind(i),error:(a=n?r.error:e)==null?void 0:a.bind(i),complete:(o=n?r.complete:t)==null?void 0:o.bind(i)}}function BA(r,e){return`${e}.${r}`}function Sc(r,e){const t=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!t)return r.implementations.actors[e];const[,n,i]=t,a=r.getStateNodeById(i).config.invoke;return(Array.isArray(a)?a[n]:a).src}function LA(r,e){return`${r.sessionId}.${e}`}let B4=0;function L4(r,e){const t=new Map,n=new Map,i=new WeakMap,s=new Set,a={},{clock:o,logger:u}=e,l={schedule:(d,f,p,g,m=Math.random().toString(36).slice(2))=>{const _={source:d,target:f,event:p,delay:g,id:m,startedAt:Date.now()},y=LA(d,m);h._snapshot._scheduledEvents[y]=_;const x=o.setTimeout(()=>{delete a[y],delete h._snapshot._scheduledEvents[y],h._relay(d,f,p)},g);a[y]=x},cancel:(d,f)=>{const p=LA(d,f),g=a[p];delete a[p],delete h._snapshot._scheduledEvents[p],g!==void 0&&o.clearTimeout(g)},cancelAll:d=>{for(const f in h._snapshot._scheduledEvents){const p=h._snapshot._scheduledEvents[f];p.source===d&&l.cancel(d,p.id)}}},c=d=>{if(!s.size)return;const f={...d,rootId:r.sessionId};s.forEach(p=>{var g;return(g=p.next)==null?void 0:g.call(p,f)})},h={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${B4++}`,_register:(d,f)=>(t.set(d,f),d),_unregister:d=>{t.delete(d.sessionId);const f=i.get(d);f!==void 0&&(n.delete(f),i.delete(d))},get:d=>n.get(d),_set:(d,f)=>{const p=n.get(d);if(p&&p!==f)throw new Error(`Actor with system ID '${d}' already exists.`);n.set(d,f),i.set(f,d)},inspect:d=>{const f=wc(d);return s.add(f),{unsubscribe(){s.delete(f)}}},_sendInspectionEvent:c,_relay:(d,f,p)=>{h._sendInspectionEvent({type:"@xstate.event",sourceRef:d,actorRef:f,event:p}),f._send(p)},scheduler:l,getSnapshot:()=>({_scheduledEvents:{...h._snapshot._scheduledEvents}}),start:()=>{const d=h._snapshot._scheduledEvents;h._snapshot._scheduledEvents={};for(const f in d){const{source:p,target:g,event:m,delay:_,id:y}=d[f];l.schedule(p,g,m,_,y)}},_clock:o,_logger:u};return h}let Tc=!1;const Ac=1;let qt=(function(r){return r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r})({});const F4={clock:{setTimeout:(r,e)=>setTimeout(r,e),clearTimeout:r=>clearTimeout(r)},logger:console.log.bind(console),devTools:!1};class D4{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new AA(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=qt.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const n={...F4,...t},{clock:i,logger:s,parent:a,syncSnapshot:o,id:u,systemId:l,inspect:c}=n;this.system=a?a.system:L4(this,{clock:i,logger:s}),c&&!a&&this.system.inspect(wc(c)),this.sessionId=this.system._bookId(),this.id=u??this.sessionId,this.logger=(t==null?void 0:t.logger)??this.system._logger,this.clock=(t==null?void 0:t.clock)??this.system._clock,this._parent=a,this._syncSnapshot=o,this.options=n,this.src=n.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:h=>{this._deferred.push(h)},system:this.system,stopChild:h=>{if(h._parent!==this)throw new Error(`Cannot stop child actor ${h.id} of ${this.id} because it is not a child`);h._stop()},emit:h=>{const d=this.eventListeners.get(h.type),f=this.eventListeners.get("*");if(!d&&!f)return;const p=[...d?d.values():[],...f?f.values():[]];for(const g of p)g(h)},actionExecutor:h=>{const d=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:h.type,params:h.params}}),!h.exec)return;const f=Tc;try{Tc=!0,h.exec(h.info,h.params)}finally{Tc=f}};this._processingStatus===qt.Running?d():this._deferred.push(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),l&&(this._systemId=l,this.system._set(l,this)),this._initState((t==null?void 0:t.snapshot)??(t==null?void 0:t.state)),l&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var t;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(t=this.options)==null?void 0:t.input)}catch(n){this._snapshot={status:"error",output:void 0,error:n}}}update(e,t){var i,s;this._snapshot=e;let n;for(;n=this._deferred.shift();)try{n()}catch(a){this._deferred.length=0,this._snapshot={...e,status:"error",error:a}}switch(this._snapshot.status){case"active":for(const a of this.observers)try{(i=a.next)==null||i.call(a,e)}catch(o){Zr(o)}break;case"done":for(const a of this.observers)try{(s=a.next)==null||s.call(a,e)}catch(o){Zr(o)}this._stopProcedure(),this._complete(),this._doneEvent=M4(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,n){var s;const i=wc(e,t,n);if(this._processingStatus!==qt.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(s=i.complete)==null||s.call(i)}catch(a){Zr(a)}break;case"error":{const a=this._snapshot.error;if(!i.error)Zr(a);else try{i.error(a)}catch(o){Zr(o)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,t){let n=this.eventListeners.get(e);n||(n=new Set,this.eventListeners.set(e,n));const i=t.bind(void 0);return n.add(i),{unsubscribe:()=>{n.delete(i)}}}start(){if(this._processingStatus===qt.Running)return this;this._syncSnapshot&&this.subscribe({next:n=>{n.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:n})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=qt.Running;const e=EA(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(n){return this._snapshot={...this._snapshot,status:"error",error:n},this._error(n),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,n;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){n={err:i}}if(n){const{err:i}=n;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(t,e),e.type===$o&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===qt.Stopped?this:(this.mailbox.clear(),this._processingStatus===qt.NotStarted?(this._processingStatus=qt.Stopped,this):(this.mailbox.enqueue({type:$o}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const t of this.observers)try{(e=t.complete)==null||e.call(t)}catch(n){Zr(n)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Zr(e);return}let t=!1;for(const n of this.observers){const i=n.error;t||(t=!i);try{i==null||i(e)}catch(s){Zr(s)}}this.observers.clear(),t&&Zr(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,I4(this.id,e))}_stopProcedure(){return this._processingStatus!==qt.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new AA(this._process.bind(this)),this._processingStatus=qt.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==qt.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:A4)(this)}toJSON(){return{xstate$$type:Ac,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[q4](){return this}getSnapshot(){return this._snapshot}}function Zs(r,...[e]){return new D4(r,e)}function U4(r,e,t,n,{sendId:i}){const s=typeof i=="function"?i(t,n):i;return[e,{sendId:s},void 0]}function W4(r,e){r.defer(()=>{r.system.scheduler.cancel(r.self,e.sendId)})}function N4(r){function e(t,n){}return e.type="xstate.cancel",e.sendId=r,e.resolve=U4,e.execute=W4,e}function G4(r,e,t,n,{id:i,systemId:s,src:a,input:o,syncSnapshot:u}){const l=typeof a=="string"?Sc(e.machine,a):a,c=typeof i=="function"?i(t):i;let h,d;return l&&(d=typeof o=="function"?o({context:e.context,event:t.event,self:r.self}):o,h=Zs(l,{id:c,src:a,parent:r.self,syncSnapshot:u,systemId:s,input:d})),[ii(e,{children:{...e.children,[c]:h}}),{id:i,systemId:s,actorRef:h,src:a,input:d},void 0]}function z4(r,{actorRef:e}){e&&r.defer(()=>{e._processingStatus!==qt.Stopped&&e.start()})}function H4(...[r,{id:e,systemId:t,input:n,syncSnapshot:i=!1}={}]){function s(a,o){}return s.type="xstate.spawnChild",s.id=e,s.systemId=t,s.src=r,s.input=n,s.syncSnapshot=i,s.resolve=G4,s.execute=z4,s}function j4(r,e,t,n,{actorRef:i}){const s=typeof i=="function"?i(t,n):i,a=typeof s=="string"?e.children[s]:s;let o=e.children;return a&&(o={...o},delete o[a.id]),[ii(e,{children:o}),a,void 0]}function $4(r,e){if(e){if(r.system._unregister(e),e._processingStatus!==qt.Running){r.stopChild(e);return}r.defer(()=>{r.stopChild(e)})}}function FA(r){function e(t,n){}return e.type="xstate.stopChild",e.actorRef=r,e.resolve=j4,e.execute=$4,e}function Rc(r,e,t,n){const{machine:i}=n,s=typeof r=="function",a=s?r:i.implementations.guards[typeof r=="string"?r:r.type];if(!s&&!a)throw new Error(`Guard '${typeof r=="string"?r:r.type}' is not implemented.'.`);if(typeof a!="function")return Rc(a,e,t,n);const o={context:e,event:t},u=s||typeof r=="string"?void 0:"params"in r?typeof r.params=="function"?r.params({context:e,event:t}):r.params:void 0;return"check"in a?a.check(n,o,a):a(o,u)}const Pc=r=>r.type==="atomic"||r.type==="final";function Gi(r){return Object.values(r.states).filter(e=>e.type!=="history")}function Js(r,e){const t=[];if(e===r)return t;let n=r.parent;for(;n&&n!==e;)t.push(n),n=n.parent;return t}function Yo(r){const e=new Set(r),t=UA(e);for(const n of e)if(n.type==="compound"&&(!t.get(n)||!t.get(n).length))GA(n).forEach(i=>e.add(i));else if(n.type==="parallel"){for(const i of Gi(n))if(i.type!=="history"&&!e.has(i)){const s=GA(i);for(const a of s)e.add(a)}}for(const n of e){let i=n.parent;for(;i;)e.add(i),i=i.parent}return e}function DA(r,e){const t=e.get(r);if(!t)return{};if(r.type==="compound"){const i=t[0];if(i){if(Pc(i))return i.key}else return{}}const n={};for(const i of t)n[i.key]=DA(i,e);return n}function UA(r){const e=new Map;for(const t of r)e.has(t)||e.set(t,[]),t.parent&&(e.has(t.parent)||e.set(t.parent,[]),e.get(t.parent).push(t));return e}function WA(r,e){const t=Yo(e);return DA(r,UA(t))}function Cc(r,e){return e.type==="compound"?Gi(e).some(t=>t.type==="final"&&r.has(t)):e.type==="parallel"?Gi(e).every(t=>Cc(r,t)):e.type==="final"}const Vo=r=>r[0]===P4;function Y4(r,e){return r.transitions.get(e)||[...r.transitions.keys()].filter(n=>{if(n===C4)return!0;if(!n.endsWith(".*"))return!1;const i=n.split("."),s=e.split(".");for(let a=0;a<i.length;a++){const o=i[a],u=s[a];if(o==="*")return a===i.length-1;if(o!==u)return!1}return!0}).sort((n,i)=>i.length-n.length).flatMap(n=>r.transitions.get(n))}function V4(r){const e=r.config.after;if(!e)return[];const t=i=>{const s=E4(i,r.id),a=s.type;return r.entry.push(xj(s,{id:a,delay:i})),r.exit.push(N4(a)),a};return Object.keys(e).flatMap(i=>{const s=e[i],a=typeof s=="string"?{target:s}:s,o=Number.isNaN(+i)?i:+i,u=t(o);return Sn(a).map(l=>({...l,event:u,delay:o}))}).map(i=>{const{delay:s}=i;return{...ri(r,i.event,i),delay:s}})}function ri(r,e,t){const n=OA(t.target),i=t.reenter??!1,s=Z4(r,n),a={...t,actions:Sn(t.actions),guard:t.guard,target:s,source:r,reenter:i,eventType:e,toJSON:()=>({...a,source:`#${r.id}`,target:s?s.map(o=>`#${o.id}`):void 0})};return a}function X4(r){const e=new Map;if(r.config.on)for(const t of Object.keys(r.config.on)){if(t===PA)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const n=r.config.on[t];e.set(t,Ni(n).map(i=>ri(r,t,i)))}if(r.config.onDone){const t=`xstate.done.state.${r.id}`;e.set(t,Ni(r.config.onDone).map(n=>ri(r,t,n)))}for(const t of r.invoke){if(t.onDone){const n=`xstate.done.actor.${t.id}`;e.set(n,Ni(t.onDone).map(i=>ri(r,n,i)))}if(t.onError){const n=`xstate.error.actor.${t.id}`;e.set(n,Ni(t.onError).map(i=>ri(r,n,i)))}if(t.onSnapshot){const n=`xstate.snapshot.${t.id}`;e.set(n,Ni(t.onSnapshot).map(i=>ri(r,n,i)))}}for(const t of r.after){let n=e.get(t.eventType);n||(n=[],e.set(t.eventType,n)),n.push(t)}return e}function K4(r,e){const t=typeof e=="string"?r.states[e]:e?r.states[e.target]:void 0;if(!t&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${r.id}`);const n={source:r,actions:!e||typeof e=="string"?[]:Sn(e.actions),eventType:null,reenter:!1,target:t?[t]:[],toJSON:()=>({...n,source:`#${r.id}`,target:t?[`#${t.id}`]:[]})};return n}function Z4(r,e){if(e!==void 0)return e.map(t=>{if(typeof t!="string")return t;if(Vo(t))return r.machine.getStateNodeById(t);const n=t[0]===RA;if(n&&!r.parent)return Xo(r,t.slice(1));const i=n?r.key+t:t;if(r.parent)try{return Xo(r.parent,i)}catch(s){throw new Error(`Invalid transition definition for state node '${r.id}':
${s.message}`)}else throw new Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function NA(r){const e=OA(r.config.target);return e?{target:e.map(t=>typeof t=="string"?Xo(r.parent,t):t)}:r.parent.initial}function ni(r){return r.type==="history"}function GA(r){const e=zA(r);for(const t of e)for(const n of Js(t,r))e.add(n);return e}function zA(r){const e=new Set;function t(n){if(!e.has(n)){if(e.add(n),n.type==="compound")t(n.initial.target[0]);else if(n.type==="parallel")for(const i of Gi(n))t(i)}}return t(r),e}function zi(r,e){if(Vo(e))return r.machine.getStateNodeById(e);if(!r.states)throw new Error(`Unable to retrieve child state '${e}' from '${r.id}'; no child states exist.`);const t=r.states[e];if(!t)throw new Error(`Child state '${e}' does not exist on '${r.id}'`);return t}function Xo(r,e){if(typeof e=="string"&&Vo(e))try{return r.machine.getStateNodeById(e)}catch{}const t=bc(e).slice();let n=r;for(;t.length;){const i=t.shift();if(!i.length)break;n=zi(n,i)}return n}function Ko(r,e){if(typeof e=="string"){const i=r.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${r.id}'`);return[r,i]}const t=Object.keys(e),n=t.map(i=>zi(r,i)).filter(Boolean);return[r.machine.root,r].concat(n,t.reduce((i,s)=>{const a=zi(r,s);if(!a)return i;const o=Ko(a,e[s]);return i.concat(o)},[]))}function J4(r,e,t,n){const s=zi(r,e).next(t,n);return!s||!s.length?r.next(t,n):s}function Q4(r,e,t,n){const i=Object.keys(e),s=zi(r,i[0]),a=Ec(s,e[i[0]],t,n);return!a||!a.length?r.next(t,n):a}function ej(r,e,t,n){const i=[];for(const s of Object.keys(e)){const a=e[s];if(!a)continue;const o=zi(r,s),u=Ec(o,a,t,n);u&&i.push(...u)}return i.length?i:r.next(t,n)}function Ec(r,e,t,n){return typeof e=="string"?J4(r,e,t,n):Object.keys(e).length===1?Q4(r,e,t,n):ej(r,e,t,n)}function tj(r){return Object.keys(r.states).map(e=>r.states[e]).filter(e=>e.type==="history")}function Tn(r,e){let t=r;for(;t.parent&&t.parent!==e;)t=t.parent;return t.parent===e}function rj(r,e){const t=new Set(r),n=new Set(e);for(const i of t)if(n.has(i))return!0;for(const i of n)if(t.has(i))return!0;return!1}function HA(r,e,t){const n=new Set;for(const i of r){let s=!1;const a=new Set;for(const o of n)if(rj(Ic([i],e,t),Ic([o],e,t)))if(Tn(i.source,o.source))a.add(o);else{s=!0;break}if(!s){for(const o of a)n.delete(o);n.add(i)}}return Array.from(n)}function nj(r){const[e,...t]=r;for(const n of Js(e,void 0))if(t.every(i=>Tn(i,n)))return n}function Mc(r,e){if(!r.target)return[];const t=new Set;for(const n of r.target)if(ni(n))if(e[n.id])for(const i of e[n.id])t.add(i);else for(const i of Mc(NA(n),e))t.add(i);else t.add(n);return[...t]}function jA(r,e){const t=Mc(r,e);if(!t)return;if(!r.reenter&&t.every(i=>i===r.source||Tn(i,r.source)))return r.source;const n=nj(t.concat(r.source));if(n)return n;if(!r.reenter)return r.source.machine.root}function Ic(r,e,t){var i;const n=new Set;for(const s of r)if((i=s.target)!=null&&i.length){const a=jA(s,t);s.reenter&&s.source===a&&n.add(a);for(const o of e)Tn(o,a)&&n.add(o)}return[...n]}function ij(r,e){if(r.length!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0}function qc(r,e,t,n,i,s){if(!r.length)return e;const a=new Set(e._nodes);let o=e.historyValue;const u=HA(r,a,o);let l=e;i||([l,o]=uj(l,n,t,u,a,o,s,t.actionExecutor)),l=ji(l,n,t,u.flatMap(h=>h.actions),s,void 0),l=aj(l,n,t,u,a,s,o,i);const c=[...a];l.status==="done"&&(l=ji(l,n,t,c.sort((h,d)=>d.order-h.order).flatMap(h=>h.exit),s,void 0));try{return o===e.historyValue&&ij(e._nodes,a)?l:ii(l,{_nodes:c,historyValue:o})}catch(h){throw h}}function sj(r,e,t,n,i){if(n.output===void 0)return;const s=_c(i.id,i.output!==void 0&&i.parent?xc(i.output,r.context,e,t.self):void 0);return xc(n.output,r.context,s,t.self)}function aj(r,e,t,n,i,s,a,o){let u=r;const l=new Set,c=new Set;oj(n,a,c,l),o&&c.add(r.machine.root);const h=new Set;for(const d of[...l].sort((f,p)=>f.order-p.order)){i.add(d);const f=[];f.push(...d.entry);for(const p of d.invoke)f.push(H4(p.src,{...p,syncSnapshot:!!p.onSnapshot}));if(c.has(d)){const p=d.initial.actions;f.push(...p)}if(u=ji(u,e,t,f,s,d.invoke.map(p=>p.id)),d.type==="final"){const p=d.parent;let g=(p==null?void 0:p.type)==="parallel"?p:p==null?void 0:p.parent,m=g||d;for((p==null?void 0:p.type)==="compound"&&s.push(_c(p.id,d.output!==void 0?xc(d.output,u.context,e,t.self):void 0));(g==null?void 0:g.type)==="parallel"&&!h.has(g)&&Cc(i,g);)h.add(g),s.push(_c(g.id)),m=g,g=g.parent;if(g)continue;u=ii(u,{status:"done",output:sj(u,e,t,u.machine.root,m)})}}return u}function oj(r,e,t,n){for(const i of r){const s=jA(i,e);for(const o of i.target||[])!ni(o)&&(i.source!==o||i.source!==s||i.reenter)&&(n.add(o),t.add(o)),Hi(o,e,t,n);const a=Mc(i,e);for(const o of a){const u=Js(o,s);(s==null?void 0:s.type)==="parallel"&&u.push(s),$A(n,e,t,u,!i.source.parent&&i.reenter?void 0:s)}}}function Hi(r,e,t,n){var i;if(ni(r))if(e[r.id]){const s=e[r.id];for(const a of s)n.add(a),Hi(a,e,t,n);for(const a of s)kc(a,r.parent,n,e,t)}else{const s=NA(r);for(const a of s.target)n.add(a),s===((i=r.parent)==null?void 0:i.initial)&&t.add(r.parent),Hi(a,e,t,n);for(const a of s.target)kc(a,r.parent,n,e,t)}else if(r.type==="compound"){const[s]=r.initial.target;ni(s)||(n.add(s),t.add(s)),Hi(s,e,t,n),kc(s,r,n,e,t)}else if(r.type==="parallel")for(const s of Gi(r).filter(a=>!ni(a)))[...n].some(a=>Tn(a,s))||(ni(s)||(n.add(s),t.add(s)),Hi(s,e,t,n))}function $A(r,e,t,n,i){for(const s of n)if((!i||Tn(s,i))&&r.add(s),s.type==="parallel")for(const a of Gi(s).filter(o=>!ni(o)))[...r].some(o=>Tn(o,a))||(r.add(a),Hi(a,e,t,r))}function kc(r,e,t,n,i){$A(t,n,i,Js(r,e))}function uj(r,e,t,n,i,s,a,o){let u=r;const l=Ic(n,i,s);l.sort((h,d)=>d.order-h.order);let c;for(const h of l)for(const d of tj(h)){let f;d.history==="deep"?f=p=>Pc(p)&&Tn(p,h):f=p=>p.parent===h,c??(c={...s}),c[d.id]=Array.from(i).filter(f)}for(const h of l)u=ji(u,e,t,[...h.exit,...h.invoke.map(d=>FA(d.id))],a,void 0),i.delete(h);return[u,c||s]}function lj(r,e){return r.implementations.actions[e]}function YA(r,e,t,n,i,s){const{machine:a}=r;let o=r;for(const u of n){const l=typeof u=="function",c=l?u:lj(a,typeof u=="string"?u:u.type),h={context:o.context,event:e,self:t.self,system:t.system},d=l||typeof u=="string"?void 0:"params"in u?typeof u.params=="function"?u.params({context:o.context,event:e}):u.params:void 0;if(!c||!("resolve"in c)){t.actionExecutor({type:typeof u=="string"?u:typeof u=="object"?u.type:u.name||"(anonymous)",info:h,params:d,exec:c});continue}const f=c,[p,g,m]=f.resolve(t,o,h,d,c,i);o=p,"retryResolve"in f&&(s==null||s.push([f,g])),"execute"in f&&t.actionExecutor({type:f.type,info:h,params:g,exec:f.execute.bind(null,t,g)}),m&&(o=YA(o,e,t,m,i,s))}return o}function ji(r,e,t,n,i,s){const a=s?[]:void 0,o=YA(r,e,t,n,{internalQueue:i,deferredActorIds:s},a);return a==null||a.forEach(([u,l])=>{u.retryResolve(t,o,l)}),o}function Oc(r,e,t,n){let i=r;const s=[];function a(l,c,h){t.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:t.self,event:c,snapshot:l,_transitions:h}),s.push(l)}if(e.type===$o)return i=ii(VA(i,e,t),{status:"stopped"}),a(i,e,[]),{snapshot:i,microstates:s};let o=e;if(o.type!==CA){const l=o,c=O4(l),h=XA(l,i);if(c&&!h.length)return i=ii(r,{status:"error",error:l.error}),a(i,l,[]),{snapshot:i,microstates:s};i=qc(h,r,t,o,!1,n),a(i,l,h)}let u=!0;for(;i.status==="active";){let l=u?cj(i,o):[];const c=l.length?i:void 0;if(!l.length){if(!n.length)break;o=n.shift(),l=XA(o,i)}i=qc(l,i,t,o,!1,n),u=i!==c,a(i,o,l)}return i.status!=="active"&&VA(i,o,t),{snapshot:i,microstates:s}}function VA(r,e,t){return ji(r,e,t,Object.values(r.children).map(n=>FA(n)),[],void 0)}function XA(r,e){return e.machine.getTransitionData(e,r)}function cj(r,e){const t=new Set,n=r._nodes.filter(Pc);for(const i of n)e:for(const s of[i].concat(Js(i,void 0)))if(s.always){for(const a of s.always)if(a.guard===void 0||Rc(a.guard,r.context,e,r)){t.add(a);break e}}return HA(Array.from(t),new Set(r._nodes),r.historyValue)}function hj(r,e){const t=Yo(Ko(r,e));return WA(r,[...t])}function fj(r){return!!r&&typeof r=="object"&&"machine"in r&&"value"in r}const dj=function(e){return yc(e,this.value)},pj=function(e){return this.tags.has(e)},gj=function(e){const t=this.machine.getTransitionData(this,e);return!!(t!=null&&t.length)&&t.some(n=>n.target!==void 0||n.actions.length)},mj=function(){const{_nodes:e,tags:t,machine:n,getMeta:i,toJSON:s,can:a,hasTag:o,matches:u,...l}=this;return{...l,tags:Array.from(t)}},vj=function(){return this._nodes.reduce((e,t)=>(t.meta!==void 0&&(e[t.id]=t.meta),e),{})};function Zo(r,e){return{status:r.status,output:r.output,error:r.error,machine:e,context:r.context,_nodes:r._nodes,value:WA(e.root,r._nodes),tags:new Set(r._nodes.flatMap(t=>t.tags)),children:r.children,historyValue:r.historyValue||{},matches:dj,hasTag:pj,can:gj,getMeta:vj,toJSON:mj}}function ii(r,e={}){return Zo({...r,...e},r.machine)}function _j(r,e){const{_nodes:t,tags:n,machine:i,children:s,context:a,can:o,hasTag:u,matches:l,getMeta:c,toJSON:h,...d}=r,f={};for(const g in s){const m=s[g];f[g]={snapshot:m.getPersistedSnapshot(e),src:m.src,systemId:m._systemId,syncSnapshot:m._syncSnapshot}}return{...d,context:KA(a),children:f}}function KA(r){let e;for(const t in r){const n=r[t];if(n&&typeof n=="object")if("sessionId"in n&&"send"in n&&"ref"in n)e??(e=Array.isArray(r)?r.slice():{...r}),e[t]={xstate$$type:Ac,id:n.id};else{const i=KA(n);i!==n&&(e??(e=Array.isArray(r)?r.slice():{...r}),e[t]=i)}}return e??r}function yj(r,e,t,n,{event:i,id:s,delay:a},{internalQueue:o}){const u=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const l=typeof i=="function"?i(t,n):i;let c;if(typeof a=="string"){const h=u&&u[a];c=typeof h=="function"?h(t,n):h}else c=typeof a=="function"?a(t,n):a;return typeof c!="number"&&o.push(l),[e,{event:l,id:s,delay:c},void 0]}function bj(r,e){const{event:t,delay:n,id:i}=e;if(typeof n=="number"){r.defer(()=>{const s=r.self;r.system.scheduler.schedule(s,s,t,n,i)});return}}function xj(r,e){function t(n,i){}return t.type="xstate.raise",t.event=r,t.id=e==null?void 0:e.id,t.delay=e==null?void 0:e.delay,t.resolve=yj,t.execute=bj,t}const ZA="xstate.promise.resolve",JA="xstate.promise.reject",Jo=new WeakMap;function er(r){return{config:r,transition:(t,n,i)=>{var s;if(t.status!=="active")return t;switch(n.type){case ZA:{const a=n.data;return{...t,status:"done",output:a,input:void 0}}case JA:return{...t,status:"error",error:n.data,input:void 0};case $o:return(s=Jo.get(i.self))==null||s.abort(),{...t,status:"stopped",input:void 0};default:return t}},start:(t,{self:n,system:i,emit:s})=>{if(t.status!=="active")return;const a=new AbortController;Jo.set(n,a),Promise.resolve(r({input:t.input,system:i,self:n,signal:a.signal,emit:s})).then(u=>{n.getSnapshot().status==="active"&&(Jo.delete(n),i._relay(n,n,{type:ZA,data:u}))},u=>{n.getSnapshot().status==="active"&&(Jo.delete(n),i._relay(n,n,{type:JA,data:u}))})},getInitialSnapshot:(t,n)=>({status:"active",output:void 0,error:void 0,input:n}),getPersistedSnapshot:t=>t,restoreSnapshot:t=>t}}function wj(r,{machine:e,context:t},n,i){const s=(a,o)=>{if(typeof a=="string"){const u=Sc(e,a);if(!u)throw new Error(`Actor logic '${a}' not implemented in machine '${e.id}'`);const l=Zs(u,{id:o==null?void 0:o.id,parent:r.self,syncSnapshot:o==null?void 0:o.syncSnapshot,input:typeof(o==null?void 0:o.input)=="function"?o.input({context:t,event:n,self:r.self}):o==null?void 0:o.input,src:a,systemId:o==null?void 0:o.systemId});return i[l.id]=l,l}else return Zs(a,{id:o==null?void 0:o.id,parent:r.self,syncSnapshot:o==null?void 0:o.syncSnapshot,input:o==null?void 0:o.input,src:a,systemId:o==null?void 0:o.systemId})};return(a,o)=>{const u=s(a,o);return i[u.id]=u,r.defer(()=>{u._processingStatus!==qt.Stopped&&u.start()}),u}}function Sj(r,e,t,n,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},a={context:e.context,event:t.event,spawn:wj(r,e,t.event,s),self:r.self,system:r.system};let o={};if(typeof i=="function")o=i(a,n);else for(const l of Object.keys(i)){const c=i[l];o[l]=typeof c=="function"?c(a,n):c}const u=Object.assign({},e.context,o);return[ii(e,{context:u,children:Object.keys(s).length?{...e.children,...s}:e.children}),void 0,void 0]}function Qo(r){function e(t,n){}return e.type="xstate.assign",e.assignment=r,e.resolve=Sj,e}const QA=new WeakMap;function $i(r,e,t){let n=QA.get(r);return n?e in n||(n[e]=t()):(n={[e]:t()},QA.set(r,n)),n[e]}const Tj={},Qs=r=>typeof r=="string"?{type:r}:typeof r=="function"?"resolve"in r?{type:r.type}:{type:r.name}:r;class Bc{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(RA),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?IA(this.config.states,(n,i)=>new Bc(n,{_parent:this,_key:i,_machine:this.machine})):Tj,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Sn(this.config.entry).slice(),this.exit=Sn(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Sn(e.tags).slice()}_initialize(){this.transitions=X4(this),this.config.always&&(this.always=Ni(this.config.always).map(e=>ri(this,PA,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Qs),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Qs),eventType:null})}:void 0,history:this.history,states:IA(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(Qs)})),entry:this.entry.map(Qs),exit:this.exit.map(Qs),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return $i(this,"invoke",()=>Sn(this.config.invoke).map((e,t)=>{const{src:n,systemId:i}=e,s=e.id??BA(this.id,t),a=typeof n=="string"?n:`xstate.invoke.${BA(this.id,t)}`;return{...e,src:a,id:s,systemId:i,toJSON(){const{onDone:o,onError:u,...l}=e;return{...l,type:"xstate.invoke",src:a,id:s}}}}))}get on(){return $i(this,"on",()=>[...this.transitions].flatMap(([t,n])=>n.map(i=>[t,i])).reduce((t,[n,i])=>(t[n]=t[n]||[],t[n].push(i),t),{}))}get after(){return $i(this,"delayedTransitions",()=>V4(this))}get initial(){return $i(this,"initial",()=>K4(this,this.config.initial))}next(e,t){const n=t.type,i=[];let s;const a=$i(this,`candidates-${n}`,()=>Y4(this,n));for(const o of a){const{guard:u}=o,l=e.context;let c=!1;try{c=!u||Rc(u,l,t,e)}catch(h){const d=typeof u=="string"?u:typeof u=="object"?u.type:void 0;throw new Error(`Unable to evaluate guard ${d?`'${d}' `:""}in transition for event '${n}' in state node '${this.id}':
${h.message}`)}if(c){i.push(...o.actions),s=o;break}}return s?[s]:void 0}get events(){return $i(this,"events",()=>{const{states:e}=this,t=new Set(this.ownEvents);if(e)for(const n of Object.keys(e)){const i=e[n];if(i.states)for(const s of i.events)t.add(`${s}`)}return Array.from(t)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(n=>!(!n.target&&!n.actions.length&&!n.reenter))));return Array.from(e)}}const Aj="#";class Lc{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(t==null?void 0:t.actors)??{},actions:(t==null?void 0:t.actions)??{},delays:(t==null?void 0:t.delays)??{},guards:(t==null?void 0:t.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Bc(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:t,guards:n,actors:i,delays:s}=this.implementations;return new Lc(this.config,{actions:{...t,...e.actions},guards:{...n,...e.guards},actors:{...i,...e.actors},delays:{...s,...e.delays}})}resolveState(e){const t=hj(this.root,e.value),n=Yo(Ko(this.root,t));return Zo({_nodes:[...n],context:e.context||{},children:{},status:Cc(n,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,n){return Oc(e,t,n,[]).snapshot}microstep(e,t,n){return Oc(e,t,n,[]).microstates}getTransitionData(e,t){return Ec(this.root,e.value,e,t)||[]}getPreInitialState(e,t,n){const{context:i}=this.config,s=Zo({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?ji(s,t,e,[Qo(({spawn:o,event:u,self:l})=>i({spawn:o,input:u.input,self:l}))],n,void 0):s}getInitialSnapshot(e,t){const n=EA(t),i=[],s=this.getPreInitialState(e,n,i),a=qc([{target:[...zA(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,n,!0,i),{snapshot:o}=Oc(a,n,e,i);return o}start(e){Object.values(e.children).forEach(t=>{t.getSnapshot().status==="active"&&t.start()})}getStateNodeById(e){const t=bc(e),n=t.slice(1),i=Vo(t[0])?t[0].slice(Aj.length):t[0],s=this.idMap.get(i);if(!s)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return Xo(s,n)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return _j(e,t)}restoreSnapshot(e,t){const n={},i=e.children;Object.keys(i).forEach(u=>{const l=i[u],c=l.snapshot,h=l.src,d=typeof h=="string"?Sc(this,h):h;if(!d)return;const f=Zs(d,{id:u,parent:t.self,syncSnapshot:l.syncSnapshot,snapshot:c,src:h,systemId:l.systemId});n[u]=f});const s=Zo({...e,children:n,_nodes:Array.from(Yo(Ko(this.root,e.value)))},this),a=new Set;function o(u,l){if(!a.has(u)){a.add(u);for(const c in u){const h=u[c];if(h&&typeof h=="object"){if("xstate$$type"in h&&h.xstate$$type===Ac){u[c]=l[h.id];continue}o(h,l)}}}}return o(s.context,n),s}}function Rj(r,e){return new Lc(r,e)}function ea({schemas:r,actors:e,actions:t,guards:n,delays:i}){return{createMachine:s=>Rj({...s,schemas:r},{actors:e,actions:t,guards:n,delays:i})}}const ta={bet:null,rawBet:null},Fc="rendering",Dc="idle",eR="bet",tR="autoBet",rR="resumeBet",nR="forceResult",Pj={on:{RENDERED:{target:"idle"}}},Cj={on:{FORCE_RESULT:{target:"forceResult"},RESUME_BET:{target:"resumeBet"},BET:{target:"bet"},AUTO_BET:{target:"autoBet"}}},Ej={invoke:{id:"forceResult",src:"forceResult",onDone:"idle"}},Mj={invoke:{id:"resumeBet",src:"resumeBet",onDone:"idle"}},Ij={invoke:{id:"bet",src:"bet",onDone:"idle"}},qj={invoke:{id:"autoBet",src:"autoBet",onDone:"idle"}},kj=r=>{const e=ea({actors:{bet:r.bet,autoBet:r.autoBet,resumeBet:r.resumeBet,forceResult:r.forceResult}}).createMachine({context:ta,initial:"rendering",states:{[Fc]:Pj,[Dc]:Cj,[eR]:Ij,[tR]:qj,[rR]:Mj,[nR]:Ej}});return Zs(e)},Oj=async({onError:r})=>{var e,t,n;try{const i=await ZH({rgsUrl:Qt.rgsUrl(),sessionID:Qt.sessionID(),currency:K.currency,mode:K.activeBetModeKey,amount:K.betAmount});if(i!=null&&i.error)throw i;if((e=i==null?void 0:i.round)!=null&&e.state&&((n=(t=i==null?void 0:i.round)==null?void 0:t.state)==null?void 0:n.length)>0)return K.wageredBetAmount=K.betAmount,i;throw{error:"Empty state in data.round",message:JSON.stringify({data:i})}}catch(i){throw r(),K.autoSpinsCounter=0,ei.modal={name:"error",error:i},console.error(i),i}},iR=async()=>{var r;try{const e=await XH({sessionID:Qt.sessionID(),rgsUrl:Qt.rgsUrl()});if(e!=null&&e.error)throw e;if(((r=e==null?void 0:e.balance)==null?void 0:r.amount)!==void 0)return e;throw{error:"Empty amount in data.balance",message:JSON.stringify({data:e})}}catch(e){$e.force||(ei.modal={name:"error",error:e}),console.error(e)}},eu=({balanceAmountFromApi:r})=>{K.balanceAmount=r/Vs};function Bj(r){const{onResumeGameActive:e,onResumeGameInactive:t,onNewGameStart:n,onNewGameError:i,onPlayGame:s,checkIsBonusGame:a}=r;let o=null;const u={noWin:{newGame:async()=>{},endGame:async()=>{}},singleRoundWin:{newGame:async()=>{const g=await iR();g!=null&&g.balance&&(o=g.balance.amount)},endGame:async()=>{o!==null&&(eu({balanceAmountFromApi:o}),o=null)}},bonusWin:{newGame:async()=>{},endGame:async()=>{const g=await iR();g!=null&&g.balance&&(eu({balanceAmountFromApi:g.balance.amount}),o=null)}}},l=({bet:g})=>{const m=a(g);return g.active===!0&&m?"bonusWin":g.payoutMultiplier&&g.payoutMultiplier>0?m?"bonusWin":"singleRoundWin":"noWin"},c=er(async()=>{await n();const g=await Oj({onError:i});if(g){g.balance&&eu({balanceAmountFromApi:g.balance.amount});const m=g.round,_=l({bet:m});return await u[_].newGame(),{bet:m}}return{bet:null}}),h=er(async()=>{const g=K.lastBet;if(g&&g.active){K.lastBet=null;const _=l({bet:g});return await u[_].newGame(),{bet:e(g),rawBet:g}}throw g&&g.state&&g.state.length>0&&t(g),new Error("inactive Bet")}),d=er(async({input:g})=>{$e.force&&$e.forceType!=="pastBets"&&g.bet&&($e.pastBets=[...$e.pastBets,g.bet]),g.bet&&await s(g.bet)}),f=er(async({input:g})=>{const m=g.rawBet||g.bet;if(m){const _=l({bet:m});await u[_].endGame()}}),p=er(async()=>{var g,m,_,y;await n();try{const w=await{api:async()=>await KH({rgsUrl:Qt.rgsUrl(),mode:$e.forceBetModeKey.toUpperCase(),search:{bookID:$e.forceSearch.bookID===void 0?void 0:Number($e.forceSearch.bookID),kind:$e.forceSearch.kind==="Any"?void 0:Number($e.forceSearch.kind),symbol:$e.forceSearch.symbol==="Any"?void 0:$e.forceSearch.symbol,hasWild:$e.forceSearch.hasWild==="Any"?void 0:$e.forceSearch.hasWild==="True",wildMult:$e.forceSearch.wildMult==="Any"?void 0:Number($e.forceSearch.wildMult),gameType:$e.forceSearch.gameType==="Any"?void 0:$e.forceSearch.gameType}}),json:()=>{const M=JSON.parse($e.forceJson);return{round:{mode:$e.forceBetModeKey.toUpperCase(),payoutMultiplier:2,state:M.events},error:null,balance:null}},pastBets:()=>({round:CH.selectedPastBet(),error:null,balance:null})}[$e.forceType]();if(w!=null&&w.error)throw w;if((g=w==null?void 0:w.round)!=null&&g.state&&((_=(m=w==null?void 0:w.round)==null?void 0:m.state)==null?void 0:_.length)>0)return((y=w==null?void 0:w.balance)==null?void 0:y.amount)!==void 0&&eu({balanceAmountFromApi:w.balance.amount}),K.wageredBetAmount=K.betAmount,w.round.mode&&(K.activeBetModeKey=w.round.mode),{bet:w.round,rawBet:null};throw{error:"Empty state in data.round",message:JSON.stringify({data:w})}}catch(x){throw i(),K.autoSpinsCounter=0,ei.modal={name:"error",error:x},console.error(x),x}});return{newGame:c,playGame:d,endGame:f,resumeGame:h,forceGame:p}}const Lj=er(async()=>{var r;if(K.isSpaceHold){if(((r=uc.activeBetMode())==null?void 0:r.type)==="buy"){K.activeBetModeKey="BASE";return}return}throw Error("end bet")}),Fj=({newGame:r,playGame:e,endGame:t})=>ea({actors:{newGame:r,playGame:e,endGame:t,checkSpaceHold:Lj}}).createMachine({context:ta,id:"bet",initial:"fetching",states:{fetching:{invoke:{id:"newGame",src:"newGame",onDone:[{actions:Qo(({context:i,event:s})=>s.output),target:"play"}],onError:[{target:"end"}]}},play:{invoke:{id:"playGame",src:"playGame",input:({context:i})=>({bet:i.bet}),onDone:[{target:"ending"}]}},ending:{invoke:{id:"endGame",src:"endGame",input:({context:i})=>({bet:i.bet,rawBet:i.rawBet}),onDone:[{target:"checkSpaceHold"}]}},checkSpaceHold:{invoke:{id:"checkSpaceHold",src:"checkSpaceHold",onDone:"fetching",onError:"end"}},end:{type:"final"}}});let sR=0;const Dj=er(async()=>{K.winBookEventAmount=0,K.autoSpinsLoss=0,sR=K.balanceAmount}),Uj=er(async()=>{if(uc.isBetCostAvailable())return"continue";throw K.autoSpinsCounter=0,ei.modal={name:"autoSpinMessage",message:"insufficientFunds"},Error("End auto bet with insufficientFunds")}),Wj=er(async()=>{if(K.autoSpinsLossLimitAmount===1/0)return"continue";const r=K.balanceAmount,e=Math.round((sR-r)*100)/100;if(K.autoSpinsLoss=e,K.autoSpinsLossLimitAmount>e)return"continue";throw K.autoSpinsCounter=0,ei.modal={name:"autoSpinMessage",message:"lossLimitReached"},Error("End auto bet with lossLimitReached")}),Nj=er(async()=>{if(K.autoSpinsSingleWinLimitAmount===1/0||K.autoSpinsSingleWinLimitAmount>c4(K.winBookEventAmount))return"continue";throw K.autoSpinsCounter=0,ei.modal={name:"autoSpinMessage",message:"singleWinLimitReached"},Error("End auto bet with singleWinLimitReached")}),Gj=er(async()=>{if(K.autoSpinsCounter>0)return"continue";throw Error("End auto bet with autoSpinsCounter being 0")}),zj=er(async()=>{const r=K.autoSpinsCounter-1;K.autoSpinsCounter=r>0?r:0}),Hj=({bet:r})=>ea({actors:{init:Dj,checkInsufficientFunds:Uj,checkLossLimit:Wj,checkIfSingleWinLimit:Nj,checkAutoSpinsCounter:Gj,bet:r,updateAutoSpinsCounter:zj}}).createMachine({context:ta,id:"autoBet",initial:"init",states:{init:{invoke:{id:"init",src:"init",onDone:"checkInsufficientFunds",onError:"end"}},checkInsufficientFunds:{invoke:{id:"checkInsufficientFunds",src:"checkInsufficientFunds",onDone:"checkLossLimit",onError:"end"}},checkLossLimit:{invoke:{id:"checkLossLimit",src:"checkLossLimit",onDone:"checkIfSingleWinLimit",onError:"end"}},checkIfSingleWinLimit:{invoke:{id:"checkIfSingleWinLimit",src:"checkIfSingleWinLimit",onDone:"checkAutoSpinsCounter",onError:"end"}},checkAutoSpinsCounter:{invoke:{id:"checkAutoSpinsCounter",src:"checkAutoSpinsCounter",onDone:"playing",onError:"end"}},playing:{invoke:{id:"bet",src:"bet",onDone:"updateAutoSpinsCounter"}},updateAutoSpinsCounter:{invoke:{id:"updateAutoSpinsCounter",src:"updateAutoSpinsCounter",onDone:"checkInsufficientFunds"}},end:{type:"final"}}}),jj=r=>ea({actors:r}).createMachine({context:ta,id:"resumeBet",initial:"resumeGame",states:{resumeGame:{invoke:{id:"resumeGame",src:"resumeGame",onDone:[{actions:Qo(({context:t,event:n})=>n.output),target:"play"}],onError:[{target:"end"}]}},play:{invoke:{id:"playGame",src:"playGame",input:({context:t})=>({bet:t.bet}),onDone:[{target:"ending"}]}},ending:{invoke:{id:"endGame",src:"endGame",input:({context:t})=>({bet:t.bet,rawBet:t.rawBet}),onDone:[{target:"end"}]}},end:{type:"final"}}}),$j=r=>ea({actors:r}).createMachine({context:ta,id:"bet",initial:"fetching",states:{fetching:{invoke:{id:"forceGame",src:"forceGame",onDone:[{actions:Qo(({context:t,event:n})=>n.output),target:"play"}],onError:[{target:"end"}]}},play:{invoke:{id:"playGame",src:"playGame",input:({context:t})=>({bet:t.bet}),onDone:[{target:"ending"}]}},ending:{invoke:{id:"endGame",src:"endGame",input:({context:t})=>({bet:t.bet,rawBet:t.rawBet}),onDone:[{target:"end"}]}},end:{type:"final"}}}),Yj=({forceGame:r,resumeGame:e,newGame:t,playGame:n,endGame:i})=>{const s=Fj({newGame:t,playGame:n,endGame:i}),a=Hj({bet:s}),o=jj({resumeGame:e,playGame:n,endGame:i}),u=$j({forceGame:r,playGame:n,endGame:i});return{bet:s,autoBet:a,resumeBet:o,forceResult:u}},Vj=()=>{const r=n=>yc(n,e.value),e=We({value:""});return{stateXstate:e,stateXstateDerived:{matchesXstate:r,isRendering:()=>r(Fc),isIdle:()=>r(Dc),isBetting:()=>r(eR),isAutoBetting:()=>r(tR),isResumingBet:()=>r(rR),isForcingResult:()=>r(nR),isPlaying:()=>!r(Fc)&&!r(Dc)}}},aR="@@xstate";function Xj(r){eo(aR,r)}function Kj(){return Ms(aR)}if(typeof window<"u"&&window.PIXI){const r=window.require;window.require=e=>{if(r)return r(e);if(e.startsWith("@pixi/")||e.startsWith("pixi.js"))return window.PIXI}}var $=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))($||{});const Uc=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},tu=(r,e)=>Uc(r).priority??e,Te={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(Uc).forEach(e=>{e.type.forEach(t=>{var n,i;return(i=(n=this._removeHandlers)[t])==null?void 0:i.call(n,e)})}),this},add(...r){return r.map(Uc).forEach(e=>{e.type.forEach(t=>{var s,a;const n=this._addHandlers,i=this._queue;n[t]?(a=n[t])==null||a.call(n,e):(i[t]=i[t]||[],(s=i[t])==null||s.push(e))})}),this},handle(r,e,t){var a;const n=this._addHandlers,i=this._removeHandlers;if(n[r]||i[r])throw new Error(`Extension type ${r} already has a handler`);n[r]=e,i[r]=t;const s=this._queue;return s[r]&&((a=s[r])==null||a.forEach(o=>e(o)),delete s[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(r,e,t=-1){return this.handle(r,n=>{e.findIndex(s=>s.name===n.name)>=0||(e.push({name:n.name,value:n.ref}),e.sort((s,a)=>tu(a.value,t)-tu(s.value,t)))},n=>{const i=e.findIndex(s=>s.name===n.name);i!==-1&&e.splice(i,1)})},handleByList(r,e,t=-1){return this.handle(r,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>tu(s,t)-tu(i,t)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})},mixin(r,...e){for(const t of e)Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(t))}},Zj={extension:{type:$.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await $s(()=>Promise.resolve().then(()=>NQ),void 0,fe&&fe.tagName.toUpperCase()==="SCRIPT"&&fe.src||new URL("_app/immutable/bundle.C7SXImZm.js",document.baseURI).href)}},Jj={extension:{type:$.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await $s(()=>Promise.resolve().then(()=>GQ),void 0,fe&&fe.tagName.toUpperCase()==="SCRIPT"&&fe.src||new URL("_app/immutable/bundle.C7SXImZm.js",document.baseURI).href)}};class kt{constructor(e,t,n){this._x=t||0,this._y=n||0,this._observer=e}clone(e){return new kt(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Wc={exports:{}},oR;function Qj(){return oR||(oR=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function s(u,l,c,h,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new i(c,h||u,d),p=t?t+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],f]:u._events[p].push(f):(u._events[p]=f,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],c,h;if(this._eventsCount===0)return l;for(h in c=this._events)e.call(c,h)&&l.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},o.prototype.listeners=function(l){var c=t?t+l:l,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,f=h.length,p=new Array(f);d<f;d++)p[d]=h[d].fn;return p},o.prototype.listenerCount=function(l){var c=t?t+l:l,h=this._events[c];return h?h.fn?1:h.length:0},o.prototype.emit=function(l,c,h,d,f,p){var g=t?t+l:l;if(!this._events[g])return!1;var m=this._events[g],_=arguments.length,y,x;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),_){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,h),!0;case 4:return m.fn.call(m.context,c,h,d),!0;case 5:return m.fn.call(m.context,c,h,d,f),!0;case 6:return m.fn.call(m.context,c,h,d,f,p),!0}for(x=1,y=new Array(_-1);x<_;x++)y[x-1]=arguments[x];m.fn.apply(m.context,y)}else{var b=m.length,T;for(x=0;x<b;x++)switch(m[x].once&&this.removeListener(l,m[x].fn,void 0,!0),_){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,c);break;case 3:m[x].fn.call(m[x].context,c,h);break;case 4:m[x].fn.call(m[x].context,c,h,d);break;default:if(!y)for(T=1,y=new Array(_-1);T<_;T++)y[T-1]=arguments[T];m[x].fn.apply(m[x].context,y)}}return!0},o.prototype.on=function(l,c,h){return s(this,l,c,h,!1)},o.prototype.once=function(l,c,h){return s(this,l,c,h,!0)},o.prototype.removeListener=function(l,c,h,d){var f=t?t+l:l;if(!this._events[f])return this;if(!c)return a(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!d||p.once)&&(!h||p.context===h)&&a(this,f);else{for(var g=0,m=[],_=p.length;g<_;g++)(p[g].fn!==c||d&&!p[g].once||h&&p[g].context!==h)&&m.push(p[g]);m.length?this._events[f]=m.length===1?m[0]:m:a(this,f)}return this},o.prototype.removeAllListeners=function(l){var c;return l?(c=t?t+l:l,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(Wc)),Wc.exports}var e5=Qj();const hr=Lo(e5),t5=Math.PI*2,r5=180/Math.PI,n5=Math.PI/180;class Se{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Se(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Nc.x=0,Nc.y=0,Nc}}const Nc=new Se;class le{constructor(e=1,t=0,n=0,i=1,s=0,a=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,i,s,a){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=a,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new Se;const n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t}applyInverse(e,t){t=t||new Se;const n=this.a,i=this.b,s=this.c,a=this.d,o=this.tx,u=this.ty,l=1/(n*a+s*-i),c=e.x,h=e.y;return t.x=a*l*c+-s*l*h+(u*s-o*a)*l,t.y=n*l*h+-i*l*c+(-u*n+o*i)*l,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,a=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=a*t-this.ty*n,this.ty=a*n+this.ty*t,this}append(e){const t=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}appendFrom(e,t){const n=e.a,i=e.b,s=e.c,a=e.d,o=e.tx,u=e.ty,l=t.a,c=t.b,h=t.c,d=t.d;return this.a=n*l+i*h,this.b=n*c+i*d,this.c=s*l+a*h,this.d=s*c+a*d,this.tx=o*l+u*h+t.tx,this.ty=o*c+u*d+t.ty,this}setTransform(e,t,n,i,s,a,o,u,l){return this.a=Math.cos(o+l)*s,this.b=Math.sin(o+l)*s,this.c=-Math.sin(o-u)*a,this.d=Math.cos(o-u)*a,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,n=this.b,i=this.c,s=this.d,a=e.pivot,o=-Math.atan2(-i,s),u=Math.atan2(n,t),l=Math.abs(o+u);return l<1e-5||Math.abs(t5-l)<1e-5?(e.rotation=u,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=u),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(a.x*t+a.y*i),e.position.y=this.ty+(a.x*n+a.y*s),e}invert(){const e=this.a,t=this.b,n=this.c,i=this.d,s=this.tx,a=e*i-t*n;return this.a=i/a,this.b=-t/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-i*s)/a,this.ty=-(e*this.ty-t*s)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new le;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return s5.identity()}static get shared(){return i5.identity()}}const i5=new le,s5=new le,si=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ai=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],oi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ui=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Gc=[],uR=[],ru=Math.sign;function a5(){for(let r=0;r<16;r++){const e=[];Gc.push(e);for(let t=0;t<16;t++){const n=ru(si[r]*si[t]+oi[r]*ai[t]),i=ru(ai[r]*si[t]+ui[r]*ai[t]),s=ru(si[r]*oi[t]+oi[r]*ui[t]),a=ru(ai[r]*oi[t]+ui[r]*ui[t]);for(let o=0;o<16;o++)if(si[o]===n&&ai[o]===i&&oi[o]===s&&ui[o]===a){e.push(o);break}}}for(let r=0;r<16;r++){const e=new le;e.set(si[r],ai[r],oi[r],ui[r],0,0),uR.push(e)}}a5();const Ye={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>si[r],uY:r=>ai[r],vX:r=>oi[r],vY:r=>ui[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>Gc[r][e],sub:(r,e)=>Gc[r][Ye.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Ye.S:Ye.N:Math.abs(e)*2<=Math.abs(r)?r>0?Ye.E:Ye.W:e>0?r>0?Ye.SE:Ye.SW:r>0?Ye.NE:Ye.NW,matrixAppendRotationInv:(r,e,t=0,n=0)=>{const i=uR[Ye.inv(e)];i.tx=t,i.ty=n,r.append(i)}},nu=[new Se,new Se,new Se,new Se];let vt=class _l{constructor(e=0,t=0,n=0,i=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new _l(0,0,0,0)}clone(){return new _l(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,n,i=.5){const{width:s,height:a}=this;if(s<=0||a<=0)return!1;const o=this.x,u=this.y,l=n*(1-i),c=n-l,h=o-l,d=o+s+l,f=u-l,p=u+a+l,g=o+c,m=o+s-c,_=u+c,y=u+a-c;return e>=h&&e<=d&&t>=f&&t<=p&&!(e>g&&e<m&&t>_&&t<y)}intersects(e,t){if(!t){const M=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=M)return!1;const O=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>O}const n=this.left,i=this.right,s=this.top,a=this.bottom;if(i<=n||a<=s)return!1;const o=nu[0].set(e.left,e.top),u=nu[1].set(e.left,e.bottom),l=nu[2].set(e.right,e.top),c=nu[3].set(e.right,e.bottom);if(l.x<=o.x||u.y<=o.y)return!1;const h=Math.sign(t.a*t.d-t.b*t.c);if(h===0||(t.apply(o,o),t.apply(u,u),t.apply(l,l),t.apply(c,c),Math.max(o.x,u.x,l.x,c.x)<=n||Math.min(o.x,u.x,l.x,c.x)>=i||Math.max(o.y,u.y,l.y,c.y)<=s||Math.min(o.y,u.y,l.y,c.y)>=a))return!1;const d=h*(u.y-o.y),f=h*(o.x-u.x),p=d*n+f*s,g=d*i+f*s,m=d*n+f*a,_=d*i+f*a;if(Math.max(p,g,m,_)<=d*o.x+f*o.y||Math.min(p,g,m,_)>=d*c.x+f*c.y)return!1;const y=h*(o.y-l.y),x=h*(l.x-o.x),b=y*n+x*s,T=y*i+x*s,S=y*n+x*a,w=y*i+x*a;return!(Math.max(b,T,S,w)<=y*o.x+x*o.y||Math.min(b,T,S,w)>=y*c.x+x*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,t=.001){const n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=s-i,this}getBounds(e){return e||(e=new _l),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,n=e.y,i=e.x+e.width,s=e.y+e.height;return t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height&&i>=this.x&&i<this.x+this.width&&s>=this.y&&s<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};const zc={default:-1};function rt(r="default"){return zc[r]===void 0&&(zc[r]=-1),++zc[r]}const lR={},Ie="8.0.0",o5="8.3.4";function be(r,e,t=3){if(lR[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(n))),lR[e]=!0}const cR=()=>{};function Yi(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function hR(r){return!(r&r-1)&&!!r}function fR(r){const e={};for(const t in r)r[t]!==void 0&&(e[t]=r[t]);return e}const dR=Object.create(null);function u5(r){const e=dR[r];return e===void 0&&(dR[r]=rt("resource")),e}const pR=class yN extends hr{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...yN.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){be(Ie,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=u5(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};pR.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let gR=pR;const mR=class bN extends hr{constructor(e={}){super(),this.options=e,this.uid=rt("textureSource"),this._resourceType="textureSource",this._resourceId=rt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...bN.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new gR(fR(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,n;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(n=this._style)==null||n.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=rt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,n){n||(n=this._resolution),e||(e=this.width),t||(t=this.height);const i=Math.round(e*n),s=Math.round(t*n);return this.width=i/n,this.height=s/n,this._resolution=n,this.pixelWidth===i&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=i,this.pixelHeight=s,this.emit("resize",this),this._resourceId=rt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=hR(this.pixelWidth)&&hR(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};mR.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let tr=mR;class Hc extends tr{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let n=e.format;n||(t instanceof Float32Array?n="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?n="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?n="rgba16uint":(t instanceof Int8Array,n="bgra8unorm")),super({...e,resource:t,format:n}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Hc.extension=$.TextureSource;const vR=new le;class l5{constructor(e,t){this.mapCoord=new le,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],a=e[i+1];t[i]=s*n.a+a*n.c+n.tx,t[i+1]=s*n.b+a*n.d+n.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const n=e.orig,i=e.trim;i&&(vR.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(vR));const s=e.source,a=this.uClampFrame,o=this.clampMargin/s._resolution,u=this.clampOffset/s._resolution;return a[0]=(e.frame.x+o+u)/s.width,a[1]=(e.frame.y+o+u)/s.height,a[2]=(e.frame.x+e.frame.width-o+u)/s.width,a[3]=(e.frame.y+e.frame.height-o+u)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}}let ce=class extends hr{constructor({source:e,label:t,frame:n,orig:i,trim:s,defaultAnchor:a,defaultBorders:o,rotate:u,dynamic:l}={}){if(super(),this.uid=rt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new vt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new tr,this.noFrame=!n,n)this.frame.copyFrom(n);else{const{width:c,height:h}=this._source;this.frame.width=c,this.frame.height=h}this.orig=i||this.frame,this.trim=s,this.rotate=u??0,this.defaultAnchor=a,this.defaultBorders=o,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new l5(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:n,height:i}=this._source,s=t.x/n,a=t.y/i,o=t.width/n,u=t.height/i;let l=this.rotate;if(l){const c=o/2,h=u/2,d=s+c,f=a+h;l=Ye.add(l,Ye.NW),e.x0=d+c*Ye.uX(l),e.y0=f+h*Ye.uY(l),l=Ye.add(l,2),e.x1=d+c*Ye.uX(l),e.y1=f+h*Ye.uY(l),l=Ye.add(l,2),e.x2=d+c*Ye.uX(l),e.y2=f+h*Ye.uY(l),l=Ye.add(l,2),e.x3=d+c*Ye.uX(l),e.y3=f+h*Ye.uY(l)}else e.x0=s,e.y0=a,e.x1=s+o,e.y1=a,e.x2=s+o,e.y2=a+u,e.x3=s,e.y3=a+u}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return be(Ie,"Texture.baseTexture is now Texture.source"),this._source}};ce.EMPTY=new ce({label:"EMPTY",source:new tr({label:"EMPTY"})}),ce.EMPTY.destroy=cR,ce.WHITE=new ce({source:new Hc({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),ce.WHITE.destroy=cR;function _R(r,e,t){const{width:n,height:i}=t.orig,s=t.trim;if(s){const a=s.width,o=s.height;r.minX=s.x-e._x*n,r.maxX=r.minX+a,r.minY=s.y-e._y*i,r.maxY=r.minY+o}else r.minX=-e._x*n,r.maxX=r.minX+n,r.minY=-e._y*i,r.maxY=r.minY+i}const yR=new le;class zt{constructor(e=1/0,t=1/0,n=-1/0,i=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=yR,this.minX=e,this.minY=t,this.maxX=n,this.maxY=i}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new vt);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=yR,this}set(e,t,n,i){this.minX=e,this.minY=t,this.maxX=n,this.maxY=i}addFrame(e,t,n,i,s){s||(s=this.matrix);const a=s.a,o=s.b,u=s.c,l=s.d,c=s.tx,h=s.ty;let d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,m=a*e+u*t+c,_=o*e+l*t+h;m<d&&(d=m),_<f&&(f=_),m>p&&(p=m),_>g&&(g=_),m=a*n+u*t+c,_=o*n+l*t+h,m<d&&(d=m),_<f&&(f=_),m>p&&(p=m),_>g&&(g=_),m=a*e+u*i+c,_=o*e+l*i+h,m<d&&(d=m),_<f&&(f=_),m>p&&(p=m),_>g&&(g=_),m=a*n+u*i+c,_=o*n+l*i+h,m<d&&(d=m),_<f&&(f=_),m>p&&(p=m),_>g&&(g=_),this.minX=d,this.minY=f,this.maxX=p,this.maxY=g}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,n=this.minY,i=this.maxX,s=this.maxY,{a,b:o,c:u,d:l,tx:c,ty:h}=e;let d=a*t+u*n+c,f=o*t+l*n+h;this.minX=d,this.minY=f,this.maxX=d,this.maxY=f,d=a*i+u*n+c,f=o*i+l*n+h,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=a*t+u*s+c,f=o*t+l*s+h,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=a*i+u*s+c,f=o*i+l*s+h,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,n,i){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<n&&(this.minY=n),this.maxY>i&&(this.maxY=i),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new zt(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,n,i){let s=this.minX,a=this.minY,o=this.maxX,u=this.maxY;i||(i=this.matrix);const l=i.a,c=i.b,h=i.c,d=i.d,f=i.tx,p=i.ty;for(let g=t;g<n;g+=2){const m=e[g],_=e[g+1],y=l*m+h*_+f,x=c*m+d*_+p;s=y<s?y:s,a=x<a?x:a,o=y>o?y:o,u=x>u?x:u}this.minX=s,this.minY=a,this.maxX=o,this.maxY=u}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var c5={grad:.9,turn:360,rad:360/(2*Math.PI)},Jr=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},ct=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},rr=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},bR=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},xR=function(r){return{r:rr(r.r,0,255),g:rr(r.g,0,255),b:rr(r.b,0,255),a:rr(r.a)}},jc=function(r){return{r:ct(r.r),g:ct(r.g),b:ct(r.b),a:ct(r.a,3)}},h5=/^#([0-9a-f]{3,8})$/i,iu=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},wR=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=Math.max(e,t,n),a=s-Math.min(e,t,n),o=a?s===e?(t-n)/a:s===t?2+(n-e)/a:4+(e-t)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:i}},SR=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),a=n*(1-t),o=n*(1-(e-s)*t),u=n*(1-(1-e+s)*t),l=s%6;return{r:255*[n,o,a,a,u,n][l],g:255*[u,n,n,o,a,a][l],b:255*[a,a,u,n,n,o][l],a:i}},TR=function(r){return{h:bR(r.h),s:rr(r.s,0,100),l:rr(r.l,0,100),a:rr(r.a)}},AR=function(r){return{h:ct(r.h),s:ct(r.s),l:ct(r.l),a:ct(r.a,3)}},RR=function(r){return SR((t=(e=r).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},ra=function(r){return{h:(e=wR(r)).h,s:(i=(200-(t=e.s))*(n=e.v)/100)>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,n,i},f5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,d5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,g5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$c={string:[[function(r){var e=h5.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?ct(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?ct(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=p5.exec(r)||g5.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:xR({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=f5.exec(r)||d5.exec(r);if(!e)return null;var t,n,i=TR({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(c5[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return RR(i)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=i===void 0?1:i;return Jr(e)&&Jr(t)&&Jr(n)?xR({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(r){var e=r.h,t=r.s,n=r.l,i=r.a,s=i===void 0?1:i;if(!Jr(e)||!Jr(t)||!Jr(n))return null;var a=TR({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return RR(a)},"hsl"],[function(r){var e=r.h,t=r.s,n=r.v,i=r.a,s=i===void 0?1:i;if(!Jr(e)||!Jr(t)||!Jr(n))return null;var a=(function(o){return{h:bR(o.h),s:rr(o.s,0,100),v:rr(o.v,0,100),a:rr(o.a)}})({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return SR(a)},"hsv"]]},PR=function(r,e){for(var t=0;t<e.length;t++){var n=e[t][0](r);if(n)return[n,e[t][1]]}return[null,void 0]},m5=function(r){return typeof r=="string"?PR(r.trim(),$c.string):typeof r=="object"&&r!==null?PR(r,$c.object):[null,void 0]},Yc=function(r,e){var t=ra(r);return{h:t.h,s:rr(t.s+100*e,0,100),l:t.l,a:t.a}},Vc=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},CR=function(r,e){var t=ra(r);return{h:t.h,s:t.s,l:rr(t.l+100*e,0,100),a:t.a}},Xc=(function(){function r(e){this.parsed=m5(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return ct(Vc(this.rgba),2)},r.prototype.isDark=function(){return Vc(this.rgba)<.5},r.prototype.isLight=function(){return Vc(this.rgba)>=.5},r.prototype.toHex=function(){return e=jc(this.rgba),t=e.r,n=e.g,i=e.b,a=(s=e.a)<1?iu(ct(255*s)):"","#"+iu(t)+iu(n)+iu(i)+a;var e,t,n,i,s,a},r.prototype.toRgb=function(){return jc(this.rgba)},r.prototype.toRgbString=function(){return e=jc(this.rgba),t=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+i+", "+s+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,s},r.prototype.toHsl=function(){return AR(ra(this.rgba))},r.prototype.toHslString=function(){return e=AR(ra(this.rgba)),t=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+s+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,s},r.prototype.toHsv=function(){return e=wR(this.rgba),{h:ct(e.h),s:ct(e.s),v:ct(e.v),a:ct(e.a,3)};var e},r.prototype.invert=function(){return Mr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Mr(Yc(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Mr(Yc(this.rgba,-e))},r.prototype.grayscale=function(){return Mr(Yc(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Mr(CR(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Mr(CR(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Mr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ct(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=ra(this.rgba);return typeof e=="number"?Mr({h:e,s:t.s,l:t.l,a:t.a}):ct(t.h)},r.prototype.isEqual=function(e){return this.toHex()===Mr(e).toHex()},r})(),Mr=function(r){return r instanceof Xc?r:new Xc(r)},ER=[],v5=function(r){r.forEach(function(e){ER.indexOf(e)<0&&(e(Xc,$c),ER.push(e))})};function _5(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in t)n[t[i]]=i;var s={};r.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,u,l=n[this.toHex()];if(l)return l;if(a!=null&&a.closest){var c=this.toRgb(),h=1/0,d="black";if(!s.length)for(var f in t)s[f]=new r(t[f]).toRgb();for(var p in t){var g=(o=c,u=s[p],Math.pow(o.r-u.r,2)+Math.pow(o.g-u.g,2)+Math.pow(o.b-u.b,2));g<h&&(h=g,d=p)}return d}},e.string.push([function(a){var o=a.toLowerCase(),u=o==="transparent"?"#0000":t[o];return u?new r(u).toRgb():null},"name"])}v5([_5]);const Vi=class $a{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof $a)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const n=typeof e;if(n!==typeof t)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,a)=>s===t[a]);if(e!==null&&t!==null){const s=Object.keys(e),a=Object.keys(t);return s.length!==a.length?!1:s.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,n,i]=this._components;return{r:e,g:t,b:n,a:i}}toRgb(){const[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){const[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){const[t,n,i]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,n,i,s]=this._components;return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,n,i]=this._components;return e[0]=t,e[1]=n,e[2]=i,e}toNumber(){return this._int}toBgrNumber(){const[e,t,n]=this.toUint8RgbArray();return(n<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,n,i,s]=$a._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;t=(a>>16&255)/255,n=(a>>8&255)/255,i=(a&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,n,i,s=255]=e,t/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=$a.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const a=Mr(e);a.isValid()&&({r:t,g:n,b:i,a:s}=a.rgba,t/=255,n/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=n,this._components[2]=i,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e=="number"?Math.min(Math.max(e,t),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),n)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof $a||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Vi.shared=new Vi,Vi._temp=new Vi,Vi.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ne=Vi;const y5={cullArea:null,cullable:!1,cullableChildren:!0};let Kc=class{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var n;let t;return this._index>0?t=this._pool[--this._index]:t=new this._classType,(n=t.init)==null||n.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}};class b5{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Kc(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const n=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[n]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}}const qe=new b5,x5={get isCachedAsTexture(){var r;return!!((r=this.renderGroup)!=null&&r.isCachedAsTexture)},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){var r;(r=this.renderGroup)==null||r.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){be("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function MR(r,e,t){const n=r.length;let i;if(e>=n||t===0)return;t=e+t>n?n-e:t;const s=n-t;for(i=e;i<s;++i)r[i]=r[i+t];r.length=s}const w5={allowChildren:!0,removeChildren(r=0,e){const t=e??this.children.length,n=t-r,i=[];if(n>0&&n<=t){for(let a=t-1;a>=r;a--){const o=this.children[a];o&&(i.push(o),o.parent=null)}MR(this.children,r,t);const s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(i);for(let a=0;a<i.length;++a)this.emit("childRemoved",i[a],this,a),i[a].emit("removed",this);return i.length>0&&this._didViewChangeTick++,i}else if(n===0&&this.children.length===0)return i;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const e=this.getChildAt(r);return this.removeChild(e)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,e)},getChildIndex(r){const e=this.children.indexOf(r);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(r,e){this.allowChildren||be(Ie,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${r}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(r.parent){const i=r.parent.children.indexOf(r);if(r.parent===this&&i===e)return r;i!==-1&&r.parent.children.splice(i,1)}e===t.length?t.push(r):t.splice(e,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,e),r.emit("added",this),r},swapChildren(r,e){if(r===e)return;const t=this.getChildIndex(r),n=this.getChildIndex(e);this.children[t]=e,this.children[n]=r;const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var r;(r=this.parent)==null||r.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(e=>this.reparentChildAt(e,this.children.length)),r[0])},reparentChildAt(r,e){if(r.parent===this)return this.setChildIndex(r,e),r;const t=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,e);const n=this.worldTransform.clone();return n.invert(),t.prepend(n),r.setFromMatrix(t),r}},S5={collectRenderables(r,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(r,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,r):this.collectRenderablesWithEffects(r,e,t))},collectRenderablesSimple(r,e,t){const n=this.children,i=n.length;for(let s=0;s<i;s++)n[s].collectRenderables(r,e,t)},collectRenderablesWithEffects(r,e,t){const{renderPipes:n}=e;for(let i=0;i<this.effects.length;i++){const s=this.effects[i];n[s.pipe].push(s,this,r)}this.collectRenderablesSimple(r,e,t);for(let i=this.effects.length-1;i>=0;i--){const s=this.effects[i];n[s.pipe].pop(s,this,r)}}};class IR{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class T5{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const n=this._tests[t];if(n.test(e))return qe.get(n.maskClass,e)}return e}returnMaskEffect(e){qe.return(e)}}const Zc=new T5;Te.handleByList($.MaskEffect,Zc._effectClasses);const A5={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((t,n)=>t.priority-n.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const e=this.effects.indexOf(r);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const e=this._maskEffect;(e==null?void 0:e.mask)!==r&&(e&&(this.removeEffect(e),Zc.returnMaskEffect(e),this._maskEffect=null),r!=null&&(this._maskEffect=Zc.getMaskEffect(r),this.addEffect(this._maskEffect)))},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},get mask(){var r;return(r=this._maskEffect)==null?void 0:r.mask},set filters(r){var s;!Array.isArray(r)&&r&&(r=[r]);const e=this._filterEffect||(this._filterEffect=new IR);r=r;const t=(r==null?void 0:r.length)>0,n=((s=e.filters)==null?void 0:s.length)>0,i=t!==n;r=Array.isArray(r)?r.slice(0):r,e.filters=Object.freeze(r),i&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=r??null))},get filters(){var r;return(r=this._filterEffect)==null?void 0:r.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new IR),this._filterEffect.filterArea=r},get filterArea(){var r;return(r=this._filterEffect)==null?void 0:r.filterArea}},R5={label:null,get name(){return be(Ie,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){be(Ie,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,e=!1){return this.getChildByLabel(r,e)},getChildByLabel(r,e=!1){const t=this.children;for(let n=0;n<t.length;n++){const i=t[n];if(i.label===r||r instanceof RegExp&&r.test(i.label))return i}if(e)for(let n=0;n<t.length;n++){const s=t[n].getChildByLabel(r,!0);if(s)return s}return null},getChildrenByLabel(r,e=!1,t=[]){const n=this.children;for(let i=0;i<n.length;i++){const s=n[i];(s.label===r||r instanceof RegExp&&r.test(s.label))&&t.push(s)}if(e)for(let i=0;i<n.length;i++)n[i].getChildrenByLabel(r,!0,t);return t}},At=new Kc(le),Qr=new Kc(zt),P5=new le,C5={getFastGlobalBounds(r,e){e||(e=new zt),e.clear(),this._getGlobalBoundsRecursive(!!r,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(r,e,t){let n=e;if(r&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const i=!!this.effects.length;if((this.renderGroup||i)&&(n=Qr.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const a=this.bounds;n.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}const s=this.children;for(let a=0;a<s.length;a++)s[a]._getGlobalBoundsRecursive(r,n,t)}if(i){let s=!1;const a=this.renderGroup||this.parentRenderGroup;for(let o=0;o<this.effects.length;o++)this.effects[o].addBounds&&(s||(s=!0,n.applyMatrix(a.worldTransform)),this.effects[o].addBounds(n,!0));s&&(n.applyMatrix(a.worldTransform.copyTo(P5).invert()),e.addBounds(n,this.relativeGroupTransform)),e.addBounds(n),Qr.return(n)}else this.renderGroup&&(e.addBounds(n,this.relativeGroupTransform),Qr.return(n))}};function qR(r,e,t){t.clear();let n,i;return r.parent?e?n=r.parent.worldTransform:(i=At.get().identity(),n=Jc(r,i)):n=le.IDENTITY,kR(r,t,n,e),i&&At.return(i),t.isValid||t.set(0,0,0,0),t}function kR(r,e,t,n){var o,u;if(!r.visible||!r.measurable)return;let i;n?i=r.worldTransform:(r.updateLocalTransform(),i=At.get(),i.appendFrom(r.localTransform,t));const s=e,a=!!r.effects.length;if(a&&(e=Qr.get().clear()),r.boundsArea)e.addRect(r.boundsArea,i);else{r.bounds&&(e.matrix=i,e.addBounds(r.bounds));for(let l=0;l<r.children.length;l++)kR(r.children[l],e,i,n)}if(a){for(let l=0;l<r.effects.length;l++)(u=(o=r.effects[l]).addBounds)==null||u.call(o,e);s.addBounds(e,le.IDENTITY),Qr.return(e)}n||At.return(i)}function Jc(r,e){const t=r.parent;return t&&(Jc(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function OR(r,e){if(r===16777215||!e)return e;if(e===16777215||!r)return r;const t=r>>16&255,n=r>>8&255,i=r&255,s=e>>16&255,a=e>>8&255,o=e&255,u=t*s/255|0,l=n*a/255|0,c=i*o/255|0;return(u<<16)+(l<<8)+c}const BR=16777215;function LR(r,e){return r===BR?e:e===BR?r:OR(r,e)}function su(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const E5={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(r,e){if(e)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const t=Jc(this,At.get().identity());return r.appendFrom(this.localTransform,t),At.return(t),r},getGlobalTint(r){if(r)return this.renderGroup?su(this.renderGroup.worldColor):this.parentRenderGroup?su(LR(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=LR(e,t.localColor),t=t.parent;return su(e)}};let Qc=0;const FR=500;function Le(...r){Qc!==FR&&(Qc++,Qc===FR?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}function DR(r,e,t){return e.clear(),t||(t=le.IDENTITY),UR(r,e,t,r,!0),e.isValid||e.set(0,0,0,0),e}function UR(r,e,t,n,i){var u,l;let s;if(i)s=At.get(),s=t.copyTo(s);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const c=r.localTransform;s=At.get(),s.appendFrom(c,t)}const a=e,o=!!r.effects.length;if(o&&(e=Qr.get().clear()),r.boundsArea)e.addRect(r.boundsArea,s);else{r.renderPipeId&&(e.matrix=s,e.addBounds(r.bounds));const c=r.children;for(let h=0;h<c.length;h++)UR(c[h],e,s,n,!1)}if(o){for(let c=0;c<r.effects.length;c++)(l=(u=r.effects[c]).addLocalBounds)==null||l.call(u,e,n);a.addBounds(e,le.IDENTITY),Qr.return(e)}At.return(s)}function WR(r,e){const t=r.children;for(let n=0;n<t.length;n++){const i=t[n],s=i.uid,a=(i._didViewChangeTick&65535)<<16|i._didContainerChangeTick&65535,o=e.index;(e.data[o]!==s||e.data[o+1]!==a)&&(e.data[e.index]=s,e.data[e.index+1]=a,e.didChange=!0),e.index=o+2,i.children.length&&WR(i,e)}return e.didChange}const M5=new le,I5={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=r/e*t:this.scale.x=t},_setHeight(r,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=r/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new zt});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),WR(this,r),r.didChange&&DR(this,r.localBounds,M5),r.localBounds},getBounds(r,e){return qR(this,r,e||new zt)}},q5={_onRender:null,set onRender(r){const e=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},k5={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(O5))}};function O5(r,e){return r._zIndex-e._zIndex}const B5={getGlobalPosition(r=new Se,e=!1){return this.parent?this.parent.toGlobal(this._position,r,e):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,e,t=!1){const n=this.getGlobalTransform(At.get(),t);return e=n.apply(r,e),At.return(n),e},toLocal(r,e,t,n){e&&(r=e.toGlobal(r,t,n));const i=this.getGlobalTransform(At.get(),n);return t=i.applyInverse(r,t),At.return(i),t}};class NR{constructor(){this.uid=rt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let L5=0;class F5{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,t,n){const i=new tr({...this.textureOptions,width:e,height:t,resolution:1,antialias:n,autoGarbageCollect:!1});return new ce({source:i,label:`texturePool_${L5++}`})}getOptimalTexture(e,t,n=1,i){let s=Math.ceil(e*n-1e-6),a=Math.ceil(t*n-1e-6);s=Yi(s),a=Yi(a);const o=(s<<17)+(a<<1)+(i?1:0);this._texturePool[o]||(this._texturePool[o]=[]);let u=this._texturePool[o].pop();return u||(u=this.createTexture(s,a,i)),u.source._resolution=n,u.source.width=s/n,u.source.height=a/n,u.source.pixelWidth=s,u.source.pixelHeight=a,u.frame.x=0,u.frame.y=0,u.frame.width=e,u.frame.height=t,u.updateUvs(),this._poolKeyHash[u.uid]=o,u}getSameSizeTexture(e,t=!1){const n=e.source;return this.getOptimalTexture(e.width,e.height,n._resolution,t)}returnTexture(e){const t=this._poolKeyHash[e.uid];this._texturePool[t].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const n=this._texturePool[t];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this._texturePool={}}}const fr=new F5;class D5{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new le,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new NR,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let n=0;n<t.length;n++){const i=t[n];i._updateFlags=15,this.addChild(i)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(fr.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let n=0;n<t.length;n++)this.addChild(t[n])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let n=0;n<t.length;n++)this.removeChild(t[n])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let n=0;n<t.length;n++)this._getChildren(t[n],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const n=e.children;for(let i=0;i<n.length;i++)this._getChildren(n[i],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new le),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new le),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new le),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function U5(r,e,t={}){for(const n in e)!t[n]&&e[n]!==void 0&&(r[n]=e[n])}const eh=new kt(null),th=new kt(null),rh=new kt(null,1,1),GR=1,W5=2,nh=4;class li extends hr{constructor(e={}){var t,n;super(),this.uid=rt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new le,this.relativeGroupTransform=new le,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new kt(this,0,0),this._scale=rh,this._pivot=th,this._skew=eh,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],U5(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(i=>this.addChild(i)),(n=e.parent)==null||n.addChild(this)}static mixin(e){be("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Te.mixin(li,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||be(Ie,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let i=0;i<e.length;i++)this.addChild(e[i]);return e[0]}const t=e[0],n=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),n&&(n.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,n&&n.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let i=0;i<e.length;i++)this.removeChild(e[i]);return e[0]}const t=e[0],n=this.children.indexOf(t);return n>-1&&(this._didViewChangeTick++,this.children.splice(n,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,n),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=qe.get(D5,this),this.groupTransform=le.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),qe.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new le),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*r5}set angle(e){this.rotation=e*n5}get pivot(){return this._pivot===th&&(this._pivot=new kt(this,0,0)),this._pivot}set pivot(e){this._pivot===th&&(this._pivot=new kt(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===eh&&(this._skew=new kt(this,0,0)),this._skew}set skew(e){this._skew===eh&&(this._skew=new kt(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===rh&&(this._scale=new kt(this,1,1)),this._scale}set scale(e){this._scale===rh&&(this._scale=new kt(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const n=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,n.width),t!==void 0&&this._setHeight(t,n.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,n=this._scale,i=this._pivot,s=this._position,a=n._x,o=n._y,u=i._x,l=i._y;t.a=this._cx*a,t.b=this._sx*a,t.c=this._cy*o,t.d=this._sy*o,t.tx=s._x-(u*t.a+l*t.c),t.ty=s._y-(u*t.b+l*t.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=GR,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const n=Ne.shared.setValue(e??16777215).toBgrNumber();n!==this.localColor&&(this.localColor=n,this._updateFlags|=GR,this._onUpdate())}get tint(){return su(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=W5,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=nh,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=nh,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=nh,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var i;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let s=0;s<t.length;++s)t[s].destroy(e);(i=this.renderGroup)==null||i.destroy(),this.renderGroup=null}}Te.mixin(li,w5,C5,B5,q5,I5,A5,R5,k5,y5,x5,E5,S5);class ih extends li{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new zt(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:n,y:i}=e;return n>=t.minX&&n<=t.maxX&&i>=t.minY&&i<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,n){const{renderPipes:i,renderableGC:s}=t;i.blendMode.setBlendMode(this,this.groupBlendMode,e),i[this.renderPipeId].addRenderable(this,e),s.addRenderable(this),this.didViewUpdate=!1;const o=this.children,u=o.length;for(let l=0;l<u;l++)o[l].collectRenderables(e,t,n)}}class Xi extends ih{constructor(e=ce.EMPTY){e instanceof ce&&(e={texture:e});const{texture:t=ce.EMPTY,anchor:n,roundPixels:i,width:s,height:a,...o}=e;super({label:"Sprite",...o}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new kt({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=i??!1,s!==void 0&&(this.width=s),a!==void 0&&(this.height=a)}static from(e,t=!1){return e instanceof ce?new Xi(e):new Xi(ce.from(e,t))}set texture(e){e||(e=ce.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return _R(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return be("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,n=this._bounds,{width:i,height:s}=t.orig;n.minX=-e._x*i,n.maxX=n.minX+i,n.minY=-e._y*s,n.maxY=n.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(n)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const N5=new zt;function zR(r,e,t){const n=N5;r.measurable=!0,qR(r,t,n),e.addBoundsMask(n),r.measurable=!1}function HR(r,e,t){const n=Qr.get();r.measurable=!0;const i=At.get().identity(),s=jR(r,t,i);DR(r,n,s),r.measurable=!1,e.addBoundsMask(n),At.return(i),Qr.return(n)}function jR(r,e,t){return r?(r!==e&&(jR(r.parent,e,t),r.updateLocalTransform(),t.append(r.localTransform)),t):(Le("Mask bounds, renderable is not inside the root container"),t)}class $R{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Xi),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){this.inverse||zR(this.mask,e,t)}addLocalBounds(e,t){HR(this.mask,e,t)}containsPoint(e,t){const n=this.mask;return t(n,e)}destroy(){this.reset()}static test(e){return e instanceof Xi}}$R.extension=$.MaskEffect;class YR{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}YR.extension=$.MaskEffect;class VR{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){zR(this.mask,e,t)}addLocalBounds(e,t){HR(this.mask,e,t)}containsPoint(e,t){const n=this.mask;return t(n,e)}destroy(){this.reset()}static test(e){return e instanceof li}}VR.extension=$.MaskEffect;let XR={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};const Ht={get(){return XR},set(r){XR=r}};class KR extends tr{constructor(e){e.resource||(e.resource=Ht.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,n=this._resolution){const i=super.resize(e,t,n);return i&&this.resizeCanvas(),i}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}KR.extension=$.TextureSource;class na extends tr{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){const t=Ht.get().createCanvas(e.resource.width,e.resource.height);t.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=t,Le("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}na.extension=$.TextureSource;var ia=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(ia||{});class sh{constructor(e,t=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=n,this._once=i}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const ZR=class Yt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new sh(null,null,1/0),this.deltaMS=1/Yt.targetFPMS,this.elapsedMS=1/Yt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=ia.NORMAL){return this._addListener(new sh(e,t,n))}addOnce(e,t,n=ia.NORMAL){return this._addListener(new sh(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Yt.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,Yt.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Yt._shared){const e=Yt._shared=new Yt;e.autoStart=!0,e._protected=!0}return Yt._shared}static get system(){if(!Yt._system){const e=Yt._system=new Yt;e.autoStart=!0,e._protected=!0}return Yt._system}};ZR.targetFPMS=.06;let en=ZR,ah;async function G5(){return ah??(ah=(async()=>{var a;const e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(o=>{const u=document.createElement("video");u.onloadeddata=()=>o(u),u.onerror=()=>o(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!t)return"premultiply-alpha-on-upload";const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(i),e.deleteTexture(n),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),ah}const au=class xN extends tr{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...xN.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=en.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await G5(),this._load=new Promise((n,i)=>{this.isValid?n(this):(this._resolve=n,this._reject=i,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(en.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(en.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(en.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};au.extension=$.TextureSource,au.defaultOptions={...tr.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},au.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let z5=au;const Ki=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(n=>typeof n=="string"||t?e(n):n):r);class H5{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Le(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const n=Ki(e);let i;for(let u=0;u<this.parsers.length;u++){const l=this.parsers[u];if(l.test(t)){i=l.getCacheableAssets(n,t);break}}const s=new Map(Object.entries(i||{}));i||n.forEach(u=>{s.set(u,t)});const a=[...s.keys()],o={cacheKeys:a,keys:n};n.forEach(u=>{this._cacheMap.set(u,o)}),a.forEach(u=>{const l=i?i[u]:t;this._cache.has(u)&&this._cache.get(u)!==l&&Le("[Cache] already has key:",u),this._cache.set(u,s.get(u))})}remove(e){if(!this._cacheMap.has(e)){Le(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(i=>{this._cache.delete(i)}),t.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const yt=new H5,oh=[];Te.handleByList($.TextureSource,oh);function JR(r={}){const e=r&&r.resource,t=e?r.resource:r,n=e?r:{resource:r};for(let i=0;i<oh.length;i++){const s=oh[i];if(s.test(t))return new s(n)}throw new Error(`Could not find a source type for resource: ${n.resource}`)}function j5(r={},e=!1){const t=r&&r.resource,n=t?r.resource:r,i=t?r:{resource:r};if(!e&&yt.has(n))return yt.get(n);const s=new ce({source:JR(i)});return s.on("destroy",()=>{yt.has(n)&&yt.remove(n)}),e||yt.set(n,s),s}function $5(r,e=!1){return typeof r=="string"?yt.get(r):r instanceof tr?new ce({source:r}):j5(r,e)}ce.from=$5,tr.from=JR,Te.add($R,YR,VR,z5,na,KR,Hc);var ou=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(ou||{});function dr(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function sa(r){return r.split("?")[0].split("#")[0]}function Y5(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V5(r,e,t){return r.replace(new RegExp(Y5(e),"g"),t)}function X5(r,e){let t="",n=0,i=-1,s=0,a=-1;for(let o=0;o<=r.length;++o){if(o<r.length)a=r.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const u=t.lastIndexOf("/");if(u!==t.length-1){u===-1?(t="",n=0):(t=t.slice(0,u),n=t.length-1-t.lastIndexOf("/")),i=o,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=o,s=0;continue}}}else t.length>0?t+=`/${r.slice(i+1,o)}`:t=r.slice(i+1,o),n=o-i-1;i=o,s=0}else a===46&&s!==-1?++s:s=-1}return t}const Ir={toPosix(r){return V5(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){dr(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(dr(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const n=sa(this.toPosix(e??Ht.get().getBaseUrl())),i=sa(this.toPosix(t??this.rootname(n)));return r=this.toPosix(r),r.startsWith("/")?Ir.join(i,r.slice(1)):this.isAbsolute(r)?r:this.join(n,r)},normalize(r){if(dr(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const n=r.endsWith("/");return r=X5(r),r.length>0&&n&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return dr(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const n=r[t];if(dr(n),n.length>0)if(e===void 0)e=n;else{const i=r[t-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(dr(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let n=-1,i=!0;const s=this.getProtocol(r),a=r;r=r.slice(s.length);for(let o=r.length-1;o>=1;--o)if(e=r.charCodeAt(o),e===47){if(!i){n=o;break}}else i=!1;return n===-1?t?"/":this.isUrl(a)?s+r:s:t&&n===1?"//":s+r.slice(0,n)},rootname(r){dr(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){dr(r),e&&dr(e),r=sa(this.toPosix(r));let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let a=e.length-1,o=-1;for(s=r.length-1;s>=0;--s){const u=r.charCodeAt(s);if(u===47){if(!i){t=s+1;break}}else o===-1&&(i=!1,o=s+1),a>=0&&(u===e.charCodeAt(a)?--a===-1&&(n=s):(a=-1,n=o))}return t===n?n=o:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){dr(r),r=sa(this.toPosix(r));let e=-1,t=0,n=-1,i=!0,s=0;for(let a=r.length-1;a>=0;--a){const o=r.charCodeAt(a);if(o===47){if(!i){t=a+1;break}continue}n===-1&&(i=!1,n=a+1),o===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},parse(r){dr(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=sa(this.toPosix(r));let t=r.charCodeAt(0);const n=this.isAbsolute(r);let i;e.root=this.rootname(r),n||this.hasProtocol(r)?i=1:i=0;let s=-1,a=0,o=-1,u=!0,l=r.length-1,c=0;for(;l>=i;--l){if(t=r.charCodeAt(l),t===47){if(!u){a=l+1;break}continue}o===-1&&(u=!1,o=l+1),t===46?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||o===-1||c===0||c===1&&s===o-1&&s===a+1?o!==-1&&(a===0&&n?e.base=e.name=r.slice(1,o):e.base=e.name=r.slice(a,o)):(a===0&&n?(e.name=r.slice(1,s),e.base=r.slice(1,o)):(e.name=r.slice(a,s),e.base=r.slice(a,o)),e.ext=r.slice(s,o)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function QR(r,e,t,n,i){const s=e[t];for(let a=0;a<s.length;a++){const o=s[a];t<e.length-1?QR(r.replace(n[t],o),e,t+1,n,i):i.push(r.replace(n[t],o))}}function K5(r){const e=/\{(.*?)\}/g,t=r.match(e),n=[];if(t){const i=[];t.forEach(s=>{const a=s.substring(1,s.length-1).split(",");i.push(a)}),QR(r,i,0,t,n)}else n.push(r);return n}const eP=r=>!Array.isArray(r);class uh{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}}getAlias(e){const{alias:t,src:n}=e;return Ki(t||n,s=>typeof s=="string"?s:Array.isArray(s)?s.map(a=>(a==null?void 0:a.src)??a):s!=null&&s.src?s.src:s,!0)}addManifest(e){this._manifest&&Le("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const n=[];let i=t;Array.isArray(t)||(i=Object.entries(t).map(([s,a])=>typeof a=="string"||Array.isArray(a)?{alias:s,src:a}:{alias:s,...a})),i.forEach(s=>{const a=s.src,o=s.alias;let u;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);n.push(l),u=[o,l]}else{const l=o.map(c=>this._createBundleAssetId(e,c));n.push(...l),u=[...o,...l]}this.add({...s,alias:u,src:a})}),this._bundles[e]=n}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let n;n=s=>{this.hasKey(s)&&Le(`[Resolver] already has key: ${s} overwriting`)},Ki(t).forEach(s=>{const{src:a}=s;let{data:o,format:u,loadParser:l}=s;const c=Ki(a).map(f=>typeof f=="string"?K5(f):Array.isArray(f)?f:[f]),h=this.getAlias(s);Array.isArray(h)?h.forEach(n):n(h);const d=[];c.forEach(f=>{f.forEach(p=>{let g={};if(typeof p!="object"){g.src=p;for(let m=0;m<this._parsers.length;m++){const _=this._parsers[m];if(_.test(p)){g=_.parse(p);break}}}else o=p.data??o,u=p.format??u,l=p.loadParser??l,g={...g,...p};if(!h)throw new Error(`[Resolver] alias is undefined for this asset: ${g.src}`);g=this._buildResolvedAsset(g,{aliases:h,data:o,format:u,loadParser:l}),d.push(g)})}),h.forEach(f=>{this._assetMap[f]=d})})}resolveBundle(e){const t=eP(e);e=Ki(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const a=this.resolve(s),o={};for(const u in a){const l=a[u];o[this._extractAssetIdFromBundle(i,u)]=l}n[i]=o}}),t?n[e[0]]:n}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const n={};for(const i in t)n[i]=t[i].src;return n}return t.src}resolve(e){const t=eP(e);e=Ki(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const a=this._getPreferredOrder(s);a==null||a.priority.forEach(o=>{a.params[o].forEach(u=>{const l=s.filter(c=>c[o]?c[o]===u:!1);l.length&&(s=l)})}),this._resolverHash[i]=s[0]}else this._resolverHash[i]=this._buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const n=e[t],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:n,data:i,loadParser:s,format:a}=t;return(this._basePath||this._rootPath)&&(e.src=Ir.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=a??e.format??Z5(e.src),e}}uh.RETINA_PREFIX=/@([0-9\.]+)x/;function Z5(r){return r.split(".").pop().split("?").shift().split("#").shift()}const lh=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r},tP=class Ya{constructor(e,t){this.linkedSheets=[],this._texture=e instanceof ce?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=t;const n=parseFloat(t.meta.scale);n?(this.resolution=n,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Ya.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const n=Ya.BATCH_SIZE;for(;t-e<n&&t<this._frameKeys.length;){const i=this._frameKeys[t],s=this._frames[i],a=s.frame;if(a){let o=null,u=null;const l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,c=new vt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?o=new vt(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new vt(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(u=new vt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new ce({source:this.textureSource,frame:o,orig:c,trim:u,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:i.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){const i=e[t][n];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ya.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ya.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};tP.BATCH_SIZE=1e3;let rP=tP;const J5=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function nP(r,e,t){const n={};if(r.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[i]=e.textures[i]}),!t){const i=Ir.dirname(r[0]);e.linkedSheets.forEach((s,a)=>{const o=nP([`${i}/${e.data.meta.related_multi_packs[a]}`],s,!0);Object.assign(n,o)})}return n}const Q5={extension:$.Asset,cache:{test:r=>r instanceof rP,getCacheableAssets:(r,e)=>nP(r,e,!1)},resolver:{extension:{type:$.ResolveParser,name:"resolveSpritesheet"},test:r=>{const t=r.split("?")[0].split("."),n=t.pop(),i=t.pop();return n==="json"&&J5.includes(i)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=uh.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:$.LoadParser,priority:ou.Normal,name:"spritesheetLoader"},async testParse(r,e){return Ir.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var c,h;const{texture:n,imageFilename:i,textureOptions:s}=(e==null?void 0:e.data)??{};let a=Ir.dirname(e.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");let o;if(n instanceof ce)o=n;else{const d=lh(a+(i??r.meta.image),e.src);o=(await t.load([{src:d,data:s}]))[d]}const u=new rP(o.source,r);await u.parse();const l=(c=r==null?void 0:r.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(l)){const d=[];for(const p of l){if(typeof p!="string")continue;let g=a+p;(h=e.data)!=null&&h.ignoreMultiPack||(g=lh(g,e.src),d.push(t.load({src:g,data:{textureOptions:s,ignoreMultiPack:!0}})))}const f=await Promise.all(d);u.linkedSheets=f,f.forEach(p=>{p.linkedSheets=[u].concat(u.linkedSheets.filter(g=>g!==p))})}return u},async unload(r,e,t){await t.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};Te.add(Q5);class aa{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=aa.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Se,this.page=new Se,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var ch=/iPhone/i,iP=/iPod/i,sP=/iPad/i,aP=/\biOS-universal(?:.+)Mac\b/i,hh=/\bAndroid(?:.+)Mobile\b/i,oP=/Android/i,Zi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,uu=/Silk/i,tn=/Windows Phone/i,uP=/\bWindows(?:.+)ARM\b/i,lP=/BlackBerry/i,cP=/BB10/i,hP=/Opera Mini/i,fP=/\b(CriOS|Chrome)(?:.+)Mobile/i,dP=/Mobile(?:.+)Firefox\b/i,pP=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function e$(r){return function(e){return e.test(r)}}function gP(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=e$(t),s={apple:{phone:i(ch)&&!i(tn),ipod:i(iP),tablet:!i(ch)&&(i(sP)||pP(e))&&!i(tn),universal:i(aP),device:(i(ch)||i(iP)||i(sP)||i(aP)||pP(e))&&!i(tn)},amazon:{phone:i(Zi),tablet:!i(Zi)&&i(uu),device:i(Zi)||i(uu)},android:{phone:!i(tn)&&i(Zi)||!i(tn)&&i(hh),tablet:!i(tn)&&!i(Zi)&&!i(hh)&&(i(uu)||i(oP)),device:!i(tn)&&(i(Zi)||i(uu)||i(hh)||i(oP))||i(/\bokhttp\b/i)},windows:{phone:i(tn),tablet:i(uP),device:i(tn)||i(uP)},other:{blackberry:i(lP),blackberry10:i(cP),opera:i(hP),firefox:i(dP),chrome:i(fP),device:i(lP)||i(cP)||i(hP)||i(dP)||i(fP)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const t$=(gP.default??gP)(globalThis.navigator),r$=9,lu=100,n$=0,i$=0,mP=2,vP=1,s$=-1e3,a$=-1e3,o$=2,fh=class wN{constructor(e,t=t$){this._mobileInfo=t,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(t.tablet||t.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){const e=document.createElement("button");e.style.width=`${vP}px`,e.style.height=`${vP}px`,e.style.position="absolute",e.style.top=`${s$}px`,e.style.left=`${a$}px`,e.style.zIndex=o$.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width=`${lu}px`,this._div.style.height=`${lu}px`,this._div.style.position="absolute",this._div.style.top=`${n$}px`,this._div.style.left=`${i$}px`,this._div.style.zIndex=mP.toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));const e=this._renderer.view.canvas;if(e.parentNode)e.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{const t=new MutationObserver(()=>{e.parentNode&&(e.parentNode.appendChild(this._div),t.disconnect(),this._initAccessibilitySetup())});t.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;this._pool.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);const t=e.children;if(t)for(let n=0;n<t.length;n++)this._updateAccessibleObjects(t[n])}init(e){const n={accessibilityOptions:{...wN.defaultOptions,...(e==null?void 0:e.accessibilityOptions)||{}}};this.debug=n.accessibilityOptions.debug,this._activateOnTab=n.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=n.accessibilityOptions.deactivateOnMouseMove,n.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){const e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;const t=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const n of this._children)n._renderId===this._renderId&&t.add(this._children.indexOf(n))}for(let n=this._children.length-1;n>=0;n--){const i=this._children[n];t.has(n)||(i._accessibleDiv&&i._accessibleDiv.parentNode&&(i._accessibleDiv.parentNode.removeChild(i._accessibleDiv),this._pool.push(i._accessibleDiv),i._accessibleDiv=null),i._accessibleActive=!1,MR(this._children,n,1))}if(this._renderer.renderingToScreen){const{x:n,y:i,width:s,height:a}=this._renderer.screen,o=this._div;o.style.left=`${n}px`,o.style.top=`${i}px`,o.style.width=`${s}px`,o.style.height=`${a}px`}for(let n=0;n<this._children.length;n++){const i=this._children[n];if(!i._accessibleActive||!i._accessibleDiv)continue;const s=i._accessibleDiv,a=i.hitArea||i.getBounds().rectangle;if(i.hitArea){const o=i.worldTransform,u=this._renderer.resolution,l=this._renderer.resolution;s.style.left=`${(o.tx+a.x*o.a)*u}px`,s.style.top=`${(o.ty+a.y*o.d)*l}px`,s.style.width=`${a.width*o.a*u}px`,s.style.height=`${a.height*o.d*l}px`}else{this._capHitArea(a);const o=this._renderer.resolution,u=this._renderer.resolution;s.style.left=`${a.x*o}px`,s.style.top=`${a.y*u}px`,s.style.width=`${a.width*o}px`,s.style.height=`${a.height*u}px`}}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:n}=this._renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}_addChild(e){let t=this._pool.pop();t||(e.accessibleType==="button"?t=document.createElement("button"):(t=document.createElement(e.accessibleType),t.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,e.accessibleText&&(t.innerText=e.accessibleText)),t.style.width=`${lu}px`,t.style.height=`${lu}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=mP.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this._updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv),e.interactive&&(e._accessibleDiv.tabIndex=e.tabIndex)}_dispatchEvent(e,t){const{container:n}=e.target,i=this._renderer.events.rootBoundary,s=Object.assign(new aa(i),{target:n});i.rootTarget=this._renderer.lastObjectRendered,t.forEach(a=>i.dispatchEvent(s,a))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==r$||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}};fh.extension={type:[$.WebGLSystem,$.WebGPUSystem],name:"accessibility"},fh.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let u$=fh;const l$={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1},dh=Object.create(null),_P=Object.create(null);function ph(r,e){let t=_P[r];return t===void 0&&(dh[e]===void 0&&(dh[e]=1),_P[r]=t=dh[e]++),t}let Ji;function yP(){return(!Ji||Ji!=null&&Ji.isContextLost())&&(Ji=Ht.get().createCanvas().getContext("webgl",{})),Ji}let cu;function c$(){if(!cu){cu="mediump";const r=yP();r&&r.getShaderPrecisionFormat&&(cu=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return cu}function h$(r,e,t){return e?r:t?(r=r.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function f$(r,e,t){const n=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let i=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return i==="highp"&&n!=="highp"&&(i="mediump"),`precision ${i} float;
${r}`}else if(n!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function d$(r,e){return e?`#version 300 es
${r}`:r}const p$={},g$={};function m$(r,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const n=t?p$:g$;return n[e]?(n[e]++,e+=`-${n[e]}`):n[e]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${e}`}
${r}`}function v$(r,e){return e?r.replace("#version 300 es",""):r}const gh={stripVersion:v$,ensurePrecision:f$,addProgramDefines:h$,setProgramName:m$,insertVersion:d$},mh=Object.create(null),bP=class vS{constructor(e){e={...vS.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,n={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:c$()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let i=e.fragment,s=e.vertex;Object.keys(gh).forEach(a=>{const o=n[a];i=gh[a](i,o,!0),s=gh[a](s,o,!1)}),this.fragment=i,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=ph(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return mh[t]||(mh[t]=new vS(e)),mh[t]}};bP.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let vh=bP;const xP={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function hu(r){return xP[r]??xP.float32}const _$={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function y$({source:r,entryPoint:e}){const t={},n=r.indexOf(`fn ${e}`);if(n!==-1){const i=r.indexOf("->",n);if(i!==-1){const s=r.substring(n,i),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let o;for(;(o=a.exec(s))!==null;){const u=_$[o[3]]??"float32";t[o[2]]={location:parseInt(o[1],10),format:u,stride:hu(u).stride,offset:0,instance:!1,start:0}}}}return t}function _h(r){var h,d;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,n=/@binding\((\d+)\)/,i=/var(<[^>]+>)? (\w+)/,s=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,o=/(\w+)\s*:\s*([\w\<\>]+)/g,u=/struct\s+(\w+)/,l=(h=r.match(e))==null?void 0:h.map(f=>({group:parseInt(f.match(t)[1],10),binding:parseInt(f.match(n)[1],10),name:f.match(i)[2],isUniform:f.match(i)[1]==="<uniform>",type:f.match(s)[1]}));if(!l)return{groups:[],structs:[]};const c=((d=r.match(a))==null?void 0:d.map(f=>{const p=f.match(u)[1],g=f.match(o).reduce((m,_)=>{const[y,x]=_.split(":");return m[y.trim()]=x.trim(),m},{});return g?{name:p,members:g}:null}).filter(({name:f})=>l.some(p=>p.type===f)))??[];return{groups:l,structs:c}}var oa=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(oa||{});function b$({groups:r}){const e=[];for(let t=0;t<r.length;t++){const n=r[t];e[n.group]||(e[n.group]=[]),n.isUniform?e[n.group].push({binding:n.binding,visibility:oa.VERTEX|oa.FRAGMENT,buffer:{type:"uniform"}}):n.type==="sampler"?e[n.group].push({binding:n.binding,visibility:oa.FRAGMENT,sampler:{type:"filtering"}}):n.type==="texture_2d"&&e[n.group].push({binding:n.binding,visibility:oa.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function x$({groups:r}){const e=[];for(let t=0;t<r.length;t++){const n=r[t];e[n.group]||(e[n.group]={}),e[n.group][n.name]=n.binding}return e}function w$(r,e){const t=new Set,n=new Set,i=[...r.structs,...e.structs].filter(a=>t.has(a.name)?!1:(t.add(a.name),!0)),s=[...r.groups,...e.groups].filter(a=>{const o=`${a.name}-${a.binding}`;return n.has(o)?!1:(n.add(o),!0)});return{structs:i,groups:s}}const yh=Object.create(null);class ua{constructor(e){var o,u;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:n,layout:i,gpuLayout:s,name:a}=e;if(this.name=a,this.fragment=t,this.vertex=n,t.source===n.source){const l=_h(t.source);this.structsAndGroups=l}else{const l=_h(n.source),c=_h(t.source);this.structsAndGroups=w$(l,c)}this.layout=i??x$(this.structsAndGroups),this.gpuLayout=s??b$(this.structsAndGroups),this.autoAssignGlobalUniforms=((o=this.layout[0])==null?void 0:o.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((u=this.layout[1])==null?void 0:u.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,n=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=ph(n,"program")}get attributeData(){return this._attributeData??(this._attributeData=y$(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return yh[t]||(yh[t]=new ua(e)),yh[t]}}const wP=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],S$=wP.reduce((r,e)=>(r[e]=!0,r),{});function T$(r,e){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const SP=class SN{constructor(e,t){this._touched=0,this.uid=rt("uniform"),this._resourceType="uniformGroup",this._resourceId=rt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...SN.defaultOptions,...t},this.uniformStructures=e;const n={};for(const i in e){const s=e[i];if(s.name=i,s.size=s.size??1,!S$[s.type])throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${wP.join(", ")}`);s.value??(s.value=T$(s.type,s.size)),n[i]=s.value}this.uniforms=n,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=ph(Object.keys(n).map(i=>`${i}-${e[i].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};SP.defaultOptions={ubo:!1,isStatic:!1};let An=SP;class Qi{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const n in e){const i=e[n];this.setResource(i,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const n in this.resources)e[t++]=this.resources[n]._resourceId;this._key=e.join("|")}setResource(e,t){var i,s;const n=this.resources[t];e!==n&&(n&&((i=e.off)==null||i.call(e,"change",this.onResourceChange,this)),(s=e.on)==null||s.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const n in t)t[n]._touched=e}destroy(){var t;const e=this.resources;for(const n in e){const i=e[n];(t=i.off)==null||t.call(i,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const n in t)t[n]===e&&(t[n]=null)}else this._updateKey()}}var es=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(es||{});class ci extends hr{constructor(e){super(),this.uid=rt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:t,glProgram:n,groups:i,resources:s,compatibleRenderers:a,groupMap:o}=e;this.gpuProgram=t,this.glProgram=n,a===void 0&&(a=0,t&&(a|=es.WEBGPU),n&&(a|=es.WEBGL)),this.compatibleRenderers=a;const u={};if(!s&&!i&&(s={}),s&&i)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&i&&!o)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&i&&o)for(const l in o)for(const c in o[l]){const h=o[l][c];u[h]={group:l,binding:c,name:h}}else if(t&&i&&!o){const l=t.structsAndGroups.groups;o={},l.forEach(c=>{o[c.group]=o[c.group]||{},o[c.group][c.binding]=c.name,u[c.name]=c})}else if(s){i={},o={},t&&t.structsAndGroups.groups.forEach(h=>{o[h.group]=o[h.group]||{},o[h.group][h.binding]=h.name,u[h.name]=h});let l=0;for(const c in s)u[c]||(i[99]||(i[99]=new Qi,this._ownedBindGroups.push(i[99])),u[c]={group:99,binding:l,name:c},o[99]=o[99]||{},o[99][l]=c,l++);for(const c in s){const h=c;let d=s[c];!d.source&&!d._resourceType&&(d=new An(d));const f=u[h];f&&(i[f.group]||(i[f.group]=new Qi,this._ownedBindGroups.push(i[f.group])),i[f.group].setResource(d,f.binding))}}this.groups=i,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(i,u)}addResource(e,t,n){var i,s;(i=this._uniformBindMap)[t]||(i[t]={}),(s=this._uniformBindMap[t])[n]||(s[n]=e),this.groups[t]||(this.groups[t]=new Qi,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const n={};for(const i in t){const s=t[i];Object.defineProperty(n,s.name,{get(){return e[s.group].getResource(s.binding)},set(a){e[s.group].setResource(a,s.binding)}})}return n}destroy(e=!1){var t,n;this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(n=this.glProgram)==null||n.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(i=>{i.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){const{gpu:t,gl:n,...i}=e;let s,a;return t&&(s=ua.from(t)),n&&(a=vh.from(n)),new ci({gpuProgram:s,glProgram:a,...i})}}const A$={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},bh=0,xh=1,wh=2,Sh=3,Th=4,Ah=5,Rh=class TN{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<bh)}set blend(e){!!(this.data&1<<bh)!==e&&(this.data^=1<<bh)}get offsets(){return!!(this.data&1<<xh)}set offsets(e){!!(this.data&1<<xh)!==e&&(this.data^=1<<xh)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<wh)}set culling(e){!!(this.data&1<<wh)!==e&&(this.data^=1<<wh)}get depthTest(){return!!(this.data&1<<Sh)}set depthTest(e){!!(this.data&1<<Sh)!==e&&(this.data^=1<<Sh)}get depthMask(){return!!(this.data&1<<Ah)}set depthMask(e){!!(this.data&1<<Ah)!==e&&(this.data^=1<<Ah)}get clockwiseFrontFace(){return!!(this.data&1<<Th)}set clockwiseFrontFace(e){!!(this.data&1<<Th)!==e&&(this.data^=1<<Th)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=A$[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new TN;return e.depthTest=!1,e.blend=!0,e}};Rh.default2d=Rh.for2d();let fu=Rh;var du={exports:{}},TP;function R$(){if(TP)return du.exports;TP=1,du.exports=r,du.exports.default=r;function r(A,P,C){C=C||2;var v=P&&P.length,B=v?P[0]*C:A.length,F=e(A,0,B,C,!0),L=[];if(!F||F.next===F.prev)return L;var z,Y,V,we,ve,de,Pe;if(v&&(F=u(A,P,F,C)),A.length>80*C){z=V=A[0],Y=we=A[1];for(var me=C;me<B;me+=C)ve=A[me],de=A[me+1],ve<z&&(z=ve),de<Y&&(Y=de),ve>V&&(V=ve),de>we&&(we=de);Pe=Math.max(V-z,we-Y),Pe=Pe!==0?32767/Pe:0}return n(F,L,C,z,Y,Pe,0),L}function e(A,P,C,v,B){var F,L;if(B===G(A,P,C,v)>0)for(F=P;F<C;F+=v)L=U(F,A[F],A[F+1],L);else for(F=C-v;F>=P;F-=v)L=U(F,A[F],A[F+1],L);return L&&b(L,L.next)&&(N(L),L=L.next),L}function t(A,P){if(!A)return A;P||(P=A);var C=A,v;do if(v=!1,!C.steiner&&(b(C,C.next)||x(C.prev,C,C.next)===0)){if(N(C),C=P=C.prev,C===C.next)break;v=!0}else C=C.next;while(v||C!==P);return P}function n(A,P,C,v,B,F,L){if(A){!L&&F&&f(A,v,B,F);for(var z=A,Y,V;A.prev!==A.next;){if(Y=A.prev,V=A.next,F?s(A,v,B,F):i(A)){P.push(Y.i/C|0),P.push(A.i/C|0),P.push(V.i/C|0),N(A),A=V.next,z=V.next;continue}if(A=V,A===z){L?L===1?(A=a(t(A),P,C),n(A,P,C,v,B,F,2)):L===2&&o(A,P,C,v,B,F):n(t(A),P,C,v,B,F,1);break}}}}function i(A){var P=A.prev,C=A,v=A.next;if(x(P,C,v)>=0)return!1;for(var B=P.x,F=C.x,L=v.x,z=P.y,Y=C.y,V=v.y,we=B<F?B<L?B:L:F<L?F:L,ve=z<Y?z<V?z:V:Y<V?Y:V,de=B>F?B>L?B:L:F>L?F:L,Pe=z>Y?z>V?z:V:Y>V?Y:V,me=v.next;me!==P;){if(me.x>=we&&me.x<=de&&me.y>=ve&&me.y<=Pe&&_(B,z,F,Y,L,V,me.x,me.y)&&x(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function s(A,P,C,v){var B=A.prev,F=A,L=A.next;if(x(B,F,L)>=0)return!1;for(var z=B.x,Y=F.x,V=L.x,we=B.y,ve=F.y,de=L.y,Pe=z<Y?z<V?z:V:Y<V?Y:V,me=we<ve?we<de?we:de:ve<de?ve:de,J=z>Y?z>V?z:V:Y>V?Y:V,ne=we>ve?we>de?we:de:ve>de?ve:de,Q=g(Pe,me,P,C,v),X=g(J,ne,P,C,v),te=A.prevZ,H=A.nextZ;te&&te.z>=Q&&H&&H.z<=X;){if(te.x>=Pe&&te.x<=J&&te.y>=me&&te.y<=ne&&te!==B&&te!==L&&_(z,we,Y,ve,V,de,te.x,te.y)&&x(te.prev,te,te.next)>=0||(te=te.prevZ,H.x>=Pe&&H.x<=J&&H.y>=me&&H.y<=ne&&H!==B&&H!==L&&_(z,we,Y,ve,V,de,H.x,H.y)&&x(H.prev,H,H.next)>=0))return!1;H=H.nextZ}for(;te&&te.z>=Q;){if(te.x>=Pe&&te.x<=J&&te.y>=me&&te.y<=ne&&te!==B&&te!==L&&_(z,we,Y,ve,V,de,te.x,te.y)&&x(te.prev,te,te.next)>=0)return!1;te=te.prevZ}for(;H&&H.z<=X;){if(H.x>=Pe&&H.x<=J&&H.y>=me&&H.y<=ne&&H!==B&&H!==L&&_(z,we,Y,ve,V,de,H.x,H.y)&&x(H.prev,H,H.next)>=0)return!1;H=H.nextZ}return!0}function a(A,P,C){var v=A;do{var B=v.prev,F=v.next.next;!b(B,F)&&T(B,v,v.next,F)&&q(B,F)&&q(F,B)&&(P.push(B.i/C|0),P.push(v.i/C|0),P.push(F.i/C|0),N(v),N(v.next),v=A=F),v=v.next}while(v!==A);return t(v)}function o(A,P,C,v,B,F){var L=A;do{for(var z=L.next.next;z!==L.prev;){if(L.i!==z.i&&y(L,z)){var Y=k(L,z);L=t(L,L.next),Y=t(Y,Y.next),n(L,P,C,v,B,F,0),n(Y,P,C,v,B,F,0);return}z=z.next}L=L.next}while(L!==A)}function u(A,P,C,v){var B=[],F,L,z,Y,V;for(F=0,L=P.length;F<L;F++)z=P[F]*v,Y=F<L-1?P[F+1]*v:A.length,V=e(A,z,Y,v,!1),V===V.next&&(V.steiner=!0),B.push(m(V));for(B.sort(l),F=0;F<B.length;F++)C=c(B[F],C);return C}function l(A,P){return A.x-P.x}function c(A,P){var C=h(A,P);if(!C)return P;var v=k(C,A);return t(v,v.next),t(C,C.next)}function h(A,P){var C=P,v=A.x,B=A.y,F=-1/0,L;do{if(B<=C.y&&B>=C.next.y&&C.next.y!==C.y){var z=C.x+(B-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(z<=v&&z>F&&(F=z,L=C.x<C.next.x?C:C.next,z===v))return L}C=C.next}while(C!==P);if(!L)return null;var Y=L,V=L.x,we=L.y,ve=1/0,de;C=L;do v>=C.x&&C.x>=V&&v!==C.x&&_(B<we?v:F,B,V,we,B<we?F:v,B,C.x,C.y)&&(de=Math.abs(B-C.y)/(v-C.x),q(C,A)&&(de<ve||de===ve&&(C.x>L.x||C.x===L.x&&d(L,C)))&&(L=C,ve=de)),C=C.next;while(C!==Y);return L}function d(A,P){return x(A.prev,A,P.prev)<0&&x(P.next,A,A.next)<0}function f(A,P,C,v){var B=A;do B.z===0&&(B.z=g(B.x,B.y,P,C,v)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==A);B.prevZ.nextZ=null,B.prevZ=null,p(B)}function p(A){var P,C,v,B,F,L,z,Y,V=1;do{for(C=A,A=null,F=null,L=0;C;){for(L++,v=C,z=0,P=0;P<V&&(z++,v=v.nextZ,!!v);P++);for(Y=V;z>0||Y>0&&v;)z!==0&&(Y===0||!v||C.z<=v.z)?(B=C,C=C.nextZ,z--):(B=v,v=v.nextZ,Y--),F?F.nextZ=B:A=B,B.prevZ=F,F=B;C=v}F.nextZ=null,V*=2}while(L>1);return A}function g(A,P,C,v,B){return A=(A-C)*B|0,P=(P-v)*B|0,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,P=(P|P<<8)&16711935,P=(P|P<<4)&252645135,P=(P|P<<2)&858993459,P=(P|P<<1)&1431655765,A|P<<1}function m(A){var P=A,C=A;do(P.x<C.x||P.x===C.x&&P.y<C.y)&&(C=P),P=P.next;while(P!==A);return C}function _(A,P,C,v,B,F,L,z){return(B-L)*(P-z)>=(A-L)*(F-z)&&(A-L)*(v-z)>=(C-L)*(P-z)&&(C-L)*(F-z)>=(B-L)*(v-z)}function y(A,P){return A.next.i!==P.i&&A.prev.i!==P.i&&!M(A,P)&&(q(A,P)&&q(P,A)&&O(A,P)&&(x(A.prev,A,P.prev)||x(A,P.prev,P))||b(A,P)&&x(A.prev,A,A.next)>0&&x(P.prev,P,P.next)>0)}function x(A,P,C){return(P.y-A.y)*(C.x-P.x)-(P.x-A.x)*(C.y-P.y)}function b(A,P){return A.x===P.x&&A.y===P.y}function T(A,P,C,v){var B=w(x(A,P,C)),F=w(x(A,P,v)),L=w(x(C,v,A)),z=w(x(C,v,P));return!!(B!==F&&L!==z||B===0&&S(A,C,P)||F===0&&S(A,v,P)||L===0&&S(C,A,v)||z===0&&S(C,P,v))}function S(A,P,C){return P.x<=Math.max(A.x,C.x)&&P.x>=Math.min(A.x,C.x)&&P.y<=Math.max(A.y,C.y)&&P.y>=Math.min(A.y,C.y)}function w(A){return A>0?1:A<0?-1:0}function M(A,P){var C=A;do{if(C.i!==A.i&&C.next.i!==A.i&&C.i!==P.i&&C.next.i!==P.i&&T(C,C.next,A,P))return!0;C=C.next}while(C!==A);return!1}function q(A,P){return x(A.prev,A,A.next)<0?x(A,P,A.next)>=0&&x(A,A.prev,P)>=0:x(A,P,A.prev)<0||x(A,A.next,P)<0}function O(A,P){var C=A,v=!1,B=(A.x+P.x)/2,F=(A.y+P.y)/2;do C.y>F!=C.next.y>F&&C.next.y!==C.y&&B<(C.next.x-C.x)*(F-C.y)/(C.next.y-C.y)+C.x&&(v=!v),C=C.next;while(C!==A);return v}function k(A,P){var C=new Z(A.i,A.x,A.y),v=new Z(P.i,P.x,P.y),B=A.next,F=P.prev;return A.next=P,P.prev=A,C.next=B,B.prev=C,v.next=C,C.prev=v,F.next=v,v.prev=F,v}function U(A,P,C,v){var B=new Z(A,P,C);return v?(B.next=v.next,B.prev=v,v.next.prev=B,v.next=B):(B.prev=B,B.next=B),B}function N(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Z(A,P,C){this.i=A,this.x=P,this.y=C,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(A,P,C,v){var B=P&&P.length,F=B?P[0]*C:A.length,L=Math.abs(G(A,0,F,C));if(B)for(var z=0,Y=P.length;z<Y;z++){var V=P[z]*C,we=z<Y-1?P[z+1]*C:A.length;L-=Math.abs(G(A,V,we,C))}var ve=0;for(z=0;z<v.length;z+=3){var de=v[z]*C,Pe=v[z+1]*C,me=v[z+2]*C;ve+=Math.abs((A[de]-A[me])*(A[Pe+1]-A[de+1])-(A[de]-A[Pe])*(A[me+1]-A[de+1]))}return L===0&&ve===0?0:Math.abs((ve-L)/L)};function G(A,P,C,v){for(var B=0,F=P,L=C-v;F<C;F+=v)B+=(A[L]-A[F])*(A[F+1]+A[L+1]),L=F;return B}return r.flatten=function(A){for(var P=A[0][0].length,C={vertices:[],holes:[],dimensions:P},v=0,B=0;B<A.length;B++){for(var F=0;F<A[B].length;F++)for(var L=0;L<P;L++)C.vertices.push(A[B][F][L]);B>0&&(v+=A[B-1].length,C.holes.push(v))}return C},du.exports}var P$=R$();const C$=Lo(P$);class AP{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let t,n;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;t=i,n=s}this.renderer.resize(t,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}AP.extension=$.Application;class RP{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,ia.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?en.shared:new en,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}RP.extension=$.Application;class E$ extends hr{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return be(Ie,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return be(Ie,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return be(Ie,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return be(Ie,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return be(Ie,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(const n in this.chars)(t=this.chars[n].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(n=>n.texture.destroy(!0)),this.pages=null)}}const PP=[{offset:0,color:"white"},{offset:1,color:"black"}],Ph=class _S{constructor(...e){this.uid=rt("fillGradient"),this.type="linear",this.colorStops=[];let t=M$(e);t={...t.type==="radial"?_S.defaultRadialOptions:_S.defaultLinearOptions,...fR(t)},this._textureSize=t.textureSize,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(i=>{this.addColorStop(i.offset,i.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:Ne.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:PP,t=this._textureSize,{canvas:n,context:i}=EP(t,1),s=i.createLinearGradient(0,0,this._textureSize,0);CP(s,e),i.fillStyle=s,i.fillRect(0,0,t,1),this.texture=new ce({source:new na({resource:n})});const{x:a,y:o}=this.start,{x:u,y:l}=this.end,c=new le,h=u-a,d=l-o,f=Math.sqrt(h*h+d*d),p=Math.atan2(d,h);c.scale(f/t,1),c.rotate(p),c.translate(a,o),this.textureSpace==="local"&&c.scale(t,t),this.transform=c}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:PP,t=this._textureSize,{canvas:n,context:i}=EP(t,t),{x:s,y:a}=this.center,{x:o,y:u}=this.outerCenter,l=this.innerRadius,c=this.outerRadius,h=o-c,d=u-c,f=t/(c*2),p=(s-h)*f,g=(a-d)*f,m=i.createRadialGradient(p,g,l*f,(o-h)*f,(u-d)*f,c*f);CP(m,e),i.fillStyle=e[e.length-1].color,i.fillRect(0,0,t,t),i.fillStyle=m,i.translate(p,g),i.rotate(this.rotation),i.scale(1,this.scale),i.translate(-p,-g),i.fillRect(0,0,t,t),this.texture=new ce({source:new na({resource:n,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});const _=new le;_.scale(1/f,1/f),_.translate(h,d),this.textureSpace==="local"&&_.scale(t,t),this.transform=_}get styleKey(){return this.uid}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null}};Ph.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256},Ph.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256};let Rn=Ph;function CP(r,e){for(let t=0;t<e.length;t++){const n=e[t];r.addColorStop(n.offset,n.color)}}function EP(r,e){const t=Ht.get().createCanvas(r,e),n=t.getContext("2d");return{canvas:t,context:n}}function M$(r){let e=r[0]??{};return(typeof e=="number"||r[1])&&(be("8.5.2","use options object instead"),e={type:"linear",start:{x:r[0],y:r[1]},end:{x:r[2],y:r[3]},textureSpace:r[4],textureSize:r[5]??Rn.defaultLinearOptions.textureSize}),e}const MP={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class pu{constructor(e,t){this.uid=rt("fillPattern"),this.transform=new le,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=MP[t].addressModeU,e.source.style.addressModeV=MP[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var Ch,IP;function I$(){if(IP)return Ch;IP=1,Ch=t;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(s){var a=[];return s.replace(e,function(o,u,l){var c=u.toLowerCase();for(l=i(l),c=="m"&&l.length>2&&(a.push([u].concat(l.splice(0,2))),c="l",u=u=="m"?"l":"L");;){if(l.length==r[c])return l.unshift(u),a.push(l);if(l.length<r[c])throw new Error("malformed path data");a.push([u].concat(l.splice(0,r[c])))}}),a}var n=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function i(s){var a=s.match(n);return a?a.map(Number):[]}return Ch}var q$=I$();const k$=Lo(q$);function O$(r,e){const t=k$(r),n=[];let i=null,s=0,a=0;for(let o=0;o<t.length;o++){const u=t[o],l=u[0],c=u;switch(l){case"M":s=c[1],a=c[2],e.moveTo(s,a);break;case"m":s+=c[1],a+=c[2],e.moveTo(s,a);break;case"H":s=c[1],e.lineTo(s,a);break;case"h":s+=c[1],e.lineTo(s,a);break;case"V":a=c[1],e.lineTo(s,a);break;case"v":a+=c[1],e.lineTo(s,a);break;case"L":s=c[1],a=c[2],e.lineTo(s,a);break;case"l":s+=c[1],a+=c[2],e.lineTo(s,a);break;case"C":s=c[5],a=c[6],e.bezierCurveTo(c[1],c[2],c[3],c[4],s,a);break;case"c":e.bezierCurveTo(s+c[1],a+c[2],s+c[3],a+c[4],s+c[5],a+c[6]),s+=c[5],a+=c[6];break;case"S":s=c[3],a=c[4],e.bezierCurveToShort(c[1],c[2],s,a);break;case"s":e.bezierCurveToShort(s+c[1],a+c[2],s+c[3],a+c[4]),s+=c[3],a+=c[4];break;case"Q":s=c[3],a=c[4],e.quadraticCurveTo(c[1],c[2],s,a);break;case"q":e.quadraticCurveTo(s+c[1],a+c[2],s+c[3],a+c[4]),s+=c[3],a+=c[4];break;case"T":s=c[1],a=c[2],e.quadraticCurveToShort(s,a);break;case"t":s+=c[1],a+=c[2],e.quadraticCurveToShort(s,a);break;case"A":s=c[6],a=c[7],e.arcToSvg(c[1],c[2],c[3],c[4],c[5],s,a);break;case"a":s+=c[6],a+=c[7],e.arcToSvg(c[1],c[2],c[3],c[4],c[5],s,a);break;case"Z":case"z":e.closePath(),n.length>0&&(i=n.pop(),i?(s=i.startX,a=i.startY):(s=0,a=0)),i=null;break;default:Le(`Unknown SVG path command: ${l}`)}l!=="Z"&&l!=="z"&&i===null&&(i={startX:s,startY:a},n.push(i))}return e}class Eh{constructor(e=0,t=0,n=0){this.type="circle",this.x=e,this.y=t,this.radius=n}clone(){return new Eh(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=n}strokeContains(e,t,n,i=.5){if(this.radius===0)return!1;const s=this.x-e,a=this.y-t,o=this.radius,u=(1-i)*n,l=Math.sqrt(s*s+a*a);return l<=o+u&&l>o-(n-u)}getBounds(e){return e||(e=new vt),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Mh{constructor(e=0,t=0,n=0,i=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=n,this.halfHeight=i}clone(){return new Mh(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let n=(e-this.x)/this.halfWidth,i=(t-this.y)/this.halfHeight;return n*=n,i*=i,n+i<=1}strokeContains(e,t,n,i=.5){const{halfWidth:s,halfHeight:a}=this;if(s<=0||a<=0)return!1;const o=n*(1-i),u=n-o,l=s-u,c=a-u,h=s+o,d=a+o,f=e-this.x,p=t-this.y,g=f*f/(l*l)+p*p/(c*c),m=f*f/(h*h)+p*p/(d*d);return g>1&&m<=1}getBounds(e){return e||(e=new vt),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function B$(r,e,t,n,i,s){const a=r-t,o=e-n,u=i-t,l=s-n,c=a*u+o*l,h=u*u+l*l;let d=-1;h!==0&&(d=c/h);let f,p;d<0?(f=t,p=n):d>1?(f=i,p=s):(f=t+d*u,p=n+d*l);const g=r-f,m=e-p;return g*g+m*m}let L$,F$;class la{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const n=[];for(let i=0,s=t.length;i<s;i++)n.push(t[i].x,t[i].y);t=n}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,n=t.length;for(let i=0;i<n;i+=2){const s=t[i],a=t[i+1],o=t[(i+2)%n],u=t[(i+3)%n];e+=(o-s)*(u+a)}return e<0}containsPolygon(e){const t=this.getBounds(L$),n=e.getBounds(F$);if(!t.containsRect(n))return!1;const i=e.points;for(let s=0;s<i.length;s+=2){const a=i[s],o=i[s+1];if(!this.contains(a,o))return!1}return!0}clone(){const e=this.points.slice(),t=new la(e);return t.closePath=this.closePath,t}contains(e,t){let n=!1;const i=this.points.length/2;for(let s=0,a=i-1;s<i;a=s++){const o=this.points[s*2],u=this.points[s*2+1],l=this.points[a*2],c=this.points[a*2+1];u>t!=c>t&&e<(l-o)*((t-u)/(c-u))+o&&(n=!n)}return n}strokeContains(e,t,n,i=.5){const s=n*n,a=s*(1-i),o=s-a,{points:u}=this,l=u.length-(this.closePath?0:2);for(let c=0;c<l;c+=2){const h=u[c],d=u[c+1],f=u[(c+2)%u.length],p=u[(c+3)%u.length],g=B$(e,t,h,d,f,p),m=Math.sign((f-h)*(t-d)-(p-d)*(e-h));if(g<=(m<0?o:a))return!0}return!1}getBounds(e){e||(e=new vt);const t=this.points;let n=1/0,i=-1/0,s=1/0,a=-1/0;for(let o=0,u=t.length;o<u;o+=2){const l=t[o],c=t[o+1];n=l<n?l:n,i=l>i?l:i,s=c<s?c:s,a=c>a?c:a}return e.x=n,e.width=i-n,e.y=s,e.height=a-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const gu=(r,e,t,n,i,s,a)=>{const o=r-t,u=e-n,l=Math.sqrt(o*o+u*u);return l>=i-s&&l<=i+a};class Ih{constructor(e=0,t=0,n=0,i=0,s=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=n,this.height=i,this.radius=s}getBounds(e){return e||(e=new vt),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new Ih(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=t-(this.y+n);const a=n*n;if(i*i+s*s<=a||(i=e-(this.x+this.width-n),i*i+s*s<=a)||(s=t-(this.y+this.height-n),i*i+s*s<=a)||(i=e-(this.x+n),i*i+s*s<=a))return!0}return!1}strokeContains(e,t,n,i=.5){const{x:s,y:a,width:o,height:u,radius:l}=this,c=n*(1-i),h=n-c,d=s+l,f=a+l,p=o-l*2,g=u-l*2,m=s+o,_=a+u;return(e>=s-c&&e<=s+h||e>=m-h&&e<=m+c)&&t>=f&&t<=f+g||(t>=a-c&&t<=a+h||t>=_-h&&t<=_+c)&&e>=d&&e<=d+p?!0:e<d&&t<f&&gu(e,t,d,f,l,h,c)||e>m-l&&t<f&&gu(e,t,m-l,f,l,h,c)||e>m-l&&t>_-l&&gu(e,t,m-l,_-l,l,h,c)||e<d&&t>_-l&&gu(e,t,d,_-l,l,h,c)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const D$=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function U$(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function W$(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const n=D$.replace(/%forloop%/gi,U$(r));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}}finally{e.deleteShader(t)}return r}let ts=null;function qh(){var e;if(ts)return ts;const r=yP();return ts=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),ts=W$(ts,r),(e=r.getExtension("WEBGL_lose_context"))==null||e.loseContext(),ts}const qP={};function N$(r,e){let t=2166136261;for(let n=0;n<e;n++)t^=r[n].uid,t=Math.imul(t,16777619),t>>>=0;return qP[t]||G$(r,e,t)}let kh=0;function G$(r,e,t){const n={};let i=0;kh||(kh=qh());for(let a=0;a<kh;a++){const o=a<e?r[a]:ce.EMPTY.source;n[i++]=o.source,n[i++]=o.style}const s=new Qi(n);return qP[t]=s,s}class rs{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function kP(r,e){const t=r.byteLength/8|0,n=new Float64Array(r,0,t);new Float64Array(e,0,t).set(n);const s=r.byteLength-t*8;if(s>0){const a=new Uint8Array(r,t*8,s);new Uint8Array(e,t*8,s).set(a)}}const z$={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};function ca(r,e){return e.alphaMode==="no-premultiply-alpha"&&z$[r]||r}class H${constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class j${constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new H$,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const OP=[];let Oh=0;function BP(){return Oh>0?OP[--Oh]:new j$}function LP(r){OP[Oh++]=r}let ha=0;const FP=class yl{constructor(e={}){this.uid=rt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],yl.defaultOptions.maxTextures=yl.defaultOptions.maxTextures??qh(),e={...yl.defaultOptions,...e};const{maxTextures:t,attributesInitialSize:n,indicesInitialSize:i}=e;this.attributeBuffer=new rs(n*4),this.indexBuffer=new Uint16Array(i),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)LP(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const n=e._batch.textures.ids[t._source.uid];return!n&&n!==0?!1:(e._textureId=n,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let n=BP(),i=n.textures;i.clear();const s=t[this.elementStart];let a=ca(s.blendMode,s.texture._source),o=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const u=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,c=this.indexBuffer;let h=this._batchIndexSize,d=this._batchIndexStart,f="startBatch";const p=this.maxTextures;for(let g=this.elementStart;g<this.elementSize;++g){const m=t[g];t[g]=null;const y=m.texture._source,x=ca(m.blendMode,y),b=a!==x||o!==m.topology;if(y._batchTick===ha&&!b){m._textureId=y._textureBindLocation,h+=m.indexSize,m.packAsQuad?(this.packQuadAttributes(m,u,l,m._attributeStart,m._textureId),this.packQuadIndex(c,m._indexStart,m._attributeStart/this.vertexSize)):(this.packAttributes(m,u,l,m._attributeStart,m._textureId),this.packIndex(m,c,m._indexStart,m._attributeStart/this.vertexSize)),m._batch=n;continue}y._batchTick=ha,(i.count>=p||b)&&(this._finishBatch(n,d,h-d,i,a,o,e,f),f="renderBatch",d=h,a=x,o=m.topology,n=BP(),i=n.textures,i.clear(),++ha),m._textureId=y._textureBindLocation=i.count,i.ids[y.uid]=i.count,i.textures[i.count++]=y,m._batch=n,h+=m.indexSize,m.packAsQuad?(this.packQuadAttributes(m,u,l,m._attributeStart,m._textureId),this.packQuadIndex(c,m._indexStart,m._attributeStart/this.vertexSize)):(this.packAttributes(m,u,l,m._attributeStart,m._textureId),this.packIndex(m,c,m._indexStart,m._attributeStart/this.vertexSize))}i.count>0&&(this._finishBatch(n,d,h-d,i,a,o,e,f),d=h,++ha),this.elementStart=this.elementSize,this._batchIndexStart=d,this._batchIndexSize=h}_finishBatch(e,t,n,i,s,a,o,u){e.gpuBindGroup=null,e.bindGroup=null,e.action=u,e.batcher=this,e.textures=i,e.blendMode=s,e.topology=a,e.start=t,e.size=n,++ha,this.batches[this.batchIndex++]=e,o.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),n=new rs(t);kP(this.attributeBuffer.rawBinaryData,n.rawBinaryData),this.attributeBuffer=n}_resizeIndexBuffer(e){const t=this.indexBuffer;let n=Math.max(e,t.length*1.5);n+=n%2;const i=n>65535?new Uint32Array(n):new Uint16Array(n);if(i.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let s=0;s<t.length;s++)i[s]=t[s];else kP(t.buffer,i.buffer);this.indexBuffer=i}packQuadIndex(e,t,n){e[t]=n+0,e[t+1]=n+1,e[t+2]=n+2,e[t+3]=n+0,e[t+4]=n+2,e[t+5]=n+3}packIndex(e,t,n,i){const s=e.indices,a=e.indexSize,o=e.indexOffset,u=e.attributeOffset;for(let l=0;l<a;l++)t[n++]=i+s[l+o]-u}destroy(){for(let e=0;e<this.batches.length;e++)LP(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};FP.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let DP=FP;var ke=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(ke||{});class nr extends hr{constructor(e){let{data:t,size:n}=e;const{usage:i,label:s,shrinkToFit:a}=e;super(),this.uid=rt("buffer"),this._resourceType="buffer",this._resourceId=rt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,n??(n=t==null?void 0:t.byteLength);const o=!!t;this.descriptor={size:n,usage:i,mappedAtCreation:o,label:s},this.shrinkToFit=a??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&ke.STATIC)}set static(e){e?this.descriptor.usage|=ke.STATIC:this.descriptor.usage&=~ke.STATIC}setDataWithSize(e,t,n){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){n&&this.emit("update",this);return}const i=this._data;if(this._data=e,this._dataInt32=null,!i||i.length!==e.length){!this.shrinkToFit&&i&&e.byteLength<i.byteLength?n&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=rt("resource"),this.emit("change",this));return}n&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function UP(r,e){if(!(r instanceof nr)){let t=e?ke.INDEX:ke.VERTEX;r instanceof Array&&(e?(r=new Uint32Array(r),t=ke.INDEX|ke.COPY_DST):(r=new Float32Array(r),t=ke.VERTEX|ke.COPY_DST)),r=new nr({data:r,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return r}function $$(r,e,t){const n=r.getAttribute(e);if(!n)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const i=n.buffer.data;let s=1/0,a=1/0,o=-1/0,u=-1/0;const l=i.BYTES_PER_ELEMENT,c=(n.offset||0)/l,h=(n.stride||8)/l;for(let d=c;d<i.length;d+=h){const f=i[d],p=i[d+1];f>o&&(o=f),p>u&&(u=p),f<s&&(s=f),p<a&&(a=p)}return t.minX=s,t.minY=a,t.maxX=o,t.maxY=u,t}function Y$(r){return(r instanceof nr||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=UP(r.buffer,!1),r}class fa extends hr{constructor(e={}){super(),this.uid=rt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new zt,this._boundsDirty=!0;const{attributes:t,indexBuffer:n,topology:i}=e;if(this.buffers=[],this.attributes={},t)for(const s in t)this.addAttribute(s,t[s]);this.instanceCount=e.instanceCount??1,n&&this.addIndex(n),this.topology=i||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const n=Y$(t);this.buffers.indexOf(n.buffer)===-1&&(this.buffers.push(n.buffer),n.buffer.on("update",this.onBufferUpdate,this),n.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=n}addIndex(e){this.indexBuffer=UP(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,$$(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const V$=new Float32Array(1),X$=new Uint32Array(1);class K$ extends fa{constructor(){const t=new nr({data:V$,label:"attribute-batch-buffer",usage:ke.VERTEX|ke.COPY_DST,shrinkToFit:!1}),n=new nr({data:X$,label:"index-batch-buffer",usage:ke.INDEX|ke.COPY_DST,shrinkToFit:!1}),i=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:i,offset:0},aUV:{buffer:t,format:"float32x2",stride:i,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:i,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:i,offset:20}},indexBuffer:n})}}function WP(r,e,t){if(r)for(const n in r){const i=n.toLocaleLowerCase(),s=e[i];if(s){let a=r[n];n==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&s.push(`//----${t}----//`),s.push(a)}else Le(`${n} placement hook does not exist in shader`)}}const Z$=/\{\{(.*?)\}\}/g;function NP(r){var n;const e={};return(((n=r.match(Z$))==null?void 0:n.map(i=>i.replace(/[{()}]/g,"")))??[]).forEach(i=>{e[i]=[]}),e}function GP(r,e){let t;const n=/@in\s+([^;]+);/g;for(;(t=n.exec(r))!==null;)e.push(t[1])}function zP(r,e,t=!1){const n=[];GP(e,n),r.forEach(o=>{o.header&&GP(o.header,n)});const i=n;t&&i.sort();const s=i.map((o,u)=>`       @location(${u}) ${o},`).join(`
`);let a=e.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${s}
`),a}function HP(r,e){let t;const n=/@out\s+([^;]+);/g;for(;(t=n.exec(r))!==null;)e.push(t[1])}function J$(r){const t=/\b(\w+)\s*:/g.exec(r);return t?t[1]:""}function Q$(r){const e=/@.*?\s+/g;return r.replace(e,"")}function e6(r,e){const t=[];HP(e,t),r.forEach(u=>{u.header&&HP(u.header,t)});let n=0;const i=t.sort().map(u=>u.indexOf("builtin")>-1?u:`@location(${n++}) ${u}`).join(`,
`),s=t.sort().map(u=>`       var ${Q$(u)};`).join(`
`),a=`return VSOutput(
            ${t.sort().map(u=>` ${J$(u)}`).join(`,
`)});`;let o=e.replace(/@out\s+[^;]+;\s*/g,"");return o=o.replace("{{struct}}",`
${i}
`),o=o.replace("{{start}}",`
${s}
`),o=o.replace("{{return}}",`
${a}
`),o}function jP(r,e){let t=r;for(const n in e){const i=e[n];i.join(`
`).length?t=t.replace(`{{${n}}}`,`//-----${n} START-----//
${i.join(`
`)}
//----${n} FINISH----//`):t=t.replace(`{{${n}}}`,"")}return t}const Pn=Object.create(null),Bh=new Map;let t6=0;function r6({template:r,bits:e}){const t=$P(r,e);if(Pn[t])return Pn[t];const{vertex:n,fragment:i}=i6(r,e);return Pn[t]=YP(n,i,e),Pn[t]}function n6({template:r,bits:e}){const t=$P(r,e);return Pn[t]||(Pn[t]=YP(r.vertex,r.fragment,e)),Pn[t]}function i6(r,e){const t=e.map(a=>a.vertex).filter(a=>!!a),n=e.map(a=>a.fragment).filter(a=>!!a);let i=zP(t,r.vertex,!0);i=e6(t,i);const s=zP(n,r.fragment,!0);return{vertex:i,fragment:s}}function $P(r,e){return e.map(t=>(Bh.has(t)||Bh.set(t,t6++),Bh.get(t))).sort((t,n)=>t-n).join("-")+r.vertex+r.fragment}function YP(r,e,t){const n=NP(r),i=NP(e);return t.forEach(s=>{WP(s.vertex,n,s.name),WP(s.fragment,i,s.name)}),{vertex:jP(r,n),fragment:jP(e,i)}}const s6=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,a6=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,o6=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,u6=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,l6={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},c6={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function mu({bits:r,name:e}){const t=r6({template:{fragment:a6,vertex:s6},bits:[l6,...r]});return ua.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function vu({bits:r,name:e}){return new vh({name:e,...n6({template:{vertex:o6,fragment:u6},bits:[c6,...r]})})}const Lh={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},Fh={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Dh={};function h6(r){const e=[];if(r===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let n=0;n<r;n++)e.push(`@group(1) @binding(${t++}) var textureSource${n+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${n+1}: sampler;`)}return e.join(`
`)}function f6(r){const e=[];if(r===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<r;t++)t===r-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function Uh(r){return Dh[r]||(Dh[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${h6(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${f6(r)}
            `}}),Dh[r]}const Wh={};function d6(r){const e=[];for(let t=0;t<r;t++)t>0&&e.push("else"),t<r-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function Nh(r){return Wh[r]||(Wh[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${d6(r)}
            `}}),Wh[r]}const _u={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},yu={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},VP={};function Gh(r){let e=VP[r];if(e)return e;const t=new Int32Array(r);for(let n=0;n<r;n++)t[n]=n;return e=VP[r]=new An({uTextures:{value:t,type:"i32",size:r}},{isStatic:!0}),e}class p6 extends ci{constructor(e){const t=vu({name:"batch",bits:[Fh,Nh(e),yu]}),n=mu({name:"batch",bits:[Lh,Uh(e),_u]});super({glProgram:t,gpuProgram:n,resources:{batchSamplers:Gh(e)}})}}let XP=null;const KP=class AN extends DP{constructor(){super(...arguments),this.geometry=new K$,this.shader=XP||(XP=new p6(this.maxTextures)),this.name=AN.extension.name,this.vertexSize=6}packAttributes(e,t,n,i,s){const a=s<<16|e.roundPixels&65535,o=e.transform,u=o.a,l=o.b,c=o.c,h=o.d,d=o.tx,f=o.ty,{positions:p,uvs:g}=e,m=e.color,_=e.attributeOffset,y=_+e.attributeSize;for(let x=_;x<y;x++){const b=x*2,T=p[b],S=p[b+1];t[i++]=u*T+c*S+d,t[i++]=h*S+l*T+f,t[i++]=g[b],t[i++]=g[b+1],n[i++]=m,n[i++]=a}}packQuadAttributes(e,t,n,i,s){const a=e.texture,o=e.transform,u=o.a,l=o.b,c=o.c,h=o.d,d=o.tx,f=o.ty,p=e.bounds,g=p.maxX,m=p.minX,_=p.maxY,y=p.minY,x=a.uvs,b=e.color,T=s<<16|e.roundPixels&65535;t[i+0]=u*m+c*y+d,t[i+1]=h*y+l*m+f,t[i+2]=x.x0,t[i+3]=x.y0,n[i+4]=b,n[i+5]=T,t[i+6]=u*g+c*y+d,t[i+7]=h*y+l*g+f,t[i+8]=x.x1,t[i+9]=x.y1,n[i+10]=b,n[i+11]=T,t[i+12]=u*g+c*_+d,t[i+13]=h*_+l*g+f,t[i+14]=x.x2,t[i+15]=x.y2,n[i+16]=b,n[i+17]=T,t[i+18]=u*m+c*_+d,t[i+19]=h*_+l*m+f,t[i+20]=x.x3,t[i+21]=x.y3,n[i+22]=b,n[i+23]=T}};KP.extension={type:[$.Batcher],name:"default"};let g6=KP;function m6(r,e,t,n,i,s,a,o=null){let u=0;t*=e,i*=s;const l=o.a,c=o.b,h=o.c,d=o.d,f=o.tx,p=o.ty;for(;u<a;){const g=r[t],m=r[t+1];n[i]=l*g+h*m+f,n[i+1]=c*g+d*m+p,i+=s,t+=e,u++}}function v6(r,e,t,n){let i=0;for(e*=t;i<n;)r[e]=0,r[e+1]=0,e+=t,i++}function ZP(r,e,t,n,i){const s=e.a,a=e.b,o=e.c,u=e.d,l=e.tx,c=e.ty;t||(t=0),n||(n=2),i||(i=r.length/n-t);let h=t*n;for(let d=0;d<i;d++){const f=r[h],p=r[h+1];r[h]=s*f+o*p+l,r[h+1]=a*f+u*p+c,h+=n}}const _6=new le;class zh{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,n=this.renderable;return n?OR(t,n.groupColor)+(this.alpha*n.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||_6}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const da={extension:{type:$.ShapeBuilder,name:"circle"},build(r,e){let t,n,i,s,a,o;if(r.type==="circle"){const b=r;t=b.x,n=b.y,a=o=b.radius,i=s=0}else if(r.type==="ellipse"){const b=r;t=b.x,n=b.y,a=b.halfWidth,o=b.halfHeight,i=s=0}else{const b=r,T=b.width/2,S=b.height/2;t=b.x+T,n=b.y+S,a=o=Math.max(0,Math.min(b.radius,Math.min(T,S))),i=T-a,s=S-o}if(!(a>=0&&o>=0&&i>=0&&s>=0))return e;const u=Math.ceil(2.3*Math.sqrt(a+o)),l=u*8+(i?4:0)+(s?4:0);if(l===0)return e;if(u===0)return e[0]=e[6]=t+i,e[1]=e[3]=n+s,e[2]=e[4]=t-i,e[5]=e[7]=n-s,e;let c=0,h=u*4+(i?2:0)+2,d=h,f=l,p=i+a,g=s,m=t+p,_=t-p,y=n+g;if(e[c++]=m,e[c++]=y,e[--h]=y,e[--h]=_,s){const b=n-g;e[d++]=_,e[d++]=b,e[--f]=b,e[--f]=m}for(let b=1;b<u;b++){const T=Math.PI/2*(b/u),S=i+Math.cos(T)*a,w=s+Math.sin(T)*o,M=t+S,q=t-S,O=n+w,k=n-w;e[c++]=M,e[c++]=O,e[--h]=O,e[--h]=q,e[d++]=q,e[d++]=k,e[--f]=k,e[--f]=M}p=i,g=s+o,m=t+p,_=t-p,y=n+g;const x=n-g;return e[c++]=m,e[c++]=y,e[--f]=x,e[--f]=m,i&&(e[c++]=_,e[c++]=y,e[--f]=x,e[--f]=_),e},triangulate(r,e,t,n,i,s){if(r.length===0)return;let a=0,o=0;for(let c=0;c<r.length;c+=2)a+=r[c],o+=r[c+1];a/=r.length/2,o/=r.length/2;let u=n;e[u*t]=a,e[u*t+1]=o;const l=u++;for(let c=0;c<r.length;c+=2)e[u*t]=r[c],e[u*t+1]=r[c+1],c>0&&(i[s++]=u,i[s++]=l,i[s++]=u-1),u++;i[s++]=l+1,i[s++]=l,i[s++]=u-1}},y6={...da,extension:{...da.extension,name:"ellipse"}},b6={...da,extension:{...da.extension,name:"roundedRectangle"}},JP=1e-4,QP=1e-4;function x6(r){const e=r.length;if(e<6)return 1;let t=0;for(let n=0,i=r[e-2],s=r[e-1];n<e;n+=2){const a=r[n],o=r[n+1];t+=(a-i)*(o+s),i=a,s=o}return t<0?-1:1}function eC(r,e,t,n,i,s,a,o){const u=r-t*i,l=e-n*i,c=r+t*s,h=e+n*s;let d,f;a?(d=n,f=-t):(d=-n,f=t);const p=u+d,g=l+f,m=c+d,_=h+f;return o.push(p,g),o.push(m,_),2}function hi(r,e,t,n,i,s,a,o){const u=t-r,l=n-e;let c=Math.atan2(u,l),h=Math.atan2(i-r,s-e);o&&c<h?c+=Math.PI*2:!o&&c>h&&(h+=Math.PI*2);let d=c;const f=h-c,p=Math.abs(f),g=Math.sqrt(u*u+l*l),m=(15*p*Math.sqrt(g)/Math.PI>>0)+1,_=f/m;if(d+=_,o){a.push(r,e),a.push(t,n);for(let y=1,x=d;y<m;y++,x+=_)a.push(r,e),a.push(r+Math.sin(x)*g,e+Math.cos(x)*g);a.push(r,e),a.push(i,s)}else{a.push(t,n),a.push(r,e);for(let y=1,x=d;y<m;y++,x+=_)a.push(r+Math.sin(x)*g,e+Math.cos(x)*g),a.push(r,e);a.push(i,s),a.push(r,e)}return m*2}function w6(r,e,t,n,i,s){const a=JP;if(r.length===0)return;const o=e;let u=o.alignment;if(e.alignment!==.5){let v=x6(r);u=(u-.5)*v+.5}const l=new Se(r[0],r[1]),c=new Se(r[r.length-2],r[r.length-1]),h=n,d=Math.abs(l.x-c.x)<a&&Math.abs(l.y-c.y)<a;if(h){r=r.slice(),d&&(r.pop(),r.pop(),c.set(r[r.length-2],r[r.length-1]));const v=(l.x+c.x)*.5,B=(c.y+l.y)*.5;r.unshift(v,B),r.push(v,B)}const f=i,p=r.length/2;let g=r.length;const m=f.length/2,_=o.width/2,y=_*_,x=o.miterLimit*o.miterLimit;let b=r[0],T=r[1],S=r[2],w=r[3],M=0,q=0,O=-(T-w),k=b-S,U=0,N=0,Z=Math.sqrt(O*O+k*k);O/=Z,k/=Z,O*=_,k*=_;const G=u,A=(1-G)*2,P=G*2;h||(o.cap==="round"?g+=hi(b-O*(A-P)*.5,T-k*(A-P)*.5,b-O*A,T-k*A,b+O*P,T+k*P,f,!0)+2:o.cap==="square"&&(g+=eC(b,T,O,k,A,P,!0,f))),f.push(b-O*A,T-k*A),f.push(b+O*P,T+k*P);for(let v=1;v<p-1;++v){b=r[(v-1)*2],T=r[(v-1)*2+1],S=r[v*2],w=r[v*2+1],M=r[(v+1)*2],q=r[(v+1)*2+1],O=-(T-w),k=b-S,Z=Math.sqrt(O*O+k*k),O/=Z,k/=Z,O*=_,k*=_,U=-(w-q),N=S-M,Z=Math.sqrt(U*U+N*N),U/=Z,N/=Z,U*=_,N*=_;const B=S-b,F=T-w,L=S-M,z=q-w,Y=B*L+F*z,V=F*L-z*B,we=V<0;if(Math.abs(V)<.001*Math.abs(Y)){f.push(S-O*A,w-k*A),f.push(S+O*P,w+k*P),Y>=0&&(o.join==="round"?g+=hi(S,w,S-O*A,w-k*A,S-U*A,w-N*A,f,!1)+4:g+=2,f.push(S-U*P,w-N*P),f.push(S+U*A,w+N*A));continue}const ve=(-O+b)*(-k+w)-(-O+S)*(-k+T),de=(-U+M)*(-N+w)-(-U+S)*(-N+q),Pe=(B*de-L*ve)/V,me=(z*ve-F*de)/V,J=(Pe-S)*(Pe-S)+(me-w)*(me-w),ne=S+(Pe-S)*A,Q=w+(me-w)*A,X=S-(Pe-S)*P,te=w-(me-w)*P,H=Math.min(B*B+F*F,L*L+z*z),Ve=we?A:P,Rt=H+Ve*Ve*y;J<=Rt?o.join==="bevel"||J/y>x?(we?(f.push(ne,Q),f.push(S+O*P,w+k*P),f.push(ne,Q),f.push(S+U*P,w+N*P)):(f.push(S-O*A,w-k*A),f.push(X,te),f.push(S-U*A,w-N*A),f.push(X,te)),g+=2):o.join==="round"?we?(f.push(ne,Q),f.push(S+O*P,w+k*P),g+=hi(S,w,S+O*P,w+k*P,S+U*P,w+N*P,f,!0)+4,f.push(ne,Q),f.push(S+U*P,w+N*P)):(f.push(S-O*A,w-k*A),f.push(X,te),g+=hi(S,w,S-O*A,w-k*A,S-U*A,w-N*A,f,!1)+4,f.push(S-U*A,w-N*A),f.push(X,te)):(f.push(ne,Q),f.push(X,te)):(f.push(S-O*A,w-k*A),f.push(S+O*P,w+k*P),o.join==="round"?we?g+=hi(S,w,S+O*P,w+k*P,S+U*P,w+N*P,f,!0)+2:g+=hi(S,w,S-O*A,w-k*A,S-U*A,w-N*A,f,!1)+2:o.join==="miter"&&J/y<=x&&(we?(f.push(X,te),f.push(X,te)):(f.push(ne,Q),f.push(ne,Q)),g+=2),f.push(S-U*A,w-N*A),f.push(S+U*P,w+N*P),g+=2)}b=r[(p-2)*2],T=r[(p-2)*2+1],S=r[(p-1)*2],w=r[(p-1)*2+1],O=-(T-w),k=b-S,Z=Math.sqrt(O*O+k*k),O/=Z,k/=Z,O*=_,k*=_,f.push(S-O*A,w-k*A),f.push(S+O*P,w+k*P),h||(o.cap==="round"?g+=hi(S-O*(A-P)*.5,w-k*(A-P)*.5,S-O*A,w-k*A,S+O*P,w+k*P,f,!1)+2:o.cap==="square"&&(g+=eC(S,w,O,k,A,P,!1,f)));const C=QP*QP;for(let v=m;v<g+m-2;++v)b=f[v*2],T=f[v*2+1],S=f[(v+1)*2],w=f[(v+1)*2+1],M=f[(v+2)*2],q=f[(v+2)*2+1],!(Math.abs(b*(w-q)+S*(q-T)+M*(T-w))<C)&&s.push(v,v+1,v+2)}function S6(r,e,t,n){const i=JP;if(r.length===0)return;const s=r[0],a=r[1],o=r[r.length-2],u=r[r.length-1],l=e||Math.abs(s-o)<i&&Math.abs(a-u)<i,c=t,h=r.length/2,d=c.length/2;for(let f=0;f<h;f++)c.push(r[f*2]),c.push(r[f*2+1]);for(let f=0;f<h-1;f++)n.push(d+f,d+f+1);l&&n.push(d+h-1,d)}function tC(r,e,t,n,i,s,a){const o=C$(r,e,2);if(!o)return;for(let l=0;l<o.length;l+=3)s[a++]=o[l]+i,s[a++]=o[l+1]+i,s[a++]=o[l+2]+i;let u=i*n;for(let l=0;l<r.length;l+=2)t[u]=r[l],t[u+1]=r[l+1],u+=n}const T6=[],A6={extension:{type:$.ShapeBuilder,name:"polygon"},build(r,e){for(let t=0;t<r.points.length;t++)e[t]=r.points[t];return e},triangulate(r,e,t,n,i,s){tC(r,T6,e,t,n,i,s)}},R6={extension:{type:$.ShapeBuilder,name:"rectangle"},build(r,e){const t=r,n=t.x,i=t.y,s=t.width,a=t.height;return s>=0&&a>=0&&(e[0]=n,e[1]=i,e[2]=n+s,e[3]=i,e[4]=n+s,e[5]=i+a,e[6]=n,e[7]=i+a),e},triangulate(r,e,t,n,i,s){let a=0;n*=t,e[n+a]=r[0],e[n+a+1]=r[1],a+=t,e[n+a]=r[2],e[n+a+1]=r[3],a+=t,e[n+a]=r[6],e[n+a+1]=r[7],a+=t,e[n+a]=r[4],e[n+a+1]=r[5],a+=t;const o=n/t;i[s++]=o,i[s++]=o+1,i[s++]=o+2,i[s++]=o+1,i[s++]=o+3,i[s++]=o+2}},P6={extension:{type:$.ShapeBuilder,name:"triangle"},build(r,e){return e[0]=r.x,e[1]=r.y,e[2]=r.x2,e[3]=r.y2,e[4]=r.x3,e[5]=r.y3,e},triangulate(r,e,t,n,i,s){let a=0;n*=t,e[n+a]=r[0],e[n+a+1]=r[1],a+=t,e[n+a]=r[2],e[n+a+1]=r[3],a+=t,e[n+a]=r[4],e[n+a+1]=r[5];const o=n/t;i[s++]=o,i[s++]=o+1,i[s++]=o+2}},C6=new le,E6=new vt;function M6(r,e,t,n){const i=e.matrix?r.copyFrom(e.matrix).invert():r.identity();if(e.textureSpace==="local"){const s=t.getBounds(E6);i.translate(-s.x,-s.y),i.scale(1/s.width,1/s.height)}else{i.translate(e.texture.frame.x,e.texture.frame.y),i.scale(1/e.texture.source.width,1/e.texture.source.height);const s=e.texture.source.style;s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update())}return n&&i.append(C6.copyFrom(n).invert()),i}const bu={};Te.handleByMap($.ShapeBuilder,bu),Te.add(R6,A6,P6,da,y6,b6);const I6=new vt,q6=new le;function k6(r,e){const{geometryData:t,batches:n}=e;n.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let i=0;i<r.instructions.length;i++){const s=r.instructions[i];if(s.action==="texture")O6(s.data,n,t);else if(s.action==="fill"||s.action==="stroke"){const a=s.action==="stroke",o=s.data.path.shapePath,u=s.data.style,l=s.data.hole;a&&l&&rC(l.shapePath,u,!0,n,t),l&&(o.shapePrimitives[o.shapePrimitives.length-1].holes=l.shapePath.shapePrimitives),rC(o,u,a,n,t)}}}function O6(r,e,t){const{vertices:n,uvs:i,indices:s}=t,a=s.length,o=n.length/2,u=[],l=bu.rectangle,c=I6,h=r.image;c.x=r.dx,c.y=r.dy,c.width=r.dw,c.height=r.dh;const d=r.transform;l.build(c,u),d&&ZP(u,d),l.triangulate(u,n,2,o,s,a);const f=h.uvs;i.push(f.x0,f.y0,f.x1,f.y1,f.x3,f.y3,f.x2,f.y2);const p=qe.get(zh);p.indexOffset=a,p.indexSize=s.length-a,p.attributeOffset=o,p.attributeSize=n.length/2-o,p.baseColor=r.style,p.alpha=r.alpha,p.texture=h,p.geometryData=t,e.push(p)}function rC(r,e,t,n,i){const{vertices:s,uvs:a,indices:o}=i;r.shapePrimitives.forEach(({shape:u,transform:l,holes:c})=>{const h=o.length,d=s.length/2,f=[],p=bu[u.type];let g="triangle-list";if(p.build(u,f),l&&ZP(f,l),t){const x=u.closePath??!0,b=e;b.pixelLine?(S6(f,x,s,o),g="line-list"):w6(f,b,!1,x,s,o)}else if(c){const x=[],b=f.slice();B6(c).forEach(S=>{x.push(b.length/2),b.push(...S)}),tC(b,x,s,2,d,o,h)}else p.triangulate(f,s,2,d,o,h);const m=a.length/2,_=e.texture;if(_!==ce.WHITE){const x=M6(q6,e,u,l);m6(s,2,d,a,m,2,s.length/2-d,x)}else v6(a,m,2,s.length/2-d);const y=qe.get(zh);y.indexOffset=h,y.indexSize=o.length-h,y.attributeOffset=d,y.attributeSize=s.length/2-d,y.baseColor=e.color,y.alpha=e.alpha,y.texture=_,y.geometryData=i,y.topology=g,n.push(y)})}function B6(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t].shape,i=[];bu[n.type].build(n,i),e.push(i)}return e}class L6{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class F6{constructor(){this.batcher=new g6,this.instructions=new NR}init(){this.instructions.reset()}get geometry(){return be(o5,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const Hh=class yS{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){yS.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??yS.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),k6(e,t);const n=e.batchMode;e.customShader||n==="no-batch"?t.isBatchable=!1:n==="auto"&&(t.isBatchable=t.geometryData.vertices.length<400),e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=qe.get(F6),{batches:n,geometryData:i}=this._gpuContextHash[e.uid],s=i.vertices.length,a=i.indices.length;for(let c=0;c<n.length;c++)n[c].applyTransform=!1;const o=t.batcher;o.ensureAttributeBuffer(s),o.ensureIndexBuffer(a),o.begin();for(let c=0;c<n.length;c++){const h=n[c];o.add(h)}o.finish(t.instructions);const u=o.geometry;u.indexBuffer.setDataWithSize(o.indexBuffer,o.indexSize,!0),u.buffers[0].setDataWithSize(o.attributeBuffer.float32View,o.attributeSize,!0);const l=o.batches;for(let c=0;c<l.length;c++){const h=l[c];h.bindGroup=N$(h.textures.textures,h.textures.count)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new L6;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(qe.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(n=>{qe.return(n)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};Hh.extension={type:[$.WebGLSystem,$.WebGPUSystem,$.CanvasSystem],name:"graphicsContext"},Hh.defaultOptions={bezierSmoothness:.5};let jh=Hh;const D6=8,xu=11920929e-14,U6=1;function nC(r,e,t,n,i,s,a,o,u,l){const h=Math.min(.99,Math.max(0,l??jh.defaultOptions.bezierSmoothness));let d=(U6-h)/1;return d*=d,W6(e,t,n,i,s,a,o,u,r,d),r}function W6(r,e,t,n,i,s,a,o,u,l){$h(r,e,t,n,i,s,a,o,u,l,0),u.push(a,o)}function $h(r,e,t,n,i,s,a,o,u,l,c){if(c>D6)return;const h=(r+t)/2,d=(e+n)/2,f=(t+i)/2,p=(n+s)/2,g=(i+a)/2,m=(s+o)/2,_=(h+f)/2,y=(d+p)/2,x=(f+g)/2,b=(p+m)/2,T=(_+x)/2,S=(y+b)/2;if(c>0){let w=a-r,M=o-e;const q=Math.abs((t-a)*M-(n-o)*w),O=Math.abs((i-a)*M-(s-o)*w);if(q>xu&&O>xu){if((q+O)*(q+O)<=l*(w*w+M*M)){u.push(T,S);return}}else if(q>xu){if(q*q<=l*(w*w+M*M)){u.push(T,S);return}}else if(O>xu){if(O*O<=l*(w*w+M*M)){u.push(T,S);return}}else if(w=T-(r+a)/2,M=S-(e+o)/2,w*w+M*M<=l){u.push(T,S);return}}$h(r,e,h,d,_,y,T,S,u,l,c+1),$h(T,S,x,b,g,m,a,o,u,l,c+1)}const N6=8,G6=11920929e-14,z6=1;function H6(r,e,t,n,i,s,a,o){const l=Math.min(.99,Math.max(0,o??jh.defaultOptions.bezierSmoothness));let c=(z6-l)/1;return c*=c,j6(e,t,n,i,s,a,r,c),r}function j6(r,e,t,n,i,s,a,o){Yh(a,r,e,t,n,i,s,o,0),a.push(i,s)}function Yh(r,e,t,n,i,s,a,o,u){if(u>N6)return;const l=(e+n)/2,c=(t+i)/2,h=(n+s)/2,d=(i+a)/2,f=(l+h)/2,p=(c+d)/2;let g=s-e,m=a-t;const _=Math.abs((n-s)*m-(i-a)*g);if(_>G6){if(_*_<=o*(g*g+m*m)){r.push(f,p);return}}else if(g=f-(e+s)/2,m=p-(t+a)/2,g*g+m*m<=o){r.push(f,p);return}Yh(r,e,t,l,c,f,p,o,u+1),Yh(r,f,p,h,d,s,a,o,u+1)}function iC(r,e,t,n,i,s,a,o){let u=Math.abs(i-s);(!a&&i>s||a&&s>i)&&(u=2*Math.PI-u),o||(o=Math.max(6,Math.floor(6*Math.pow(n,1/3)*(u/Math.PI)))),o=Math.max(o,3);let l=u/o,c=i;l*=a?-1:1;for(let h=0;h<o+1;h++){const d=Math.cos(c),f=Math.sin(c),p=e+d*n,g=t+f*n;r.push(p,g),c+=l}}function $6(r,e,t,n,i,s){const a=r[r.length-2],u=r[r.length-1]-t,l=a-e,c=i-t,h=n-e,d=Math.abs(u*h-l*c);if(d<1e-8||s===0){(r[r.length-2]!==e||r[r.length-1]!==t)&&r.push(e,t);return}const f=u*u+l*l,p=c*c+h*h,g=u*c+l*h,m=s*Math.sqrt(f)/d,_=s*Math.sqrt(p)/d,y=m*g/f,x=_*g/p,b=m*h+_*l,T=m*c+_*u,S=l*(_+y),w=u*(_+y),M=h*(m+x),q=c*(m+x),O=Math.atan2(w-T,S-b),k=Math.atan2(q-T,M-b);iC(r,b+e,T+t,s,O,k,l*c>h*u)}const pa=Math.PI*2,Vh={centerX:0,centerY:0,ang1:0,ang2:0},Xh=({x:r,y:e},t,n,i,s,a,o,u)=>{r*=t,e*=n;const l=i*r-s*e,c=s*r+i*e;return u.x=l+a,u.y=c+o,u};function Y6(r,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=e===1.5707963267948966?.551915024494:t,i=Math.cos(r),s=Math.sin(r),a=Math.cos(r+e),o=Math.sin(r+e);return[{x:i-s*n,y:s+i*n},{x:a+o*n,y:o-a*n},{x:a,y:o}]}const sC=(r,e,t,n)=>{const i=r*n-e*t<0?-1:1;let s=r*t+e*n;return s>1&&(s=1),s<-1&&(s=-1),i*Math.acos(s)},V6=(r,e,t,n,i,s,a,o,u,l,c,h,d)=>{const f=Math.pow(i,2),p=Math.pow(s,2),g=Math.pow(c,2),m=Math.pow(h,2);let _=f*p-f*m-p*g;_<0&&(_=0),_/=f*m+p*g,_=Math.sqrt(_)*(a===o?-1:1);const y=_*i/s*h,x=_*-s/i*c,b=l*y-u*x+(r+t)/2,T=u*y+l*x+(e+n)/2,S=(c-y)/i,w=(h-x)/s,M=(-c-y)/i,q=(-h-x)/s,O=sC(1,0,S,w);let k=sC(S,w,M,q);o===0&&k>0&&(k-=pa),o===1&&k<0&&(k+=pa),d.centerX=b,d.centerY=T,d.ang1=O,d.ang2=k};function X6(r,e,t,n,i,s,a,o=0,u=0,l=0){if(s===0||a===0)return;const c=Math.sin(o*pa/360),h=Math.cos(o*pa/360),d=h*(e-n)/2+c*(t-i)/2,f=-c*(e-n)/2+h*(t-i)/2;if(d===0&&f===0)return;s=Math.abs(s),a=Math.abs(a);const p=Math.pow(d,2)/Math.pow(s,2)+Math.pow(f,2)/Math.pow(a,2);p>1&&(s*=Math.sqrt(p),a*=Math.sqrt(p)),V6(e,t,n,i,s,a,u,l,c,h,d,f,Vh);let{ang1:g,ang2:m}=Vh;const{centerX:_,centerY:y}=Vh;let x=Math.abs(m)/(pa/4);Math.abs(1-x)<1e-7&&(x=1);const b=Math.max(Math.ceil(x),1);m/=b;let T=r[r.length-2],S=r[r.length-1];const w={x:0,y:0};for(let M=0;M<b;M++){const q=Y6(g,m),{x:O,y:k}=Xh(q[0],s,a,h,c,_,y,w),{x:U,y:N}=Xh(q[1],s,a,h,c,_,y,w),{x:Z,y:G}=Xh(q[2],s,a,h,c,_,y,w);nC(r,T,S,O,k,U,N,Z,G),T=Z,S=G,g+=m}}function K6(r,e,t){const n=(a,o)=>{const u=o.x-a.x,l=o.y-a.y,c=Math.sqrt(u*u+l*l),h=u/c,d=l/c;return{len:c,nx:h,ny:d}},i=(a,o)=>{a===0?r.moveTo(o.x,o.y):r.lineTo(o.x,o.y)};let s=e[e.length-1];for(let a=0;a<e.length;a++){const o=e[a%e.length],u=o.radius??t;if(u<=0){i(a,o),s=o;continue}const l=e[(a+1)%e.length],c=n(o,s),h=n(o,l);if(c.len<1e-4||h.len<1e-4){i(a,o),s=o;continue}let d=Math.asin(c.nx*h.ny-c.ny*h.nx),f=1,p=!1;c.nx*h.nx-c.ny*-h.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,f=-1,p=!0):d>0&&(f=-1,p=!0);const g=d/2;let m,_=Math.abs(Math.cos(g)*u/Math.sin(g));_>Math.min(c.len/2,h.len/2)?(_=Math.min(c.len/2,h.len/2),m=Math.abs(_*Math.sin(g)/Math.cos(g))):m=u;const y=o.x+h.nx*_+-h.ny*m*f,x=o.y+h.ny*_+h.nx*m*f,b=Math.atan2(c.ny,c.nx)+Math.PI/2*f,T=Math.atan2(h.ny,h.nx)-Math.PI/2*f;a===0&&r.moveTo(y+Math.cos(b)*m,x+Math.sin(b)*m),r.arc(y,x,m,b,T,p),s=o}}function Z6(r,e,t,n){const i=(o,u)=>Math.sqrt((o.x-u.x)**2+(o.y-u.y)**2),s=(o,u,l)=>({x:o.x+(u.x-o.x)*l,y:o.y+(u.y-o.y)*l}),a=e.length;for(let o=0;o<a;o++){const u=e[(o+1)%a],l=u.radius??t;if(l<=0){o===0?r.moveTo(u.x,u.y):r.lineTo(u.x,u.y);continue}const c=e[o],h=e[(o+2)%a],d=i(c,u);let f;if(d<1e-4)f=u;else{const m=Math.min(d/2,l);f=s(u,c,m/d)}const p=i(h,u);let g;if(p<1e-4)g=u;else{const m=Math.min(p/2,l);g=s(u,h,m/p)}o===0?r.moveTo(f.x,f.y):r.lineTo(f.x,f.y),r.quadraticCurveTo(u.x,u.y,g.x,g.y,n)}}const J6=new vt;class Q6{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new zt,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const n=this._currentPoly.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==t)&&n.push(e,t),this}arc(e,t,n,i,s,a){this._ensurePoly(!1);const o=this._currentPoly.points;return iC(o,e,t,n,i,s,a),this}arcTo(e,t,n,i,s){this._ensurePoly();const a=this._currentPoly.points;return $6(a,e,t,n,i,s),this}arcToSvg(e,t,n,i,s,a,o){const u=this._currentPoly.points;return X6(u,this._currentPoly.lastX,this._currentPoly.lastY,a,o,e,t,n,i,s),this}bezierCurveTo(e,t,n,i,s,a,o){this._ensurePoly();const u=this._currentPoly;return nC(this._currentPoly.points,u.lastX,u.lastY,e,t,n,i,s,a,o),this}quadraticCurveTo(e,t,n,i,s){this._ensurePoly();const a=this._currentPoly;return H6(this._currentPoly.points,a.lastX,a.lastY,e,t,n,i,s),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const n=this.shapePrimitives,i=n.length;for(let s=0;s<e.instructions.length;s++){const a=e.instructions[s];this[a.action](...a.data)}if(e.checkForHoles&&n.length-i>1){let s=null;for(let a=i;a<n.length;a++){const o=n[a];if(o.shape.type==="polygon"){const u=o.shape,l=s==null?void 0:s.shape;l&&l.containsPolygon(u)?(s.holes||(s.holes=[]),s.holes.push(o),n.copyWithin(a,a+1),n.length--,a--):s=o}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,n,i,s){return this.drawShape(new vt(e,t,n,i),s),this}circle(e,t,n,i){return this.drawShape(new Eh(e,t,n),i),this}poly(e,t,n){const i=new la(e);return i.closePath=t,this.drawShape(i,n),this}regularPoly(e,t,n,i,s=0,a){i=Math.max(i|0,3);const o=-1*Math.PI/2+s,u=Math.PI*2/i,l=[];for(let c=0;c<i;c++){const h=o-c*u;l.push(e+n*Math.cos(h),t+n*Math.sin(h))}return this.poly(l,!0,a),this}roundPoly(e,t,n,i,s,a=0,o){if(i=Math.max(i|0,3),s<=0)return this.regularPoly(e,t,n,i,a);const u=n*Math.sin(Math.PI/i)-.001;s=Math.min(s,u);const l=-1*Math.PI/2+a,c=Math.PI*2/i,h=(i-2)*Math.PI/i/2;for(let d=0;d<i;d++){const f=d*c+l,p=e+n*Math.cos(f),g=t+n*Math.sin(f),m=f+Math.PI+h,_=f-Math.PI-h,y=p+s*Math.cos(m),x=g+s*Math.sin(m),b=p+s*Math.cos(_),T=g+s*Math.sin(_);d===0?this.moveTo(y,x):this.lineTo(y,x),this.quadraticCurveTo(p,g,b,T,o)}return this.closePath()}roundShape(e,t,n=!1,i){return e.length<3?this:(n?Z6(this,e,t,i):K6(this,e,t),this.closePath())}filletRect(e,t,n,i,s){if(s===0)return this.rect(e,t,n,i);const a=Math.min(n,i)/2,o=Math.min(a,Math.max(-a,s)),u=e+n,l=t+i,c=o<0?-o:0,h=Math.abs(o);return this.moveTo(e,t+h).arcTo(e+c,t+c,e+h,t,h).lineTo(u-h,t).arcTo(u-c,t+c,u,t+h,h).lineTo(u,l-h).arcTo(u-c,l-c,e+n-h,l,h).lineTo(e+h,l).arcTo(e+c,l-c,e,l-h,h).closePath()}chamferRect(e,t,n,i,s,a){if(s<=0)return this.rect(e,t,n,i);const o=Math.min(s,Math.min(n,i)/2),u=e+n,l=t+i,c=[e+o,t,u-o,t,u,t+o,u,l-o,u-o,l,e+o,l,e,l-o,e,t+o];for(let h=c.length-1;h>=2;h-=2)c[h]===c[h-2]&&c[h-1]===c[h-3]&&c.splice(h-1,2);return this.poly(c,!0,a)}ellipse(e,t,n,i,s){return this.drawShape(new Mh(e,t,n,i),s),this}roundRect(e,t,n,i,s,a){return this.drawShape(new Ih(e,t,n,i,s),a),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let n=this._currentPoly;return n&&this.endPoly(),n=new la,n.points.push(e,t),this._currentPoly=n,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new la,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let n=t.shape.x,i=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const s=t.transform,a=n;n=s.a*n+s.c*i+s.tx,i=s.b*a+s.d*i+s.ty}this._currentPoly.points.push(n,i)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const n=e.instructions[t];this[n.action](...n.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let n=0;n<t.length;n++){const i=t[n],s=i.shape.getBounds(J6);i.transform?e.addRect(s,i.transform):e.addRect(s)}return e}}class ns{constructor(e,t=!1){this.instructions=[],this.uid=rt("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?O$(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new Q6(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,n,i,s){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(Se.shared);let u=0,l=0;if(!a||a.action!=="bezierCurveTo")u=o.x,l=o.y;else{u=a.data[2],l=a.data[3];const c=o.x,h=o.y;u=c+(c-u),l=h+(h-l)}return this.instructions.push({action:"bezierCurveTo",data:[u,l,e,t,n,i,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,n){const i=this.instructions[this.instructions.length-1],s=this.getLastPoint(Se.shared);let a=0,o=0;if(!i||i.action!=="quadraticCurveTo")a=s.x,o=s.y;else{a=i.data[0],o=i.data[1];const u=s.x,l=s.y;a=u+(u-a),o=l+(l-o)}return this.instructions.push({action:"quadraticCurveTo",data:[a,o,e,t,n]}),this._dirty=!0,this}rect(e,t,n,i,s){return this.instructions.push({action:"rect",data:[e,t,n,i,s]}),this._dirty=!0,this}circle(e,t,n,i){return this.instructions.push({action:"circle",data:[e,t,n,i]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,n,i,s,a,o){s||(s=i/2);const u=-1*Math.PI/2+a,l=n*2,c=Math.PI*2/l,h=[];for(let d=0;d<l;d++){const f=d%2?s:i,p=d*c+u;h.push(e+f*Math.cos(p),t+f*Math.sin(p))}return this.poly(h,!0,o),this}clone(e=!1){const t=new ns;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let n=0;n<this.instructions.length;n++){const i=this.instructions[n];t.instructions.push({action:i.action,data:i.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,n=e.b,i=e.c,s=e.d,a=e.tx,o=e.ty;let u=0,l=0,c=0,h=0,d=0,f=0,p=0,g=0;for(let m=0;m<this.instructions.length;m++){const _=this.instructions[m],y=_.data;switch(_.action){case"moveTo":case"lineTo":u=y[0],l=y[1],y[0]=t*u+i*l+a,y[1]=n*u+s*l+o;break;case"bezierCurveTo":c=y[0],h=y[1],d=y[2],f=y[3],u=y[4],l=y[5],y[0]=t*c+i*h+a,y[1]=n*c+s*h+o,y[2]=t*d+i*f+a,y[3]=n*d+s*f+o,y[4]=t*u+i*l+a,y[5]=n*u+s*l+o;break;case"quadraticCurveTo":c=y[0],h=y[1],u=y[2],l=y[3],y[0]=t*c+i*h+a,y[1]=n*c+s*h+o,y[2]=t*u+i*l+a,y[3]=n*u+s*l+o;break;case"arcToSvg":u=y[5],l=y[6],p=y[0],g=y[1],y[0]=t*p+i*g,y[1]=n*p+s*g,y[5]=t*u+i*l+a,y[6]=n*u+s*l+o;break;case"circle":y[4]=ga(y[3],e);break;case"rect":y[4]=ga(y[4],e);break;case"ellipse":y[8]=ga(y[8],e);break;case"roundRect":y[5]=ga(y[5],e);break;case"addPath":y[0].transform(e);break;case"poly":y[2]=ga(y[2],e);break;default:Le("unknown transform action",_.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,n=this.instructions[t];if(!n)return e.x=0,e.y=0,e;for(;n.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;n=this.instructions[t]}switch(n.action){case"moveTo":case"lineTo":e.x=n.data[0],e.y=n.data[1];break;case"quadraticCurveTo":e.x=n.data[2],e.y=n.data[3];break;case"bezierCurveTo":e.x=n.data[4],e.y=n.data[5];break;case"arc":case"arcToSvg":e.x=n.data[5],e.y=n.data[6];break;case"addPath":n.data[0].getLastPoint(e);break}return e}}function ga(r,e){return r?r.prepend(e):e.clone()}function Xe(r,e,t){const n=r.getAttribute(e);return n?Number(n):t}function eY(r,e){const t=r.querySelectorAll("defs");for(let n=0;n<t.length;n++){const i=t[n];for(let s=0;s<i.children.length;s++){const a=i.children[s];switch(a.nodeName.toLowerCase()){case"lineargradient":e.defs[a.id]=tY(a);break;case"radialgradient":e.defs[a.id]=rY();break}}}}function tY(r){const e=Xe(r,"x1",0),t=Xe(r,"y1",0),n=Xe(r,"x2",1),i=Xe(r,"y2",0),s=r.getAttribute("gradientUnits")||"objectBoundingBox",a=new Rn(e,t,n,i,s==="objectBoundingBox"?"local":"global");for(let o=0;o<r.children.length;o++){const u=r.children[o],l=Xe(u,"offset",0),c=Ne.shared.setValue(u.getAttribute("stop-color")).toNumber();a.addColorStop(l,c)}return a}function rY(r){return Le("[SVG Parser] Radial gradients are not yet supported"),new Rn(0,0,1,0)}function aC(r){const e=r.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const oC={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function uC(r,e){const t=r.getAttribute("style"),n={},i={},s={strokeStyle:n,fillStyle:i,useFill:!1,useStroke:!1};for(const a in oC){const o=r.getAttribute(a);o&&lC(e,s,a,o.trim())}if(t){const a=t.split(";");for(let o=0;o<a.length;o++){const u=a[o].trim(),[l,c]=u.split(":");oC[l]&&lC(e,s,l,c.trim())}}return{strokeStyle:s.useStroke?n:null,fillStyle:s.useFill?i:null,useFill:s.useFill,useStroke:s.useStroke}}function lC(r,e,t,n){switch(t){case"stroke":if(n!=="none"){if(n.startsWith("url(")){const i=aC(n);e.strokeStyle.fill=r.defs[i]}else e.strokeStyle.color=Ne.shared.setValue(n).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(n);break;case"fill":if(n!=="none"){if(n.startsWith("url(")){const i=aC(n);e.fillStyle.fill=r.defs[i]}else e.fillStyle.color=Ne.shared.setValue(n).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(n);break;case"stroke-opacity":e.strokeStyle.alpha=Number(n);break;case"opacity":e.fillStyle.alpha=Number(n),e.strokeStyle.alpha=Number(n);break}}function nY(r,e){if(typeof r=="string"){const a=document.createElement("div");a.innerHTML=r.trim(),r=a.querySelector("svg")}const t={context:e,defs:{},path:new ns};eY(r,t);const n=r.children,{fillStyle:i,strokeStyle:s}=uC(r,t);for(let a=0;a<n.length;a++){const o=n[a];o.nodeName.toLowerCase()!=="defs"&&cC(o,t,i,s)}return e}function cC(r,e,t,n){const i=r.children,{fillStyle:s,strokeStyle:a}=uC(r,e);s&&t?t={...t,...s}:s&&(t=s),a&&n?n={...n,...a}:a&&(n=a);const o=!t&&!n;o&&(t={color:0});let u,l,c,h,d,f,p,g,m,_,y,x,b,T,S,w,M;switch(r.nodeName.toLowerCase()){case"path":T=r.getAttribute("d"),r.getAttribute("fill-rule")==="evenodd"&&Le("SVG Evenodd fill rule not supported, your svg may render incorrectly"),S=new ns(T,!0),e.context.path(S),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"circle":p=Xe(r,"cx",0),g=Xe(r,"cy",0),m=Xe(r,"r",0),e.context.ellipse(p,g,m,m),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"rect":u=Xe(r,"x",0),l=Xe(r,"y",0),w=Xe(r,"width",0),M=Xe(r,"height",0),_=Xe(r,"rx",0),y=Xe(r,"ry",0),_||y?e.context.roundRect(u,l,w,M,_||y):e.context.rect(u,l,w,M),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"ellipse":p=Xe(r,"cx",0),g=Xe(r,"cy",0),_=Xe(r,"rx",0),y=Xe(r,"ry",0),e.context.beginPath(),e.context.ellipse(p,g,_,y),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"line":c=Xe(r,"x1",0),h=Xe(r,"y1",0),d=Xe(r,"x2",0),f=Xe(r,"y2",0),e.context.beginPath(),e.context.moveTo(c,h),e.context.lineTo(d,f),n&&e.context.stroke(n);break;case"polygon":b=r.getAttribute("points"),x=b.match(/\d+/g).map(q=>parseInt(q,10)),e.context.poly(x,!0),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"polyline":b=r.getAttribute("points"),x=b.match(/\d+/g).map(q=>parseInt(q,10)),e.context.poly(x,!1),n&&e.context.stroke(n);break;case"g":case"svg":break;default:{Le(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}o&&(t=null);for(let q=0;q<i.length;q++)cC(i[q],e,t,n)}function iY(r){return Ne.isColorLike(r)}function hC(r){return r instanceof pu}function fC(r){return r instanceof Rn}function sY(r){return r instanceof ce}function aY(r,e,t){const n=Ne.shared.setValue(e??0);return r.color=n.toNumber(),r.alpha=n.alpha===1?t.alpha:n.alpha,r.texture=ce.WHITE,{...t,...r}}function oY(r,e,t){return r.texture=e,{...t,...r}}function dC(r,e,t){return r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,{...t,...r}}function pC(r,e,t){return e.buildGradient(),r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,r.textureSpace=e.textureSpace,{...t,...r}}function uY(r,e){const t={...e,...r},n=Ne.shared.setValue(t.color);return t.alpha*=n.alpha,t.color=n.toNumber(),t}function fi(r,e){if(r==null)return null;const t={},n=r;return iY(r)?aY(t,r,e):sY(r)?oY(t,r,e):hC(r)?dC(t,r,e):fC(r)?pC(t,r,e):n.fill&&hC(n.fill)?dC(n,n.fill,e):n.fill&&fC(n.fill)?pC(n,n.fill,e):uY(n,e)}function wu(r,e){const{width:t,alignment:n,miterLimit:i,cap:s,join:a,pixelLine:o,...u}=e,l=fi(r,u);return l?{width:t,alignment:n,miterLimit:i,cap:s,join:a,pixelLine:o,...l}:null}const lY=new Se,gC=new le,Kh=class Wr extends hr{constructor(){super(...arguments),this.uid=rt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new ns,this._transform=new le,this._fillStyle={...Wr.defaultFillStyle},this._strokeStyle={...Wr.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new zt,this._boundsDirty=!0}clone(){const e=new Wr;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=fi(e,Wr.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=wu(e,Wr.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=fi(e,Wr.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=fi(e,Wr.defaultStrokeStyle),this}texture(e,t,n,i,s,a){return this.instructions.push({action:"texture",data:{image:e,dx:n||0,dy:i||0,dw:s||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?Ne.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ns,this}fill(e,t){let n;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="stroke"?n=i.data.path:n=this._activePath.clone(),n?(e!=null&&(t!==void 0&&typeof e=="number"&&(be(Ie,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=fi(e,Wr.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Se.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const n=this.instructions[this.instructions.length-1];return this._tick===0&&n&&n.action==="fill"?t=n.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=wu(e,Wr.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],n=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(n);else{t.data.hole=n;break}}return this._initNextPathLocation(),this}arc(e,t,n,i,s,a){this._tick++;const o=this._transform;return this._activePath.arc(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,n,i,s,a),this}arcTo(e,t,n,i,s){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*n+a.c*i+a.tx,a.b*n+a.d*i+a.ty,s),this}arcToSvg(e,t,n,i,s,a,o){this._tick++;const u=this._transform;return this._activePath.arcToSvg(e,t,n,i,s,u.a*a+u.c*o+u.tx,u.b*a+u.d*o+u.ty),this}bezierCurveTo(e,t,n,i,s,a,o){this._tick++;const u=this._transform;return this._activePath.bezierCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*n+u.c*i+u.tx,u.b*n+u.d*i+u.ty,u.a*s+u.c*a+u.tx,u.b*s+u.d*a+u.ty,o),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,n,i){return this._tick++,this._activePath.ellipse(e,t,n,i,this._transform.clone()),this}circle(e,t,n){return this._tick++,this._activePath.circle(e,t,n,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const n=this._transform;return this._activePath.lineTo(n.a*e+n.c*t+n.tx,n.b*e+n.d*t+n.ty),this}moveTo(e,t){this._tick++;const n=this._transform,i=this._activePath.instructions,s=n.a*e+n.c*t+n.tx,a=n.b*e+n.d*t+n.ty;return i.length===1&&i[0].action==="moveTo"?(i[0].data[0]=s,i[0].data[1]=a,this):(this._activePath.moveTo(s,a),this)}quadraticCurveTo(e,t,n,i,s){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*n+a.c*i+a.tx,a.b*n+a.d*i+a.ty,s),this}rect(e,t,n,i){return this._tick++,this._activePath.rect(e,t,n,i,this._transform.clone()),this}roundRect(e,t,n,i,s){return this._tick++,this._activePath.roundRect(e,t,n,i,s,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,n,i,s=0,a){return this._tick++,this._activePath.regularPoly(e,t,n,i,s,a),this}roundPoly(e,t,n,i,s,a){return this._tick++,this._activePath.roundPoly(e,t,n,i,s,a),this}roundShape(e,t,n,i){return this._tick++,this._activePath.roundShape(e,t,n,i),this}filletRect(e,t,n,i,s){return this._tick++,this._activePath.filletRect(e,t,n,i,s),this}chamferRect(e,t,n,i,s,a){return this._tick++,this._activePath.chamferRect(e,t,n,i,s,a),this}star(e,t,n,i,s=0,a=0){return this._tick++,this._activePath.star(e,t,n,i,s,a,this._transform.clone()),this}svg(e){return this._tick++,nY(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,n,i,s,a){return e instanceof le?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,n,i,s,a),this)}transform(e,t,n,i,s,a){return e instanceof le?(this._transform.append(e),this):(gC.set(e,t,n,i,s,a),this._transform.append(gC),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const n=this.instructions[t],i=n.action;if(i==="fill"){const s=n.data;e.addBounds(s.path.bounds)}else if(i==="texture"){const s=n.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(i==="stroke"){const s=n.data,a=s.style.alignment,o=s.style.width*(1-a),u=s.path.bounds;e.addFrame(u.minX-o,u.minY-o,u.maxX+o,u.maxY+o)}}return e}containsPoint(e){var i;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let n=!1;for(let s=0;s<t.length;s++){const a=t[s],o=a.data,u=o.path;if(!a.action||!u)continue;const l=o.style,c=u.shapePath.shapePrimitives;for(let h=0;h<c.length;h++){const d=c[h].shape;if(!l||!d)continue;const f=c[h].transform,p=f?f.applyInverse(e,lY):e;if(a.action==="fill")n=d.contains(p.x,p.y);else{const m=l;n=d.strokeContains(p.x,p.y,m.width,m.alignment)}const g=o.hole;if(g){const m=(i=g.shapePath)==null?void 0:i.shapePrimitives;if(m)for(let _=0;_<m.length;_++)m[_].shape.contains(p.x,p.y)&&(n=!1)}if(n)return!0}}return n}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(n),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(n)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Kh.defaultFillStyle={color:16777215,alpha:1,texture:ce.WHITE,matrix:null,fill:null,textureSpace:"local"},Kh.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:ce.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let pr=Kh;const mC=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function vC(r){const e=[];let t=0;for(let n=0;n<mC.length;n++){const i=`_${mC[n]}`;e[t++]=r[i]}return t=_C(r._fill,e,t),t=cY(r._stroke,e,t),t=hY(r.dropShadow,e,t),e.join("-")}function _C(r,e,t){var n;return r&&(e[t++]=r.color,e[t++]=r.alpha,e[t++]=(n=r.fill)==null?void 0:n.styleKey),t}function cY(r,e,t){return r&&(t=_C(r,e,t),e[t++]=r.width,e[t++]=r.alignment,e[t++]=r.cap,e[t++]=r.join,e[t++]=r.miterLimit),t}function hY(r,e,t){return r&&(e[t++]=r.alpha,e[t++]=r.angle,e[t++]=r.blur,e[t++]=r.distance,e[t++]=Ne.shared.setValue(r.color).toNumber()),t}const Zh=class Rs extends hr{constructor(e={}){super(),fY(e);const t={...Rs.defaultTextStyle,...e};for(const n in t){const i=n;this[i]=t[n]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Rs.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Rs.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...pr.defaultFillStyle,...e},()=>{this._fill=fi({...this._originalFill},pr.defaultFillStyle)})),this._fill=fi(e===0?"black":e,pr.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...pr.defaultStrokeStyle,...e},()=>{this._stroke=wu({...this._originalStroke},pr.defaultStrokeStyle)})),this._stroke=wu(e,pr.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=vC(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=Rs.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Rs({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){var n,i,s,a;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const o=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(n=this._fill)!=null&&n.texture&&this._fill.texture.destroy(o),(i=this._originalFill)!=null&&i.texture&&this._originalFill.texture.destroy(o),(s=this._stroke)!=null&&s.texture&&this._stroke.texture.destroy(o),(a=this._originalStroke)!=null&&a.texture&&this._originalStroke.texture.destroy(o)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(n,i,s)=>(n[i]=s,t==null||t(i,s),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(Ne.isColorLike(e)||e instanceof Rn||e instanceof pu)}};Zh.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},Zh.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let rn=Zh;function fY(r){const e=r;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=rn.defaultDropShadow;r.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){be(Ie,"strokeThickness is now a part of stroke");const t=e.stroke;let n={};if(Ne.isColorLike(t))n.color=t;else if(t instanceof Rn||t instanceof pu)n.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))n=t;else throw new Error("Invalid stroke value.");r.stroke={...n,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){be(Ie,"gradient fill is now a fill pattern: `new FillGradient(...)`");let t;r.fontSize==null?r.fontSize=rn.defaultTextStyle.fontSize:typeof r.fontSize=="string"?t=parseInt(r.fontSize,10):t=r.fontSize;const n=new Rn({start:{x:0,y:0},end:{x:0,y:(t||0)*1.7}}),i=e.fillGradientStops.map(s=>Ne.shared.setValue(s).toNumber());i.forEach((s,a)=>{const o=a/(i.length-1);n.addColorStop(o,s)}),r.fill={fill:n}}}class dY{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const n=Ht.get().createCanvas();n.width=e,n.height=t;const i=n.getContext("2d");return{canvas:n,context:i}}getOptimalCanvasAndContext(e,t,n=1){e=Math.ceil(e*n-1e-6),t=Math.ceil(t*n-1e-6),e=Yi(e),t=Yi(t);const i=(e<<17)+(t<<1);this._canvasPool[i]||(this._canvasPool[i]=[]);let s=this._canvasPool[i].pop();return s||(s=this._createCanvasAndContext(e,t)),s}returnCanvasAndContext(e){const t=e.canvas,{width:n,height:i}=t,s=(n<<17)+(i<<1);e.context.clearRect(0,0,n,i),this._canvasPool[s].push(e)}clear(){this._canvasPool={}}}const di=new dY,pY=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Su(r){const e=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let t=r.fontFamily;Array.isArray(r.fontFamily)||(t=r.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!pY.includes(i)&&(i=`"${i}"`),t[n]=i}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${e} ${t.join(",")}`}const Jh={willReadFrequently:!0},gr=class ee{static get experimentalLetterSpacingSupported(){let e=ee._experimentalLetterSpacingSupported;if(e!==void 0){const t=Ht.get().getCanvasRenderingContext2D().prototype;e=ee._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,n,i,s,a,o,u,l){this.text=e,this.style=t,this.width=n,this.height=i,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=u,this.fontProperties=l}static measureText(e=" ",t,n=ee._canvas,i=t.wordWrap){var y;const s=`${e}:${t.styleKey}`;if(ee._measurementCache[s])return ee._measurementCache[s];const a=Su(t),o=ee.measureFont(a);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const u=ee.__context;u.font=a;const c=(i?ee._wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),h=new Array(c.length);let d=0;for(let x=0;x<c.length;x++){const b=ee._measureText(c[x],t.letterSpacing,u);h[x]=b,d=Math.max(d,b)}const f=((y=t._stroke)==null?void 0:y.width)||0;let p=d+f;t.dropShadow&&(p+=t.dropShadow.distance);const g=t.lineHeight||o.fontSize;let m=Math.max(g,o.fontSize+f)+(c.length-1)*(g+t.leading);return t.dropShadow&&(m+=t.dropShadow.distance),new ee(e,t,p,m,c,h,g+t.leading,d,o)}static _measureText(e,t,n){let i=!1;ee.experimentalLetterSpacingSupported&&(ee.experimentalLetterSpacing?(n.letterSpacing=`${t}px`,n.textLetterSpacing=`${t}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));const s=n.measureText(e);let a=s.width;const o=-s.actualBoundingBoxLeft;let l=s.actualBoundingBoxRight-o;if(a>0)if(i)a-=t,l-=t;else{const c=(ee.graphemeSegmenter(e).length-1)*t;a+=c,l+=c}return Math.max(a,l)}static _wordWrap(e,t,n=ee._canvas){const i=n.getContext("2d",Jh);let s=0,a="",o="";const u=Object.create(null),{letterSpacing:l,whiteSpace:c}=t,h=ee._collapseSpaces(c),d=ee._collapseNewlines(c);let f=!h;const p=t.wordWrapWidth+l,g=ee._tokenize(e);for(let m=0;m<g.length;m++){let _=g[m];if(ee._isNewline(_)){if(!d){o+=ee._addLine(a),f=!h,a="",s=0;continue}_=" "}if(h){const x=ee.isBreakingSpace(_),b=ee.isBreakingSpace(a[a.length-1]);if(x&&b)continue}const y=ee._getFromCache(_,l,u,i);if(y>p)if(a!==""&&(o+=ee._addLine(a),a="",s=0),ee.canBreakWords(_,t.breakWords)){const x=ee.wordWrapSplit(_);for(let b=0;b<x.length;b++){let T=x[b],S=T,w=1;for(;x[b+w];){const q=x[b+w];if(!ee.canBreakChars(S,q,_,b,t.breakWords))T+=q;else break;S=q,w++}b+=w-1;const M=ee._getFromCache(T,l,u,i);M+s>p&&(o+=ee._addLine(a),f=!1,a="",s=0),a+=T,s+=M}}else{a.length>0&&(o+=ee._addLine(a),a="",s=0);const x=m===g.length-1;o+=ee._addLine(_,!x),f=!1,a="",s=0}else y+s>p&&(f=!1,o+=ee._addLine(a),a="",s=0),(a.length>0||!ee.isBreakingSpace(_)||f)&&(a+=_,s+=y)}return o+=ee._addLine(a,!1),o}static _addLine(e,t=!0){return e=ee._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,n,i){let s=n[e];return typeof s!="number"&&(s=ee._measureText(e,t,i)+t,n[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const n=e[t];if(!ee.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ee._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ee._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let n="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){const s=e[i],a=e[i+1];if(ee.isBreakingSpace(s,a)||ee._isNewline(s)){n!==""&&(t.push(n),n=""),t.push(s);continue}n+=s}return n!==""&&t.push(n),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,i,s){return!0}static wordWrapSplit(e){return ee.graphemeSegmenter(e)}static measureFont(e){if(ee._fonts[e])return ee._fonts[e];const t=ee._context;t.font=e;const n=t.measureText(ee.METRICS_STRING+ee.BASELINE_SYMBOL),i={ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,fontSize:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};return ee._fonts[e]=i,i}static clearMetrics(e=""){e?delete ee._fonts[e]:ee._fonts={}}static get _canvas(){if(!ee.__canvas){let e;try{const t=new OffscreenCanvas(0,0),n=t.getContext("2d",Jh);if(n!=null&&n.measureText)return ee.__canvas=t,t;e=Ht.get().createCanvas()}catch{e=Ht.get().createCanvas()}e.width=e.height=10,ee.__canvas=e}return ee.__canvas}static get _context(){return ee.__context||(ee.__context=ee._canvas.getContext("2d",Jh)),ee.__context}};gr.METRICS_STRING="|q",gr.BASELINE_SYMBOL="M",gr.BASELINE_MULTIPLIER=1.4,gr.HEIGHT_MULTIPLIER=2,gr.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),gr.experimentalLetterSpacing=!1,gr._fonts={},gr._newlines=[10,13],gr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],gr._measurementCache={};let nn=gr;const yC=1e5;function Tu(r,e,t,n=0){if(r.texture===ce.WHITE&&!r.fill)return Ne.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof pu){const i=r.fill,s=e.createPattern(i.texture.source.resource,"repeat"),a=i.transform.copyTo(le.shared);return a.scale(i.texture.frame.width,i.texture.frame.height),s.setTransform(a),s}else if(r.fill instanceof Rn){const i=r.fill,s=i.type==="linear",a=i.textureSpace==="local";let o=1,u=1;a&&t&&(o=t.width+n,u=t.height+n);let l,c=!1;if(s){const{start:h,end:d}=i;l=e.createLinearGradient(h.x*o,h.y*u,d.x*o,d.y*u),c=Math.abs(d.x-h.x)<Math.abs((d.y-h.y)*.1)}else{const{center:h,innerRadius:d,outerCenter:f,outerRadius:p}=i;l=e.createRadialGradient(h.x*o,h.y*u,d*o,f.x*o,f.y*u,p*o)}if(c&&a&&t){const h=t.lineHeight/u;for(let d=0;d<t.lines.length;d++){const f=(d*t.lineHeight+n/2)/u;i.colorStops.forEach(p=>{const g=f+p.offset*h;l.addColorStop(Math.floor(g*yC)/yC,Ne.shared.setValue(p.color).toHex())})}}else i.colorStops.forEach(h=>{l.addColorStop(h.offset,Ne.shared.setValue(h.color).toHex())});return l}}else{const i=e.createPattern(r.texture.source.resource,"repeat"),s=r.matrix.copyTo(le.shared);return s.scale(r.texture.frame.width,r.texture.frame.height),i.setTransform(s),i}return Le("FillStyle not recognised",r),"red"}function bC(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);if(i[0].length===0||i[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const s=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(let o=s,u=a;o<=u;o++)e.push(String.fromCharCode(o))}else e.push(...Array.from(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const xC=class RN extends E${constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...RN.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const n=t.style.clone();t.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=ce.WHITE,n._fill.fill=null),this.applyFillAsTint=t.overrideFill;const i=n.fontSize;n.fontSize=this.baseMeasurementFontSize;const s=Su(n);t.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/i):n.fontSize=this.baseRenderedFontSize=i,this._style=n,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,this.fontMetrics=nn.measureFont(s),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(e){var m,_;const t=bC(e).filter(y=>!this._currentChars.includes(y)).filter((y,x,b)=>b.indexOf(y)===x);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let n;this._currentPageIndex===-1?n=this._nextPage():n=this.pages[this._currentPageIndex];let{canvas:i,context:s}=n.canvasAndContext,a=n.texture.source;const o=this._style;let u=this._currentX,l=this._currentY;const c=this.baseRenderedFontSize/this.baseMeasurementFontSize,h=this._padding*c;let d=0,f=!1;const p=i.width/this.resolution,g=i.height/this.resolution;for(let y=0;y<t.length;y++){const x=t[y],b=nn.measureText(x,o,i,!1);b.lineHeight=b.height;const T=b.width*c,S=Math.ceil((o.fontStyle==="italic"?2:1)*T),w=b.height*c,M=S+h*2,q=w+h*2;if(f=!1,x!==`
`&&x!=="\r"&&x!=="	"&&x!==" "&&(f=!0,d=Math.ceil(Math.max(q,d))),u+M>p&&(l+=d,d=q,u=0,l+d>g)){a.update();const k=this._nextPage();i=k.canvasAndContext.canvas,s=k.canvasAndContext.context,a=k.texture.source,l=0}const O=T/c-(((m=o.dropShadow)==null?void 0:m.distance)??0)-(((_=o._stroke)==null?void 0:_.width)??0);if(this.chars[x]={id:x.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:O,kerning:{}},f){this._drawGlyph(s,b,u+h,l+h,c,o);const k=a.width*c,U=a.height*c,N=new vt(u/k*a.width,l/U*a.height,M/k*a.width,q/U*a.height);this.chars[x].texture=new ce({source:a,frame:N}),u+=Math.ceil(M)}}a.update(),this._currentX=u,this._currentY=l,this._skipKerning&&this._applyKerning(t,s)}get pageTextures(){return be(Ie,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const n=this._measureCache;for(let i=0;i<e.length;i++){const s=e[i];for(let a=0;a<this._currentChars.length;a++){const o=this._currentChars[a];let u=n[s];u||(u=n[s]=t.measureText(s).width);let l=n[o];l||(l=n[o]=t.measureText(o).width);let c=t.measureText(s+o).width,h=c-(u+l);h&&(this.chars[s].kerning[o]=h),c=t.measureText(s+o).width,h=c-(u+l),h&&(this.chars[o].kerning[s]=h)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=di.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const n=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),i=new ce({source:new na({resource:t.canvas,resolution:n,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),s={canvasAndContext:t,texture:i};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,t,n){t.fontSize=this.baseRenderedFontSize,e.scale(n,n),e.font=Su(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const i=t._stroke,s=(i==null?void 0:i.width)??0;if(i&&(e.lineWidth=s,e.lineJoin=i.join,e.miterLimit=i.miterLimit,e.strokeStyle=Tu(i,e)),t._fill&&(e.fillStyle=Tu(t._fill,e)),t.dropShadow){const a=t.dropShadow,o=Ne.shared.setValue(a.color).toArray(),u=a.blur*n,l=a.distance*n;e.shadowColor=`rgba(${o[0]*255},${o[1]*255},${o[2]*255},${a.alpha})`,e.shadowBlur=u,e.shadowOffsetX=Math.cos(a.angle)*l,e.shadowOffsetY=Math.sin(a.angle)*l}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,n,i,s,a){const o=t.text,u=t.fontProperties,l=a._stroke,c=((l==null?void 0:l.width)??0)*s,h=n+c/2,d=i-c/2,f=u.descent*s,p=t.lineHeight*s;a.stroke&&c&&e.strokeText(o,h,d+p-f),a._fill&&e.fillText(o,h,d+p-f)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:n}=this.pages[e];di.returnCanvasAndContext(t),n.destroy(!0)}this.pages=null}};xC.defaultOptions={textureSize:512,style:new rn,mipmap:!0};let wC=xC;function SC(r,e,t,n){const i={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};i.offsetY=t.baseLineOffset;let s=i.lines[0],a=null,o=!0;const u={width:0,start:0,index:0,positions:[],chars:[]},l=p=>{const g=s.width;for(let m=0;m<u.index;m++){const _=p.positions[m];s.chars.push(p.chars[m]),s.charPositions.push(_+g)}s.width+=p.width,o=!1,u.width=0,u.index=0,u.chars.length=0},c=()=>{let p=s.chars.length-1;if(n){let g=s.chars[p];for(;g===" ";)s.width-=t.chars[g].xAdvance,g=s.chars[--p]}i.width=Math.max(i.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},o=!0,i.lines.push(s),i.height+=t.lineHeight},h=t.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*h,f=e.wordWrapWidth*h;for(let p=0;p<r.length+1;p++){let g;const m=p===r.length;m||(g=r[p]);const _=t.chars[g]||t.chars[" "];if(/(?:\s)/.test(g)||g==="\r"||g===`
`||m){if(!o&&e.wordWrap&&s.width+u.width-d>f?(c(),l(u),m||s.charPositions.push(0)):(u.start=s.width,l(u),m||s.charPositions.push(0)),g==="\r"||g===`
`)s.width!==0&&c();else if(!m){const T=_.xAdvance+(_.kerning[a]||0)+d;s.width+=T,s.spaceWidth=T,s.spacesIndex.push(s.charPositions.length),s.chars.push(g)}}else{const b=_.kerning[a]||0,T=_.xAdvance+b+d;u.positions[u.index++]=u.width+b,u.chars.push(g),u.width+=T}a=g}return c(),e.align==="center"?gY(i):e.align==="right"?mY(i):e.align==="justify"&&vY(i),i}function gY(r){for(let e=0;e<r.lines.length;e++){const t=r.lines[e],n=r.width/2-t.width/2;for(let i=0;i<t.charPositions.length;i++)t.charPositions[i]+=n}}function mY(r){for(let e=0;e<r.lines.length;e++){const t=r.lines[e],n=r.width-t.width;for(let i=0;i<t.charPositions.length;i++)t.charPositions[i]+=n}}function vY(r){const e=r.width;for(let t=0;t<r.lines.length;t++){const n=r.lines[t];let i=0,s=n.spacesIndex[i++],a=0;const o=n.spacesIndex.length,l=(e-n.width)/o;for(let c=0;c<n.charPositions.length;c++)c===s&&(s=n.spacesIndex[i++],a+=l),n.charPositions[c]+=a}}let Au=0;class _Y{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(e,t){var a;let n=`${t.fontFamily}-bitmap`,i=!0;if(t._fill.fill&&!t._stroke)n+=t._fill.fill.styleKey,i=!1;else if(t._stroke||t.dropShadow){let o=t.styleKey;o=o.substring(0,o.lastIndexOf("-")),n=`${o}-bitmap`,i=!1}if(!yt.has(n)){const o=new wC({style:t,overrideFill:i,overrideSize:!0,...this.defaultOptions});Au++,Au>50&&Le("BitmapText",`You have dynamically created ${Au} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),o.once("destroy",()=>{Au--,yt.remove(n)}),yt.set(n,o)}const s=yt.get(n);return(a=s.ensureCharacters)==null||a.call(s,e),s}getLayout(e,t,n=!0){const i=this.getFont(e,t);return SC([...e],t,i,n)}measureText(e,t,n=!0){return this.getLayout(e,t,n)}install(...e){var l,c,h,d;let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:(l=e[2])==null?void 0:l.chars,resolution:(c=e[2])==null?void 0:c.resolution,padding:(h=e[2])==null?void 0:h.padding,skipKerning:(d=e[2])==null?void 0:d.skipKerning},be(Ie,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const n=t==null?void 0:t.name;if(!n)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const i=t.style,s=i instanceof rn?i:new rn(i),a=s._fill.fill!==null&&s._fill.fill!==void 0,o=new wC({style:s,overrideFill:a,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1}),u=bC(t.chars);return o.ensureCharacters(u.join("")),yt.set(`${n}-bitmap`,o),o.once("destroy",()=>yt.remove(`${n}-bitmap`)),o}uninstall(e){const t=`${e}-bitmap`,n=yt.get(t);n&&n.destroy()}}const yY=new _Y;function is(r,e){const t=r.split("?")[0],n=Ir.extname(t).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}class bY{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this._tickerAdded||!this.domElement||(en.system.add(this._tickerUpdate,this,ia.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(en.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY,pointerType:e.pointerType,pointerId:e.pointerId}))}_tickerUpdate(e){this._deltaTime+=e.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}}const Cn=new bY;class Ru extends aa{constructor(){super(...arguments),this.client=new Se,this.movement=new Se,this.offset=new Se,this.global=new Se,this.screen=new Se}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,i,s,a,o,u,l,c,h,d,f,p,g){throw new Error("Method not implemented.")}}class mr extends Ru{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class ss extends Ru{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}ss.DOM_DELTA_PIXEL=0,ss.DOM_DELTA_LINE=1,ss.DOM_DELTA_PAGE=2;const xY=2048,wY=new Se,ma=new Se;class SY{constructor(e){this.dispatch=new hr,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let n=0,i=t.length;n<i;n++)t[n].fn(e);else Le(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){Cn.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,wY.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(t)?t:[t];for(let s=n.length-1;s>=0;s--)i.forEach(a=>{e.currentTarget=n[s],this.notifyTarget(e,a)})}propagationPath(e){const t=[e];for(let n=0;n<xY&&e!==this.rootTarget&&e.parent;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,i,s,a=!1){let o=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Cn.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children;for(let h=c.length-1;h>=0;h--){const d=c[h],f=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,n,i,s,a||s(e,n));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),o=!0}}}const u=this._isInteractive(t),l=e.isInteractive();return l&&l&&this._allInteractiveElements.push(e),a||this._hitElements.length>0?null:o?this._hitElements:u&&!s(e,n)&&i(e,n)?l?[e]:[]:null}hitTestRecursive(e,t,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Cn.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children,l=n;for(let c=u.length-1;c>=0;c--){const h=u[c],d=this.hitTestRecursive(h,this._isInteractive(t)?t:h.eventMode,l,i,s);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const f=e.isInteractive();return(d.length>0||f)&&d.push(e),d}}}const a=this._isInteractive(t),o=e.isInteractive();return a&&i(e,n)?o?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,ma),!e.hitArea.contains(ma.x,ma.y)))return!0;if(e.effects&&e.effects.length)for(let n=0;n<e.effects.length;n++){const i=e.effects[n];if(i.containsPoint&&!i.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return e.hitArea?!0:e!=null&&e.containsPoint?(e.worldTransform.applyInverse(t,ma),e.containsPoint(ma)):!1}notifyTarget(e,t){var s,a;if(!e.currentTarget.isInteractive())return;t??(t=e.type);const n=`on${t}`;(a=(s=e.currentTarget)[n])==null||a.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof mr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var u,l;if(!(e instanceof mr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((u=i.overTargets)==null?void 0:u.length)>0&&s!==t.target){const c=e.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(e,c,s);if(this.dispatchEvent(h,"pointerout"),n&&this.dispatchEvent(h,"mouseout"),!t.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!t.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(h)}if(s!==t.target){const c=e.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(t,c);this.dispatchEvent(h,"pointerover"),n&&this.dispatchEvent(h,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==t.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const p=this.clonePointerEvent(t,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==s&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),n&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(h)}const a=[],o=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push("pointermove"):this.dispatchEvent(t,"pointermove"),o&&a.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?a.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),o&&a.push("globaltouchmove")),n&&(this.moveOnAll?a.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),o&&a.push("globalmousemove"),this.cursor=(l=t.target)==null?void 0:l.cursor),a.length>0&&this.all(t,a),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var a;if(!(e instanceof mr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(a=n.target)==null?void 0:a.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof mr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const a=this.createPointerEvent(e,"pointerleave",i);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),n&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(a)}this.cursor=null}mapPointerUp(e){if(!(e instanceof mr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const o=n.button===2;this.dispatchEvent(n,o?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let a=s;if(s&&!n.composedPath().includes(s)){let o=s;for(;o&&!n.composedPath().includes(o);){if(n.currentTarget=o,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const u=n.button===2;this.notifyTarget(n,u?"rightupoutside":"mouseupoutside")}o=o.parent}delete i.pressTargetsByButton[e.button],a=o}if(a){const o=this.clonePointerEvent(n,"click");o.target=a,o.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:o.target,timeStamp:t});const u=i.clicksByButton[e.button];if(u.target===o.target&&t-u.timeStamp<200?++u.clickCount:u.clickCount=1,u.target=o.target,u.timeStamp=t,o.detail=u.clickCount,o.pointerType==="mouse"){const l=o.button===2;this.dispatchEvent(o,l?"rightclick":"click")}else o.pointerType==="touch"&&this.dispatchEvent(o,"tap");this.dispatchEvent(o,"pointertap"),this.freeEvent(o)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof mr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof ss)){Le("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){const i=this.allocateEvent(mr);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){const t=this.allocateEvent(ss);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const n=this.allocateEvent(mr);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof mr&&t instanceof mr&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Ru&&t instanceof Ru&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.defaultPrevented=!1,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){const n=e.currentTarget._events[t];if(n)if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(t,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const TY=1,AY={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Qh=class bS{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new SY(null),Cn.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new mr(null),this._rootWheelEvent=new ss(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...bS.defaultEventFeatures},{set:(t,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[n]=i,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{canvas:t,resolution:n}=this.renderer;this.setTargetElement(t),this.resolution=n,bS._defaultEventMode=e.eventMode??"passive",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=t.length;n<i;n++){const s=t[n],a=this._bootstrapEvent(this._rootPointerEvent,s);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Cn.pointerMoved();const t=this._normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this._bootstrapEvent(this._rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const n=t!==this.domElement?"outside":"",i=this._normalizeToPointerData(e);for(let s=0,a=i.length;s<a;s++){const o=this._bootstrapEvent(this._rootPointerEvent,i[s]);o.type+=n,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this._bootstrapEvent(this._rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,Cn.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Cn.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Cn.removeTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}_normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=TY),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){const t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=AY[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Qh.extension={name:"events",type:[$.WebGLSystem,$.CanvasSystem,$.WebGPUSystem],priority:-1},Qh.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let TC=Qh;const RY={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(r){this.eventMode=r?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??TC.defaultEventMode},set eventMode(r){this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,a=typeof e=="function"?void 0:e;r=n?`${r}capture`:r;const o=typeof e=="function"?e:e.handleEvent,u=this;i&&i.addEventListener("abort",()=>{u.off(r,o,a)}),s?u.once(r,o,a):u.on(r,o,a)},removeEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,i)},dispatchEvent(r){if(!(r instanceof aa))throw new Error("Container cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};class AC{constructor(e){this._renderer=e}push(e,t,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:t,filterEffect:e})}pop(e,t,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(e){e.action==="pushFilter"?this._renderer.filter.push(e):e.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}}AC.extension={type:[$.WebGLPipes,$.WebGPUPipes,$.CanvasPipes],name:"filter"};function PY(r,e){e.clear();const t=e.matrix;for(let n=0;n<r.length;n++){const i=r[n];i.globalDisplayStatus<7||(e.matrix=i.worldTransform,e.addBounds(i.bounds))}return e.matrix=t,e}const CY=new fa({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:8,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class RC{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new An({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new Qi({}),this.renderer=e}get activeBackTexture(){var e;return(e=this._activeFilterData)==null?void 0:e.backTexture}push(e){var f;const t=this.renderer,n=e.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());const i=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,n.length===0){i.skip=!0;return}const s=i.bounds;if(e.renderables?PY(e.renderables,s):e.filterEffect.filterArea?(s.clear(),s.addRect(e.filterEffect.filterArea),s.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,s),e.container){const g=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;g&&s.applyMatrix(g)}const a=t.renderTarget.renderTarget.colorTexture.source;let o=1/0,u=0,l=!0,c=!1,h=!1,d=!0;for(let p=0;p<n.length;p++){const g=n[p];if(o=Math.min(o,g.resolution==="inherit"?a._resolution:g.resolution),u+=g.padding,g.antialias==="off"?l=!1:g.antialias==="inherit"&&l&&(l=a.antialias),g.clipToViewport||(d=!1),!!!(g.compatibleRenderers&t.type)){h=!1;break}if(g.blendRequired&&!(((f=t.backBuffer)==null?void 0:f.useBackBuffer)??!0)){Le("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),h=!1;break}h=g.enabled||h,c||(c=g.blendRequired)}if(!h){i.skip=!0;return}if(d){const p=t.renderTarget.rootViewPort,g=t.renderTarget.renderTarget.resolution;s.fitBounds(0,p.width/g,0,p.height/g)}if(s.scale(o).ceil().scale(1/o).pad(u|0),!s.isPositive){i.skip=!0;return}i.skip=!1,i.bounds=s,i.blendRequired=c,i.container=e.container,i.filterEffect=e.filterEffect,i.previousRenderSurface=t.renderTarget.renderSurface,i.inputTexture=fr.getOptimalTexture(s.width,s.height,o,l),t.renderTarget.bind(i.inputTexture,!0),t.globalUniforms.push({offset:s})}pop(){const e=this.renderer;this._filterStackIndex--;const t=this._filterStack[this._filterStackIndex];if(t.skip)return;this._activeFilterData=t;const n=t.inputTexture,i=t.bounds;let s=ce.EMPTY;if(e.renderTarget.finishRenderPass(),t.blendRequired){const o=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,u=e.renderTarget.getRenderTarget(t.previousRenderSurface);s=this.getBackTexture(u,i,o)}t.backTexture=s;const a=t.filterEffect.filters;if(this._globalFilterBindGroup.setResource(n.source.style,2),this._globalFilterBindGroup.setResource(s.source,3),e.globalUniforms.pop(),a.length===1)a[0].apply(this,n,t.previousRenderSurface,!1),fr.returnTexture(n);else{let o=t.inputTexture,u=fr.getOptimalTexture(i.width,i.height,o.source._resolution,!1),l=0;for(l=0;l<a.length-1;++l){a[l].apply(this,o,u,!0);const h=o;o=u,u=h}a[l].apply(this,o,t.previousRenderSurface,!1),fr.returnTexture(o),fr.returnTexture(u)}t.blendRequired&&fr.returnTexture(s)}getBackTexture(e,t,n){const i=e.colorTexture.source._resolution,s=fr.getOptimalTexture(t.width,t.height,i,!1);let a=t.minX,o=t.minY;n&&(a-=n.minX,o-=n.minY),a=Math.floor(a*i),o=Math.floor(o*i);const u=Math.ceil(t.width*i),l=Math.ceil(t.height*i);return this.renderer.renderTarget.copyToTexture(e,s,{x:a,y:o},{width:u,height:l},{x:0,y:0}),s}applyFilter(e,t,n,i){const s=this.renderer,a=this._filterStack[this._filterStackIndex],o=a.bounds,u=Se.shared,c=a.previousRenderSurface===n;let h=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,d=this._filterStackIndex-1;for(;d>0&&this._filterStack[d].skip;)--d;d>0&&(h=this._filterStack[d].inputTexture.source._resolution);const f=this._filterGlobalUniforms,p=f.uniforms,g=p.uOutputFrame,m=p.uInputSize,_=p.uInputPixel,y=p.uInputClamp,x=p.uGlobalFrame,b=p.uOutputTexture;if(c){let w=this._filterStackIndex;for(;w>0;){w--;const M=this._filterStack[this._filterStackIndex-1];if(!M.skip){u.x=M.bounds.minX,u.y=M.bounds.minY;break}}g[0]=o.minX-u.x,g[1]=o.minY-u.y}else g[0]=0,g[1]=0;g[2]=t.frame.width,g[3]=t.frame.height,m[0]=t.source.width,m[1]=t.source.height,m[2]=1/m[0],m[3]=1/m[1],_[0]=t.source.pixelWidth,_[1]=t.source.pixelHeight,_[2]=1/_[0],_[3]=1/_[1],y[0]=.5*_[2],y[1]=.5*_[3],y[2]=t.frame.width*m[2]-.5*_[2],y[3]=t.frame.height*m[3]-.5*_[3];const T=this.renderer.renderTarget.rootRenderTarget.colorTexture;x[0]=u.x*h,x[1]=u.y*h,x[2]=T.source.width*h,x[3]=T.source.height*h;const S=this.renderer.renderTarget.getRenderTarget(n);if(s.renderTarget.bind(n,!!i),n instanceof ce?(b[0]=n.frame.width,b[1]=n.frame.height):(b[0]=S.width,b[1]=S.height),b[2]=S.isRoot?-1:1,f.update(),s.renderPipes.uniformBatch){const w=s.renderPipes.uniformBatch.getUboResource(f);this._globalFilterBindGroup.setResource(w,0)}else this._globalFilterBindGroup.setResource(f,0);this._globalFilterBindGroup.setResource(t.source,1),this._globalFilterBindGroup.setResource(t.source.style,2),e.groups[0]=this._globalFilterBindGroup,s.encoder.draw({geometry:CY,shader:e,state:e._state,topology:"triangle-list"}),s.type===es.WEBGL&&s.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new zt,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(e,t){const n=this._activeFilterData,i=e.set(n.inputTexture._source.width,0,0,n.inputTexture._source.height,n.bounds.minX,n.bounds.minY),s=t.worldTransform.copyTo(le.shared),a=t.renderGroup||t.parentRenderGroup;return a&&a.cacheToLocalTransform&&s.prepend(a.cacheToLocalTransform),s.invert(),i.prepend(s),i.scale(1/t.texture.frame.width,1/t.texture.frame.height),i.translate(t.anchor.x,t.anchor.y),i}}RC.extension={type:[$.WebGLSystem,$.WebGPUSystem],name:"filter"};class Pu extends ih{constructor(e){e instanceof pr&&(e={context:e});const{context:t,roundPixels:n,...i}=e||{};super({label:"Graphics",...i}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new pr,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=n??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Pu(this._context.clone()):(this._ownedContext=null,new Pu(this._context))}lineStyle(e,t,n){be(Ie,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const i={};return e&&(i.width=e),t&&(i.color=t),n&&(i.alpha=n),this.context.strokeStyle=i,this}beginFill(e,t){be(Ie,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const n={};return e!==void 0&&(n.color=e),t!==void 0&&(n.alpha=t),this.context.fillStyle=n,this}endFill(){be(Ie,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==pr.defaultStrokeStyle.width||e.color!==pr.defaultStrokeStyle.color||e.alpha!==pr.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return be(Ie,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return be(Ie,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return be(Ie,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return be(Ie,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return be(Ie,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return be(Ie,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}const PC=class PN extends fa{constructor(...e){let t=e[0]??{};t instanceof Float32Array&&(be(Ie,"use new MeshGeometry({ positions, uvs, indices }) instead"),t={positions:t,uvs:e[1],indices:e[2]}),t={...PN.defaultOptions,...t};const n=t.positions||new Float32Array([0,0,1,0,1,1,0,1]);let i=t.uvs;i||(t.positions?i=new Float32Array(n.length):i=new Float32Array([0,0,1,0,1,1,0,1]));const s=t.indices||new Uint32Array([0,1,2,0,2,3]),a=t.shrinkBuffersToFit,o=new nr({data:n,label:"attribute-mesh-positions",shrinkToFit:a,usage:ke.VERTEX|ke.COPY_DST}),u=new nr({data:i,label:"attribute-mesh-uvs",shrinkToFit:a,usage:ke.VERTEX|ke.COPY_DST}),l=new nr({data:s,label:"index-mesh-buffer",shrinkToFit:a,usage:ke.INDEX|ke.COPY_DST});super({attributes:{aPosition:{buffer:o,format:"float32x2",stride:8,offset:0},aUV:{buffer:u,format:"float32x2",stride:8,offset:0}},indexBuffer:l,topology:t.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};PC.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let ef=PC;class EY extends ih{constructor(e,t){const{text:n,resolution:i,style:s,anchor:a,width:o,height:u,roundPixels:l,...c}=e;super({...c}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=n??"",this.style=s,this.resolution=i??null,this.allowChildren=!1,this._anchor=new kt({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=l??!1,o!==void 0&&(this.width=o),u!==void 0&&(this.height=u)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,n=this.bounds.height,i=-t*this.anchor.x;let s=0;return e.x>=i&&e.x<=i+t&&(s=-n*this.anchor.y,e.y>=s&&e.y<=s+n)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}}function MY(r,e){let t=r[0]??{};return(typeof t=="string"||r[1])&&(be(Ie,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:r[1]}),t}let IY=class extends EY{constructor(...e){const t=MY(e,"Text");super(t,rn),this.renderPipeId="text"}updateBounds(){const e=this._bounds,t=this._anchor,n=nn.measureText(this._text,this._style),{width:i,height:s}=n;e.minX=-t._x*i,e.maxX=e.minX+i,e.minY=-t._y*s,e.maxY=e.minY+s}};function qY(r){const e=r._stroke,t=r._fill,i=[`div { ${[`color: ${Ne.shared.setValue(t.color).toHex()}`,`font-size: ${r.fontSize}px`,`font-family: ${r.fontFamily}`,`font-weight: ${r.fontWeight}`,`font-style: ${r.fontStyle}`,`font-variant: ${r.fontVariant}`,`letter-spacing: ${r.letterSpacing}px`,`text-align: ${r.align}`,`padding: ${r.padding}px`,`white-space: ${r.whiteSpace==="pre"&&r.wordWrap?"pre-wrap":r.whiteSpace}`,...r.lineHeight?[`line-height: ${r.lineHeight}px`]:[],...r.wordWrap?[`word-wrap: ${r.breakWords?"break-all":"break-word"}`,`max-width: ${r.wordWrapWidth}px`]:[],...e?[EC(e)]:[],...r.dropShadow?[CC(r.dropShadow)]:[],...r.cssOverrides].join(";")} }`];return kY(r.tagStyles,i),i.join(" ")}function CC(r){const e=Ne.shared.setValue(r.color).setAlpha(r.alpha).toHexa(),t=Math.round(Math.cos(r.angle)*r.distance),n=Math.round(Math.sin(r.angle)*r.distance),i=`${t}px ${n}px`;return r.blur>0?`text-shadow: ${i} ${r.blur}px ${e}`:`text-shadow: ${i} ${e}`}function EC(r){return[`-webkit-text-stroke-width: ${r.width}px`,`-webkit-text-stroke-color: ${Ne.shared.setValue(r.color).toHex()}`,`text-stroke-width: ${r.width}px`,`text-stroke-color: ${Ne.shared.setValue(r.color).toHex()}`,"paint-order: stroke"].join(";")}const MC={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},IC={fill:r=>`color: ${Ne.shared.setValue(r).toHex()}`,breakWords:r=>`word-wrap: ${r?"break-all":"break-word"}`,stroke:EC,dropShadow:CC};function kY(r,e){for(const t in r){const n=r[t],i=[];for(const s in n)IC[s]?i.push(IC[s](n[s])):MC[s]&&i.push(MC[s].replace("{{VALUE}}",n[s]));e.push(`${t} { ${i.join(";")} }`)}}class tf extends rn{constructor(e={}){super(e),this._cssOverrides=[],this.cssOverrides??(this.cssOverrides=e.cssOverrides),this.tagStyles=e.tagStyles??{}}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=vC(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new tf({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=qY(this)),this._cssStyle}addOverride(...e){const t=e.filter(n=>!this.cssOverrides.includes(n));t.length>0&&(this.cssOverrides.push(...t),this.update())}removeOverride(...e){const t=e.filter(n=>this.cssOverrides.includes(n));t.length>0&&(this.cssOverrides=this.cssOverrides.filter(n=>!t.includes(n)),this.update())}set fill(e){typeof e!="string"&&typeof e!="number"&&Le("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=e}set stroke(e){e&&typeof e!="string"&&typeof e!="number"&&Le("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=e}}const qC="http://www.w3.org/2000/svg",kC="http://www.w3.org/1999/xhtml";class OC{constructor(){this.svgRoot=document.createElementNS(qC,"svg"),this.foreignObject=document.createElementNS(qC,"foreignObject"),this.domElement=document.createElementNS(kC,"div"),this.styleElement=document.createElementNS(kC,"style"),this.image=new Image;const{foreignObject:e,svgRoot:t,styleElement:n,domElement:i}=this;e.setAttribute("width","10000"),e.setAttribute("height","10000"),e.style.overflow="hidden",t.appendChild(e),e.appendChild(n),e.appendChild(i)}}let BC;function OY(r,e,t,n){n||(n=BC||(BC=new OC));const{domElement:i,styleElement:s,svgRoot:a}=n;i.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${r}</div>`,i.setAttribute("style","transform-origin: top left; display: inline-block"),t&&(s.textContent=t),document.body.appendChild(a);const o=i.getBoundingClientRect();a.remove();const u=e.padding*2;return{width:o.width-u,height:o.height-u}}const Cu={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}};({...Cu,vertex:{...Cu.vertex,header:Cu.vertex.header.replace("group(1)","group(2)")}});const BY={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}};class LC{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}}function Eu(r,e,t){const n=(r>>24&255)/255;e[t++]=(r&255)/255*n,e[t++]=(r>>8&255)/255*n,e[t++]=(r>>16&255)/255*n,e[t++]=n}function LY(r,e,t){be("8.7.0","Please use container.collectRenderables instead.");const n=t.renderPipes?t:t.batch.renderer;return r.collectRenderables(e,n,null)}class FC{constructor(e,t){this.state=fu.for2d(),this._graphicsBatchesHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=t,this._adaptor.init(),this.renderer.renderableGC.addManagedHash(this,"_graphicsBatchesHash")}validateRenderable(e){const t=e.context,n=!!this._graphicsBatchesHash[e.uid],i=this.renderer.graphicsContext.updateGpuContext(t);return!!(i.isBatchable||n!==i.isBatchable)}addRenderable(e,t){const n=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),n.isBatchable?this._addToBatcher(e,t):(this.renderer.renderPipes.batch.break(t),t.add(e))}updateRenderable(e){const t=this._graphicsBatchesHash[e.uid];if(t)for(let n=0;n<t.length;n++){const i=t[n];i._batcher.updateElement(i)}}destroyRenderable(e){this._graphicsBatchesHash[e.uid]&&this._removeBatchForRenderable(e.uid),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;const t=this.renderer,n=e.context;if(!t.graphicsContext.getGpuContext(n).batches.length)return;const s=n.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;const a=s.resources.localUniforms.uniforms;a.uTransformMatrix=e.groupTransform,a.uRound=t._roundPixels|e._roundPixels,Eu(e.groupColorAlpha,a.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){const t=!!this._graphicsBatchesHash[e.uid],n=this.renderer.graphicsContext.updateGpuContext(e.context);t&&this._removeBatchForRenderable(e.uid),n.isBatchable&&this._initBatchesForRenderable(e),e.batched=n.isBatchable}_addToBatcher(e,t){const n=this.renderer.renderPipes.batch,i=this._getBatchesForRenderable(e);for(let s=0;s<i.length;s++){const a=i[s];n.addToBatch(a,t)}}_getBatchesForRenderable(e){return this._graphicsBatchesHash[e.uid]||this._initBatchesForRenderable(e)}_initBatchesForRenderable(e){const t=e.context,n=this.renderer.graphicsContext.getGpuContext(t),i=this.renderer._roundPixels|e._roundPixels,s=n.batches.map(a=>{const o=qe.get(zh);return a.copyTo(o),o.renderable=e,o.roundPixels=i,o});return this._graphicsBatchesHash[e.uid]===void 0&&e.on("destroyed",this._destroyRenderableBound),this._graphicsBatchesHash[e.uid]=s,s}_removeBatchForRenderable(e){this._graphicsBatchesHash[e].forEach(t=>{qe.return(t)}),this._graphicsBatchesHash[e]=null}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null;for(const e in this._graphicsBatchesHash)this._removeBatchForRenderable(e);this._graphicsBatchesHash=null}}FC.extension={type:[$.WebGLPipes,$.WebGPUPipes,$.CanvasPipes],name:"graphics"};const DC=class CN extends ef{constructor(...e){super({});let t=e[0]??{};typeof t=="number"&&(be(Ie,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),t={width:t,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(t)}build(e){e={...CN.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;const t=this.verticesX*this.verticesY,n=[],i=[],s=[],a=this.verticesX-1,o=this.verticesY-1,u=this.width/a,l=this.height/o;for(let h=0;h<t;h++){const d=h%this.verticesX,f=h/this.verticesX|0;n.push(d*u,f*l),i.push(d/a,f/o)}const c=a*o;for(let h=0;h<c;h++){const d=h%a,f=h/a|0,p=f*this.verticesX+d,g=f*this.verticesX+d+1,m=(f+1)*this.verticesX+d,_=(f+1)*this.verticesX+d+1;s.push(p,g,m,g,_,m)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint32Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};DC.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let FY=DC;class rf{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){const t=this.geometry.getBuffer("aUV"),n=t.data;let i=n;const s=this.texture.textureMatrix;return s.isSimple||(i=this._transformedUvs,(this._textureMatrixUpdateId!==s._updateID||this._uvUpdateId!==t._updateID)&&((!i||i.length<n.length)&&(i=this._transformedUvs=new Float32Array(n.length)),this._textureMatrixUpdateId=s._updateID,this._uvUpdateId=t._updateID,s.multiplyUvs(n,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}class UC{constructor(e,t){this.localUniforms=new An({uTransformMatrix:{value:new le,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new Qi({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=t,this._adaptor.init(),e.renderableGC.addManagedHash(this,"_gpuBatchableMeshHash"),e.renderableGC.addManagedHash(this,"_meshDataHash")}validateRenderable(e){const t=this._getMeshData(e),n=t.batched,i=e.batched;if(t.batched=i,n!==i)return!0;if(i){const s=e._geometry;if(s.indices.length!==t.indexSize||s.positions.length!==t.vertexSize)return t.indexSize=s.indices.length,t.vertexSize=s.positions.length,!0;const a=this._getBatchableMesh(e);return a.texture.uid!==e._texture.uid&&(a._textureMatrixUpdateId=-1),!a._batcher.checkAndUpdateTexture(a,e._texture)}return!1}addRenderable(e,t){const n=this.renderer.renderPipes.batch,{batched:i}=this._getMeshData(e);if(i){const s=this._getBatchableMesh(e);s.setTexture(e._texture),s.geometry=e._geometry,n.addToBatch(s,t)}else n.break(t),t.add(e)}updateRenderable(e){if(e.batched){const t=this._gpuBatchableMeshHash[e.uid];t.setTexture(e._texture),t.geometry=e._geometry,t._batcher.updateElement(t)}}destroyRenderable(e){this._meshDataHash[e.uid]=null;const t=this._gpuBatchableMeshHash[e.uid];t&&(qe.return(t),this._gpuBatchableMeshHash[e.uid]=null),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;e.state.blendMode=ca(e.groupBlendMode,e.texture._source);const t=this.localUniforms;t.uniforms.uTransformMatrix=e.groupTransform,t.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,t.update(),Eu(e.groupColorAlpha,t.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){return this._meshDataHash[e.uid]||this._initMeshData(e)}_initMeshData(e){var t,n;return this._meshDataHash[e.uid]={batched:e.batched,indexSize:(t=e._geometry.indices)==null?void 0:t.length,vertexSize:(n=e._geometry.positions)==null?void 0:n.length},e.on("destroyed",this._destroyRenderableBound),this._meshDataHash[e.uid]}_getBatchableMesh(e){return this._gpuBatchableMeshHash[e.uid]||this._initBatchableMesh(e)}_initBatchableMesh(e){const t=qe.get(rf);return t.renderable=e,t.setTexture(e._texture),t.transform=e.groupTransform,t.roundPixels=this.renderer._roundPixels|e._roundPixels,this._gpuBatchableMeshHash[e.uid]=t,t}destroy(){for(const e in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[e]&&qe.return(this._gpuBatchableMeshHash[e]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}UC.extension={type:[$.WebGLPipes,$.WebGPUPipes,$.CanvasPipes],name:"mesh"};class DY{execute(e,t){const n=e.state,i=e.renderer,s=t.shader||e.defaultShader;s.resources.uTexture=t.texture._source,s.resources.uniforms=e.localUniforms;const a=i.gl,o=e.getBuffers(t);i.shader.bind(s),i.state.set(n),i.geometry.bind(o.geometry,s.glProgram);const l=o.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;a.drawElements(a.TRIANGLES,t.particleChildren.length*6,l,0)}}class UY{execute(e,t){const n=e.renderer,i=t.shader||e.defaultShader;i.groups[0]=n.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),i.groups[1]=n.texture.getTextureBindGroup(t.texture);const s=e.state,a=e.getBuffers(t);n.encoder.draw({geometry:a.geometry,shader:t.shader||e.defaultShader,state:s,size:t.particleChildren.length*6})}}function WC(r,e=null){const t=r*6;if(t>65535?e||(e=new Uint32Array(t)):e||(e=new Uint16Array(t)),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let n=0,i=0;n<t;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function WY(r){return{dynamicUpdate:NC(r,!0),staticUpdate:NC(r,!1)}}function NC(r,e){const t=[];t.push(`
      
        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let n=0;for(const s in r){const a=r[s];if(e!==a.dynamic)continue;t.push(`offset = index + ${n}`),t.push(a.code);const o=hu(a.format);n+=o.stride/4}t.push(`
            index += stride * 4;
        }
    `),t.unshift(`
        var stride = ${n};
    `);const i=t.join(`
`);return new Function("ps","f32v","u32v",i)}class NY{constructor(e){this._size=0,this._generateParticleUpdateCache={};const t=this._size=e.size??1e3,n=e.properties;let i=0,s=0;for(const c in n){const h=n[c],d=hu(h.format);h.dynamic?s+=d.stride:i+=d.stride}this._dynamicStride=s/4,this._staticStride=i/4,this.staticAttributeBuffer=new rs(t*4*i),this.dynamicAttributeBuffer=new rs(t*4*s),this.indexBuffer=WC(t);const a=new fa;let o=0,u=0;this._staticBuffer=new nr({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:ke.VERTEX|ke.COPY_DST}),this._dynamicBuffer=new nr({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:ke.VERTEX|ke.COPY_DST});for(const c in n){const h=n[c],d=hu(h.format);h.dynamic?(a.addAttribute(h.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:o*4,format:h.format}),o+=d.size):(a.addAttribute(h.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:u*4,format:h.format}),u+=d.size)}a.addIndex(this.indexBuffer);const l=this.getParticleUpdate(n);this._dynamicUpload=l.dynamicUpdate,this._staticUpload=l.staticUpdate,this.geometry=a}getParticleUpdate(e){const t=GY(e);return this._generateParticleUpdateCache[t]?this._generateParticleUpdateCache[t]:(this._generateParticleUpdateCache[t]=this.generateParticleUpdate(e),this._generateParticleUpdateCache[t])}generateParticleUpdate(e){return WY(e)}update(e,t){e.length>this._size&&(t=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new rs(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new rs(this._size*this._dynamicStride*4*4),this.indexBuffer=WC(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));const n=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,n.float32View,n.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),t){const i=this.staticAttributeBuffer;this._staticUpload(e,i.float32View,i.uint32View),this._staticBuffer.setDataWithSize(i.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}function GY(r){const e=[];for(const t in r){const n=r[t];e.push(t,n.code,n.dynamic?"d":"s")}return e.join("_")}var zY=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`,HY=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,GC=`
struct ParticleUniforms {
  uProjectionMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uResolution:vec2<f32>,
  uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`;class jY extends ci{constructor(){const e=vh.from({vertex:HY,fragment:zY}),t=ua.from({fragment:{source:GC,entryPoint:"mainFragment"},vertex:{source:GC,entryPoint:"mainVertex"}});super({glProgram:e,gpuProgram:t,resources:{uTexture:ce.WHITE.source,uSampler:new gR({}),uniforms:{uTranslationMatrix:{value:new le,type:"mat3x3<f32>"},uColor:{value:new Ne(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}class zC{constructor(e,t){this.state=fu.for2d(),this._gpuBufferHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.localUniforms=new An({uTranslationMatrix:{value:new le,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=e,this.adaptor=t,this.defaultShader=new jY,this.state=fu.for2d()}validateRenderable(e){return!1}addRenderable(e,t){this.renderer.renderPipes.batch.break(t),t.add(e)}getBuffers(e){return this._gpuBufferHash[e.uid]||this._initBuffer(e)}_initBuffer(e){return this._gpuBufferHash[e.uid]=new NY({size:e.particleChildren.length,properties:e._properties}),e.on("destroyed",this._destroyRenderableBound),this._gpuBufferHash[e.uid]}updateRenderable(e){}destroyRenderable(e){this._gpuBufferHash[e.uid].destroy(),this._gpuBufferHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}execute(e){const t=e.particleChildren;if(t.length===0)return;const n=this.renderer,i=this.getBuffers(e);e.texture||(e.texture=t[0].texture);const s=this.state;i.update(t,e._childrenDirty),e._childrenDirty=!1,s.blendMode=ca(e.blendMode,e.texture._source);const a=this.localUniforms.uniforms,o=a.uTranslationMatrix;e.worldTransform.copyTo(o),o.prepend(n.globalUniforms.globalUniformData.projectionMatrix),a.uResolution=n.globalUniforms.globalUniformData.resolution,a.uRound=n._roundPixels|e._roundPixels,Eu(e.groupColorAlpha,a.uColor,0),this.adaptor.execute(this,e)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}class HC extends zC{constructor(e){super(e,new DY)}}HC.extension={type:[$.WebGLPipes],name:"particle"};class jC extends zC{constructor(e){super(e,new UY)}}jC.extension={type:[$.WebGPUPipes],name:"particle"};const $C=class EN extends FY{constructor(e={}){e={...EN.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){var t,n;this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=(t=e.anchor)==null?void 0:t.x,this._anchorY=(n=e.anchor)==null?void 0:n.y,this.updateUvs(),this.updatePositions()}updatePositions(){const e=this.positions,{width:t,height:n,_leftWidth:i,_rightWidth:s,_topHeight:a,_bottomHeight:o,_anchorX:u,_anchorY:l}=this,c=i+s,h=t>c?1:t/c,d=a+o,f=n>d?1:n/d,p=Math.min(h,f),g=u*t,m=l*n;e[0]=e[8]=e[16]=e[24]=-g,e[2]=e[10]=e[18]=e[26]=i*p-g,e[4]=e[12]=e[20]=e[28]=t-s*p-g,e[6]=e[14]=e[22]=e[30]=t-g,e[1]=e[3]=e[5]=e[7]=-m,e[9]=e[11]=e[13]=e[15]=a*p-m,e[17]=e[19]=e[21]=e[23]=n-o*p-m,e[25]=e[27]=e[29]=e[31]=n-m,this.getBuffer("aPosition").update()}updateUvs(){const e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;const t=1/this._originalWidth,n=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=t*this._leftWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-t*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.getBuffer("aUV").update()}};$C.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let $Y=$C;class YC{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,t){const n=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,n),this._renderer.renderPipes.batch.addToBatch(n,t)}updateRenderable(e){const t=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){const t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}destroyRenderable(e){const t=this._gpuSpriteHash[e.uid];qe.return(t.geometry),qe.return(t),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,t){t.geometry.update(e),t.setTexture(e._texture)}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const t=qe.get(rf);return t.geometry=qe.get($Y),t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=t,e.didViewUpdate||this._updateBatchableSprite(e,t),e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(const e in this._gpuSpriteHash)this._gpuSpriteHash[e].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}}YC.extension={type:[$.WebGLPipes,$.WebGPUPipes,$.CanvasPipes],name:"nineSliceSprite"};const YY={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            } 

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},VY={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;
        
        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);
        
        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0
    
        `}};let nf,sf;class XY extends ci{constructor(){nf??(nf=mu({name:"tiling-sprite-shader",bits:[Cu,YY,_u]})),sf??(sf=vu({name:"tiling-sprite-shader",bits:[BY,VY,yu]}));const e=new An({uMapCoord:{value:new le,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new le,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:sf,gpuProgram:nf,resources:{localUniforms:new An({uTransformMatrix:{value:new le,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:ce.EMPTY.source,uSampler:ce.EMPTY.source.style}})}updateUniforms(e,t,n,i,s,a){const o=this.resources.tilingUniforms,u=a.width,l=a.height,c=a.textureMatrix,h=o.uniforms.uTextureTransform;h.set(n.a*u/e,n.b*u/t,n.c*l/e,n.d*l/t,n.tx/e,n.ty/t),h.invert(),o.uniforms.uMapCoord=c.mapCoord,o.uniforms.uClampFrame=c.uClampFrame,o.uniforms.uClampOffset=c.uClampOffset,o.uniforms.uTextureTransform=h,o.uniforms.uSizeAnchor[0]=e,o.uniforms.uSizeAnchor[1]=t,o.uniforms.uSizeAnchor[2]=i,o.uniforms.uSizeAnchor[3]=s,a&&(this.resources.uTexture=a.source,this.resources.uSampler=a.source.style)}}class KY extends ef{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}function ZY(r,e){const t=r.anchor.x,n=r.anchor.y;e[0]=-t*r.width,e[1]=-n*r.height,e[2]=(1-t)*r.width,e[3]=-n*r.height,e[4]=(1-t)*r.width,e[5]=(1-n)*r.height,e[6]=-t*r.width,e[7]=(1-n)*r.height}function JY(r,e,t,n){let i=0;const s=r.length/e,a=n.a,o=n.b,u=n.c,l=n.d,c=n.tx,h=n.ty;for(t*=e;i<s;){const d=r[t],f=r[t+1];r[t]=a*d+u*f+c,r[t+1]=o*d+l*f+h,t+=e,i++}}function QY(r,e){const t=r.texture,n=t.frame.width,i=t.frame.height;let s=0,a=0;r.applyAnchorToTexture&&(s=r.anchor.x,a=r.anchor.y),e[0]=e[6]=-s,e[2]=e[4]=1-s,e[1]=e[3]=-a,e[5]=e[7]=1-a;const o=le.shared;o.copyFrom(r._tileTransform.matrix),o.tx/=r.width,o.ty/=r.height,o.invert(),o.scale(r.width/n,r.height/i),JY(e,2,0,o)}const Mu=new KY;class VC{constructor(e){this._state=fu.default2d,this._tilingSpriteDataHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_tilingSpriteDataHash")}validateRenderable(e){const t=this._getTilingSpriteData(e),n=t.canBatch;this._updateCanBatch(e);const i=t.canBatch;if(i&&i===n){const{batchableMesh:s}=t;return!s._batcher.checkAndUpdateTexture(s,e.texture)}return n!==i}addRenderable(e,t){const n=this._renderer.renderPipes.batch;this._updateCanBatch(e);const i=this._getTilingSpriteData(e),{geometry:s,canBatch:a}=i;if(a){i.batchableMesh||(i.batchableMesh=new rf);const o=i.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),o.geometry=s,o.renderable=e,o.transform=e.groupTransform,o.setTexture(e._texture)),o.roundPixels=this._renderer._roundPixels|e._roundPixels,n.addToBatch(o,t)}else n.break(t),i.shader||(i.shader=new XY),this.updateRenderable(e),t.add(e)}execute(e){const{shader:t}=this._tilingSpriteDataHash[e.uid];t.groups[0]=this._renderer.globalUniforms.bindGroup;const n=t.resources.localUniforms.uniforms;n.uTransformMatrix=e.groupTransform,n.uRound=this._renderer._roundPixels|e._roundPixels,Eu(e.groupColorAlpha,n.uColor,0),this._state.blendMode=ca(e.groupBlendMode,e.texture._source),this._renderer.encoder.draw({geometry:Mu,shader:t,state:this._state})}updateRenderable(e){const t=this._getTilingSpriteData(e),{canBatch:n}=t;if(n){const{batchableMesh:i}=t;e.didViewUpdate&&this._updateBatchableMesh(e),i._batcher.updateElement(i)}else if(e.didViewUpdate){const{shader:i}=t;i.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}destroyRenderable(e){var n;const t=this._getTilingSpriteData(e);t.batchableMesh=null,(n=t.shader)==null||n.destroy(),this._tilingSpriteDataHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_getTilingSpriteData(e){return this._tilingSpriteDataHash[e.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){const t=new ef({indices:Mu.indices,positions:Mu.positions.slice(),uvs:Mu.uvs.slice()});return this._tilingSpriteDataHash[e.uid]={canBatch:!0,renderable:e,geometry:t},e.on("destroyed",this._destroyRenderableBound),this._tilingSpriteDataHash[e.uid]}_updateBatchableMesh(e){const t=this._getTilingSpriteData(e),{geometry:n}=t,i=e.texture.source.style;i.addressMode!=="repeat"&&(i.addressMode="repeat",i.update()),QY(e,n.uvs),ZY(e,n.positions)}destroy(){for(const e in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[e].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(e){const t=this._getTilingSpriteData(e),n=e.texture;let i=!0;return this._renderer.type===es.WEBGL&&(i=this._renderer.context.supports.nonPowOf2wrapping),t.canBatch=n.textureMatrix.isSimple&&(i||n.source.isPowerOfTwo),t.canBatch}}VC.extension={type:[$.WebGLPipes,$.WebGPUPipes,$.CanvasPipes],name:"tilingSprite"};const eV={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:` 
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},tV={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:` 
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}},rV={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {
                
                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));
            
                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;
             
            }
        `}},nV={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {
                
                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));
               
                // SDF
                median = min(median, msdfColor.a);
            
                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
           
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);  
              
                return coverage;
            }
        `}};let af,of;class iV extends ci{constructor(){const e=new An({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new le,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),t=qh();af??(af=mu({name:"sdf-shader",bits:[Lh,Uh(t),eV,rV,_u]})),of??(of=vu({name:"sdf-shader",bits:[Fh,Nh(t),tV,nV,yu]})),super({glProgram:of,gpuProgram:af,resources:{localUniforms:e,batchSamplers:Gh(t)}})}}class XC{constructor(e){this._gpuBitmapText={},this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(e){const t=this._getGpuBitmapText(e);return e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,t)),this._renderer.renderPipes.graphics.validateRenderable(t)}addRenderable(e,t){const n=this._getGpuBitmapText(e);KC(e,n),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,n)),this._renderer.renderPipes.graphics.addRenderable(n,t),n.context.customShader&&this._updateDistanceField(e)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableByUid(e.uid)}_destroyRenderableByUid(e){const t=this._gpuBitmapText[e].context;t.customShader&&(qe.return(t.customShader),t.customShader=null),qe.return(this._gpuBitmapText[e]),this._gpuBitmapText[e]=null}updateRenderable(e){const t=this._getGpuBitmapText(e);KC(e,t),this._renderer.renderPipes.graphics.updateRenderable(t),t.context.customShader&&this._updateDistanceField(e)}_updateContext(e,t){const{context:n}=t,i=yY.getFont(e.text,e._style);n.clear(),i.distanceField.type!=="none"&&(n.customShader||(n.customShader=qe.get(iV)));const s=Array.from(e.text),a=e._style;let o=i.baseLineOffset;const u=SC(s,a,i,!0);let l=0;const c=a.padding,h=u.scale;let d=u.width,f=u.height+u.offsetY;a._stroke&&(d+=a._stroke.width/h,f+=a._stroke.width/h),n.translate(-e._anchor._x*d-c,-e._anchor._y*f-c).scale(h,h);const p=i.applyFillAsTint?a._fill.color:16777215;for(let g=0;g<u.lines.length;g++){const m=u.lines[g];for(let _=0;_<m.charPositions.length;_++){const y=s[l++],x=i.chars[y];x!=null&&x.texture&&n.texture(x.texture,p||"black",Math.round(m.charPositions[_]+x.xOffset),Math.round(o+x.yOffset))}o+=i.lineHeight}}_getGpuBitmapText(e){return this._gpuBitmapText[e.uid]||this.initGpuText(e)}initGpuText(e){const t=qe.get(Pu);return this._gpuBitmapText[e.uid]=t,this._updateContext(e,t),e.on("destroyed",this._destroyRenderableBound),this._gpuBitmapText[e.uid]}_updateDistanceField(e){const t=this._getGpuBitmapText(e).context,n=e._style.fontFamily,i=yt.get(`${n}-bitmap`),{a:s,b:a,c:o,d:u}=e.groupTransform,l=Math.sqrt(s*s+a*a),c=Math.sqrt(o*o+u*u),h=(Math.abs(l)+Math.abs(c))/2,d=i.baseRenderedFontSize/e._style.fontSize,f=h*i.distanceField.range*(1/d);t.customShader.resources.localUniforms.uniforms.uDistance=f}destroy(){for(const e in this._gpuBitmapText)this._destroyRenderableByUid(e);this._gpuBitmapText=null,this._renderer=null}}XC.extension={type:[$.WebGLPipes,$.WebGPUPipes,$.CanvasPipes],name:"bitmapText"};function KC(r,e){e.groupTransform=r.groupTransform,e.groupColorAlpha=r.groupColorAlpha,e.groupColor=r.groupColor,e.groupBlendMode=r.groupBlendMode,e.globalDisplayStatus=r.globalDisplayStatus,e.groupTransform=r.groupTransform,e.localDisplayStatus=r.localDisplayStatus,e.groupAlpha=r.groupAlpha,e._roundPixels=r._roundPixels}function uf(r,e){const{texture:t,bounds:n}=r;_R(n,e._anchor,t);const i=e._style.padding;n.minX-=i,n.minY-=i,n.maxX-=i,n.maxY-=i}class ZC{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(const e in this._gpuText){const t=this._gpuText[e];if(!t)continue;const n=t.batchableSprite.renderable;n._autoResolution&&(n._resolution=this._renderer.resolution,n.onViewUpdate())}}validateRenderable(e){const t=this._getGpuText(e),n=e._getKey();return t.textureNeedsUploading?(t.textureNeedsUploading=!1,!0):t.currentKey!==n}addRenderable(e,t){const i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){const n=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),n._batcher.updateElement(n)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){const t=this._gpuText[e];this._renderer.htmlText.decreaseReferenceCount(t.currentKey),qe.return(t.batchableSprite),this._gpuText[e]=null}_updateText(e){const t=e._getKey(),n=this._getGpuText(e),i=n.batchableSprite;n.currentKey!==t&&this._updateGpuText(e).catch(s=>{console.error(s)}),e._didTextUpdate=!1,uf(i,e)}async _updateGpuText(e){e._didTextUpdate=!1;const t=this._getGpuText(e);if(t.generatingTexture)return;const n=e._getKey();this._renderer.htmlText.decreaseReferenceCount(t.currentKey),t.generatingTexture=!0,t.currentKey=n;const i=e.resolution??this._renderer.resolution,s=await this._renderer.htmlText.getManagedTexture(e.text,i,e._style,e._getKey()),a=t.batchableSprite;a.texture=t.texture=s,t.generatingTexture=!1,t.textureNeedsUploading=!0,e.onViewUpdate(),uf(a,e)}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){const t={texture:ce.EMPTY,currentKey:"--",batchableSprite:qe.get(LC),textureNeedsUploading:!1,generatingTexture:!1},n=t.batchableSprite;return n.renderable=e,n.transform=e.groupTransform,n.texture=ce.EMPTY,n.bounds={minX:0,maxX:1,minY:0,maxY:0},n.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._gpuText[e.uid]=t,e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(const e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}}ZC.extension={type:[$.WebGLPipes,$.WebGPUPipes,$.CanvasPipes],name:"htmlText"};function sV(){const{userAgent:r}=Ht.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(r)}const aV=new zt;function JC(r,e,t,n){const i=aV;i.minX=0,i.minY=0,i.maxX=r.width/n|0,i.maxY=r.height/n|0;const s=fr.getOptimalTexture(i.width,i.height,n,!1);return s.source.uploadMethodId="image",s.source.resource=r,s.source.alphaMode="premultiply-alpha-on-upload",s.frame.width=e/n,s.frame.height=t/n,s.source.emit("update",s.source),s.updateUvs(),s}function oV(r,e){const t=e.fontFamily,n=[],i={},s=/font-family:([^;"\s]+)/g,a=r.match(s);function o(u){i[u]||(n.push(u),i[u]=!0)}if(Array.isArray(t))for(let u=0;u<t.length;u++)o(t[u]);else o(t);a&&a.forEach(u=>{const l=u.split(":")[1].trim();o(l)});for(const u in e.tagStyles){const l=e.tagStyles[u].fontFamily;o(l)}return n}async function uV(r){const t=await(await Ht.get().fetch(r)).blob(),n=new FileReader;return await new Promise((s,a)=>{n.onloadend=()=>s(n.result),n.onerror=a,n.readAsDataURL(t)})}async function QC(r,e){const t=await uV(e);return`@font-face {
        font-family: "${r.fontFamily}";
        src: url('${t}');
        font-weight: ${r.fontWeight};
        font-style: ${r.fontStyle};
    }`}const Iu=new Map;async function lV(r,e,t){const n=r.filter(i=>yt.has(`${i}-and-url`)).map((i,s)=>{if(!Iu.has(i)){const{url:a}=yt.get(`${i}-and-url`);s===0?Iu.set(i,QC({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:i},a)):Iu.set(i,QC({fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:i},a))}return Iu.get(i)});return(await Promise.all(n)).join(`
`)}function cV(r,e,t,n,i){const{domElement:s,styleElement:a,svgRoot:o}=i;s.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${r}</div>`,s.setAttribute("style",`transform: scale(${t});transform-origin: top left; display: inline-block`),a.textContent=n;const{width:u,height:l}=i.image;return o.setAttribute("width",u.toString()),o.setAttribute("height",l.toString()),new XMLSerializer().serializeToString(o)}function hV(r,e){const t=di.getOptimalCanvasAndContext(r.width,r.height,e),{context:n}=t;return n.clearRect(0,0,r.width,r.height),n.drawImage(r,0,0),t}function fV(r,e,t){return new Promise(async n=>{t&&await new Promise(i=>setTimeout(i,100)),r.onload=()=>{n()},r.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,r.crossOrigin="anonymous"})}class lf{constructor(e){this._activeTextures={},this._renderer=e,this._createCanvas=e.type===es.WEBGPU}getTexture(e){return this._buildTexturePromise(e.text,e.resolution,e.style)}getManagedTexture(e,t,n,i){if(this._activeTextures[i])return this._increaseReferenceCount(i),this._activeTextures[i].promise;const s=this._buildTexturePromise(e,t,n).then(a=>(this._activeTextures[i].texture=a,a));return this._activeTextures[i]={texture:null,promise:s,usageCount:1},s}async _buildTexturePromise(e,t,n){const i=qe.get(OC),s=oV(e,n),a=await lV(s,n,tf.defaultTextStyle),o=OY(e,n,a,i),u=Math.ceil(Math.ceil(Math.max(1,o.width)+n.padding*2)*t),l=Math.ceil(Math.ceil(Math.max(1,o.height)+n.padding*2)*t),c=i.image,h=2;c.width=(u|0)+h,c.height=(l|0)+h;const d=cV(e,n,t,a,i);await fV(c,d,sV()&&s.length>0);const f=c;let p;this._createCanvas&&(p=hV(c,t));const g=JC(p?p.canvas:f,c.width-h,c.height-h,t);return this._createCanvas&&(this._renderer.texture.initSource(g.source),di.returnCanvasAndContext(p)),qe.return(i),g}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){const t=this._activeTextures[e];t&&(t.usageCount--,t.usageCount===0&&(t.texture?this._cleanUp(t):t.promise.then(n=>{t.texture=n,this._cleanUp(t)}).catch(()=>{Le("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[e]=null))}_cleanUp(e){fr.returnTexture(e.texture),e.texture.source.resource=null,e.texture.source.uploadMethodId="unknown"}getReferenceCount(e){return this._activeTextures[e].usageCount}destroy(){this._activeTextures=null}}lf.extension={type:[$.WebGLSystem,$.WebGPUSystem,$.CanvasSystem],name:"htmlText"},lf.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"};class eE{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(const e in this._gpuText){const t=this._gpuText[e];if(!t)continue;const n=t.batchableSprite.renderable;n._autoResolution&&(n._resolution=this._renderer.resolution,n.onViewUpdate())}}validateRenderable(e){const t=this._getGpuText(e),n=e._getKey();return t.currentKey!==n}addRenderable(e,t){const i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){const n=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),n._batcher.updateElement(n)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){const t=this._gpuText[e];this._renderer.canvasText.decreaseReferenceCount(t.currentKey),qe.return(t.batchableSprite),this._gpuText[e]=null}_updateText(e){const t=e._getKey(),n=this._getGpuText(e),i=n.batchableSprite;n.currentKey!==t&&this._updateGpuText(e),e._didTextUpdate=!1,uf(i,e)}_updateGpuText(e){const t=this._getGpuText(e),n=t.batchableSprite;t.texture&&this._renderer.canvasText.decreaseReferenceCount(t.currentKey),t.texture=n.texture=this._renderer.canvasText.getManagedTexture(e),t.currentKey=e._getKey(),n.texture=t.texture}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){const t={texture:null,currentKey:"--",batchableSprite:qe.get(LC)};return t.batchableSprite.renderable=e,t.batchableSprite.transform=e.groupTransform,t.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},t.batchableSprite.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuText[e.uid]=t,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._updateText(e),e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(const e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}}eE.extension={type:[$.WebGLPipes,$.WebGPUPipes,$.CanvasPipes],name:"text"};function tE(r,e,t){for(let n=0,i=4*t*e;n<e;++n,i+=4)if(r[i+3]!==0)return!1;return!0}function rE(r,e,t,n,i){const s=4*e;for(let a=n,o=n*s+4*t;a<=i;++a,o+=s)if(r[o+3]!==0)return!1;return!0}function dV(r,e=1){const{width:t,height:n}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const a=i.getImageData(0,0,t,n).data;let o=0,u=0,l=t-1,c=n-1;for(;u<n&&tE(a,t,u);)++u;if(u===n)return vt.EMPTY;for(;tE(a,t,c);)--c;for(;rE(a,t,o,u,c);)++o;for(;rE(a,t,l,u,c);)--l;return++l,++c,new vt(o/e,u/e,(l-o)/e,(c-u)/e)}class nE{constructor(e){this._activeTextures={},this._renderer=e}getTextureSize(e,t,n){const i=nn.measureText(e||" ",n);let s=Math.ceil(Math.ceil(Math.max(1,i.width)+n.padding*2)*t),a=Math.ceil(Math.ceil(Math.max(1,i.height)+n.padding*2)*t);return s=Math.ceil(s-1e-6),a=Math.ceil(a-1e-6),s=Yi(s),a=Yi(a),{width:s,height:a}}getTexture(e,t,n,i){typeof e=="string"&&(be("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),e={text:e,style:n,resolution:t}),e.style instanceof rn||(e.style=new rn(e.style));const{texture:s,canvasAndContext:a}=this.createTextureAndCanvas(e);return this._renderer.texture.initSource(s._source),di.returnCanvasAndContext(a),s}createTextureAndCanvas(e){const{text:t,style:n}=e,i=e.resolution??this._renderer.resolution,s=nn.measureText(t||" ",n),a=Math.ceil(Math.ceil(Math.max(1,s.width)+n.padding*2)*i),o=Math.ceil(Math.ceil(Math.max(1,s.height)+n.padding*2)*i),u=di.getOptimalCanvasAndContext(a,o),{canvas:l}=u;this.renderTextToCanvas(t,n,i,u);const c=JC(l,a,o,i);if(n.trim){const h=dV(l,i);c.frame.copyFrom(h),c.updateUvs()}return{texture:c,canvasAndContext:u}}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;const t=e._getKey();if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].texture;const{texture:n,canvasAndContext:i}=this.createTextureAndCanvas(e);return this._activeTextures[t]={canvasAndContext:i,texture:n,usageCount:1},n}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}returnTexture(e){const t=e.source;t.resource=null,t.uploadMethodId="unknown",t.alphaMode="no-premultiply-alpha",fr.returnTexture(e)}decreaseReferenceCount(e){const t=this._activeTextures[e];t.usageCount--,t.usageCount===0&&(di.returnCanvasAndContext(t.canvasAndContext),this.returnTexture(t.texture),this._activeTextures[e]=null)}getReferenceCount(e){return this._activeTextures[e].usageCount}renderTextToCanvas(e,t,n,i){var y,x,b,T;const{canvas:s,context:a}=i,o=Su(t),u=nn.measureText(e||" ",t),l=u.lines,c=u.lineHeight,h=u.lineWidths,d=u.maxLineWidth,f=u.fontProperties,p=s.height;if(a.resetTransform(),a.scale(n,n),a.textBaseline=t.textBaseline,(y=t._stroke)!=null&&y.width){const S=t._stroke;a.lineWidth=S.width,a.miterLimit=S.miterLimit,a.lineJoin=S.join,a.lineCap=S.cap}a.font=o;let g,m;const _=t.dropShadow?2:1;for(let S=0;S<_;++S){const w=t.dropShadow&&S===0,M=w?Math.ceil(Math.max(1,p)+t.padding*2):0,q=M*n;if(w){a.fillStyle="black",a.strokeStyle="black";const U=t.dropShadow,N=U.color,Z=U.alpha;a.shadowColor=Ne.shared.setValue(N).setAlpha(Z).toRgbaString();const G=U.blur*n,A=U.distance*n;a.shadowBlur=G,a.shadowOffsetX=Math.cos(U.angle)*A,a.shadowOffsetY=Math.sin(U.angle)*A+q}else{if(a.fillStyle=t._fill?Tu(t._fill,a,u):null,(x=t._stroke)!=null&&x.width){const U=t._stroke.width*t._stroke.alignment;a.strokeStyle=Tu(t._stroke,a,u,U)}a.shadowColor="black"}let O=(c-f.fontSize)/2;c-f.fontSize<0&&(O=0);const k=((b=t._stroke)==null?void 0:b.width)??0;for(let U=0;U<l.length;U++)g=k/2,m=k/2+U*c+f.ascent+O,t.align==="right"?g+=d-h[U]:t.align==="center"&&(g+=(d-h[U])/2),(T=t._stroke)!=null&&T.width&&this._drawLetterSpacing(l[U],t,i,g+t.padding,m+t.padding-M,!0),t._fill!==void 0&&this._drawLetterSpacing(l[U],t,i,g+t.padding,m+t.padding-M)}}_drawLetterSpacing(e,t,n,i,s,a=!1){const{context:o}=n,u=t.letterSpacing;let l=!1;if(nn.experimentalLetterSpacingSupported&&(nn.experimentalLetterSpacing?(o.letterSpacing=`${u}px`,o.textLetterSpacing=`${u}px`,l=!0):(o.letterSpacing="0px",o.textLetterSpacing="0px")),u===0||l){a?o.strokeText(e,i,s):o.fillText(e,i,s);return}let c=i;const h=nn.graphemeSegmenter(e);let d=o.measureText(e).width,f=0;for(let p=0;p<h.length;++p){const g=h[p];a?o.strokeText(g,c,s):o.fillText(g,c,s);let m="";for(let _=p+1;_<h.length;++_)m+=h[_];f=o.measureText(m).width,c+=d-f+u,d=f}}destroy(){this._activeTextures=null}}nE.extension={type:[$.WebGLSystem,$.WebGPUSystem,$.CanvasSystem],name:"canvasText"},Te.add(Zj,Jj);class iE{constructor(){E(this,"entries",{});E(this,"size",0)}add(e){let t=this.entries[e];return this.entries[e]=!0,t?!1:(this.size++,!0)}addAll(e){let t=this.size;for(var n=0,i=e.length;n<i;n++)this.add(e[n]);return t!=this.size}contains(e){return this.entries[e]}clear(){this.entries={},this.size=0}}const $t=class $t{constructor(e=0,t=0,n=0,i=0){E(this,"r");E(this,"g");E(this,"b");E(this,"a");this.r=e,this.g=t,this.b=n,this.a=i}set(e,t,n,i){return this.r=e,this.g=t,this.b=n,this.a=i,this.clamp()}setFromColor(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}setFromString(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this}add(e,t,n,i){return this.r+=e,this.g+=t,this.b+=n,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(e,t){e.r=((t&4278190080)>>>24)/255,e.g=((t&16711680)>>>16)/255,e.b=((t&65280)>>>8)/255,e.a=(t&255)/255}static rgb888ToColor(e,t){e.r=((t&16711680)>>>16)/255,e.g=((t&65280)>>>8)/255,e.b=(t&255)/255}toRgb888(){const e=t=>("0"+(t*255).toString(16)).slice(-2);return+("0x"+e(this.r)+e(this.g)+e(this.b))}static fromString(e){return new $t().setFromString(e)}};E($t,"WHITE",new $t(1,1,1,1)),E($t,"RED",new $t(1,0,0,1)),E($t,"GREEN",new $t(0,1,0,1)),E($t,"BLUE",new $t(0,0,1,1)),E($t,"MAGENTA",new $t(1,0,1,1));let as=$t;const st=class st{static clamp(e,t,n){return e<t?t:e>n?n:e}static cosDeg(e){return Math.cos(e*st.degRad)}static sinDeg(e){return Math.sin(e*st.degRad)}static atan2Deg(e,t){return Math.atan2(e,t)*st.degRad}static signum(e){return e>0?1:e<0?-1:0}static toInt(e){return e>0?Math.floor(e):Math.ceil(e)}static cbrt(e){let t=Math.pow(Math.abs(e),.3333333333333333);return e<0?-t:t}static randomTriangular(e,t){return st.randomTriangularWith(e,t,(e+t)*.5)}static randomTriangularWith(e,t,n){let i=Math.random(),s=t-e;return i<=(n-e)/s?e+Math.sqrt(i*s*(n-e)):t-Math.sqrt((1-i)*s*(t-n))}static isPowerOfTwo(e){return e&&(e&e-1)===0}};E(st,"PI",3.1415927),E(st,"PI2",st.PI*2),E(st,"invPI2",1/st.PI2),E(st,"radiansToDegrees",180/st.PI),E(st,"radDeg",st.radiansToDegrees),E(st,"degreesToRadians",st.PI/180),E(st,"degRad",st.degreesToRadians);let ir=st;const Nn=class Nn{static arrayCopy(e,t,n,i,s){for(let a=t,o=i;a<t+s;a++,o++)n[o]=e[a]}static arrayFill(e,t,n,i){for(let s=t;s<n;s++)e[s]=i}static setArraySize(e,t,n=0){let i=e.length;if(i==t)return e;if(e.length=t,i<t)for(let s=i;s<t;s++)e[s]=n;return e}static ensureArrayCapacity(e,t,n=0){return e.length>=t?e:Nn.setArraySize(e,t,n)}static newArray(e,t){let n=new Array(e);for(let i=0;i<e;i++)n[i]=t;return n}static newFloatArray(e){if(Nn.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);{let t=new Array(e);for(let n=0;n<t.length;n++)t[n]=0;return t}}static newShortArray(e){if(Nn.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);{let t=new Array(e);for(let n=0;n<t.length;n++)t[n]=0;return t}}static toFloatArray(e){return Nn.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}static toSinglePrecision(e){return Nn.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}static webkit602BugfixHelper(e,t){}static contains(e,t,n=!0){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1}static enumValue(e,t){return e[t[0].toUpperCase()+t.slice(1)]}};E(Nn,"SUPPORTS_TYPED_ARRAYS",typeof Float32Array<"u");let ze=Nn;class pV{constructor(e){E(this,"items",new Array);E(this,"instantiator");this.instantiator=e}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(e){e.reset&&e.reset(),this.items.push(e)}freeAll(e){for(let t=0;t<e.length;t++)this.free(e[t])}clear(){this.items.length=0}}class sE{constructor(e){E(this,"name");if(!e)throw new Error("name cannot be null.");this.name=e}}const pl=class pl extends sE{constructor(t){super(t);E(this,"id",pl.nextID++);E(this,"bones",null);E(this,"vertices",[]);E(this,"worldVerticesLength",0);E(this,"timelineAttachment",this)}computeWorldVertices(t,n,i,s,a,o){i=a+(i>>1)*o;let u=t.bone.skeleton,l=t.deform,c=this.vertices,h=this.bones;if(!h){l.length>0&&(c=l);let g=t.bone,m=g.worldX,_=g.worldY,y=g.a,x=g.b,b=g.c,T=g.d;for(let S=n,w=a;w<i;S+=2,w+=o){let M=c[S],q=c[S+1];s[w]=M*y+q*x+m,s[w+1]=M*b+q*T+_}return}let d=0,f=0;for(let g=0;g<n;g+=2){let m=h[d];d+=m+1,f+=m}let p=u.bones;if(l.length==0)for(let g=a,m=f*3;g<i;g+=o){let _=0,y=0,x=h[d++];for(x+=d;d<x;d++,m+=3){let b=p[h[d]],T=c[m],S=c[m+1],w=c[m+2];_+=(T*b.a+S*b.b+b.worldX)*w,y+=(T*b.c+S*b.d+b.worldY)*w}s[g]=_,s[g+1]=y}else{let g=l;for(let m=a,_=f*3,y=f<<1;m<i;m+=o){let x=0,b=0,T=h[d++];for(T+=d;d<T;d++,_+=3,y+=2){let S=p[h[d]],w=c[_]+g[y],M=c[_+1]+g[y+1],q=c[_+2];x+=(w*S.a+M*S.b+S.worldX)*q,b+=(w*S.c+M*S.d+S.worldY)*q}s[m]=x,s[m+1]=b}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),ze.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=ze.newFloatArray(this.vertices.length),ze.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}};E(pl,"nextID",0);let cf=pl;var sn;(function(r){r[r.hold=0]="hold",r[r.once=1]="once",r[r.loop=2]="loop",r[r.pingpong=3]="pingpong",r[r.onceReverse=4]="onceReverse",r[r.loopReverse=5]="loopReverse",r[r.pingpongReverse=6]="pingpongReverse"})(sn||(sn={})),sn.hold,sn.once,sn.loop,sn.pingpong,sn.onceReverse,sn.loopReverse,sn.pingpongReverse;class gV{constructor(e,t,n){E(this,"name");E(this,"timelines",[]);E(this,"timelineIds",new iE);E(this,"duration");if(!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(t),this.duration=n}setTimelines(e){if(!e)throw new Error("timelines cannot be null.");this.timelines=e,this.timelineIds.clear();for(var t=0;t<e.length;t++)this.timelineIds.addAll(e[t].getPropertyIds())}hasTimeline(e){for(let t=0;t<e.length;t++)if(this.timelineIds.contains(e[t]))return!0;return!1}apply(e,t,n,i,s,a,o,u){if(!e)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,t>0&&(t%=this.duration));let l=this.timelines;for(let c=0,h=l.length;c<h;c++)l[c].apply(e,t,n,s,a,o,u)}}var oe;(function(r){r[r.setup=0]="setup",r[r.first=1]="first",r[r.replace=2]="replace",r[r.add=3]="add"})(oe||(oe={}));var vr;(function(r){r[r.mixIn=0]="mixIn",r[r.mixOut=1]="mixOut"})(vr||(vr={}));const qu={rotate:0,attachment:11,event:13,drawOrder:14};class En{constructor(e,t){E(this,"propertyIds");E(this,"frames");this.propertyIds=t,this.frames=ze.newFloatArray(e*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(e,t){let n=e.length;for(let i=1;i<n;i++)if(e[i]>t)return i-1;return n-1}static search(e,t,n){let i=e.length;for(let s=n;s<i;s+=n)if(e[s]>t)return s-n;return i-n}}class mV extends En{constructor(t,n,i){super(t,i);E(this,"curves");this.curves=ze.newFloatArray(t+n*18),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let n=this.getFrameCount()+t*18;if(this.curves.length>n){let i=ze.newFloatArray(n);ze.arrayCopy(this.curves,0,i,0,n),this.curves=i}}setBezier(t,n,i,s,a,o,u,l,c,h,d){let f=this.curves,p=this.getFrameCount()+t*18;i==0&&(f[n]=2+p);let g=(s-o*2+l)*.03,m=(a-u*2+c)*.03,_=((o-l)*3-s+h)*.006,y=((u-c)*3-a+d)*.006,x=g*2+_,b=m*2+y,T=(o-s)*.3+g+_*.16666667,S=(u-a)*.3+m+y*.16666667,w=s+T,M=a+S;for(let q=p+18;p<q;p+=2)f[p]=w,f[p+1]=M,T+=x,S+=b,x+=_,b+=y,w+=T,M+=S}getBezierValue(t,n,i,s){let a=this.curves;if(a[s]>t){let c=this.frames[n],h=this.frames[n+i];return h+(t-c)/(a[s]-c)*(a[s+1]-h)}let o=s+18;for(s+=2;s<o;s+=2)if(a[s]>=t){let c=a[s-2],h=a[s-1];return h+(t-c)/(a[s]-c)*(a[s+1]-h)}n+=this.getFrameEntries();let u=a[o-2],l=a[o-1];return l+(t-u)/(this.frames[n]-u)*(this.frames[n+i]-l)}}class vV extends mV{constructor(e,t,n){super(e,t,[n])}getFrameEntries(){return 2}setFrame(e,t,n){e<<=1,this.frames[e]=t,this.frames[e+1]=n}getCurveValue(e){let t=this.frames,n=t.length-2;for(let s=2;s<=n;s+=2)if(t[s]>e){n=s-2;break}let i=this.curves[n>>1];switch(i){case 0:let s=t[n],a=t[n+1];return a+(e-s)/(t[n+2]-s)*(t[n+2+1]-a);case 1:return t[n+1]}return this.getBezierValue(e,n,1,i-2)}getRelativeValue(e,t,n,i,s){if(e<this.frames[0]){switch(n){case oe.setup:return s;case oe.first:return i+(s-i)*t}return i}let a=this.getCurveValue(e);switch(n){case oe.setup:return s+a*t;case oe.first:case oe.replace:a+=s-i}return i+a*t}getAbsoluteValue(e,t,n,i,s){if(e<this.frames[0]){switch(n){case oe.setup:return s;case oe.first:return i+(s-i)*t}return i}let a=this.getCurveValue(e);return n==oe.setup?s+(a-s)*t:i+(a-i)*t}getAbsoluteValue2(e,t,n,i,s,a){if(e<this.frames[0]){switch(n){case oe.setup:return s;case oe.first:return i+(s-i)*t}return i}return n==oe.setup?s+(a-s)*t:i+(a-i)*t}getScaleValue(e,t,n,i,s,a){const o=this.frames;if(e<o[0]){switch(n){case oe.setup:return a;case oe.first:return s+(a-s)*t}return s}let u=this.getCurveValue(e)*a;if(t==1)return n==oe.add?s+u-a:u;if(i==vr.mixOut)switch(n){case oe.setup:return a+(Math.abs(u)*ir.signum(a)-a)*t;case oe.first:case oe.replace:return s+(Math.abs(u)*ir.signum(s)-s)*t}else{let l=0;switch(n){case oe.setup:return l=Math.abs(a)*ir.signum(u),l+(u-l)*t;case oe.first:case oe.replace:return l=Math.abs(s)*ir.signum(u),l+(u-l)*t}}return s+(u-a)*t}}class aE extends vV{constructor(t,n,i){super(t,n,qu.rotate+"|"+i);E(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,a,o,u){let l=t.bones[this.boneIndex];l.active&&(l.rotation=this.getRelativeValue(i,a,o,l.rotation,l.data.rotation))}}class ku extends En{constructor(t,n){super(t,[qu.attachment+"|"+n]);E(this,"slotIndex",0);E(this,"attachmentNames");this.slotIndex=n,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.attachmentNames[t]=i}apply(t,n,i,s,a,o,u){let l=t.slots[this.slotIndex];if(l.bone.active){if(u==vr.mixOut){o==oe.setup&&this.setAttachment(t,l,l.data.attachmentName);return}if(i<this.frames[0]){(o==oe.setup||o==oe.first)&&this.setAttachment(t,l,l.data.attachmentName);return}this.setAttachment(t,l,this.attachmentNames[En.search1(this.frames,i)])}}setAttachment(t,n,i){n.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}}const gl=class gl extends En{constructor(t){super(t,gl.propertyIds);E(this,"events");this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n){this.frames[t]=n.time,this.events[t]=n}apply(t,n,i,s,a,o,u){if(!s)return;let l=this.frames,c=this.frames.length;if(n>i)this.apply(t,n,Number.MAX_VALUE,s,a,o,u),n=-1;else if(n>=l[c-1])return;if(i<l[0])return;let h=0;if(n<l[0])h=0;else{h=En.search1(l,n)+1;let d=l[h];for(;h>0&&l[h-1]==d;)h--}for(;h<c&&i>=l[h];h++)s.push(this.events[h])}};E(gl,"propertyIds",[""+qu.event]);let hf=gl;const ml=class ml extends En{constructor(t){super(t,ml.propertyIds);E(this,"drawOrders");this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.drawOrders[t]=i}apply(t,n,i,s,a,o,u){if(u==vr.mixOut){o==oe.setup&&ze.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}if(i<this.frames[0]){(o==oe.setup||o==oe.first)&&ze.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let l=En.search1(this.frames,i),c=this.drawOrders[l];if(!c)ze.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{let h=t.drawOrder,d=t.slots;for(let f=0,p=c.length;f<p;f++)h[f]=d[c[f]]}}};E(ml,"propertyIds",[""+qu.drawOrder]);let va=ml;const Ss=class Ss{constructor(e){E(this,"data");E(this,"tracks",new Array);E(this,"timeScale",1);E(this,"unkeyedState",0);E(this,"events",new Array);E(this,"listeners",new Array);E(this,"queue",new yV(this));E(this,"propertyIDs",new iE);E(this,"animationsChanged",!1);E(this,"trackEntryPool",new pV(()=>new _V));this.data=e}static emptyAnimation(){return Ss._emptyAnimation}update(e){e*=this.timeScale;let t=this.tracks;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(!s)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let a=e*s.timeScale;if(s.delay>0){if(s.delay-=a,s.delay>0)continue;a=-s.delay,s.delay=0}let o=s.next;if(o){let u=s.trackLast-o.delay;if(u>=0){for(o.delay=0,o.trackTime+=s.timeScale==0?0:(u/s.timeScale+e)*o.timeScale,s.trackTime+=a,this.setCurrent(n,o,!0);o.mixingFrom;)o.mixTime+=e,o=o.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){t[n]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,e)){let u=s.mixingFrom;for(s.mixingFrom=null,u&&(u.mixingTo=null);u;)this.queue.end(u),u=u.mixingFrom}s.trackTime+=a}this.queue.drain()}updateMixingFrom(e,t){let n=e.mixingFrom;if(!n)return!0;let i=this.updateMixingFrom(n,t);if(n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.nextTrackLast!=-1){const s=e.mixTime==0&&n.mixTime==0;if(e.mixTime>=e.mixDuration||s)return(n.totalAlpha==0||e.mixDuration==0||s)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom!=null&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i}return n.trackTime+=t*n.timeScale,e.mixTime+=t,!1}apply(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let t=this.events,n=this.tracks,i=!1;for(let d=0,f=n.length;d<f;d++){let p=n[d];if(!p||p.delay>0)continue;i=!0;let g=d==0?oe.first:p.mixBlend,m=p.alpha;p.mixingFrom?m*=this.applyMixingFrom(p,e,g):p.trackTime>=p.trackEnd&&!p.next&&(m=0);let _=m>=p.alphaAttachmentThreshold,y=p.animationLast,x=p.getAnimationTime(),b=x,T=t;p.reverse&&(b=p.animation.duration-b,T=null);let S=p.animation.timelines,w=S.length;if(d==0&&m==1||g==oe.add){d==0&&(_=!0);for(let M=0;M<w;M++){var s=S[M];s instanceof ku?this.applyAttachmentTimeline(s,e,b,g,_):s.apply(e,y,b,T,m,g,vr.mixIn)}}else{let M=p.timelineMode,q=p.shortestRotation,O=!q&&p.timelinesRotation.length!=w<<1;O&&(p.timelinesRotation.length=w<<1);for(let k=0;k<w;k++){let U=S[k],N=M[k]==ff?g:oe.setup;!q&&U instanceof aE?this.applyRotateTimeline(U,e,b,m,N,p.timelinesRotation,k<<1,O):U instanceof ku?this.applyAttachmentTimeline(U,e,b,g,_):U.apply(e,y,b,T,m,N,vr.mixIn)}}this.queueEvents(p,x),t.length=0,p.nextAnimationLast=x,p.nextTrackLast=p.trackTime}for(var a=this.unkeyedState+cE,o=e.slots,u=0,l=e.slots.length;u<l;u++){var c=o[u];if(c.attachmentState==a){var h=c.data.attachmentName;c.setAttachment(h?e.getAttachment(c.data.index,h):null)}}return this.unkeyedState+=2,this.queue.drain(),i}applyMixingFrom(e,t,n){let i=e.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,t,n);let s=0;e.mixDuration==0?(s=1,n==oe.first&&(n=oe.setup)):(s=e.mixTime/e.mixDuration,s>1&&(s=1),n!=oe.first&&(n=i.mixBlend));let a=s<i.mixAttachmentThreshold,o=s<i.mixDrawOrderThreshold,u=i.animation.timelines,l=u.length,c=i.alpha*e.interruptAlpha,h=c*(1-s),d=i.animationLast,f=i.getAnimationTime(),p=f,g=null;if(i.reverse?p=i.animation.duration-p:s<i.eventThreshold&&(g=this.events),n==oe.add)for(let m=0;m<l;m++)u[m].apply(t,d,p,g,h,n,vr.mixOut);else{let m=i.timelineMode,_=i.timelineHoldMix,y=i.shortestRotation,x=!y&&i.timelinesRotation.length!=l<<1;x&&(i.timelinesRotation.length=l<<1),i.totalAlpha=0;for(let b=0;b<l;b++){let T=u[b],S=vr.mixOut,w,M=0;switch(m[b]){case ff:if(!o&&T instanceof va)continue;w=n,M=h;break;case uE:w=oe.setup,M=h;break;case lE:w=n,M=c;break;case df:w=oe.setup,M=c;break;default:w=oe.setup;let q=_[b];M=c*Math.max(0,1-q.mixTime/q.mixDuration);break}i.totalAlpha+=M,!y&&T instanceof aE?this.applyRotateTimeline(T,t,p,M,w,i.timelinesRotation,b<<1,x):T instanceof ku?this.applyAttachmentTimeline(T,t,p,w,a&&M>=i.alphaAttachmentThreshold):(o&&T instanceof va&&w==oe.setup&&(S=vr.mixIn),T.apply(t,d,p,g,M,w,S))}}return e.mixDuration>0&&this.queueEvents(i,f),this.events.length=0,i.nextAnimationLast=f,i.nextTrackLast=i.trackTime,s}applyAttachmentTimeline(e,t,n,i,s){var a=t.slots[e.slotIndex];a.bone.active&&(n<e.frames[0]?(i==oe.setup||i==oe.first)&&this.setAttachment(t,a,a.data.attachmentName,s):this.setAttachment(t,a,e.attachmentNames[En.search1(e.frames,n)],s),a.attachmentState<=this.unkeyedState&&(a.attachmentState=this.unkeyedState+cE))}setAttachment(e,t,n,i){t.setAttachment(n?e.getAttachment(t.data.index,n):null),i&&(t.attachmentState=this.unkeyedState+xV)}applyRotateTimeline(e,t,n,i,s,a,o,u){if(u&&(a[o]=0),i==1){e.apply(t,0,n,null,1,s,vr.mixIn);return}let l=t.bones[e.boneIndex];if(!l.active)return;let c=e.frames,h=0,d=0;if(n<c[0])switch(s){case oe.setup:l.rotation=l.data.rotation;default:return;case oe.first:h=l.rotation,d=l.data.rotation}else h=s==oe.setup?l.data.rotation:l.rotation,d=l.data.rotation+e.getCurveValue(n);let f=0,p=d-h;if(p-=Math.ceil(p/360-.5)*360,p==0)f=a[o];else{let g=0,m=0;u?(g=0,m=p):(g=a[o],m=a[o+1]);let _=g-g%360;f=p+_;let y=p>=0,x=g>=0;Math.abs(m)<=90&&ir.signum(m)!=ir.signum(p)&&(Math.abs(g-_)>180?(f+=360*ir.signum(g),x=y):_!=0?f-=360*ir.signum(g):x=y),x!=y&&(f+=360*ir.signum(g)),a[o]=f}a[o+1]=p,l.rotation=h+f*i}queueEvents(e,t){let n=e.animationStart,i=e.animationEnd,s=i-n,a=e.trackLast%s,o=this.events,u=0,l=o.length;for(;u<l;u++){let h=o[u];if(h.time<a)break;h.time>i||this.queue.event(e,h)}let c=!1;if(e.loop)if(s==0)c=!0;else{const h=Math.floor(e.trackTime/s);c=h>0&&h>Math.floor(e.trackLast/s)}else c=t>=i&&e.animationLast<i;for(c&&this.queue.complete(e);u<l;u++){let h=o[u];h.time<n||this.queue.event(e,h)}}clearTracks(){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,n=this.tracks.length;t<n;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()}clearTrack(e){if(e>=this.tracks.length)return;let t=this.tracks[e];if(!t)return;this.queue.end(t),this.clearNext(t);let n=t;for(;;){let i=n.mixingFrom;if(!i)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[t.trackIndex]=null,this.queue.drain()}setCurrent(e,t,n){let i=this.expandToIndex(e);this.tracks[e]=t,t.previous=null,i&&(n&&this.queue.interrupt(i),t.mixingFrom=i,i.mixingTo=t,t.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(t.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(t)}setAnimation(e,t,n=!1){let i=this.data.skeletonData.findAnimation(t);if(!i)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,i,n)}setAnimationWith(e,t,n=!1){if(!t)throw new Error("animation cannot be null.");let i=!0,s=this.expandToIndex(e);s&&(s.nextTrackLast==-1?(this.tracks[e]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.clearNext(s),s=s.mixingFrom,i=!1):this.clearNext(s));let a=this.trackEntry(e,t,n,s);return this.setCurrent(e,a,i),this.queue.drain(),a}addAnimation(e,t,n=!1,i=0){let s=this.data.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,s,n,i)}addAnimationWith(e,t,n=!1,i=0){if(!t)throw new Error("animation cannot be null.");let s=this.expandToIndex(e);if(s)for(;s.next;)s=s.next;let a=this.trackEntry(e,t,n,s);return s?(s.next=a,a.previous=s,i<=0&&(i+=s.getTrackComplete()-a.mixDuration)):(this.setCurrent(e,a,!0),this.queue.drain()),a.delay=i,a}setEmptyAnimation(e,t=0){let n=this.setAnimationWith(e,Ss.emptyAnimation(),!1);return n.mixDuration=t,n.trackEnd=t,n}addEmptyAnimation(e,t=0,n=0){let i=this.addAnimationWith(e,Ss.emptyAnimation(),!1,n);return n<=0&&(i.delay+=i.mixDuration-t),i.mixDuration=t,i.trackEnd=t,i}setEmptyAnimations(e=0){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let n=0,i=this.tracks.length;n<i;n++){let s=this.tracks[n];s&&this.setEmptyAnimation(s.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(e){return e<this.tracks.length?this.tracks[e]:(ze.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)}trackEntry(e,t,n,i){let s=this.trackEntryPool.obtain();return s.reset(),s.trackIndex=e,s.animation=t,s.loop=n,s.holdPrevious=!1,s.reverse=!1,s.shortestRotation=!1,s.eventThreshold=0,s.alphaAttachmentThreshold=0,s.mixAttachmentThreshold=0,s.mixDrawOrderThreshold=0,s.animationStart=0,s.animationEnd=t.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.mixTime=0,s.mixDuration=i?this.data.getMix(i.animation,t):0,s.interruptAlpha=1,s.totalAlpha=0,s.mixBlend=oe.replace,s}clearNext(e){let t=e.next;for(;t;)this.queue.dispose(t),t=t.next;e.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let e=this.tracks;for(let t=0,n=e.length;t<n;t++){let i=e[t];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do(!i.mixingTo||i.mixBlend!=oe.add)&&this.computeHold(i),i=i.mixingTo;while(i)}}}computeHold(e){let t=e.mixingTo,n=e.animation.timelines,i=e.animation.timelines.length,s=e.timelineMode;s.length=i;let a=e.timelineHoldMix;a.length=0;let o=this.propertyIDs;if(t&&t.holdPrevious){for(let u=0;u<i;u++)s[u]=o.addAll(n[u].getPropertyIds())?df:lE;return}e:for(let u=0;u<i;u++){let l=n[u],c=l.getPropertyIds();if(!o.addAll(c))s[u]=ff;else if(!t||l instanceof ku||l instanceof va||l instanceof hf||!t.animation.hasTimeline(c))s[u]=uE;else{for(let h=t.mixingTo;h;h=h.mixingTo)if(!h.animation.hasTimeline(c)){if(e.mixDuration>0){s[u]=bV,a[u]=h;continue e}break}s[u]=df}}}getCurrent(e){return e>=this.tracks.length?null:this.tracks[e]}addListener(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}};E(Ss,"_emptyAnimation",new gV("<empty>",[],0));let oE=Ss;class _V{constructor(){E(this,"animation",null);E(this,"previous",null);E(this,"next",null);E(this,"mixingFrom",null);E(this,"mixingTo",null);E(this,"listener",null);E(this,"trackIndex",0);E(this,"loop",!1);E(this,"holdPrevious",!1);E(this,"reverse",!1);E(this,"shortestRotation",!1);E(this,"eventThreshold",0);E(this,"mixAttachmentThreshold",0);E(this,"alphaAttachmentThreshold",0);E(this,"mixDrawOrderThreshold",0);E(this,"animationStart",0);E(this,"animationEnd",0);E(this,"animationLast",0);E(this,"nextAnimationLast",0);E(this,"delay",0);E(this,"trackTime",0);E(this,"trackLast",0);E(this,"nextTrackLast",0);E(this,"trackEnd",0);E(this,"timeScale",0);E(this,"alpha",0);E(this,"mixTime",0);E(this,"_mixDuration",0);E(this,"interruptAlpha",0);E(this,"totalAlpha",0);E(this,"mixBlend",oe.replace);E(this,"timelineMode",new Array);E(this,"timelineHoldMix",new Array);E(this,"timelinesRotation",new Array)}get mixDuration(){return this._mixDuration}set mixDuration(e){this._mixDuration=e}setMixDurationWithDelay(e,t){this._mixDuration=e,this.previous!=null&&t<=0&&(t+=this.previous.getTrackComplete()-e),this.delay=t}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(e){this.animationLast=e,this.nextAnimationLast=e}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let e=this.animationEnd-this.animationStart;if(e!=0){if(this.loop)return e*(1+(this.trackTime/e|0));if(this.trackTime<e)return e}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}}class yV{constructor(e){E(this,"objects",[]);E(this,"drainDisabled",!1);E(this,"animState");this.animState=e}start(e){this.objects.push(Ot.start),this.objects.push(e),this.animState.animationsChanged=!0}interrupt(e){this.objects.push(Ot.interrupt),this.objects.push(e)}end(e){this.objects.push(Ot.end),this.objects.push(e),this.animState.animationsChanged=!0}dispose(e){this.objects.push(Ot.dispose),this.objects.push(e)}complete(e){this.objects.push(Ot.complete),this.objects.push(e)}event(e,t){this.objects.push(Ot.event),this.objects.push(e),this.objects.push(t)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let e=this.objects,t=this.animState.listeners;for(let n=0;n<e.length;n+=2){let i=e[n],s=e[n+1];switch(i){case Ot.start:s.listener&&s.listener.start&&s.listener.start(s);for(let o=0;o<t.length;o++){let u=t[o];u.start&&u.start(s)}break;case Ot.interrupt:s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(let o=0;o<t.length;o++){let u=t[o];u.interrupt&&u.interrupt(s)}break;case Ot.end:s.listener&&s.listener.end&&s.listener.end(s);for(let o=0;o<t.length;o++){let u=t[o];u.end&&u.end(s)}case Ot.dispose:s.listener&&s.listener.dispose&&s.listener.dispose(s);for(let o=0;o<t.length;o++){let u=t[o];u.dispose&&u.dispose(s)}this.animState.trackEntryPool.free(s);break;case Ot.complete:s.listener&&s.listener.complete&&s.listener.complete(s);for(let o=0;o<t.length;o++){let u=t[o];u.complete&&u.complete(s)}break;case Ot.event:let a=e[n+++2];s.listener&&s.listener.event&&s.listener.event(s,a);for(let o=0;o<t.length;o++){let u=t[o];u.event&&u.event(s,a)}break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var Ot;(function(r){r[r.start=0]="start",r[r.interrupt=1]="interrupt",r[r.end=2]="end",r[r.dispose=3]="dispose",r[r.complete=4]="complete",r[r.event=5]="event"})(Ot||(Ot={}));const ff=0,uE=1,lE=2,df=3,bV=4,cE=1,xV=2;class wV{constructor(e){E(this,"_image");this._image=e}getImage(){return this._image}}var ht;(function(r){r[r.Nearest=9728]="Nearest",r[r.Linear=9729]="Linear",r[r.MipMap=9987]="MipMap",r[r.MipMapNearestNearest=9984]="MipMapNearestNearest",r[r.MipMapLinearNearest=9985]="MipMapLinearNearest",r[r.MipMapNearestLinear=9986]="MipMapNearestLinear",r[r.MipMapLinearLinear=9987]="MipMapLinearLinear"})(ht||(ht={}));var an;(function(r){r[r.MirroredRepeat=33648]="MirroredRepeat",r[r.ClampToEdge=33071]="ClampToEdge",r[r.Repeat=10497]="Repeat"})(an||(an={}));class SV{constructor(){E(this,"texture");E(this,"u",0);E(this,"v",0);E(this,"u2",0);E(this,"v2",0);E(this,"width",0);E(this,"height",0);E(this,"degrees",0);E(this,"offsetX",0);E(this,"offsetY",0);E(this,"originalWidth",0);E(this,"originalHeight",0)}}class TV{constructor(e){E(this,"pages",new Array);E(this,"regions",new Array);let t=new AV(e),n=new Array(4),i={};i.size=c=>{c.width=parseInt(n[1]),c.height=parseInt(n[2])},i.format=()=>{},i.filter=c=>{c.minFilter=ze.enumValue(ht,n[1]),c.magFilter=ze.enumValue(ht,n[2])},i.repeat=c=>{n[1].indexOf("x")!=-1&&(c.uWrap=an.Repeat),n[1].indexOf("y")!=-1&&(c.vWrap=an.Repeat)},i.pma=c=>{c.pma=n[1]=="true"};var s={};s.xy=c=>{c.x=parseInt(n[1]),c.y=parseInt(n[2])},s.size=c=>{c.width=parseInt(n[1]),c.height=parseInt(n[2])},s.bounds=c=>{c.x=parseInt(n[1]),c.y=parseInt(n[2]),c.width=parseInt(n[3]),c.height=parseInt(n[4])},s.offset=c=>{c.offsetX=parseInt(n[1]),c.offsetY=parseInt(n[2])},s.orig=c=>{c.originalWidth=parseInt(n[1]),c.originalHeight=parseInt(n[2])},s.offsets=c=>{c.offsetX=parseInt(n[1]),c.offsetY=parseInt(n[2]),c.originalWidth=parseInt(n[3]),c.originalHeight=parseInt(n[4])},s.rotate=c=>{let h=n[1];h=="true"?c.degrees=90:h!="false"&&(c.degrees=parseInt(h))},s.index=c=>{c.index=parseInt(n[1])};let a=t.readLine();for(;a&&a.trim().length==0;)a=t.readLine();for(;!(!a||a.trim().length==0||t.readEntry(n,a)==0);)a=t.readLine();let o=null,u=null,l=null;for(;a!==null;)if(a.trim().length==0)o=null,a=t.readLine();else if(o){let c=new hE(o,a);for(;;){let h=t.readEntry(n,a=t.readLine());if(h==0)break;let d=s[n[0]];if(d)d(c);else{u||(u=[]),l||(l=[]),u.push(n[0]);let f=[];for(let p=0;p<h;p++)f.push(parseInt(n[p+1]));l.push(f)}}c.originalWidth==0&&c.originalHeight==0&&(c.originalWidth=c.width,c.originalHeight=c.height),u&&u.length>0&&l&&l.length>0&&(c.names=u,c.values=l,u=null,l=null),c.u=c.x/o.width,c.v=c.y/o.height,c.degrees==90?(c.u2=(c.x+c.height)/o.width,c.v2=(c.y+c.width)/o.height):(c.u2=(c.x+c.width)/o.width,c.v2=(c.y+c.height)/o.height),this.regions.push(c)}else{for(o=new RV(a.trim());t.readEntry(n,a=t.readLine())!=0;){let c=i[n[0]];c&&c(o)}this.pages.push(o)}}findRegion(e){for(let t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null}setTextures(e,t=""){for(let n of this.pages)n.setTexture(e.get(t+n.name))}dispose(){var e;for(let t=0;t<this.pages.length;t++)(e=this.pages[t].texture)==null||e.dispose()}}class AV{constructor(e){E(this,"lines");E(this,"index",0);this.lines=e.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(e,t){if(!t||(t=t.trim(),t.length==0))return 0;let n=t.indexOf(":");if(n==-1)return 0;e[0]=t.substr(0,n).trim();for(let i=1,s=n+1;;i++){let a=t.indexOf(",",s);if(a==-1)return e[i]=t.substr(s).trim(),i;if(e[i]=t.substr(s,a-s).trim(),s=a+1,i==4)return 4}}}class RV{constructor(e){E(this,"name");E(this,"minFilter",ht.Nearest);E(this,"magFilter",ht.Nearest);E(this,"uWrap",an.ClampToEdge);E(this,"vWrap",an.ClampToEdge);E(this,"texture",null);E(this,"width",0);E(this,"height",0);E(this,"pma",!1);E(this,"regions",new Array);this.name=e}setTexture(e){this.texture=e,e.setFilters(this.minFilter,this.magFilter),e.setWraps(this.uWrap,this.vWrap);for(let t of this.regions)t.texture=e}}class hE extends SV{constructor(t,n){super();E(this,"page");E(this,"name");E(this,"x",0);E(this,"y",0);E(this,"offsetX",0);E(this,"offsetY",0);E(this,"originalWidth",0);E(this,"originalHeight",0);E(this,"index",0);E(this,"degrees",0);E(this,"names",null);E(this,"values",null);this.page=t,this.name=n,t.regions.push(this)}}class os extends cf{constructor(t,n){super(t);E(this,"region",null);E(this,"path");E(this,"regionUVs",[]);E(this,"uvs",[]);E(this,"triangles",[]);E(this,"color",new as(1,1,1,1));E(this,"width",0);E(this,"height",0);E(this,"hullLength",0);E(this,"edges",[]);E(this,"parentMesh",null);E(this,"sequence",null);E(this,"tempColor",new as(0,0,0,0));this.path=n}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;(!this.uvs||this.uvs.length!=t.length)&&(this.uvs=ze.newFloatArray(t.length));let n=this.uvs,i=this.uvs.length,s=this.region.u,a=this.region.v,o=0,u=0;if(this.region instanceof hE){let l=this.region,c=l.page,h=c.width,d=c.height;switch(l.degrees){case 90:s-=(l.originalHeight-l.offsetY-l.height)/h,a-=(l.originalWidth-l.offsetX-l.width)/d,o=l.originalHeight/h,u=l.originalWidth/d;for(let f=0;f<i;f+=2)n[f]=s+t[f+1]*o,n[f+1]=a+(1-t[f])*u;return;case 180:s-=(l.originalWidth-l.offsetX-l.width)/h,a-=l.offsetY/d,o=l.originalWidth/h,u=l.originalHeight/d;for(let f=0;f<i;f+=2)n[f]=s+(1-t[f])*o,n[f+1]=a+(1-t[f+1])*u;return;case 270:s-=l.offsetY/h,a-=l.offsetX/d,o=l.originalHeight/h,u=l.originalWidth/d;for(let f=0;f<i;f+=2)n[f]=s+(1-t[f+1])*o,n[f+1]=a+t[f]*u;return}s-=l.offsetX/h,a-=(l.originalHeight-l.offsetY-l.height)/d,o=l.originalWidth/h,u=l.originalHeight/d}else this.region?(o=this.region.u2-s,u=this.region.v2-a):(s=a=0,o=u=1);for(let l=0;l<i;l+=2)n[l]=s+t[l]*o,n[l+1]=a+t[l+1]*u}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new os(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),ze.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),ze.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),ze.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),ze.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,n,i,s,a,o){this.sequence!=null&&this.sequence.apply(t,this),super.computeWorldVertices(t,n,i,s,a,o)}newLinkedMesh(){let t=new os(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t.region!=null&&t.updateRegion(),t}}const xe=class xe extends sE{constructor(t,n){super(t);E(this,"x",0);E(this,"y",0);E(this,"scaleX",1);E(this,"scaleY",1);E(this,"rotation",0);E(this,"width",0);E(this,"height",0);E(this,"color",new as(1,1,1,1));E(this,"path");E(this,"region",null);E(this,"sequence",null);E(this,"offset",ze.newFloatArray(8));E(this,"uvs",ze.newFloatArray(8));E(this,"tempColor",new as(1,1,1,1));this.path=n}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,n=this.uvs;if(t==null){n[0]=0,n[1]=0,n[2]=0,n[3]=1,n[4]=1,n[5]=1,n[6]=1,n[7]=0;return}let i=this.width/this.region.originalWidth*this.scaleX,s=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*i,o=-this.height/2*this.scaleY+this.region.offsetY*s,u=a+this.region.width*i,l=o+this.region.height*s,c=this.rotation*ir.degRad,h=Math.cos(c),d=Math.sin(c),f=this.x,p=this.y,g=a*h+f,m=a*d,_=o*h+p,y=o*d,x=u*h+f,b=u*d,T=l*h+p,S=l*d,w=this.offset;w[0]=g-y,w[1]=_+m,w[2]=g-S,w[3]=T+m,w[4]=x-S,w[5]=T+b,w[6]=x-y,w[7]=_+b,t.degrees==90?(n[0]=t.u2,n[1]=t.v2,n[2]=t.u,n[3]=t.v2,n[4]=t.u,n[5]=t.v,n[6]=t.u2,n[7]=t.v):(n[0]=t.u,n[1]=t.v2,n[2]=t.u,n[3]=t.v,n[4]=t.u2,n[5]=t.v,n[6]=t.u2,n[7]=t.v2)}computeWorldVertices(t,n,i,s){this.sequence!=null&&this.sequence.apply(t,this);let a=t.bone,o=this.offset,u=a.worldX,l=a.worldY,c=a.a,h=a.b,d=a.c,f=a.d,p=0,g=0;p=o[0],g=o[1],n[i]=p*c+g*h+u,n[i+1]=p*d+g*f+l,i+=s,p=o[2],g=o[3],n[i]=p*c+g*h+u,n[i+1]=p*d+g*f+l,i+=s,p=o[4],g=o[5],n[i]=p*c+g*h+u,n[i+1]=p*d+g*f+l,i+=s,p=o[6],g=o[7],n[i]=p*c+g*h+u,n[i+1]=p*d+g*f+l}copy(){let t=new xe(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,ze.arrayCopy(this.uvs,0,t.uvs,0,8),ze.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=this.sequence!=null?this.sequence.copy():null,t}};E(xe,"X1",0),E(xe,"Y1",1),E(xe,"C1R",2),E(xe,"C1G",3),E(xe,"C1B",4),E(xe,"C1A",5),E(xe,"U1",6),E(xe,"V1",7),E(xe,"X2",8),E(xe,"Y2",9),E(xe,"C2R",10),E(xe,"C2G",11),E(xe,"C2B",12),E(xe,"C2A",13),E(xe,"U2",14),E(xe,"V2",15),E(xe,"X3",16),E(xe,"Y3",17),E(xe,"C3R",18),E(xe,"C3G",19),E(xe,"C3B",20),E(xe,"C3A",21),E(xe,"U3",22),E(xe,"V3",23),E(xe,"X4",24),E(xe,"Y4",25),E(xe,"C4R",26),E(xe,"C4G",27),E(xe,"C4B",28),E(xe,"C4A",29),E(xe,"U4",30),E(xe,"V4",31);let _a=xe;var fE;(function(r){r[r.Normal=0]="Normal",r[r.OnlyTranslation=1]="OnlyTranslation",r[r.NoRotationOrReflection=2]="NoRotationOrReflection",r[r.NoScale=3]="NoScale",r[r.NoScaleOrReflection=4]="NoScaleOrReflection"})(fE||(fE={}));var dE;(function(r){r[r.Fixed=0]="Fixed",r[r.Percent=1]="Percent"})(dE||(dE={}));var pE;(function(r){r[r.Length=0]="Length",r[r.Fixed=1]="Fixed",r[r.Percent=2]="Percent",r[r.Proportional=3]="Proportional"})(pE||(pE={}));var gE;(function(r){r[r.Tangent=0]="Tangent",r[r.Chain=1]="Chain",r[r.ChainScale=2]="ChainScale"})(gE||(gE={}));var mE;(function(r){r[r.none=0]="none",r[r.reset=1]="reset",r[r.update=2]="update",r[r.pose=3]="pose"})(mE||(mE={}));var us;(function(r){r[r.Normal=0]="Normal",r[r.Additive=1]="Additive",r[r.Multiply=2]="Multiply",r[r.Screen=3]="Screen"})(us||(us={}));var vE;(function(r){r[r.Region=0]="Region",r[r.BoundingBox=1]="BoundingBox",r[r.Mesh=2]="Mesh",r[r.LinkedMesh=3]="LinkedMesh",r[r.Path=4]="Path",r[r.Point=5]="Point",r[r.Clipping=6]="Clipping"})(vE||(vE={})),typeof Math.fround>"u"&&(Math.fround=(function(r){return function(e){return r[0]=e,r[0]}})(new Float32Array(1)));const wr=class wr extends wV{constructor(t){super(t.resource);E(this,"texture");this.texture=ce.from(t)}static from(t){return wr.textureMap.has(t)?wr.textureMap.get(t):new wr(t)}setFilters(t,n){const i=this.texture.source.style;i.minFilter=wr.toPixiTextureFilter(t),i.magFilter=wr.toPixiTextureFilter(n),this.texture.source.autoGenerateMipmaps=wr.toPixiMipMap(t),this.texture.source.updateMipmaps()}setWraps(t,n){const i=this.texture.source.style;i.addressModeU=wr.toPixiTextureWrap(t),i.addressModeV=wr.toPixiTextureWrap(n)}dispose(){this.texture.destroy()}static toPixiMipMap(t){switch(t){case ht.Nearest:case ht.Linear:return!1;case ht.MipMapNearestLinear:case ht.MipMapNearestNearest:case ht.MipMapLinearLinear:case ht.MipMapLinearNearest:return!0;default:throw new Error(`Unknown texture filter: ${String(t)}`)}}static toPixiTextureFilter(t){switch(t){case ht.Nearest:case ht.MipMapNearestLinear:case ht.MipMapNearestNearest:return"nearest";case ht.Linear:case ht.MipMapLinearLinear:case ht.MipMapLinearNearest:return"linear";default:throw new Error(`Unknown texture filter: ${String(t)}`)}}static toPixiTextureWrap(t){switch(t){case an.ClampToEdge:return"clamp-to-edge";case an.MirroredRepeat:return"mirror-repeat";case an.Repeat:return"repeat";default:throw new Error(`Unknown texture wrap: ${String(t)}`)}}static toPixiBlending(t){switch(t){case us.Normal:return"normal";case us.Additive:return"add";case us.Multiply:return"multiply";case us.Screen:return"screen";default:throw new Error(`Unknown blendMode: ${String(t)}`)}}};E(wr,"textureMap",new Map);let Ou=wr;const PV={extension:$.Asset,resolver:{test:r=>is(r,".atlas"),parse:r=>{var t,n;const e=r.split(".");return{resolution:parseFloat(((n=(t=uh.RETINA_PREFIX)==null?void 0:t.exec(r))==null?void 0:n[1])??"1"),format:e[e.length-2],src:r}}},loader:{extension:{type:$.LoadParser,priority:ou.Normal,name:"spineTextureAtlasLoader"},test(r){return is(r,".atlas")},async load(r){return await(await Ht.get().fetch(r)).text()},testParse(r,e){const t=is(e.src,".atlas"),n=typeof r=="string";return Promise.resolve(t&&n)},unload(r){r.dispose()},async parse(r,e,t){const n=e.data||{};let i=Ir.dirname(e.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");const s=new TV(r);if(n.images instanceof tr||typeof n.images=="string"){const o=n.images;n.images={},n.images[s.pages[0].name]=o}const a=[];for(const o of s.pages){const u=o.name,l=n!=null&&n.images?n.images[u]:void 0;if(l instanceof tr)o.setTexture(Ou.from(l));else{const c=l??Ir.normalize([...i.split(Ir.sep),u].join(Ir.sep)),h={src:lh(c,e.src),data:{...n.imageMetadata,alphaMode:o.pma?"premultiplied-alpha":"premultiply-alpha-on-upload"}},d=t.load(h).then(f=>{o.setTexture(Ou.from(f.source))});a.push(d)}}return await Promise.all(a),s}}};Te.add(PV);function CV(r){return Object.prototype.hasOwnProperty.call(r,"bones")}function EV(r){return r instanceof Uint8Array}const MV={extension:$.Asset,loader:{extension:{type:$.LoadParser,priority:ou.Normal,name:"spineSkeletonLoader"},test(r){return is(r,".skel")},async load(r){const e=await Ht.get().fetch(r);return new Uint8Array(await e.arrayBuffer())},testParse(r,e){const t=is(e.src,".json")&&CV(r),n=is(e.src,".skel")&&EV(r);return Promise.resolve(t||n)}}};Te.add(MV);const IV=new Float32Array(1),qV=new Uint32Array(1);class kV extends fa{constructor(){const t=new nr({data:IV,label:"attribute-batch-buffer",usage:ke.VERTEX|ke.COPY_DST,shrinkToFit:!1}),n=new nr({data:qV,label:"index-batch-buffer",usage:ke.INDEX|ke.COPY_DST,shrinkToFit:!1}),i=28;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:i,offset:0},aUV:{buffer:t,format:"float32x2",stride:i,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:i,offset:16},aDarkColor:{buffer:t,format:"unorm8x4",stride:i,offset:20},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:i,offset:24}},indexBuffer:n})}}const OV={name:"color-bit",vertex:{header:`
            @in aDarkColor: vec4<f32>;
            @out vDarkColor: vec4<f32>;
        `,main:`
        vDarkColor = aDarkColor;
        `},fragment:{header:`
            @in vDarkColor: vec4<f32>;
        `,end:`

        let alpha = outColor.a * vColor.a;
        let rgb = ((outColor.a - 1.0) * vDarkColor.a + 1.0 - outColor.rgb) * vDarkColor.rgb + outColor.rgb * vColor.rgb;

        finalColor = vec4<f32>(rgb, alpha);

        `}},BV={name:"color-bit",vertex:{header:`
            in vec4 aDarkColor;
            out vec4 vDarkColor;
        `,main:`
            vDarkColor = aDarkColor;
        `},fragment:{header:`
            in vec4 vDarkColor;
        `,end:`

        finalColor.a = outColor.a * vColor.a;
        finalColor.rgb = ((outColor.a - 1.0) * vDarkColor.a + 1.0 - outColor.rgb) * vDarkColor.rgb + outColor.rgb * vColor.rgb;
        `}};class LV extends ci{constructor(e){const t=vu({name:"dark-tint-batch",bits:[Fh,BV,Nh(e),yu]}),n=mu({name:"dark-tint-batch",bits:[Lh,OV,Uh(e),_u]});super({glProgram:t,gpuProgram:n,resources:{batchSamplers:Gh(e)}})}}let _E=null;const vl=class vl extends DP{constructor(){super(...arguments);E(this,"geometry",new kV);E(this,"shader",_E||(_E=new LV(this.maxTextures)));E(this,"name",vl.extension.name);E(this,"vertexSize",7)}packAttributes(t,n,i,s,a){const o=a<<16|t.roundPixels&65535,u=t.transform,l=u.a,c=u.b,h=u.c,d=u.d,f=u.tx,p=u.ty,{positions:g,uvs:m}=t,_=t.color,y=(_>>24&255)/255,x=Ne.shared.setValue(t.darkColor).premultiply(y,!0).toPremultiplied(1,!1),b=t.attributeOffset,T=b+t.attributeSize;for(let S=b;S<T;S++){const w=S*2,M=g[w],q=g[w+1];n[s++]=l*M+h*q+f,n[s++]=d*q+c*M+p,n[s++]=m[w],n[s++]=m[w+1],i[s++]=_,i[s++]=x,i[s++]=o}}packQuadAttributes(t,n,i,s,a){const o=t.texture,u=t.transform,l=u.a,c=u.b,h=u.c,d=u.d,f=u.tx,p=u.ty,g=t.bounds,m=g.maxX,_=g.minX,y=g.maxY,x=g.minY,b=o.uvs,T=t.color,S=t.darkColor,w=a<<16|t.roundPixels&65535;n[s+0]=l*_+h*x+f,n[s+1]=d*x+c*_+p,n[s+2]=b.x0,n[s+3]=b.y0,i[s+4]=T,i[s+5]=S,i[s+6]=w,n[s+7]=l*m+h*x+f,n[s+8]=d*x+c*m+p,n[s+9]=b.x1,n[s+10]=b.y1,i[s+11]=T,i[s+12]=S,i[s+13]=w,n[s+14]=l*m+h*y+f,n[s+15]=d*y+c*m+p,n[s+16]=b.x2,n[s+17]=b.y2,i[s+18]=T,i[s+19]=S,i[s+20]=w,n[s+21]=l*_+h*y+f,n[s+22]=d*y+c*_+p,n[s+23]=b.x3,n[s+24]=b.y3,i[s+25]=T,i[s+26]=S,i[s+27]=w}};E(vl,"extension",{type:[$.Batcher],name:"darkTint"});let pf=vl;Te.add(pf);class FV{constructor(){E(this,"indexOffset",0);E(this,"attributeOffset",0);E(this,"indexSize");E(this,"attributeSize");E(this,"batcherName","darkTint");E(this,"topology","triangle-list");E(this,"packAsQuad",!1);E(this,"renderable");E(this,"positions");E(this,"indices");E(this,"uvs");E(this,"roundPixels");E(this,"data");E(this,"blendMode");E(this,"darkTint");E(this,"texture");E(this,"transform");E(this,"_textureId");E(this,"_attributeStart");E(this,"_indexStart");E(this,"_batcher");E(this,"_batch")}get color(){const e=this.data.color,t=this.renderable.groupColor,n=this.renderable.groupAlpha;let i;const s=e.a*n*255;if(t!==16777215){const a=t>>16&255,o=t>>8&255,u=t&255,l=e.r*u,c=e.g*o,h=e.b*a;i=s<<24|h<<16|c<<8|l}else i=s<<24|e.b*255<<16|e.g*255<<8|e.r*255;return i}get darkColor(){const e=this.data.darkColor;return e.b*255<<16|e.g*255<<8|e.r*255}get groupTransform(){return this.renderable.groupTransform}setData(e,t,n,i){if(this.renderable=e,this.transform=e.groupTransform,this.data=t,t.clipped){const s=t.clippedData;this.indexSize=s.indicesCount,this.attributeSize=s.vertexCount,this.positions=s.vertices,this.indices=s.indices,this.uvs=s.uvs}else this.indexSize=t.indices.length,this.attributeSize=t.vertices.length/2,this.positions=t.vertices,this.indices=t.indices,this.uvs=t.uvs;this.texture=t.texture,this.roundPixels=i,this.blendMode=n,this.batcherName=t.darkTint?"darkTint":"default"}}const DV={0:"normal",1:"add",2:"multiply",3:"screen"};class yE{constructor(e){E(this,"renderer");E(this,"gpuSpineData",{});E(this,"_destroyRenderableBound",this.destroyRenderable.bind(this));this.renderer=e}validateRenderable(e){if(e._validateAndTransformAttachments(),e.spineAttachmentsDirty)return!0;if(e.spineTexturesDirty){const t=e.skeleton.drawOrder,n=this.gpuSpineData[e.uid];for(let i=0,s=t.length;i<s;i++){const a=t[i],o=a.getAttachment();if(o instanceof _a||o instanceof os){const u=e._getCachedData(a,o),l=n.slotBatches[u.id],c=u.texture;if(c!==l.texture&&!l._batcher.checkAndUpdateTexture(l,c))return!0}}}return!1}addRenderable(e,t){var o,u;const n=this._getSpineData(e),i=this.renderer.renderPipes.batch,s=e.skeleton.drawOrder,a=this.renderer._roundPixels|e._roundPixels;e._validateAndTransformAttachments(),e.spineAttachmentsDirty=!1,e.spineTexturesDirty=!1;for(let l=0,c=s.length;l<c;l++){const h=s[l],d=h.getAttachment(),f=DV[h.data.blendMode];if(d instanceof _a||d instanceof os){const g=e._getCachedData(h,d),m=(o=n.slotBatches)[u=g.id]||(o[u]=new FV);m.setData(e,g,f,a),g.skipRender||i.addToBatch(m,t)}const p=e._slotsObject[h.data.name];if(p){const g=p.container;g.includeInBuild=!0,LY(g,t,this.renderer),g.includeInBuild=!1}}}updateRenderable(e){var i;const t=this.gpuSpineData[e.uid];e._validateAndTransformAttachments(),e.spineAttachmentsDirty=!1,e.spineTexturesDirty=!1;const n=e.skeleton.drawOrder;for(let s=0,a=n.length;s<a;s++){const o=n[s],u=o.getAttachment();if((u instanceof _a||u instanceof os)&&!e._getCachedData(o,u).skipRender){const c=t.slotBatches[e._getCachedData(o,u).id];(i=c._batcher)==null||i.updateElement(c)}}}destroyRenderable(e){this.gpuSpineData[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}destroy(){this.gpuSpineData=null,this.renderer=null}_getSpineData(e){return this.gpuSpineData[e.uid]||this._initMeshData(e)}_initMeshData(e){return this.gpuSpineData[e.uid]={slotBatches:{}},e.on("destroyed",this._destroyRenderableBound),this.gpuSpineData[e.uid]}}E(yE,"extension",{type:[$.WebGLPipes,$.WebGPUPipes,$.CanvasPipes],name:"spine"}),Te.add(yE);const bE="@@pixi_svelte";function UV(r){eo(bE,r)}function WV(){return Ms(bE)}const NV="@@pixi_parent";function GV(){return Ms(NV)}var gf={exports:{}},xE;function zV(){return xE||(xE=1,(function(r){(function(){function e(R,I,W){return R.call.apply(R.bind,arguments)}function t(R,I,W){if(!R)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,D),R.apply(I,j)}}return function(){return R.apply(I,arguments)}}function n(R,I,W){return n=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?e:t,n.apply(null,arguments)}var i=Date.now||function(){return+new Date};function s(R,I){this.a=R,this.o=I||R,this.c=this.o.document}var a=!!window.FontFace;function o(R,I,W,D){if(I=R.c.createElement(I),W)for(var j in W)W.hasOwnProperty(j)&&(j=="style"?I.style.cssText=W[j]:I.setAttribute(j,W[j]));return D&&I.appendChild(R.c.createTextNode(D)),I}function u(R,I,W){R=R.c.getElementsByTagName(I)[0],R||(R=document.documentElement),R.insertBefore(W,R.lastChild)}function l(R){R.parentNode&&R.parentNode.removeChild(R)}function c(R,I,W){I=I||[],W=W||[];for(var D=R.className.split(/\s+/),j=0;j<I.length;j+=1){for(var re=!1,se=0;se<D.length;se+=1)if(I[j]===D[se]){re=!0;break}re||D.push(I[j])}for(I=[],j=0;j<D.length;j+=1){for(re=!1,se=0;se<W.length;se+=1)if(D[j]===W[se]){re=!0;break}re||I.push(D[j])}R.className=I.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function h(R,I){for(var W=R.className.split(/\s+/),D=0,j=W.length;D<j;D++)if(W[D]==I)return!0;return!1}function d(R){return R.o.location.hostname||R.a.location.hostname}function f(R,I,W){function D(){Ae&&j&&re&&(Ae(se),Ae=null)}I=o(R,"link",{rel:"stylesheet",href:I,media:"all"});var j=!1,re=!0,se=null,Ae=W||null;a?(I.onload=function(){j=!0,D()},I.onerror=function(){j=!0,se=Error("Stylesheet failed to load"),D()}):setTimeout(function(){j=!0,D()},0),u(R,"head",I)}function p(R,I,W,D){var j=R.c.getElementsByTagName("head")[0];if(j){var re=o(R,"script",{src:I}),se=!1;return re.onload=re.onreadystatechange=function(){se||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(se=!0,W&&W(null),re.onload=re.onreadystatechange=null,re.parentNode.tagName=="HEAD"&&j.removeChild(re))},j.appendChild(re),setTimeout(function(){se||(se=!0,W&&W(Error("Script load timeout")))},D||5e3),re}return null}function g(){this.a=0,this.c=null}function m(R){return R.a++,function(){R.a--,y(R)}}function _(R,I){R.c=I,y(R)}function y(R){R.a==0&&R.c&&(R.c(),R.c=null)}function x(R){this.a=R||"-"}x.prototype.c=function(R){for(var I=[],W=0;W<arguments.length;W++)I.push(arguments[W].replace(/[\W_]+/g,"").toLowerCase());return I.join(this.a)};function b(R,I){this.c=R,this.f=4,this.a="n";var W=(I||"n4").match(/^([nio])([1-9])$/i);W&&(this.a=W[1],this.f=parseInt(W[2],10))}function T(R){return M(R)+" "+(R.f+"00")+" 300px "+S(R.c)}function S(R){var I=[];R=R.split(/,\s*/);for(var W=0;W<R.length;W++){var D=R[W].replace(/['"]/g,"");D.indexOf(" ")!=-1||/^\d/.test(D)?I.push("'"+D+"'"):I.push(D)}return I.join(",")}function w(R){return R.a+R.f}function M(R){var I="normal";return R.a==="o"?I="oblique":R.a==="i"&&(I="italic"),I}function q(R){var I=4,W="n",D=null;return R&&((D=R.match(/(normal|oblique|italic)/i))&&D[1]&&(W=D[1].substr(0,1).toLowerCase()),(D=R.match(/([1-9]00|normal|bold)/i))&&D[1]&&(/bold/i.test(D[1])?I=7:/[1-9]00/.test(D[1])&&(I=parseInt(D[1].substr(0,1),10)))),W+I}function O(R,I){this.c=R,this.f=R.o.document.documentElement,this.h=I,this.a=new x("-"),this.j=I.events!==!1,this.g=I.classes!==!1}function k(R){R.g&&c(R.f,[R.a.c("wf","loading")]),N(R,"loading")}function U(R){if(R.g){var I=h(R.f,R.a.c("wf","active")),W=[],D=[R.a.c("wf","loading")];I||W.push(R.a.c("wf","inactive")),c(R.f,W,D)}N(R,"inactive")}function N(R,I,W){R.j&&R.h[I]&&(W?R.h[I](W.c,w(W)):R.h[I]())}function Z(){this.c={}}function G(R,I,W){var D=[],j;for(j in I)if(I.hasOwnProperty(j)){var re=R.c[j];re&&D.push(re(I[j],W))}return D}function A(R,I){this.c=R,this.f=I,this.a=o(this.c,"span",{"aria-hidden":"true"},this.f)}function P(R){u(R.c,"body",R.a)}function C(R){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+S(R.c)+";"+("font-style:"+M(R)+";font-weight:"+(R.f+"00")+";")}function v(R,I,W,D,j,re){this.g=R,this.j=I,this.a=D,this.c=W,this.f=j||3e3,this.h=re||void 0}v.prototype.start=function(){var R=this.c.o.document,I=this,W=i(),D=new Promise(function(se,Ae){function Ee(){i()-W>=I.f?Ae():R.fonts.load(T(I.a),I.h).then(function(Ke){1<=Ke.length?se():setTimeout(Ee,25)},function(){Ae()})}Ee()}),j=null,re=new Promise(function(se,Ae){j=setTimeout(Ae,I.f)});Promise.race([re,D]).then(function(){j&&(clearTimeout(j),j=null),I.g(I.a)},function(){I.j(I.a)})};function B(R,I,W,D,j,re,se){this.v=R,this.B=I,this.c=W,this.a=D,this.s=se||"BESbswy",this.f={},this.w=j||3e3,this.u=re||null,this.m=this.j=this.h=this.g=null,this.g=new A(this.c,this.s),this.h=new A(this.c,this.s),this.j=new A(this.c,this.s),this.m=new A(this.c,this.s),R=new b(this.a.c+",serif",w(this.a)),R=C(R),this.g.a.style.cssText=R,R=new b(this.a.c+",sans-serif",w(this.a)),R=C(R),this.h.a.style.cssText=R,R=new b("serif",w(this.a)),R=C(R),this.j.a.style.cssText=R,R=new b("sans-serif",w(this.a)),R=C(R),this.m.a.style.cssText=R,P(this.g),P(this.h),P(this.j),P(this.m)}var F={D:"serif",C:"sans-serif"},L=null;function z(){if(L===null){var R=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);L=!!R&&(536>parseInt(R[1],10)||parseInt(R[1],10)===536&&11>=parseInt(R[2],10))}return L}B.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=i(),V(this)};function Y(R,I,W){for(var D in F)if(F.hasOwnProperty(D)&&I===R.f[F[D]]&&W===R.f[F[D]])return!0;return!1}function V(R){var I=R.g.a.offsetWidth,W=R.h.a.offsetWidth,D;(D=I===R.f.serif&&W===R.f["sans-serif"])||(D=z()&&Y(R,I,W)),D?i()-R.A>=R.w?z()&&Y(R,I,W)&&(R.u===null||R.u.hasOwnProperty(R.a.c))?ve(R,R.v):ve(R,R.B):we(R):ve(R,R.v)}function we(R){setTimeout(n(function(){V(this)},R),50)}function ve(R,I){setTimeout(n(function(){l(this.g.a),l(this.h.a),l(this.j.a),l(this.m.a),I(this.a)},R),0)}function de(R,I,W){this.c=R,this.a=I,this.f=0,this.m=this.j=!1,this.s=W}var Pe=null;de.prototype.g=function(R){var I=this.a;I.g&&c(I.f,[I.a.c("wf",R.c,w(R).toString(),"active")],[I.a.c("wf",R.c,w(R).toString(),"loading"),I.a.c("wf",R.c,w(R).toString(),"inactive")]),N(I,"fontactive",R),this.m=!0,me(this)},de.prototype.h=function(R){var I=this.a;if(I.g){var W=h(I.f,I.a.c("wf",R.c,w(R).toString(),"active")),D=[],j=[I.a.c("wf",R.c,w(R).toString(),"loading")];W||D.push(I.a.c("wf",R.c,w(R).toString(),"inactive")),c(I.f,D,j)}N(I,"fontinactive",R),me(this)};function me(R){--R.f==0&&R.j&&(R.m?(R=R.a,R.g&&c(R.f,[R.a.c("wf","active")],[R.a.c("wf","loading"),R.a.c("wf","inactive")]),N(R,"active")):U(R.a))}function J(R){this.j=R,this.a=new Z,this.h=0,this.f=this.g=!0}J.prototype.load=function(R){this.c=new s(this.j,R.context||this.j),this.g=R.events!==!1,this.f=R.classes!==!1,Q(this,new O(this.c,R),R)};function ne(R,I,W,D,j){var re=--R.h==0;(R.f||R.g)&&setTimeout(function(){var se=j||null,Ae=D||null||{};if(W.length===0&&re)U(I.a);else{I.f+=W.length,re&&(I.j=re);var Ee,Ke=[];for(Ee=0;Ee<W.length;Ee++){var Ze=W[Ee],Et=Ae[Ze.c],Sr=I.a,As=Ze;if(Sr.g&&c(Sr.f,[Sr.a.c("wf",As.c,w(As).toString(),"loading")]),N(Sr,"fontloading",As),Sr=null,Pe===null)if(window.FontFace){var As=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),zQ=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);Pe=As?42<parseInt(As[1],10):!zQ}else Pe=!1;Pe?Sr=new v(n(I.g,I),n(I.h,I),I.c,Ze,I.s,Et):Sr=new B(n(I.g,I),n(I.h,I),I.c,Ze,I.s,se,Et),Ke.push(Sr)}for(Ee=0;Ee<Ke.length;Ee++)Ke[Ee].start()}},0)}function Q(R,I,W){var j=[],D=W.timeout;k(I);var j=G(R.a,W,R.c),re=new de(R.c,I,D);for(R.h=j.length,I=0,W=j.length;I<W;I++)j[I].load(function(se,Ae,Ee){ne(R,re,se,Ae,Ee)})}function X(R,I){this.c=R,this.a=I}X.prototype.load=function(R){function I(){if(re["__mti_fntLst"+D]){var se=re["__mti_fntLst"+D](),Ae=[],Ee;if(se)for(var Ke=0;Ke<se.length;Ke++){var Ze=se[Ke].fontfamily;se[Ke].fontStyle!=null&&se[Ke].fontWeight!=null?(Ee=se[Ke].fontStyle+se[Ke].fontWeight,Ae.push(new b(Ze,Ee))):Ae.push(new b(Ze))}R(Ae)}else setTimeout(function(){I()},50)}var W=this,D=W.a.projectId,j=W.a.version;if(D){var re=W.c.o;p(this.c,(W.a.api||"https://fast.fonts.net/jsapi")+"/"+D+".js"+(j?"?v="+j:""),function(se){se?R([]):(re["__MonotypeConfiguration__"+D]=function(){return W.a},I())}).id="__MonotypeAPIScript__"+D}else R([])};function te(R,I){this.c=R,this.a=I}te.prototype.load=function(R){var I,W,D=this.a.urls||[],j=this.a.families||[],re=this.a.testStrings||{},se=new g;for(I=0,W=D.length;I<W;I++)f(this.c,D[I],m(se));var Ae=[];for(I=0,W=j.length;I<W;I++)if(D=j[I].split(":"),D[1])for(var Ee=D[1].split(","),Ke=0;Ke<Ee.length;Ke+=1)Ae.push(new b(D[0],Ee[Ke]));else Ae.push(new b(D[0]));_(se,function(){R(Ae,re)})};function H(R,I){R?this.c=R:this.c=Ve,this.a=[],this.f=[],this.g=I||""}var Ve="https://fonts.googleapis.com/css";function Rt(R,I){for(var W=I.length,D=0;D<W;D++){var j=I[D].split(":");j.length==3&&R.f.push(j.pop());var re="";j.length==2&&j[1]!=""&&(re=":"),R.a.push(j.join(re))}}function Gn(R){if(R.a.length==0)throw Error("No fonts to load!");if(R.c.indexOf("kit=")!=-1)return R.c;for(var I=R.a.length,W=[],D=0;D<I;D++)W.push(R.a[D].replace(/ /g,"+"));return I=R.c+"?family="+W.join("%7C"),0<R.f.length&&(I+="&subset="+R.f.join(",")),0<R.g.length&&(I+="&text="+encodeURIComponent(R.g)),I}function _n(R){this.f=R,this.a=[],this.c={}}var Pt={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},at={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Dr={i:"i",italic:"i",n:"n",normal:"n"},zn=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Ts(R){for(var I=R.f.length,W=0;W<I;W++){var D=R.f[W].split(":"),j=D[0].replace(/\+/g," "),re=["n4"];if(2<=D.length){var se,Ae=D[1];if(se=[],Ae)for(var Ae=Ae.split(","),Ee=Ae.length,Ke=0;Ke<Ee;Ke++){var Ze;if(Ze=Ae[Ke],Ze.match(/^[\w-]+$/)){var Et=zn.exec(Ze.toLowerCase());if(Et==null)Ze="";else{if(Ze=Et[2],Ze=Ze==null||Ze==""?"n":Dr[Ze],Et=Et[1],Et==null||Et=="")Et="4";else var Sr=at[Et],Et=Sr||(isNaN(Et)?"4":Et.substr(0,1));Ze=[Ze,Et].join("")}}else Ze="";Ze&&se.push(Ze)}0<se.length&&(re=se),D.length==3&&(D=D[2],se=[],D=D?D.split(","):se,0<D.length&&(D=Pt[D[0]])&&(R.c[j]=D))}for(R.c[j]||(D=Pt[j])&&(R.c[j]=D),D=0;D<re.length;D+=1)R.a.push(new b(j,re[D]))}}function Hn(R,I){this.c=R,this.a=I}var Ct={Arimo:!0,Cousine:!0,Tinos:!0};Hn.prototype.load=function(R){var I=new g,W=this.c,D=new H(this.a.api,this.a.text),j=this.a.families;Rt(D,j);var re=new _n(j);Ts(re),f(W,Gn(D),m(I)),_(I,function(){R(re.a,re.c,Ct)})};function Si(R,I){this.c=R,this.a=I}Si.prototype.load=function(R){var I=this.a.id,W=this.c.o;I?p(this.c,(this.a.api||"https://use.typekit.net")+"/"+I+".js",function(D){if(D)R([]);else if(W.Typekit&&W.Typekit.config&&W.Typekit.config.fn){D=W.Typekit.config.fn;for(var j=[],re=0;re<D.length;re+=2)for(var se=D[re],Ae=D[re+1],Ee=0;Ee<Ae.length;Ee++)j.push(new b(se,Ae[Ee]));try{W.Typekit.load({events:!1,classes:!1,async:!0})}catch{}R(j)}},2e3):R([])};function jn(R,I){this.c=R,this.f=I,this.a=[]}jn.prototype.load=function(R){var I=this.f.id,W=this.c.o,D=this;I?(W.__webfontfontdeckmodule__||(W.__webfontfontdeckmodule__={}),W.__webfontfontdeckmodule__[I]=function(j,re){for(var se=0,Ae=re.fonts.length;se<Ae;++se){var Ee=re.fonts[se];D.a.push(new b(Ee.name,q("font-weight:"+Ee.weight+";font-style:"+Ee.style)))}R(D.a)},p(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+d(this.c)+"/"+I+".js",function(j){j&&R([])})):R([])};var Ur=new J(window);Ur.a.c.custom=function(R,I){return new te(I,R)},Ur.a.c.fontdeck=function(R,I){return new jn(I,R)},Ur.a.c.monotype=function(R,I){return new X(I,R)},Ur.a.c.typekit=function(R,I){return new Si(I,R)},Ur.a.c.google=function(R,I){return new Hn(I,R)};var ja={load:n(Ur.load,Ur)};r.exports?r.exports=ja:(window.WebFont=ja,window.WebFontConfig&&Ur.load(window.WebFontConfig))})()})(gf)),gf.exports}zV();function HV({props:r,target:e,ignore:t}){Xn(()=>{let n=e instanceof Function?e():e;n&&Object.keys(r).filter(i=>t?!t.includes(i):!0).forEach(i=>{r[i]!==void 0&&(n[i]=r[i])})})}function jV(r,e){wt(e,!0);const t=zG(e,["$$slots","$$events","$$legacy"]),n=GV(),i=new IY({text:e.text,style:e.style});HV({props:t,target:i,ignore:["onresize"]}),Xn(()=>{var s;e==null||e.text,e==null||e.style,(s=e.onresize)==null||s.call(e,{width:i.width,height:i.height})}),Yr(()=>{var s;(s=e.onresize)==null||s.call(e,{width:i.width,height:i.height})}),n.addToParent(i),St()}/*!
 * @barvynkoa/particle-emitter - v6.0.0
 * Compiled Mon, 27 May 2024 12:15:21 UTC
 *
 * @barvynkoa/particle-emitter is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */class mf{constructor(e){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(e)}init(e){if(!e||!e.length)this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});else if(Array.isArray(e[0]))for(let t=0;t<e.length;++t){const n=e[t];let i=n[0];for(let s=1;s<n.length;++s){const a=n[s];this.segments.push({p1:i,p2:a,l:0}),i=a}}else{let t=e[0];for(let n=1;n<e.length;++n){const i=e[n];this.segments.push({p1:t,p2:i,l:0}),t=i}}for(let t=0;t<this.segments.length;++t){const{p1:n,p2:i}=this.segments[t],s=Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y));this.segments[t].l=s,this.totalLength+=s,this.countingLengths.push(this.totalLength)}}getRandPos(e){const t=Math.random()*this.totalLength;let n,i;if(this.segments.length===1)n=this.segments[0],i=t;else for(let o=0;o<this.countingLengths.length;++o)if(t<this.countingLengths[o]){n=this.segments[o],i=o===0?t:t-this.countingLengths[o-1];break}i/=n.l||1;const{p1:s,p2:a}=n;e.x=s.x+i*(a.x-s.x),e.y=s.y+i*(a.y-s.y)}}mf.type="polygonalChain",mf.editorConfig=null;class vf{constructor(e){this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h}getRandPos(e){e.x=Math.random()*this.w+this.x,e.y=Math.random()*this.h+this.y}}vf.type="rect",vf.editorConfig=null;class qr{constructor(e,t,n){this.value=e,this.time=t,this.next=null,this.isStepped=!1,n?this.ease=typeof n=="function"?n:TE(n):this.ease=null}static createList(e){if("list"in e){const n=e.list;let i;const{value:s,time:a}=n[0],o=i=new qr(typeof s=="string"?Lu(s):s,a,e.ease);if(n.length>2||n.length===2&&n[1].value!==s)for(let u=1;u<n.length;++u){const{value:l,time:c}=n[u];i.next=new qr(typeof l=="string"?Lu(l):l,c),i=i.next}return o.isStepped=!!e.isStepped,o}const t=new qr(typeof e.start=="string"?Lu(e.start):e.start,0);return e.end!==e.start&&(t.next=new qr(typeof e.end=="string"?Lu(e.end):e.end,1)),t}}let ya=ce.from;const kr=Math.PI/180;function on(r,e){if(!r)return;const t=Math.sin(r),n=Math.cos(r),i=e.x*n-e.y*t,s=e.x*t+e.y*n;e.x=i,e.y=s}function Bu(r,e,t){return r<<16|e<<8|t}function wE(r){return Math.sqrt(r.x*r.x+r.y*r.y)}function $V(r){const e=1/wE(r);r.x*=e,r.y*=e}function SE(r,e){r.x*=e,r.y*=e}function Lu(r,e){e||(e={}),r.charAt(0)==="#"?r=r.substr(1):r.indexOf("0x")===0&&(r=r.substr(2));let t;return r.length===8&&(t=r.substr(0,2),r=r.substr(2)),e.r=parseInt(r.substr(0,2),16),e.g=parseInt(r.substr(2,2),16),e.b=parseInt(r.substr(4,2),16),t&&(e.a=parseInt(t,16)),e}function TE(r){const e=r.length,t=1/e;return function(n){const i=e*n|0,s=(n-i*t)*e,a=r[i]||r[e-1];return a.s+s*(2*(1-s)*(a.cp-a.s)+s*(a.e-a.s))}}function YV(r){return r||"normal"}class Fu{constructor(e){this.x=e.x||0,this.y=e.y||0,this.radius=e.radius,this.innerRadius=e.innerRadius||0,this.rotation=!!e.affectRotation}getRandPos(e){this.innerRadius!==this.radius?e.x=Math.random()*(this.radius-this.innerRadius)+this.innerRadius:e.x=this.radius,e.y=0;const t=Math.random()*Math.PI*2;this.rotation&&(e.rotation+=t),on(t,e.position),e.position.x+=this.x,e.position.y+=this.y}}Fu.type="torus",Fu.editorConfig=null;var De;(function(r){r[r.Spawn=0]="Spawn",r[r.Normal=2]="Normal",r[r.Late=5]="Late"})(De||(De={}));class _f{constructor(e){this.order=De.Late,this.minStart=e.minStart,this.maxStart=e.maxStart,this.accel=e.accel,this.rotate=!!e.rotate,this.maxSpeed=e.maxSpeed??0}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.maxStart-this.minStart)+this.minStart;t.config.velocity?t.config.velocity.set(n,0):t.config.velocity=new Se(n,0),on(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=e.config.velocity,i=n.x,s=n.y;if(n.x+=this.accel.x*t,n.y+=this.accel.y*t,this.maxSpeed){const a=wE(n);a>this.maxSpeed&&SE(n,this.maxSpeed/a)}e.x+=(i+n.x)/2*t,e.y+=(s+n.y)/2*t,this.rotate&&(e.rotation=Math.atan2(n.y,n.x))}}_f.type="moveAcceleration",_f.editorConfig=null;function VV(r){return this.ease&&(r=this.ease(r)),(this.first.next.value-this.first.value)*r+this.first.value}function XV(r){this.ease&&(r=this.ease(r));const e=this.first.value,t=this.first.next.value,n=(t.r-e.r)*r+e.r,i=(t.g-e.g)*r+e.g,s=(t.b-e.b)*r+e.b;return Bu(n,i,s)}function KV(r){this.ease&&(r=this.ease(r));let e=this.first,t=e.next;for(;r>t.time;)e=t,t=t.next;return r=(r-e.time)/(t.time-e.time),(t.value-e.value)*r+e.value}function ZV(r){this.ease&&(r=this.ease(r));let e=this.first,t=e.next;for(;r>t.time;)e=t,t=t.next;r=(r-e.time)/(t.time-e.time);const n=e.value,i=t.value,s=(i.r-n.r)*r+n.r,a=(i.g-n.g)*r+n.g,o=(i.b-n.b)*r+n.b;return Bu(s,a,o)}function JV(r){this.ease&&(r=this.ease(r));let e=this.first;for(;e.next&&r>e.next.time;)e=e.next;return e.value}function QV(r){this.ease&&(r=this.ease(r));let e=this.first;for(;e.next&&r>e.next.time;)e=e.next;const t=e.value;return Bu(t.r,t.g,t.b)}class ba{constructor(e=!1){this.first=null,this.isColor=!!e,this.interpolate=null,this.ease=null}reset(e){this.first=e,e.next&&e.next.time>=1?this.interpolate=this.isColor?XV:VV:e.isStepped?this.interpolate=this.isColor?QV:JV:this.interpolate=this.isColor?ZV:KV,this.ease=this.first.ease}}class yf{constructor(e){this.order=De.Normal,this.list=new ba(!1),this.list.reset(qr.createList(e.alpha))}initParticles(e){let t=e;for(;t;)t.alpha=this.list.first.value,t=t.next}updateParticle(e){e.alpha=this.list.interpolate(e.agePercent)}}yf.type="alpha",yf.editorConfig=null;class bf{constructor(e){this.order=De.Normal,this.value=e.alpha}initParticles(e){let t=e;for(;t;)t.alpha=this.value,t=t.next}}bf.type="alphaStatic",bf.editorConfig=null;function AE(r){const e=[];for(let t=0;t<r.length;++t){let n=r[t];if(typeof n=="string")e.push(ya(n));else if(n instanceof ce)e.push(n);else{let i=n.count||1;for(typeof n.texture=="string"?n=ya(n.texture):n=n.texture;i>0;--i)e.push(n)}}return e}class xf{constructor(e){this.order=De.Normal,this.anims=[];for(let t=0;t<e.anims.length;++t){const n=e.anims[t],i=AE(n.textures),s=n.framerate<0?-1:n.framerate>0?n.framerate:60,a={textures:i,duration:s>0?i.length/s:0,framerate:s,loop:s>0?!!n.loop:!1};this.anims.push(a)}}initParticles(e){let t=e;for(;t;){const n=Math.floor(Math.random()*this.anims.length),i=t.config.anim=this.anims[n];t.texture=i.textures[0],t.config.animElapsed=0,i.framerate===-1?(t.config.animDuration=t.maxLife,t.config.animFramerate=i.textures.length/t.maxLife):(t.config.animDuration=i.duration,t.config.animFramerate=i.framerate),t=t.next}}updateParticle(e,t){const n=e.config,i=n.anim;n.animElapsed+=t,n.animElapsed>=n.animDuration&&(n.anim.loop?n.animElapsed=n.animElapsed%n.animDuration:n.animElapsed=n.animDuration-1e-6);const s=n.animElapsed*n.animFramerate+1e-7|0;e.texture=i.textures[s]||i.textures[i.textures.length-1]||ce.EMPTY}}xf.type="animatedRandom",xf.editorConfig=null;class wf{constructor(e){this.order=De.Normal;const t=e.anim,n=AE(t.textures),i=t.framerate<0?-1:t.framerate>0?t.framerate:60;this.anim={textures:n,duration:i>0?n.length/i:0,framerate:i,loop:i>0?!!t.loop:!1}}initParticles(e){let t=e;const n=this.anim;for(;t;)t.texture=n.textures[0],t.config.animElapsed=0,n.framerate===-1?(t.config.animDuration=t.maxLife,t.config.animFramerate=n.textures.length/t.maxLife):(t.config.animDuration=n.duration,t.config.animFramerate=n.framerate),t=t.next}updateParticle(e,t){const n=this.anim,i=e.config;i.animElapsed+=t,i.animElapsed>=i.animDuration&&(n.loop?i.animElapsed=i.animElapsed%i.animDuration:i.animElapsed=i.animDuration-1e-6);const s=i.animElapsed*i.animFramerate+1e-7|0;e.texture=n.textures[s]||n.textures[n.textures.length-1]||ce.EMPTY}}wf.type="animatedSingle",wf.editorConfig=null;class Sf{constructor(e){this.order=De.Normal,this.value=e.blendMode}initParticles(e){let t=e;for(;t;)t.blendMode=YV(this.value),t=t.next}}Sf.type="blendMode",Sf.editorConfig=null;class Tf{constructor(e){this.order=De.Spawn,this.spacing=e.spacing*kr,this.start=e.start*kr,this.distance=e.distance}initParticles(e){let t=0,n=e;for(;n;){let i;this.spacing?i=this.start+this.spacing*t:i=Math.random()*Math.PI*2,n.rotation=i,this.distance&&(n.position.x=this.distance,on(i,n.position)),n=n.next,++t}}}Tf.type="spawnBurst",Tf.editorConfig=null;class Af{constructor(e){this.order=De.Normal,this.list=new ba(!0),this.list.reset(qr.createList(e.color))}initParticles(e){let t=e;const n=this.list.first.value,i=Bu(n.r,n.g,n.b);for(;t;)t.tint=i,t=t.next}updateParticle(e){e.tint=this.list.interpolate(e.agePercent)}}Af.type="color",Af.editorConfig=null;class Rf{constructor(e){this.order=De.Normal;let t=e.color;t.charAt(0)==="#"?t=t.substr(1):t.indexOf("0x")===0&&(t=t.substr(2)),this.value=parseInt(t,16)}initParticles(e){let t=e;for(;t;)t.tint=this.value,t=t.next}}Rf.type="colorStatic",Rf.editorConfig=null;class Pf{constructor(e){this.order=De.Normal,this.index=0,this.textures=e.textures.map(t=>typeof t=="string"?ya(t):t)}initParticles(e){let t=e;for(;t;)t.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),t=t.next}}Pf.type="textureOrdered",Pf.editorConfig=null;const ls=new Se,RE=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],e8=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(RE).join("|"),"g");function t8(r){const e=r.match(e8);for(let t=e.length-1;t>=0;--t)RE.indexOf(e[t])>=0&&(e[t]=`Math.${e[t]}`);return r=e.join(""),new Function("x",`return ${r};`)}class Cf{constructor(e){if(this.order=De.Late,e.path)if(typeof e.path=="function")this.path=e.path;else try{this.path=t8(e.path)}catch{this.path=null}else this.path=t=>t;this.list=new ba(!1),this.list.reset(qr.createList(e.speed)),this.minMult=e.minMult??1}initParticles(e){let t=e;for(;t;){t.config.initRotation=t.rotation,t.config.initPosition?t.config.initPosition.copyFrom(t.position):t.config.initPosition=new Se(t.x,t.y),t.config.movement=0;const n=Math.random()*(1-this.minMult)+this.minMult;t.config.speedMult=n,t=t.next}}updateParticle(e,t){const n=this.list.interpolate(e.agePercent)*e.config.speedMult;e.config.movement+=n*t,ls.x=e.config.movement,ls.y=this.path(ls.x),on(e.config.initRotation,ls),e.position.x=e.config.initPosition.x+ls.x,e.position.y=e.config.initPosition.y+ls.y}}Cf.type="movePath",Cf.editorConfig=null;class Ef{constructor(){this.order=De.Spawn}initParticles(e){}}Ef.type="spawnPoint",Ef.editorConfig=null;class Mf{constructor(e){this.order=De.Normal,this.textures=e.textures.map(t=>typeof t=="string"?ya(t):t)}initParticles(e){let t=e;for(;t;){const n=Math.floor(Math.random()*this.textures.length);t.texture=this.textures[n],t=t.next}}}Mf.type="textureRandom",Mf.editorConfig=null;class If{constructor(e){this.order=De.Normal,this.minStart=e.minStart*kr,this.maxStart=e.maxStart*kr,this.minSpeed=e.minSpeed*kr,this.maxSpeed=e.maxSpeed*kr,this.accel=e.accel*kr}initParticles(e){let t=e;for(;t;)this.minStart===this.maxStart?t.rotation+=this.maxStart:t.rotation+=Math.random()*(this.maxStart-this.minStart)+this.minStart,t.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,t=t.next}updateParticle(e,t){if(this.accel){const n=e.config.rotSpeed;e.config.rotSpeed+=this.accel*t,e.rotation+=(e.config.rotSpeed+n)/2*t}else e.rotation+=e.config.rotSpeed*t}}If.type="rotation",If.editorConfig=null;class qf{constructor(e){this.order=De.Normal,this.min=e.min*kr,this.max=e.max*kr}initParticles(e){let t=e;for(;t;)this.min===this.max?t.rotation+=this.max:t.rotation+=Math.random()*(this.max-this.min)+this.min,t=t.next}}qf.type="rotationStatic",qf.editorConfig=null;class kf{constructor(e){this.order=De.Late+1,this.rotation=(e.rotation||0)*kr}initParticles(e){let t=e;for(;t;)t.rotation=this.rotation,t=t.next}}kf.type="noRotation",kf.editorConfig=null;class Of{constructor(e){this.order=De.Normal,this.list=new ba(!1),this.list.reset(qr.createList(e.scale)),this.minMult=e.minMult??1}initParticles(e){let t=e;for(;t;){const n=Math.random()*(1-this.minMult)+this.minMult;t.config.scaleMult=n,t.scale.x=t.scale.y=this.list.first.value*n,t=t.next}}updateParticle(e){e.scale.x=e.scale.y=this.list.interpolate(e.agePercent)*e.config.scaleMult}}Of.type="scale",Of.editorConfig=null;class Bf{constructor(e){this.order=De.Normal,this.min=e.min,this.max=e.max}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.max-this.min)+this.min;t.scale.x=t.scale.y=n,t=t.next}}}Bf.type="scaleStatic",Bf.editorConfig=null;class _r{static registerShape(e,t){_r.shapes[t||e.type]=e}constructor(e){this.order=De.Spawn;const t=_r.shapes[e.type];if(!t)throw new Error(`No shape found with type '${e.type}'`);this.shape=new t(e.data)}initParticles(e){let t=e;for(;t;)this.shape.getRandPos(t),t=t.next}}_r.type="spawnShape",_r.editorConfig=null,_r.shapes={},_r.registerShape(mf),_r.registerShape(vf),_r.registerShape(Fu),_r.registerShape(Fu,"circle");class Lf{constructor(e){this.order=De.Normal,this.texture=typeof e.texture=="string"?ya(e.texture):e.texture}initParticles(e){let t=e;for(;t;)t.texture=this.texture,t=t.next}}Lf.type="textureSingle",Lf.editorConfig=null;class Ff{constructor(e){this.order=De.Late,this.list=new ba(!1),this.list.reset(qr.createList(e.speed)),this.minMult=e.minMult??1}initParticles(e){let t=e;for(;t;){const n=Math.random()*(1-this.minMult)+this.minMult;t.config.speedMult=n,t.config.velocity?t.config.velocity.set(this.list.first.value*n,0):t.config.velocity=new Se(this.list.first.value*n,0),on(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=this.list.interpolate(e.agePercent)*e.config.speedMult,i=e.config.velocity;$V(i),SE(i,n),e.x+=i.x*t,e.y+=i.y*t}}Ff.type="moveSpeed",Ff.editorConfig=null;class Df{constructor(e){this.order=De.Late,this.min=e.min,this.max=e.max}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.max-this.min)+this.min;t.config.velocity?t.config.velocity.set(n,0):t.config.velocity=new Se(n,0),on(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=e.config.velocity;e.x+=n.x*t,e.y+=n.y*t}}Df.type="moveSpeedStatic",Df.editorConfig=null;class Uf extends Xi{constructor(e){super(),this.prevChild=this.nextChild=null,this.emitter=e,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(e){this.maxLife=e,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}const Wf=en.shared,pi=Symbol("Position particle per emitter position");class Oe{static registerBehavior(e){Oe.knownBehaviors[e.type]=e}constructor(e,t){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new Se,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new Se,this._prevEmitterPos=new Se,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=e,t&&this.init(t),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}get frequency(){return this._frequency}set frequency(e){typeof e=="number"&&e>0?this._frequency=e:this._frequency=1}get parent(){return this._parent}set parent(e){this.cleanup(),this._parent=e}init(e){if(!e)return;this.cleanup(),this._origConfig=e,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,e.ease?this.customEase=typeof e.ease=="function"?e.ease:TE(e.ease):this.customEase=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.frequency=e.frequency,this.spawnChance=typeof e.spawnChance=="number"&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos.set(0),e.pos?this.spawnPos.copyFrom(e.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=e.emit===void 0?!0:!!e.emit,this.autoUpdate=!!e.autoUpdate;const t=e.behaviors.map(n=>{const i=Oe.knownBehaviors[n.type];return i?new i(n.config):(console.error(`Unknown behavior: ${n.type}`),null)}).filter(n=>!!n);t.push(pi),t.sort((n,i)=>n===pi?i.order===De.Spawn?1:-1:i===pi?n.order===De.Spawn?-1:1:n.order-i.order),this.initBehaviors=t.slice(),this.updateBehaviors=t.filter(n=>n!==pi&&n.updateParticle),this.recycleBehaviors=t.filter(n=>n!==pi&&n.recycleParticle)}getBehavior(e){return Oe.knownBehaviors[e]&&this.initBehaviors.find(t=>t instanceof Oe.knownBehaviors[e])||null}fillPool(e){for(;e>0;--e){const t=new Uf(this);t.next=this._poolFirst,this._poolFirst=t}}recycle(e,t=!1){for(let n=0;n<this.recycleBehaviors.length;++n)this.recycleBehaviors[n].recycleParticle(e,!t);e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===this._activeParticlesLast&&(this._activeParticlesLast=e.prev),e===this._activeParticlesFirst&&(this._activeParticlesFirst=e.next),e.prev=null,e.next=this._poolFirst,this._poolFirst=e,e.parent&&e.parent.removeChild(e),--this.particleCount}rotate(e){if(this.rotation===e)return;const t=e-this.rotation;this.rotation=e,on(t,this.spawnPos),this._posChanged=!0}updateSpawnPos(e,t){this._posChanged=!0,this.spawnPos.x=e,this.spawnPos.y=t}updateOwnerPos(e,t){this._posChanged=!0,this.ownerPos.x=e,this.ownerPos.y=t}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(e){this._emit=!!e,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){this._autoUpdate&&!e?Wf.remove(this.update,this):!this._autoUpdate&&e&&Wf.add(this.update,this),this._autoUpdate=!!e}playOnceAndDestroy(e){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=e}playOnce(e){this.emit=!0,this._completeCallback=e}update(e){if(typeof e!="number"&&(e=e.deltaTime),this._autoUpdate&&(e=Wf.elapsedMS*.001),!this._parent)return;for(let a=this._activeParticlesFirst,o;a;a=o)if(o=a.next,a.age+=e,a.age>a.maxLife||a.age<0)this.recycle(a);else{let u=a.age*a.oneOverLife;this.customEase&&(this.customEase.length===4?u=this.customEase(u,0,1,1):u=this.customEase(u)),a.agePercent=u;for(let l=0;l<this.updateBehaviors.length;++l)if(this.updateBehaviors[l].updateParticle(a,e)){this.recycle(a);break}}let t,n;this._prevPosIsValid&&(t=this._prevEmitterPos.x,n=this._prevEmitterPos.y);const i=this.ownerPos.x+this.spawnPos.x,s=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=e<0?0:e;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let a,o;if(this._prevPosIsValid&&this._posChanged){const c=1+this._spawnTimer/e;a=(i-t)*c+t,o=(s-n)*c+n}else a=i,o=s;let u=null,l=null;for(let c=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),h=0;h<c;++h){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let d;if(this.minLifetime===this.maxLifetime?d=this.minLifetime:d=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=d)continue;let f;this._poolFirst?(f=this._poolFirst,this._poolFirst=this._poolFirst.next,f.next=null):f=new Uf(this),f.init(d),this.addAtBack?this._parent.addChildAt(f,0):this._parent.addChild(f),u?(l.next=f,f.prev=l,l=f):l=u=f,++this.particleCount}if(u){this._activeParticlesLast?(this._activeParticlesLast.next=u,u.prev=this._activeParticlesLast,this._activeParticlesLast=l):(this._activeParticlesFirst=u,this._activeParticlesLast=l);for(let c=0;c<this.initBehaviors.length;++c){const h=this.initBehaviors[c];if(h===pi)for(let d=u,f;d;d=f){f=d.next,this.rotation!==0&&(on(this.rotation,d.position),d.rotation+=this.rotation),d.position.x+=a,d.position.y+=o,d.age+=-this._spawnTimer;let p=d.age*d.oneOverLife;this.customEase&&(this.customEase.length===4?p=this.customEase(p,0,1,1):p=this.customEase(p)),d.agePercent=p}else h.initParticles(u)}for(let c=u,h;c;c=h){h=c.next;for(let d=0;d<this.updateBehaviors.length;++d)if(this.updateBehaviors[d].updateParticle(c,-this._spawnTimer)){this.recycle(c);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=i,this._prevEmitterPos.y=s,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const a=this._completeCallback;this._completeCallback=null,a()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const e=this.ownerPos.x+this.spawnPos.x,t=this.ownerPos.y+this.spawnPos.y;let n=null,i=null;for(let s=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),a=0;a<s;++a){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let o;this._poolFirst?(o=this._poolFirst,this._poolFirst=this._poolFirst.next,o.next=null):o=new Uf(this);let u;this.minLifetime===this.maxLifetime?u=this.minLifetime:u=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,o.init(u),this.addAtBack?this._parent.addChildAt(o,0):this._parent.addChild(o),n?(i.next=o,o.prev=i,i=o):i=n=o,++this.particleCount}if(n){this._activeParticlesLast?(this._activeParticlesLast.next=n,n.prev=this._activeParticlesLast,this._activeParticlesLast=i):(this._activeParticlesFirst=n,this._activeParticlesLast=i);for(let s=0;s<this.initBehaviors.length;++s){const a=this.initBehaviors[s];if(a===pi)for(let o=n,u;o;o=u)u=o.next,this.rotation!==0&&(on(this.rotation,o.position),o.rotation+=this.rotation),o.position.x+=e,o.position.y+=t;else a.initParticles(n)}}}cleanup(){let e,t;for(e=this._activeParticlesFirst;e;e=t)t=e.next,this.recycle(e,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){this.autoUpdate=!1,this.cleanup();let e;for(let t=this._poolFirst;t;t=e)e=t.next,t.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}}Oe.knownBehaviors={},Oe.registerBehavior(_f),Oe.registerBehavior(yf),Oe.registerBehavior(bf),Oe.registerBehavior(xf),Oe.registerBehavior(wf),Oe.registerBehavior(Sf),Oe.registerBehavior(Tf),Oe.registerBehavior(Af),Oe.registerBehavior(Rf),Oe.registerBehavior(Pf),Oe.registerBehavior(Cf),Oe.registerBehavior(Ef),Oe.registerBehavior(Mf),Oe.registerBehavior(If),Oe.registerBehavior(qf),Oe.registerBehavior(kf),Oe.registerBehavior(Of),Oe.registerBehavior(Bf),Oe.registerBehavior(_r),Oe.registerBehavior(Lf),Oe.registerBehavior(Ff),Oe.registerBehavior(Df);function r8({assets:r}){const t=We({reset:()=>{t.loaded=!1,t.loadingProgress=0,t.loadedAssets={},t.pixiApplication=void 0},assets:r,loaded:!1,loadingProgress:0,loadedAssets:{},pixiApplication:void 0});return{stateApp:t}}const{eventEmitter:Mn}=mH(),{stateXstate:n8,stateXstateDerived:PE}=Vj(),{stateLayout:i8,stateLayoutDerived:Nf}=p4({backgroundRatio:{normal:2039/1e3,portrait:1242/2208},mainSizesMap:{desktop:{width:1422,height:800},tablet:{width:1e3,height:1e3},landscape:{width:1600,height:900},portrait:{width:800,height:1422}}}),{stateApp:s8}=r8({assets:{}});var Gf,CE;function yr(){if(CE)return Gf;CE=1;function r(e,t,n){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(s);++i<s;)a[i]=e[i+t];return a}return Gf=r,Gf}var zf,EE;function br(){if(EE)return zf;EE=1;function r(e,t){return e===t||e!==e&&t!==t}return zf=r,zf}var Hf,ME;function IE(){if(ME)return Hf;ME=1;var r=typeof Bo=="object"&&Bo&&Bo.Object===Object&&Bo;return Hf=r,Hf}var jf,qE;function ft(){if(qE)return jf;qE=1;var r=IE(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return jf=t,jf}var $f,kE;function In(){if(kE)return $f;kE=1;var r=ft(),e=r.Symbol;return $f=e,$f}var Yf,OE;function a8(){if(OE)return Yf;OE=1;var r=In(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function s(a){var o=t.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=n.call(a);return l&&(o?a[i]=u:delete a[i]),c}return Yf=s,Yf}var Vf,BE;function o8(){if(BE)return Vf;BE=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return Vf=t,Vf}var Xf,LE;function Bt(){if(LE)return Xf;LE=1;var r=In(),e=a8(),t=o8(),n="[object Null]",i="[object Undefined]",s=r?r.toStringTag:void 0;function a(o){return o==null?o===void 0?i:n:s&&s in Object(o)?e(o):t(o)}return Xf=a,Xf}var Kf,FE;function nt(){if(FE)return Kf;FE=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Kf=r,Kf}var Zf,DE;function un(){if(DE)return Zf;DE=1;var r=Bt(),e=nt(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var u=r(o);return u==n||u==i||u==t||u==s}return Zf=a,Zf}var Jf,UE;function Du(){if(UE)return Jf;UE=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return Jf=e,Jf}var Qf,WE;function Lt(){if(WE)return Qf;WE=1;var r=un(),e=Du();function t(n){return n!=null&&e(n.length)&&!r(n)}return Qf=t,Qf}var ed,NE;function ln(){if(NE)return ed;NE=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var s=typeof n;return i=i??r,!!i&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return ed=t,ed}var td,GE;function Ft(){if(GE)return td;GE=1;var r=br(),e=Lt(),t=ln(),n=nt();function i(s,a,o){if(!n(o))return!1;var u=typeof a;return(u=="number"?e(o)&&t(a,o.length):u=="string"&&a in o)?r(o[a],s):!1}return td=i,td}var rd,zE;function Qe(){if(zE)return rd;zE=1;function r(e){return e!=null&&typeof e=="object"}return rd=r,rd}var nd,HE;function xr(){if(HE)return nd;HE=1;var r=Bt(),e=Qe(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return nd=n,nd}var id,jE;function qn(){if(jE)return id;jE=1;var r=nt(),e=xr(),t=NaN,n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(e(l))return t;if(r(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=r(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=l.replace(n,"");var h=s.test(l);return h||a.test(l)?o(l.slice(2),h?2:8):i.test(l)?t:+l}return id=u,id}var sd,$E;function xa(){if($E)return sd;$E=1;var r=qn(),e=1/0,t=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=r(i),i===e||i===-e){var s=i<0?-1:1;return s*t}return i===i?i:0}return sd=n,sd}var ad,YE;function ye(){if(YE)return ad;YE=1;var r=xa();function e(t){var n=r(t),i=n%1;return n===n?i?n-i:n:0}return ad=e,ad}var od,VE;function u8(){if(VE)return od;VE=1;var r=yr(),e=Ft(),t=ye(),n=Math.ceil,i=Math.max;function s(a,o,u){(u?e(a,o,u):o===void 0)?o=1:o=i(t(o),0);var l=a==null?0:a.length;if(!l||o<1)return[];for(var c=0,h=0,d=Array(n(l/o));c<l;)d[h++]=r(a,c,c+=o);return d}return od=s,od}var ud,XE;function l8(){if(XE)return ud;XE=1;function r(e){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var a=e[t];a&&(s[i++]=a)}return s}return ud=r,ud}var ld,KE;function kn(){if(KE)return ld;KE=1;function r(e,t){for(var n=-1,i=t.length,s=e.length;++n<i;)e[s+n]=t[n];return e}return ld=r,ld}var cd,ZE;function c8(){if(ZE)return cd;ZE=1;var r=Bt(),e=Qe(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return cd=n,cd}var hd,JE;function cs(){if(JE)return hd;JE=1;var r=c8(),e=Qe(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,s=r((function(){return arguments})())?r:function(a){return e(a)&&n.call(a,"callee")&&!i.call(a,"callee")};return hd=s,hd}var fd,QE;function _e(){if(QE)return fd;QE=1;var r=Array.isArray;return fd=r,fd}var dd,eM;function h8(){if(eM)return dd;eM=1;var r=In(),e=cs(),t=_e(),n=r?r.isConcatSpreadable:void 0;function i(s){return t(s)||e(s)||!!(n&&s&&s[n])}return dd=i,dd}var pd,tM;function bt(){if(tM)return pd;tM=1;var r=kn(),e=h8();function t(n,i,s,a,o){var u=-1,l=n.length;for(s||(s=e),o||(o=[]);++u<l;){var c=n[u];i>0&&s(c)?i>1?t(c,i-1,s,a,o):r(o,c):a||(o[o.length]=c)}return o}return pd=t,pd}var gd,rM;function sr(){if(rM)return gd;rM=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return gd=r,gd}var md,nM;function f8(){if(nM)return md;nM=1;var r=kn(),e=bt(),t=sr(),n=_e();function i(){var s=arguments.length;if(!s)return[];for(var a=Array(s-1),o=arguments[0],u=s;u--;)a[u-1]=arguments[u];return r(n(o)?t(o):[o],e(a,1))}return md=i,md}var vd,iM;function sM(){if(iM)return vd;iM=1;var r=ft(),e=r["__core-js_shared__"];return vd=e,vd}var _d,aM;function d8(){if(aM)return _d;aM=1;var r=sM(),e=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!e&&e in n}return _d=t,_d}var yd,oM;function uM(){if(oM)return yd;oM=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return yd=t,yd}var bd,lM;function cM(){if(lM)return bd;lM=1;var r=un(),e=d8(),t=nt(),n=uM(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,u=a.toString,l=o.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(d){if(!t(d)||e(d))return!1;var f=r(d)?c:s;return f.test(n(d))}return bd=h,bd}var xd,hM;function p8(){if(hM)return xd;hM=1;function r(e,t){return e==null?void 0:e[t]}return xd=r,xd}var wd,fM;function gi(){if(fM)return wd;fM=1;var r=cM(),e=p8();function t(n,i){var s=e(n,i);return r(s)?s:void 0}return wd=t,wd}var Sd,dM;function Uu(){if(dM)return Sd;dM=1;var r=gi(),e=r(Object,"create");return Sd=e,Sd}var Td,pM;function g8(){if(pM)return Td;pM=1;var r=Uu();function e(){this.__data__=r?r(null):{},this.size=0}return Td=e,Td}var Ad,gM;function m8(){if(gM)return Ad;gM=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Ad=r,Ad}var Rd,mM;function v8(){if(mM)return Rd;mM=1;var r=Uu(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(s){var a=this.__data__;if(r){var o=a[s];return o===e?void 0:o}return n.call(a,s)?a[s]:void 0}return Rd=i,Rd}var Pd,vM;function _8(){if(vM)return Pd;vM=1;var r=Uu(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var s=this.__data__;return r?s[i]!==void 0:t.call(s,i)}return Pd=n,Pd}var Cd,_M;function y8(){if(_M)return Cd;_M=1;var r=Uu(),e="__lodash_hash_undefined__";function t(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=r&&i===void 0?e:i,this}return Cd=t,Cd}var Ed,yM;function b8(){if(yM)return Ed;yM=1;var r=g8(),e=m8(),t=v8(),n=_8(),i=y8();function s(a){var o=-1,u=a==null?0:a.length;for(this.clear();++o<u;){var l=a[o];this.set(l[0],l[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,Ed=s,Ed}var Md,bM;function x8(){if(bM)return Md;bM=1;function r(){this.__data__=[],this.size=0}return Md=r,Md}var Id,xM;function Wu(){if(xM)return Id;xM=1;var r=br();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return Id=e,Id}var qd,wM;function w8(){if(wM)return qd;wM=1;var r=Wu(),e=Array.prototype,t=e.splice;function n(i){var s=this.__data__,a=r(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():t.call(s,a,1),--this.size,!0}return qd=n,qd}var kd,SM;function S8(){if(SM)return kd;SM=1;var r=Wu();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return kd=e,kd}var Od,TM;function T8(){if(TM)return Od;TM=1;var r=Wu();function e(t){return r(this.__data__,t)>-1}return Od=e,Od}var Bd,AM;function A8(){if(AM)return Bd;AM=1;var r=Wu();function e(t,n){var i=this.__data__,s=r(i,t);return s<0?(++this.size,i.push([t,n])):i[s][1]=n,this}return Bd=e,Bd}var Ld,RM;function Nu(){if(RM)return Ld;RM=1;var r=x8(),e=w8(),t=S8(),n=T8(),i=A8();function s(a){var o=-1,u=a==null?0:a.length;for(this.clear();++o<u;){var l=a[o];this.set(l[0],l[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,Ld=s,Ld}var Fd,PM;function Dd(){if(PM)return Fd;PM=1;var r=gi(),e=ft(),t=r(e,"Map");return Fd=t,Fd}var Ud,CM;function R8(){if(CM)return Ud;CM=1;var r=b8(),e=Nu(),t=Dd();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Ud=n,Ud}var Wd,EM;function P8(){if(EM)return Wd;EM=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Wd=r,Wd}var Nd,MM;function Gu(){if(MM)return Nd;MM=1;var r=P8();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Nd=e,Nd}var Gd,IM;function C8(){if(IM)return Gd;IM=1;var r=Gu();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Gd=e,Gd}var zd,qM;function E8(){if(qM)return zd;qM=1;var r=Gu();function e(t){return r(this,t).get(t)}return zd=e,zd}var Hd,kM;function M8(){if(kM)return Hd;kM=1;var r=Gu();function e(t){return r(this,t).has(t)}return Hd=e,Hd}var jd,OM;function I8(){if(OM)return jd;OM=1;var r=Gu();function e(t,n){var i=r(this,t),s=i.size;return i.set(t,n),this.size+=i.size==s?0:1,this}return jd=e,jd}var $d,BM;function Yd(){if(BM)return $d;BM=1;var r=R8(),e=C8(),t=E8(),n=M8(),i=I8();function s(a){var o=-1,u=a==null?0:a.length;for(this.clear();++o<u;){var l=a[o];this.set(l[0],l[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,$d=s,$d}var Vd,LM;function q8(){if(LM)return Vd;LM=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return Vd=e,Vd}var Xd,FM;function k8(){if(FM)return Xd;FM=1;function r(e){return this.__data__.has(e)}return Xd=r,Xd}var Kd,DM;function zu(){if(DM)return Kd;DM=1;var r=Yd(),e=q8(),t=k8();function n(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new r;++s<a;)this.add(i[s])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,Kd=n,Kd}var Zd,UM;function Hu(){if(UM)return Zd;UM=1;function r(e,t,n,i){for(var s=e.length,a=n+(i?1:-1);i?a--:++a<s;)if(t(e[a],a,e))return a;return-1}return Zd=r,Zd}var Jd,WM;function NM(){if(WM)return Jd;WM=1;function r(e){return e!==e}return Jd=r,Jd}var Qd,GM;function O8(){if(GM)return Qd;GM=1;function r(e,t,n){for(var i=n-1,s=e.length;++i<s;)if(e[i]===t)return i;return-1}return Qd=r,Qd}var ep,zM;function hs(){if(zM)return ep;zM=1;var r=Hu(),e=NM(),t=O8();function n(i,s,a){return s===s?t(i,s,a):r(i,e,a)}return ep=n,ep}var tp,HM;function ju(){if(HM)return tp;HM=1;var r=hs();function e(t,n){var i=t==null?0:t.length;return!!i&&r(t,n,0)>-1}return tp=e,tp}var rp,jM;function np(){if(jM)return rp;jM=1;function r(e,t,n){for(var i=-1,s=e==null?0:e.length;++i<s;)if(n(t,e[i]))return!0;return!1}return rp=r,rp}var ip,$M;function et(){if($M)return ip;$M=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,s=Array(i);++n<i;)s[n]=t(e[n],n,e);return s}return ip=r,ip}var sp,YM;function ar(){if(YM)return sp;YM=1;function r(e){return function(t){return e(t)}}return sp=r,sp}var ap,VM;function $u(){if(VM)return ap;VM=1;function r(e,t){return e.has(t)}return ap=r,ap}var op,XM;function wa(){if(XM)return op;XM=1;var r=zu(),e=ju(),t=np(),n=et(),i=ar(),s=$u(),a=200;function o(u,l,c,h){var d=-1,f=e,p=!0,g=u.length,m=[],_=l.length;if(!g)return m;c&&(l=n(l,i(c))),h?(f=t,p=!1):l.length>=a&&(f=s,p=!1,l=new r(l));e:for(;++d<g;){var y=u[d],x=c==null?y:c(y);if(y=h||y!==0?y:0,p&&x===x){for(var b=_;b--;)if(l[b]===x)continue e;m.push(y)}else f(l,x,h)||m.push(y)}return m}return op=o,op}var up,KM;function Dt(){if(KM)return up;KM=1;function r(e){return e}return up=r,up}var lp,ZM;function or(){if(ZM)return lp;ZM=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return lp=r,lp}var cp,JM;function QM(){if(JM)return cp;JM=1;var r=or(),e=Math.max;function t(n,i,s){return i=e(i===void 0?n.length-1:i,0),function(){for(var a=arguments,o=-1,u=e(a.length-i,0),l=Array(u);++o<u;)l[o]=a[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=a[o];return c[i]=s(l),r(n,this,c)}}return cp=t,cp}var hp,eI;function fp(){if(eI)return hp;eI=1;function r(e){return function(){return e}}return hp=r,hp}var dp,tI;function rI(){if(tI)return dp;tI=1;var r=gi(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return dp=e,dp}var pp,nI;function B8(){if(nI)return pp;nI=1;var r=fp(),e=rI(),t=Dt(),n=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:r(s),writable:!0})}:t;return pp=n,pp}var gp,iI;function sI(){if(iI)return gp;iI=1;var r=800,e=16,t=Date.now;function n(i){var s=0,a=0;return function(){var o=t(),u=e-(o-a);if(a=o,u>0){if(++s>=r)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return gp=n,gp}var mp,aI;function vp(){if(aI)return mp;aI=1;var r=B8(),e=sI(),t=e(r);return mp=t,mp}var _p,oI;function ge(){if(oI)return _p;oI=1;var r=Dt(),e=QM(),t=vp();function n(i,s){return t(e(i,s,r),i+"")}return _p=n,_p}var yp,uI;function Ut(){if(uI)return yp;uI=1;var r=Lt(),e=Qe();function t(n){return e(n)&&r(n)}return yp=t,yp}var bp,lI;function L8(){if(lI)return bp;lI=1;var r=wa(),e=bt(),t=ge(),n=Ut(),i=t(function(s,a){return n(s)?r(s,e(a,1,n,!0)):[]});return bp=i,bp}var xp,cI;function F8(){if(cI)return xp;cI=1;var r=Nu();function e(){this.__data__=new r,this.size=0}return xp=e,xp}var wp,hI;function D8(){if(hI)return wp;hI=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return wp=r,wp}var Sp,fI;function U8(){if(fI)return Sp;fI=1;function r(e){return this.__data__.get(e)}return Sp=r,Sp}var Tp,dI;function W8(){if(dI)return Tp;dI=1;function r(e){return this.__data__.has(e)}return Tp=r,Tp}var Ap,pI;function N8(){if(pI)return Ap;pI=1;var r=Nu(),e=Dd(),t=Yd(),n=200;function i(s,a){var o=this.__data__;if(o instanceof r){var u=o.__data__;if(!e||u.length<n-1)return u.push([s,a]),this.size=++o.size,this;o=this.__data__=new t(u)}return o.set(s,a),this.size=o.size,this}return Ap=i,Ap}var Rp,gI;function Yu(){if(gI)return Rp;gI=1;var r=Nu(),e=F8(),t=D8(),n=U8(),i=W8(),s=N8();function a(o){var u=this.__data__=new r(o);this.size=u.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=i,a.prototype.set=s,Rp=a,Rp}var Pp,mI;function Cp(){if(mI)return Pp;mI=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return Pp=r,Pp}var Ep,vI;function _I(){if(vI)return Ep;vI=1;var r=zu(),e=Cp(),t=$u(),n=1,i=2;function s(a,o,u,l,c,h){var d=u&n,f=a.length,p=o.length;if(f!=p&&!(d&&p>f))return!1;var g=h.get(a);if(g&&h.get(o))return g==o;var m=-1,_=!0,y=u&i?new r:void 0;for(h.set(a,o),h.set(o,a);++m<f;){var x=a[m],b=o[m];if(l)var T=d?l(b,x,m,o,a,h):l(x,b,m,a,o,h);if(T!==void 0){if(T)continue;_=!1;break}if(y){if(!e(o,function(S,w){if(!t(y,w)&&(x===S||c(x,S,u,l,h)))return y.push(w)})){_=!1;break}}else if(!(x===b||c(x,b,u,l,h))){_=!1;break}}return h.delete(a),h.delete(o),_}return Ep=s,Ep}var Mp,yI;function bI(){if(yI)return Mp;yI=1;var r=ft(),e=r.Uint8Array;return Mp=e,Mp}var Ip,xI;function qp(){if(xI)return Ip;xI=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,s){n[++t]=[s,i]}),n}return Ip=r,Ip}var kp,wI;function Vu(){if(wI)return kp;wI=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return kp=r,kp}var Op,SI;function G8(){if(SI)return Op;SI=1;var r=In(),e=bI(),t=br(),n=_I(),i=qp(),s=Vu(),a=1,o=2,u="[object Boolean]",l="[object Date]",c="[object Error]",h="[object Map]",d="[object Number]",f="[object RegExp]",p="[object Set]",g="[object String]",m="[object Symbol]",_="[object ArrayBuffer]",y="[object DataView]",x=r?r.prototype:void 0,b=x?x.valueOf:void 0;function T(S,w,M,q,O,k,U){switch(M){case y:if(S.byteLength!=w.byteLength||S.byteOffset!=w.byteOffset)return!1;S=S.buffer,w=w.buffer;case _:return!(S.byteLength!=w.byteLength||!k(new e(S),new e(w)));case u:case l:case d:return t(+S,+w);case c:return S.name==w.name&&S.message==w.message;case f:case g:return S==w+"";case h:var N=i;case p:var Z=q&a;if(N||(N=s),S.size!=w.size&&!Z)return!1;var G=U.get(S);if(G)return G==w;q|=o,U.set(S,w);var A=n(N(S),N(w),q,O,k,U);return U.delete(S),A;case m:if(b)return b.call(S)==b.call(w)}return!1}return Op=T,Op}var Bp,TI;function AI(){if(TI)return Bp;TI=1;var r=kn(),e=_e();function t(n,i,s){var a=i(n);return e(n)?a:r(a,s(n))}return Bp=t,Bp}var Lp,RI;function On(){if(RI)return Lp;RI=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,s=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[s++]=o)}return a}return Lp=r,Lp}var Fp,PI;function Dp(){if(PI)return Fp;PI=1;function r(){return[]}return Fp=r,Fp}var Up,CI;function Wp(){if(CI)return Up;CI=1;var r=On(),e=Dp(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),r(i(a),function(o){return n.call(a,o)}))}:e;return Up=s,Up}var Np,EI;function Gp(){if(EI)return Np;EI=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return Np=r,Np}var Sa={exports:{}},zp,MI;function Hp(){if(MI)return zp;MI=1;function r(){return!1}return zp=r,zp}Sa.exports;var II;function mi(){return II||(II=1,(function(r,e){var t=ft(),n=Hp(),i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,a=s&&s.exports===i,o=a?t.Buffer:void 0,u=o?o.isBuffer:void 0,l=u||n;r.exports=l})(Sa,Sa.exports)),Sa.exports}var jp,qI;function z8(){if(qI)return jp;qI=1;var r=Bt(),e=Du(),t=Qe(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",h="[object Object]",d="[object RegExp]",f="[object Set]",p="[object String]",g="[object WeakMap]",m="[object ArrayBuffer]",_="[object DataView]",y="[object Float32Array]",x="[object Float64Array]",b="[object Int8Array]",T="[object Int16Array]",S="[object Int32Array]",w="[object Uint8Array]",M="[object Uint8ClampedArray]",q="[object Uint16Array]",O="[object Uint32Array]",k={};k[y]=k[x]=k[b]=k[T]=k[S]=k[w]=k[M]=k[q]=k[O]=!0,k[n]=k[i]=k[m]=k[s]=k[_]=k[a]=k[o]=k[u]=k[l]=k[c]=k[h]=k[d]=k[f]=k[p]=k[g]=!1;function U(N){return t(N)&&e(N.length)&&!!k[r(N)]}return jp=U,jp}var Ta={exports:{}};Ta.exports;var kI;function fs(){return kI||(kI=1,(function(r,e){var t=IE(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===n,a=s&&t.process,o=(function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}})();r.exports=o})(Ta,Ta.exports)),Ta.exports}var $p,OI;function ds(){if(OI)return $p;OI=1;var r=z8(),e=ar(),t=fs(),n=t&&t.isTypedArray,i=n?e(n):r;return $p=i,$p}var Yp,BI;function LI(){if(BI)return Yp;BI=1;var r=Gp(),e=cs(),t=_e(),n=mi(),i=ln(),s=ds(),a=Object.prototype,o=a.hasOwnProperty;function u(l,c){var h=t(l),d=!h&&e(l),f=!h&&!d&&n(l),p=!h&&!d&&!f&&s(l),g=h||d||f||p,m=g?r(l.length,String):[],_=m.length;for(var y in l)(c||o.call(l,y))&&!(g&&(y=="length"||f&&(y=="offset"||y=="parent")||p&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||i(y,_)))&&m.push(y);return m}return Yp=u,Yp}var Vp,FI;function Aa(){if(FI)return Vp;FI=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return Vp=e,Vp}var Xp,DI;function UI(){if(DI)return Xp;DI=1;function r(e,t){return function(n){return e(t(n))}}return Xp=r,Xp}var Kp,WI;function H8(){if(WI)return Kp;WI=1;var r=UI(),e=r(Object.keys,Object);return Kp=e,Kp}var Zp,NI;function Jp(){if(NI)return Zp;NI=1;var r=Aa(),e=H8(),t=Object.prototype,n=t.hasOwnProperty;function i(s){if(!r(s))return e(s);var a=[];for(var o in Object(s))n.call(s,o)&&o!="constructor"&&a.push(o);return a}return Zp=i,Zp}var Qp,GI;function dt(){if(GI)return Qp;GI=1;var r=LI(),e=Jp(),t=Lt();function n(i){return t(i)?r(i):e(i)}return Qp=n,Qp}var eg,zI;function HI(){if(zI)return eg;zI=1;var r=AI(),e=Wp(),t=dt();function n(i){return r(i,t,e)}return eg=n,eg}var tg,jI;function j8(){if(jI)return tg;jI=1;var r=HI(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(s,a,o,u,l,c){var h=o&e,d=r(s),f=d.length,p=r(a),g=p.length;if(f!=g&&!h)return!1;for(var m=f;m--;){var _=d[m];if(!(h?_ in a:n.call(a,_)))return!1}var y=c.get(s);if(y&&c.get(a))return y==a;var x=!0;c.set(s,a),c.set(a,s);for(var b=h;++m<f;){_=d[m];var T=s[_],S=a[_];if(u)var w=h?u(S,T,_,a,s,c):u(T,S,_,s,a,c);if(!(w===void 0?T===S||l(T,S,o,u,c):w)){x=!1;break}b||(b=_=="constructor")}if(x&&!b){var M=s.constructor,q=a.constructor;M!=q&&"constructor"in s&&"constructor"in a&&!(typeof M=="function"&&M instanceof M&&typeof q=="function"&&q instanceof q)&&(x=!1)}return c.delete(s),c.delete(a),x}return tg=i,tg}var rg,$I;function $8(){if($I)return rg;$I=1;var r=gi(),e=ft(),t=r(e,"DataView");return rg=t,rg}var ng,YI;function Y8(){if(YI)return ng;YI=1;var r=gi(),e=ft(),t=r(e,"Promise");return ng=t,ng}var ig,VI;function XI(){if(VI)return ig;VI=1;var r=gi(),e=ft(),t=r(e,"Set");return ig=t,ig}var sg,KI;function ZI(){if(KI)return sg;KI=1;var r=gi(),e=ft(),t=r(e,"WeakMap");return sg=t,sg}var ag,JI;function cn(){if(JI)return ag;JI=1;var r=$8(),e=Dd(),t=Y8(),n=XI(),i=ZI(),s=Bt(),a=uM(),o="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",h="[object WeakMap]",d="[object DataView]",f=a(r),p=a(e),g=a(t),m=a(n),_=a(i),y=s;return(r&&y(new r(new ArrayBuffer(1)))!=d||e&&y(new e)!=o||t&&y(t.resolve())!=l||n&&y(new n)!=c||i&&y(new i)!=h)&&(y=function(x){var b=s(x),T=b==u?x.constructor:void 0,S=T?a(T):"";if(S)switch(S){case f:return d;case p:return o;case g:return l;case m:return c;case _:return h}return b}),ag=y,ag}var og,QI;function V8(){if(QI)return og;QI=1;var r=Yu(),e=_I(),t=G8(),n=j8(),i=cn(),s=_e(),a=mi(),o=ds(),u=1,l="[object Arguments]",c="[object Array]",h="[object Object]",d=Object.prototype,f=d.hasOwnProperty;function p(g,m,_,y,x,b){var T=s(g),S=s(m),w=T?c:i(g),M=S?c:i(m);w=w==l?h:w,M=M==l?h:M;var q=w==h,O=M==h,k=w==M;if(k&&a(g)){if(!a(m))return!1;T=!0,q=!1}if(k&&!q)return b||(b=new r),T||o(g)?e(g,m,_,y,x,b):t(g,m,w,_,y,x,b);if(!(_&u)){var U=q&&f.call(g,"__wrapped__"),N=O&&f.call(m,"__wrapped__");if(U||N){var Z=U?g.value():g,G=N?m.value():m;return b||(b=new r),x(Z,G,_,y,b)}}return k?(b||(b=new r),n(g,m,_,y,x,b)):!1}return og=p,og}var ug,eq;function Xu(){if(eq)return ug;eq=1;var r=V8(),e=Qe();function t(n,i,s,a,o){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,s,a,t,o)}return ug=t,ug}var lg,tq;function cg(){if(tq)return lg;tq=1;var r=Yu(),e=Xu(),t=1,n=2;function i(s,a,o,u){var l=o.length,c=l,h=!u;if(s==null)return!c;for(s=Object(s);l--;){var d=o[l];if(h&&d[2]?d[1]!==s[d[0]]:!(d[0]in s))return!1}for(;++l<c;){d=o[l];var f=d[0],p=s[f],g=d[1];if(h&&d[2]){if(p===void 0&&!(f in s))return!1}else{var m=new r;if(u)var _=u(p,g,f,s,a,m);if(!(_===void 0?e(g,p,t|n,u,m):_))return!1}}return!0}return lg=i,lg}var hg,rq;function nq(){if(rq)return hg;rq=1;var r=nt();function e(t){return t===t&&!r(t)}return hg=e,hg}var fg,iq;function dg(){if(iq)return fg;iq=1;var r=nq(),e=dt();function t(n){for(var i=e(n),s=i.length;s--;){var a=i[s],o=n[a];i[s]=[a,o,r(o)]}return i}return fg=t,fg}var pg,sq;function aq(){if(sq)return pg;sq=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return pg=r,pg}var gg,oq;function uq(){if(oq)return gg;oq=1;var r=cg(),e=dg(),t=aq();function n(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(a){return a===i||r(a,i,s)}}return gg=n,gg}var mg,lq;function vg(){if(lq)return mg;lq=1;var r=_e(),e=xr(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,a){if(r(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:n.test(s)||!t.test(s)||a!=null&&s in Object(a)}return mg=i,mg}var _g,cq;function hq(){if(cq)return _g;cq=1;var r=Yd(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],u=s.cache;if(u.has(o))return u.get(o);var l=n.apply(this,a);return s.cache=u.set(o,l)||u,l};return s.cache=new(t.Cache||r),s}return t.Cache=r,_g=t,_g}var yg,fq;function X8(){if(fq)return yg;fq=1;var r=hq(),e=500;function t(n){var i=r(n,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return yg=t,yg}var bg,dq;function pq(){if(dq)return bg;dq=1;var r=X8(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,u,l){s.push(u?l.replace(t,"$1"):o||a)}),s});return bg=n,bg}var xg,gq;function Or(){if(gq)return xg;gq=1;var r=In(),e=et(),t=_e(),n=xr(),i=r?r.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(t(o))return e(o,a)+"";if(n(o))return s?s.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return xg=a,xg}var wg,mq;function Be(){if(mq)return wg;mq=1;var r=Or();function e(t){return t==null?"":r(t)}return wg=e,wg}var Sg,vq;function Bn(){if(vq)return Sg;vq=1;var r=_e(),e=vg(),t=pq(),n=Be();function i(s,a){return r(s)?s:e(s,a)?[s]:t(n(s))}return Sg=i,Sg}var Tg,_q;function Br(){if(_q)return Tg;_q=1;var r=xr();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return Tg=e,Tg}var Ag,yq;function ps(){if(yq)return Ag;yq=1;var r=Bn(),e=Br();function t(n,i){i=r(i,n);for(var s=0,a=i.length;n!=null&&s<a;)n=n[e(i[s++])];return s&&s==a?n:void 0}return Ag=t,Ag}var Rg,bq;function Pg(){if(bq)return Rg;bq=1;var r=ps();function e(t,n,i){var s=t==null?void 0:r(t,n);return s===void 0?i:s}return Rg=e,Rg}var Cg,xq;function K8(){if(xq)return Cg;xq=1;function r(e,t){return e!=null&&t in Object(e)}return Cg=r,Cg}var Eg,wq;function Sq(){if(wq)return Eg;wq=1;var r=Bn(),e=cs(),t=_e(),n=ln(),i=Du(),s=Br();function a(o,u,l){u=r(u,o);for(var c=-1,h=u.length,d=!1;++c<h;){var f=s(u[c]);if(!(d=o!=null&&l(o,f)))break;o=o[f]}return d||++c!=h?d:(h=o==null?0:o.length,!!h&&i(h)&&n(f,h)&&(t(o)||e(o)))}return Eg=a,Eg}var Mg,Tq;function Ig(){if(Tq)return Mg;Tq=1;var r=K8(),e=Sq();function t(n,i){return n!=null&&e(n,i,r)}return Mg=t,Mg}var qg,Aq;function Rq(){if(Aq)return qg;Aq=1;var r=Xu(),e=Pg(),t=Ig(),n=vg(),i=nq(),s=aq(),a=Br(),o=1,u=2;function l(c,h){return n(c)&&i(h)?s(a(c),h):function(d){var f=e(d,c);return f===void 0&&f===h?t(d,c):r(h,f,o|u)}}return qg=l,qg}var kg,Pq;function Og(){if(Pq)return kg;Pq=1;function r(e){return function(t){return t==null?void 0:t[e]}}return kg=r,kg}var Bg,Cq;function Z8(){if(Cq)return Bg;Cq=1;var r=ps();function e(t){return function(n){return r(n,t)}}return Bg=e,Bg}var Lg,Eq;function Mq(){if(Eq)return Lg;Eq=1;var r=Og(),e=Z8(),t=vg(),n=Br();function i(s){return t(s)?r(n(s)):e(s)}return Lg=i,Lg}var Fg,Iq;function he(){if(Iq)return Fg;Iq=1;var r=uq(),e=Rq(),t=Dt(),n=_e(),i=Mq();function s(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?n(a)?e(a[0],a[1]):r(a):i(a)}return Fg=s,Fg}var Dg,qq;function ur(){if(qq)return Dg;qq=1;function r(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return Dg=r,Dg}var Ug,kq;function J8(){if(kq)return Ug;kq=1;var r=wa(),e=bt(),t=he(),n=ge(),i=Ut(),s=ur(),a=n(function(o,u){var l=s(u);return i(l)&&(l=void 0),i(o)?r(o,e(u,1,i,!0),t(l,2)):[]});return Ug=a,Ug}var Wg,Oq;function Q8(){if(Oq)return Wg;Oq=1;var r=wa(),e=bt(),t=ge(),n=Ut(),i=ur(),s=t(function(a,o){var u=i(o);return n(u)&&(u=void 0),n(a)?r(a,e(o,1,n,!0),void 0,u):[]});return Wg=s,Wg}var Ng,Bq;function eX(){if(Bq)return Ng;Bq=1;var r=yr(),e=ye();function t(n,i,s){var a=n==null?0:n.length;return a?(i=s||i===void 0?1:e(i),r(n,i<0?0:i,a)):[]}return Ng=t,Ng}var Gg,Lq;function tX(){if(Lq)return Gg;Lq=1;var r=yr(),e=ye();function t(n,i,s){var a=n==null?0:n.length;return a?(i=s||i===void 0?1:e(i),i=a-i,r(n,0,i<0?0:i)):[]}return Gg=t,Gg}var zg,Fq;function Ku(){if(Fq)return zg;Fq=1;var r=yr();function e(t,n,i,s){for(var a=t.length,o=s?a:-1;(s?o--:++o<a)&&n(t[o],o,t););return i?r(t,s?0:o,s?o+1:a):r(t,s?o+1:0,s?a:o)}return zg=e,zg}var Hg,Dq;function rX(){if(Dq)return Hg;Dq=1;var r=he(),e=Ku();function t(n,i){return n&&n.length?e(n,r(i,3),!0,!0):[]}return Hg=t,Hg}var jg,Uq;function nX(){if(Uq)return jg;Uq=1;var r=he(),e=Ku();function t(n,i){return n&&n.length?e(n,r(i,3),!0):[]}return jg=t,jg}var $g,Wq;function vi(){if(Wq)return $g;Wq=1;function r(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}return $g=r,$g}var Yg,Nq;function Gq(){if(Nq)return Yg;Nq=1;var r=vi(),e=ye(),t=4294967295;function n(i){return i?r(e(i),0,t):0}return Yg=n,Yg}var Vg,zq;function iX(){if(zq)return Vg;zq=1;var r=ye(),e=Gq();function t(n,i,s,a){var o=n.length;for(s=r(s),s<0&&(s=-s>o?0:o+s),a=a===void 0||a>o?o:r(a),a<0&&(a+=o),a=s>a?0:e(a);s<a;)n[s++]=i;return n}return Vg=t,Vg}var Xg,Hq;function sX(){if(Hq)return Xg;Hq=1;var r=iX(),e=Ft();function t(n,i,s,a){var o=n==null?0:n.length;return o?(s&&typeof s!="number"&&e(n,i,s)&&(s=0,a=o),r(n,i,s,a)):[]}return Xg=t,Xg}var Kg,jq;function $q(){if(jq)return Kg;jq=1;var r=Hu(),e=he(),t=ye(),n=Math.max;function i(s,a,o){var u=s==null?0:s.length;if(!u)return-1;var l=o==null?0:t(o);return l<0&&(l=n(u+l,0)),r(s,e(a,3),l)}return Kg=i,Kg}var Zg,Yq;function Vq(){if(Yq)return Zg;Yq=1;var r=Hu(),e=he(),t=ye(),n=Math.max,i=Math.min;function s(a,o,u){var l=a==null?0:a.length;if(!l)return-1;var c=l-1;return u!==void 0&&(c=t(u),c=u<0?n(l+c,0):i(c,l-1)),r(a,e(o,3),c,!0)}return Zg=s,Zg}var Jg,Xq;function Kq(){if(Xq)return Jg;Xq=1;function r(e){return e&&e.length?e[0]:void 0}return Jg=r,Jg}var Qg,Zq;function aX(){return Zq||(Zq=1,Qg=Kq()),Qg}var em,Jq;function Qq(){if(Jq)return em;Jq=1;var r=bt();function e(t){var n=t==null?0:t.length;return n?r(t,1):[]}return em=e,em}var tm,e2;function oX(){if(e2)return tm;e2=1;var r=bt(),e=1/0;function t(n){var i=n==null?0:n.length;return i?r(n,e):[]}return tm=t,tm}var rm,t2;function uX(){if(t2)return rm;t2=1;var r=bt(),e=ye();function t(n,i){var s=n==null?0:n.length;return s?(i=i===void 0?1:e(i),r(n,i)):[]}return rm=t,rm}var nm,r2;function lX(){if(r2)return nm;r2=1;function r(e){for(var t=-1,n=e==null?0:e.length,i={};++t<n;){var s=e[t];i[s[0]]=s[1]}return i}return nm=r,nm}var im,n2;function cX(){if(n2)return im;n2=1;var r=hs(),e=ye(),t=Math.max;function n(i,s,a){var o=i==null?0:i.length;if(!o)return-1;var u=a==null?0:e(a);return u<0&&(u=t(o+u,0)),r(i,s,u)}return im=n,im}var sm,i2;function hX(){if(i2)return sm;i2=1;var r=yr();function e(t){var n=t==null?0:t.length;return n?r(t,0,-1):[]}return sm=e,sm}var am,s2;function om(){if(s2)return am;s2=1;var r=zu(),e=ju(),t=np(),n=et(),i=ar(),s=$u(),a=Math.min;function o(u,l,c){for(var h=c?t:e,d=u[0].length,f=u.length,p=f,g=Array(f),m=1/0,_=[];p--;){var y=u[p];p&&l&&(y=n(y,i(l))),m=a(y.length,m),g[p]=!c&&(l||d>=120&&y.length>=120)?new r(p&&y):void 0}y=u[0];var x=-1,b=g[0];e:for(;++x<d&&_.length<m;){var T=y[x],S=l?l(T):T;if(T=c||T!==0?T:0,!(b?s(b,S):h(_,S,c))){for(p=f;--p;){var w=g[p];if(!(w?s(w,S):h(u[p],S,c)))continue e}b&&b.push(S),_.push(T)}}return _}return am=o,am}var um,a2;function lm(){if(a2)return um;a2=1;var r=Ut();function e(t){return r(t)?t:[]}return um=e,um}var cm,o2;function fX(){if(o2)return cm;o2=1;var r=et(),e=om(),t=ge(),n=lm(),i=t(function(s){var a=r(s,n);return a.length&&a[0]===s[0]?e(a):[]});return cm=i,cm}var hm,u2;function dX(){if(u2)return hm;u2=1;var r=et(),e=om(),t=he(),n=ge(),i=lm(),s=ur(),a=n(function(o){var u=s(o),l=r(o,i);return u===s(l)?u=void 0:l.pop(),l.length&&l[0]===o[0]?e(l,t(u,2)):[]});return hm=a,hm}var fm,l2;function pX(){if(l2)return fm;l2=1;var r=et(),e=om(),t=ge(),n=lm(),i=ur(),s=t(function(a){var o=i(a),u=r(a,n);return o=typeof o=="function"?o:void 0,o&&u.pop(),u.length&&u[0]===a[0]?e(u,void 0,o):[]});return fm=s,fm}var dm,c2;function gX(){if(c2)return dm;c2=1;var r=Array.prototype,e=r.join;function t(n,i){return n==null?"":e.call(n,i)}return dm=t,dm}var pm,h2;function mX(){if(h2)return pm;h2=1;function r(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}return pm=r,pm}var gm,f2;function vX(){if(f2)return gm;f2=1;var r=Hu(),e=NM(),t=mX(),n=ye(),i=Math.max,s=Math.min;function a(o,u,l){var c=o==null?0:o.length;if(!c)return-1;var h=c;return l!==void 0&&(h=n(l),h=h<0?i(c+h,0):s(h,c-1)),u===u?t(o,u,h):r(o,e,h,!0)}return gm=a,gm}var mm,d2;function p2(){if(d2)return mm;d2=1;var r=ln();function e(t,n){var i=t.length;if(i)return n+=n<0?i:0,r(n,i)?t[n]:void 0}return mm=e,mm}var vm,g2;function _X(){if(g2)return vm;g2=1;var r=p2(),e=ye();function t(n,i){return n&&n.length?r(n,e(i)):void 0}return vm=t,vm}var _m,m2;function yX(){if(m2)return _m;m2=1;function r(e,t,n,i){for(var s=n-1,a=e.length;++s<a;)if(i(e[s],t))return s;return-1}return _m=r,_m}var ym,v2;function bm(){if(v2)return ym;v2=1;var r=et(),e=hs(),t=yX(),n=ar(),i=sr(),s=Array.prototype,a=s.splice;function o(u,l,c,h){var d=h?t:e,f=-1,p=l.length,g=u;for(u===l&&(l=i(l)),c&&(g=r(u,n(c)));++f<p;)for(var m=0,_=l[f],y=c?c(_):_;(m=d(g,y,m,h))>-1;)g!==u&&a.call(g,m,1),a.call(u,m,1);return u}return ym=o,ym}var xm,_2;function y2(){if(_2)return xm;_2=1;var r=bm();function e(t,n){return t&&t.length&&n&&n.length?r(t,n):t}return xm=e,xm}var wm,b2;function bX(){if(b2)return wm;b2=1;var r=ge(),e=y2(),t=r(e);return wm=t,wm}var Sm,x2;function xX(){if(x2)return Sm;x2=1;var r=he(),e=bm();function t(n,i,s){return n&&n.length&&i&&i.length?e(n,i,r(s,2)):n}return Sm=t,Sm}var Tm,w2;function wX(){if(w2)return Tm;w2=1;var r=bm();function e(t,n,i){return t&&t.length&&n&&n.length?r(t,n,void 0,i):t}return Tm=e,Tm}var Am,S2;function Rm(){if(S2)return Am;S2=1;var r=Pg();function e(t,n){for(var i=-1,s=n.length,a=Array(s),o=t==null;++i<s;)a[i]=o?void 0:r(t,n[i]);return a}return Am=e,Am}var Pm,T2;function A2(){if(T2)return Pm;T2=1;var r=ps(),e=yr();function t(n,i){return i.length<2?n:r(n,e(i,0,-1))}return Pm=t,Pm}var Cm,R2;function Em(){if(R2)return Cm;R2=1;var r=Bn(),e=ur(),t=A2(),n=Br();function i(s,a){return a=r(a,s),s=t(s,a),s==null||delete s[n(e(a))]}return Cm=i,Cm}var Mm,P2;function C2(){if(P2)return Mm;P2=1;var r=Em(),e=ln(),t=Array.prototype,n=t.splice;function i(s,a){for(var o=s?a.length:0,u=o-1;o--;){var l=a[o];if(o==u||l!==c){var c=l;e(l)?n.call(s,l,1):r(s,l)}}return s}return Mm=i,Mm}var Im,E2;function M2(){if(E2)return Im;E2=1;var r=xr();function e(t,n){if(t!==n){var i=t!==void 0,s=t===null,a=t===t,o=r(t),u=n!==void 0,l=n===null,c=n===n,h=r(n);if(!l&&!h&&!o&&t>n||o&&u&&c&&!l&&!h||s&&u&&c||!i&&c||!a)return 1;if(!s&&!o&&!h&&t<n||h&&i&&a&&!s&&!o||l&&i&&a||!u&&a||!c)return-1}return 0}return Im=e,Im}var qm,I2;function hn(){if(I2)return qm;I2=1;var r=Qq(),e=QM(),t=vp();function n(i){return t(e(i,void 0,r),i+"")}return qm=n,qm}var km,q2;function SX(){if(q2)return km;q2=1;var r=et(),e=Rm(),t=C2(),n=M2(),i=hn(),s=ln(),a=i(function(o,u){var l=o==null?0:o.length,c=e(o,u);return t(o,r(u,function(h){return s(h,l)?+h:h}).sort(n)),c});return km=a,km}var Om,k2;function TX(){if(k2)return Om;k2=1;var r=he(),e=C2();function t(n,i){var s=[];if(!(n&&n.length))return s;var a=-1,o=[],u=n.length;for(i=r(i,3);++a<u;){var l=n[a];i(l,a,n)&&(s.push(l),o.push(a))}return e(n,o),s}return Om=t,Om}var Bm,O2;function B2(){if(O2)return Bm;O2=1;var r=Array.prototype,e=r.reverse;function t(n){return n==null?n:e.call(n)}return Bm=t,Bm}var Lm,L2;function AX(){if(L2)return Lm;L2=1;var r=yr(),e=Ft(),t=ye();function n(i,s,a){var o=i==null?0:i.length;return o?(a&&typeof a!="number"&&e(i,s,a)?(s=0,a=o):(s=s==null?0:t(s),a=a===void 0?o:t(a)),r(i,s,a)):[]}return Lm=n,Lm}var Fm,F2;function Dm(){if(F2)return Fm;F2=1;var r=xr(),e=4294967295,t=e-1,n=Math.floor,i=Math.min;function s(a,o,u,l){o=u(o);for(var c=0,h=a==null?0:a.length,d=o!==o,f=o===null,p=r(o),g=o===void 0;c<h;){var m=n((c+h)/2),_=u(a[m]),y=_!==void 0,x=_===null,b=_===_,T=r(_);if(d)var S=l||b;else g?S=b&&(l||y):f?S=b&&y&&(l||!x):p?S=b&&y&&!x&&(l||!T):x||T?S=!1:S=l?_<=o:_<o;S?c=m+1:h=m}return i(h,t)}return Fm=s,Fm}var Um,D2;function Zu(){if(D2)return Um;D2=1;var r=Dm(),e=Dt(),t=xr(),n=4294967295,i=n>>>1;function s(a,o,u){var l=0,c=a==null?l:a.length;if(typeof o=="number"&&o===o&&c<=i){for(;l<c;){var h=l+c>>>1,d=a[h];d!==null&&!t(d)&&(u?d<=o:d<o)?l=h+1:c=h}return c}return r(a,o,e,u)}return Um=s,Um}var Wm,U2;function RX(){if(U2)return Wm;U2=1;var r=Zu();function e(t,n){return r(t,n)}return Wm=e,Wm}var Nm,W2;function PX(){if(W2)return Nm;W2=1;var r=he(),e=Dm();function t(n,i,s){return e(n,i,r(s,2))}return Nm=t,Nm}var Gm,N2;function CX(){if(N2)return Gm;N2=1;var r=Zu(),e=br();function t(n,i){var s=n==null?0:n.length;if(s){var a=r(n,i);if(a<s&&e(n[a],i))return a}return-1}return Gm=t,Gm}var zm,G2;function EX(){if(G2)return zm;G2=1;var r=Zu();function e(t,n){return r(t,n,!0)}return zm=e,zm}var Hm,z2;function MX(){if(z2)return Hm;z2=1;var r=he(),e=Dm();function t(n,i,s){return e(n,i,r(s,2),!0)}return Hm=t,Hm}var jm,H2;function IX(){if(H2)return jm;H2=1;var r=Zu(),e=br();function t(n,i){var s=n==null?0:n.length;if(s){var a=r(n,i,!0)-1;if(e(n[a],i))return a}return-1}return jm=t,jm}var $m,j2;function $2(){if(j2)return $m;j2=1;var r=br();function e(t,n){for(var i=-1,s=t.length,a=0,o=[];++i<s;){var u=t[i],l=n?n(u):u;if(!i||!r(l,c)){var c=l;o[a++]=u===0?0:u}}return o}return $m=e,$m}var Ym,Y2;function qX(){if(Y2)return Ym;Y2=1;var r=$2();function e(t){return t&&t.length?r(t):[]}return Ym=e,Ym}var Vm,V2;function kX(){if(V2)return Vm;V2=1;var r=he(),e=$2();function t(n,i){return n&&n.length?e(n,r(i,2)):[]}return Vm=t,Vm}var Xm,X2;function OX(){if(X2)return Xm;X2=1;var r=yr();function e(t){var n=t==null?0:t.length;return n?r(t,1,n):[]}return Xm=e,Xm}var Km,K2;function BX(){if(K2)return Km;K2=1;var r=yr(),e=ye();function t(n,i,s){return n&&n.length?(i=s||i===void 0?1:e(i),r(n,0,i<0?0:i)):[]}return Km=t,Km}var Zm,Z2;function LX(){if(Z2)return Zm;Z2=1;var r=yr(),e=ye();function t(n,i,s){var a=n==null?0:n.length;return a?(i=s||i===void 0?1:e(i),i=a-i,r(n,i<0?0:i,a)):[]}return Zm=t,Zm}var Jm,J2;function FX(){if(J2)return Jm;J2=1;var r=he(),e=Ku();function t(n,i){return n&&n.length?e(n,r(i,3),!1,!0):[]}return Jm=t,Jm}var Qm,Q2;function DX(){if(Q2)return Qm;Q2=1;var r=he(),e=Ku();function t(n,i){return n&&n.length?e(n,r(i,3)):[]}return Qm=t,Qm}var ev,ek;function tv(){if(ek)return ev;ek=1;function r(){}return ev=r,ev}var rv,tk;function UX(){if(tk)return rv;tk=1;var r=XI(),e=tv(),t=Vu(),n=1/0,i=r&&1/t(new r([,-0]))[1]==n?function(s){return new r(s)}:e;return rv=i,rv}var nv,rk;function _i(){if(rk)return nv;rk=1;var r=zu(),e=ju(),t=np(),n=$u(),i=UX(),s=Vu(),a=200;function o(u,l,c){var h=-1,d=e,f=u.length,p=!0,g=[],m=g;if(c)p=!1,d=t;else if(f>=a){var _=l?null:i(u);if(_)return s(_);p=!1,d=n,m=new r}else m=l?[]:g;e:for(;++h<f;){var y=u[h],x=l?l(y):y;if(y=c||y!==0?y:0,p&&x===x){for(var b=m.length;b--;)if(m[b]===x)continue e;l&&m.push(x),g.push(y)}else d(m,x,c)||(m!==g&&m.push(x),g.push(y))}return g}return nv=o,nv}var iv,nk;function WX(){if(nk)return iv;nk=1;var r=bt(),e=ge(),t=_i(),n=Ut(),i=e(function(s){return t(r(s,1,n,!0))});return iv=i,iv}var sv,ik;function NX(){if(ik)return sv;ik=1;var r=bt(),e=he(),t=ge(),n=_i(),i=Ut(),s=ur(),a=t(function(o){var u=s(o);return i(u)&&(u=void 0),n(r(o,1,i,!0),e(u,2))});return sv=a,sv}var av,sk;function GX(){if(sk)return av;sk=1;var r=bt(),e=ge(),t=_i(),n=Ut(),i=ur(),s=e(function(a){var o=i(a);return o=typeof o=="function"?o:void 0,t(r(a,1,n,!0),void 0,o)});return av=s,av}var ov,ak;function zX(){if(ak)return ov;ak=1;var r=_i();function e(t){return t&&t.length?r(t):[]}return ov=e,ov}var uv,ok;function HX(){if(ok)return uv;ok=1;var r=he(),e=_i();function t(n,i){return n&&n.length?e(n,r(i,2)):[]}return uv=t,uv}var lv,uk;function jX(){if(uk)return lv;uk=1;var r=_i();function e(t,n){return n=typeof n=="function"?n:void 0,t&&t.length?r(t,void 0,n):[]}return lv=e,lv}var cv,lk;function hv(){if(lk)return cv;lk=1;var r=On(),e=et(),t=Og(),n=Gp(),i=Ut(),s=Math.max;function a(o){if(!(o&&o.length))return[];var u=0;return o=r(o,function(l){if(i(l))return u=s(l.length,u),!0}),n(u,function(l){return e(o,t(l))})}return cv=a,cv}var fv,ck;function hk(){if(ck)return fv;ck=1;var r=or(),e=et(),t=hv();function n(i,s){if(!(i&&i.length))return[];var a=t(i);return s==null?a:e(a,function(o){return r(s,void 0,o)})}return fv=n,fv}var dv,fk;function $X(){if(fk)return dv;fk=1;var r=wa(),e=ge(),t=Ut(),n=e(function(i,s){return t(i)?r(i,s):[]});return dv=n,dv}var pv,dk;function gv(){if(dk)return pv;dk=1;var r=wa(),e=bt(),t=_i();function n(i,s,a){var o=i.length;if(o<2)return o?t(i[0]):[];for(var u=-1,l=Array(o);++u<o;)for(var c=i[u],h=-1;++h<o;)h!=u&&(l[u]=r(l[u]||c,i[h],s,a));return t(e(l,1),s,a)}return pv=n,pv}var mv,pk;function YX(){if(pk)return mv;pk=1;var r=On(),e=ge(),t=gv(),n=Ut(),i=e(function(s){return t(r(s,n))});return mv=i,mv}var vv,gk;function VX(){if(gk)return vv;gk=1;var r=On(),e=he(),t=ge(),n=gv(),i=Ut(),s=ur(),a=t(function(o){var u=s(o);return i(u)&&(u=void 0),n(r(o,i),e(u,2))});return vv=a,vv}var _v,mk;function XX(){if(mk)return _v;mk=1;var r=On(),e=ge(),t=gv(),n=Ut(),i=ur(),s=e(function(a){var o=i(a);return o=typeof o=="function"?o:void 0,t(r(a,n),void 0,o)});return _v=s,_v}var yv,vk;function KX(){if(vk)return yv;vk=1;var r=ge(),e=hv(),t=r(e);return yv=t,yv}var bv,_k;function fn(){if(_k)return bv;_k=1;var r=rI();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return bv=e,bv}var xv,yk;function Ra(){if(yk)return xv;yk=1;var r=fn(),e=br(),t=Object.prototype,n=t.hasOwnProperty;function i(s,a,o){var u=s[a];(!(n.call(s,a)&&e(u,o))||o===void 0&&!(a in s))&&r(s,a,o)}return xv=i,xv}var wv,bk;function xk(){if(bk)return wv;bk=1;function r(e,t,n){for(var i=-1,s=e.length,a=t.length,o={};++i<s;){var u=i<a?t[i]:void 0;n(o,e[i],u)}return o}return wv=r,wv}var Sv,wk;function ZX(){if(wk)return Sv;wk=1;var r=Ra(),e=xk();function t(n,i){return e(n||[],i||[],r)}return Sv=t,Sv}var Tv,Sk;function Pa(){if(Sk)return Tv;Sk=1;var r=Ra(),e=Bn(),t=ln(),n=nt(),i=Br();function s(a,o,u,l){if(!n(a))return a;o=e(o,a);for(var c=-1,h=o.length,d=h-1,f=a;f!=null&&++c<h;){var p=i(o[c]),g=u;if(c!=d){var m=f[p];g=l?l(m,p,f):void 0,g===void 0&&(g=n(m)?m:t(o[c+1])?[]:{})}r(f,p,g),f=f[p]}return a}return Tv=s,Tv}var Av,Tk;function JX(){if(Tk)return Av;Tk=1;var r=Pa(),e=xk();function t(n,i){return e(n||[],i||[],r)}return Av=t,Av}var Rv,Ak;function QX(){if(Ak)return Rv;Ak=1;var r=ge(),e=hk(),t=r(function(n){var i=n.length,s=i>1?n[i-1]:void 0;return s=typeof s=="function"?(n.pop(),s):void 0,e(n,s)});return Rv=t,Rv}var Pv,Rk;function e9(){return Rk||(Rk=1,Pv={chunk:u8(),compact:l8(),concat:f8(),difference:L8(),differenceBy:J8(),differenceWith:Q8(),drop:eX(),dropRight:tX(),dropRightWhile:rX(),dropWhile:nX(),fill:sX(),findIndex:$q(),findLastIndex:Vq(),first:aX(),flatten:Qq(),flattenDeep:oX(),flattenDepth:uX(),fromPairs:lX(),head:Kq(),indexOf:cX(),initial:hX(),intersection:fX(),intersectionBy:dX(),intersectionWith:pX(),join:gX(),last:ur(),lastIndexOf:vX(),nth:_X(),pull:bX(),pullAll:y2(),pullAllBy:xX(),pullAllWith:wX(),pullAt:SX(),remove:TX(),reverse:B2(),slice:AX(),sortedIndex:RX(),sortedIndexBy:PX(),sortedIndexOf:CX(),sortedLastIndex:EX(),sortedLastIndexBy:MX(),sortedLastIndexOf:IX(),sortedUniq:qX(),sortedUniqBy:kX(),tail:OX(),take:BX(),takeRight:LX(),takeRightWhile:FX(),takeWhile:DX(),union:WX(),unionBy:NX(),unionWith:GX(),uniq:zX(),uniqBy:HX(),uniqWith:jX(),unzip:hv(),unzipWith:hk(),without:$X(),xor:YX(),xorBy:VX(),xorWith:XX(),zip:KX(),zipObject:ZX(),zipObjectDeep:JX(),zipWith:QX()}),Pv}var Cv,Pk;function t9(){if(Pk)return Cv;Pk=1;function r(e,t,n,i){for(var s=-1,a=e==null?0:e.length;++s<a;){var o=e[s];t(i,o,n(o),e)}return i}return Cv=r,Cv}var Ev,Ck;function Ek(){if(Ck)return Ev;Ck=1;function r(e){return function(t,n,i){for(var s=-1,a=Object(t),o=i(t),u=o.length;u--;){var l=o[e?u:++s];if(n(a[l],l,a)===!1)break}return t}}return Ev=r,Ev}var Mv,Mk;function Iv(){if(Mk)return Mv;Mk=1;var r=Ek(),e=r();return Mv=e,Mv}var qv,Ik;function Ln(){if(Ik)return qv;Ik=1;var r=Iv(),e=dt();function t(n,i){return n&&r(n,i,e)}return qv=t,qv}var kv,qk;function kk(){if(qk)return kv;qk=1;var r=Lt();function e(t,n){return function(i,s){if(i==null)return i;if(!r(i))return t(i,s);for(var a=i.length,o=n?a:-1,u=Object(i);(n?o--:++o<a)&&s(u[o],o,u)!==!1;);return i}}return kv=e,kv}var Ov,Ok;function Fn(){if(Ok)return Ov;Ok=1;var r=Ln(),e=kk(),t=e(r);return Ov=t,Ov}var Bv,Bk;function r9(){if(Bk)return Bv;Bk=1;var r=Fn();function e(t,n,i,s){return r(t,function(a,o,u){n(s,a,i(a),u)}),s}return Bv=e,Bv}var Lv,Lk;function Ju(){if(Lk)return Lv;Lk=1;var r=t9(),e=r9(),t=he(),n=_e();function i(s,a){return function(o,u){var l=n(o)?r:e,c=a?a():{};return l(o,s,t(u,2),c)}}return Lv=i,Lv}var Fv,Fk;function n9(){if(Fk)return Fv;Fk=1;var r=fn(),e=Ju(),t=Object.prototype,n=t.hasOwnProperty,i=e(function(s,a,o){n.call(s,o)?++s[o]:r(s,o,1)});return Fv=i,Fv}var Dv,Dk;function yi(){if(Dk)return Dv;Dk=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return Dv=r,Dv}var Uv,Uk;function Lr(){if(Uk)return Uv;Uk=1;var r=Dt();function e(t){return typeof t=="function"?t:r}return Uv=e,Uv}var Wv,Wk;function Nk(){if(Wk)return Wv;Wk=1;var r=yi(),e=Fn(),t=Lr(),n=_e();function i(s,a){var o=n(s)?r:e;return o(s,t(a))}return Wv=i,Wv}var Nv,Gk;function i9(){return Gk||(Gk=1,Nv=Nk()),Nv}var Gv,zk;function s9(){if(zk)return Gv;zk=1;function r(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}return Gv=r,Gv}var zv,Hk;function jk(){if(Hk)return zv;Hk=1;var r=Ek(),e=r(!0);return zv=e,zv}var Hv,$k;function jv(){if($k)return Hv;$k=1;var r=jk(),e=dt();function t(n,i){return n&&r(n,i,e)}return Hv=t,Hv}var $v,Yk;function Vk(){if(Yk)return $v;Yk=1;var r=jv(),e=kk(),t=e(r,!0);return $v=t,$v}var Yv,Xk;function Kk(){if(Xk)return Yv;Xk=1;var r=s9(),e=Vk(),t=Lr(),n=_e();function i(s,a){var o=n(s)?r:e;return o(s,t(a))}return Yv=i,Yv}var Vv,Zk;function a9(){return Zk||(Zk=1,Vv=Kk()),Vv}var Xv,Jk;function Qk(){if(Jk)return Xv;Jk=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}return Xv=r,Xv}var Kv,eO;function o9(){if(eO)return Kv;eO=1;var r=Fn();function e(t,n){var i=!0;return r(t,function(s,a,o){return i=!!n(s,a,o),i}),i}return Kv=e,Kv}var Zv,tO;function u9(){if(tO)return Zv;tO=1;var r=Qk(),e=o9(),t=he(),n=_e(),i=Ft();function s(a,o,u){var l=n(a)?r:e;return u&&i(a,o,u)&&(o=void 0),l(a,t(o,3))}return Zv=s,Zv}var Jv,rO;function nO(){if(rO)return Jv;rO=1;var r=Fn();function e(t,n){var i=[];return r(t,function(s,a,o){n(s,a,o)&&i.push(s)}),i}return Jv=e,Jv}var Qv,iO;function l9(){if(iO)return Qv;iO=1;var r=On(),e=nO(),t=he(),n=_e();function i(s,a){var o=n(s)?r:e;return o(s,t(a,3))}return Qv=i,Qv}var e_,sO;function aO(){if(sO)return e_;sO=1;var r=he(),e=Lt(),t=dt();function n(i){return function(s,a,o){var u=Object(s);if(!e(s)){var l=r(a,3);s=t(s),a=function(h){return l(u[h],h,u)}}var c=i(s,a,o);return c>-1?u[l?s[c]:c]:void 0}}return e_=n,e_}var t_,oO;function c9(){if(oO)return t_;oO=1;var r=aO(),e=$q(),t=r(e);return t_=t,t_}var r_,uO;function h9(){if(uO)return r_;uO=1;var r=aO(),e=Vq(),t=r(e);return r_=t,r_}var n_,lO;function cO(){if(lO)return n_;lO=1;var r=Fn(),e=Lt();function t(n,i){var s=-1,a=e(n)?Array(n.length):[];return r(n,function(o,u,l){a[++s]=i(o,u,l)}),a}return n_=t,n_}var i_,hO;function Qu(){if(hO)return i_;hO=1;var r=et(),e=he(),t=cO(),n=_e();function i(s,a){var o=n(s)?r:t;return o(s,e(a,3))}return i_=i,i_}var s_,fO;function f9(){if(fO)return s_;fO=1;var r=bt(),e=Qu();function t(n,i){return r(e(n,i),1)}return s_=t,s_}var a_,dO;function d9(){if(dO)return a_;dO=1;var r=bt(),e=Qu(),t=1/0;function n(i,s){return r(e(i,s),t)}return a_=n,a_}var o_,pO;function p9(){if(pO)return o_;pO=1;var r=bt(),e=Qu(),t=ye();function n(i,s,a){return a=a===void 0?1:t(a),r(e(i,s),a)}return o_=n,o_}var u_,gO;function g9(){if(gO)return u_;gO=1;var r=fn(),e=Ju(),t=Object.prototype,n=t.hasOwnProperty,i=e(function(s,a,o){n.call(s,o)?s[o].push(a):r(s,o,[a])});return u_=i,u_}var l_,mO;function el(){if(mO)return l_;mO=1;var r=Bt(),e=_e(),t=Qe(),n="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&r(s)==n}return l_=i,l_}var c_,vO;function h_(){if(vO)return c_;vO=1;var r=et();function e(t,n){return r(n,function(i){return t[i]})}return c_=e,c_}var f_,_O;function gs(){if(_O)return f_;_O=1;var r=h_(),e=dt();function t(n){return n==null?[]:r(n,e(n))}return f_=t,f_}var d_,yO;function m9(){if(yO)return d_;yO=1;var r=hs(),e=Lt(),t=el(),n=ye(),i=gs(),s=Math.max;function a(o,u,l,c){o=e(o)?o:i(o),l=l&&!c?n(l):0;var h=o.length;return l<0&&(l=s(h+l,0)),t(o)?l<=h&&o.indexOf(u,l)>-1:!!h&&r(o,u,l)>-1}return d_=a,d_}var p_,bO;function Ca(){if(bO)return p_;bO=1;var r=or(),e=Bn(),t=ur(),n=A2(),i=Br();function s(a,o,u){o=e(o,a),a=n(a,o);var l=a==null?a:a[i(t(o))];return l==null?void 0:r(l,a,u)}return p_=s,p_}var g_,xO;function v9(){if(xO)return g_;xO=1;var r=or(),e=Fn(),t=Ca(),n=ge(),i=Lt(),s=n(function(a,o,u){var l=-1,c=typeof o=="function",h=i(a)?Array(a.length):[];return e(a,function(d){h[++l]=c?r(o,d,u):t(d,o,u)}),h});return g_=s,g_}var m_,wO;function _9(){if(wO)return m_;wO=1;var r=fn(),e=Ju(),t=e(function(n,i,s){r(n,s,i)});return m_=t,m_}var v_,SO;function y9(){if(SO)return v_;SO=1;function r(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}return v_=r,v_}var __,TO;function b9(){if(TO)return __;TO=1;var r=M2();function e(t,n,i){for(var s=-1,a=t.criteria,o=n.criteria,u=a.length,l=i.length;++s<u;){var c=r(a[s],o[s]);if(c){if(s>=l)return c;var h=i[s];return c*(h=="desc"?-1:1)}}return t.index-n.index}return __=e,__}var y_,AO;function RO(){if(AO)return y_;AO=1;var r=et(),e=he(),t=cO(),n=y9(),i=ar(),s=b9(),a=Dt();function o(u,l,c){var h=-1;l=r(l.length?l:[a],i(e));var d=t(u,function(f,p,g){var m=r(l,function(_){return _(f)});return{criteria:m,index:++h,value:f}});return n(d,function(f,p){return s(f,p,c)})}return y_=o,y_}var b_,PO;function x9(){if(PO)return b_;PO=1;var r=RO(),e=_e();function t(n,i,s,a){return n==null?[]:(e(i)||(i=i==null?[]:[i]),s=a?void 0:s,e(s)||(s=s==null?[]:[s]),r(n,i,s))}return b_=t,b_}var x_,CO;function w9(){if(CO)return x_;CO=1;var r=Ju(),e=r(function(t,n,i){t[i?0:1].push(n)},function(){return[[],[]]});return x_=e,x_}var w_,EO;function S_(){if(EO)return w_;EO=1;function r(e,t,n,i){var s=-1,a=e==null?0:e.length;for(i&&a&&(n=e[++s]);++s<a;)n=t(n,e[s],s,e);return n}return w_=r,w_}var T_,MO;function IO(){if(MO)return T_;MO=1;function r(e,t,n,i,s){return s(e,function(a,o,u){n=i?(i=!1,a):t(n,a,o,u)}),n}return T_=r,T_}var A_,qO;function S9(){if(qO)return A_;qO=1;var r=S_(),e=Fn(),t=he(),n=IO(),i=_e();function s(a,o,u){var l=i(a)?r:n,c=arguments.length<3;return l(a,t(o,4),u,c,e)}return A_=s,A_}var R_,kO;function T9(){if(kO)return R_;kO=1;function r(e,t,n,i){var s=e==null?0:e.length;for(i&&s&&(n=e[--s]);s--;)n=t(n,e[s],s,e);return n}return R_=r,R_}var P_,OO;function A9(){if(OO)return P_;OO=1;var r=T9(),e=Vk(),t=he(),n=IO(),i=_e();function s(a,o,u){var l=i(a)?r:n,c=arguments.length<3;return l(a,t(o,4),u,c,e)}return P_=s,P_}var C_,BO;function tl(){if(BO)return C_;BO=1;var r="Expected a function";function e(t){if(typeof t!="function")throw new TypeError(r);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}return C_=e,C_}var E_,LO;function R9(){if(LO)return E_;LO=1;var r=On(),e=nO(),t=he(),n=_e(),i=tl();function s(a,o){var u=n(a)?r:e;return u(a,i(t(o,3)))}return E_=s,E_}var M_,FO;function I_(){if(FO)return M_;FO=1;var r=Math.floor,e=Math.random;function t(n,i){return n+r(e()*(i-n+1))}return M_=t,M_}var q_,DO;function UO(){if(DO)return q_;DO=1;var r=I_();function e(t){var n=t.length;return n?t[r(0,n-1)]:void 0}return q_=e,q_}var k_,WO;function P9(){if(WO)return k_;WO=1;var r=UO(),e=gs();function t(n){return r(e(n))}return k_=t,k_}var O_,NO;function C9(){if(NO)return O_;NO=1;var r=UO(),e=P9(),t=_e();function n(i){var s=t(i)?r:e;return s(i)}return O_=n,O_}var B_,GO;function rl(){if(GO)return B_;GO=1;var r=I_();function e(t,n){var i=-1,s=t.length,a=s-1;for(n=n===void 0?s:n;++i<n;){var o=r(i,a),u=t[o];t[o]=t[i],t[i]=u}return t.length=n,t}return B_=e,B_}var L_,zO;function E9(){if(zO)return L_;zO=1;var r=vi(),e=sr(),t=rl();function n(i,s){return t(e(i),r(s,0,i.length))}return L_=n,L_}var F_,HO;function M9(){if(HO)return F_;HO=1;var r=vi(),e=rl(),t=gs();function n(i,s){var a=t(i);return e(a,r(s,0,a.length))}return F_=n,F_}var D_,jO;function I9(){if(jO)return D_;jO=1;var r=E9(),e=M9(),t=_e(),n=Ft(),i=ye();function s(a,o,u){(u?n(a,o,u):o===void 0)?o=1:o=i(o);var l=t(a)?r:e;return l(a,o)}return D_=s,D_}var U_,$O;function q9(){if($O)return U_;$O=1;var r=sr(),e=rl();function t(n){return e(r(n))}return U_=t,U_}var W_,YO;function k9(){if(YO)return W_;YO=1;var r=rl(),e=gs();function t(n){return r(e(n))}return W_=t,W_}var N_,VO;function O9(){if(VO)return N_;VO=1;var r=q9(),e=k9(),t=_e();function n(i){var s=t(i)?r:e;return s(i)}return N_=n,N_}var G_,XO;function B9(){if(XO)return G_;XO=1;var r=Og(),e=r("length");return G_=e,G_}var z_,KO;function ms(){if(KO)return z_;KO=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,s="\\ufe0e\\ufe0f",a="\\u200d",o=RegExp("["+a+r+i+s+"]");function u(l){return o.test(l)}return z_=u,z_}var H_,ZO;function L9(){if(ZO)return H_;ZO=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,s="\\ufe0e\\ufe0f",a="["+r+"]",o="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+u+")",c="[^"+r+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",p=l+"?",g="["+s+"]?",m="(?:"+f+"(?:"+[c,h,d].join("|")+")"+g+p+")*",_=g+p+m,y="(?:"+[c+o+"?",o,h,d,a].join("|")+")",x=RegExp(u+"(?="+u+")|"+y+_,"g");function b(T){for(var S=x.lastIndex=0;x.test(T);)++S;return S}return H_=b,H_}var j_,JO;function vs(){if(JO)return j_;JO=1;var r=B9(),e=ms(),t=L9();function n(i){return e(i)?t(i):r(i)}return j_=n,j_}var $_,QO;function F9(){if(QO)return $_;QO=1;var r=Jp(),e=cn(),t=Lt(),n=el(),i=vs(),s="[object Map]",a="[object Set]";function o(u){if(u==null)return 0;if(t(u))return n(u)?i(u):u.length;var l=e(u);return l==s||l==a?u.size:r(u).length}return $_=o,$_}var Y_,eB;function D9(){if(eB)return Y_;eB=1;var r=Fn();function e(t,n){var i;return r(t,function(s,a,o){return i=n(s,a,o),!i}),!!i}return Y_=e,Y_}var V_,tB;function U9(){if(tB)return V_;tB=1;var r=Cp(),e=he(),t=D9(),n=_e(),i=Ft();function s(a,o,u){var l=n(a)?r:t;return u&&i(a,o,u)&&(o=void 0),l(a,e(o,3))}return V_=s,V_}var X_,rB;function W9(){if(rB)return X_;rB=1;var r=bt(),e=RO(),t=ge(),n=Ft(),i=t(function(s,a){if(s==null)return[];var o=a.length;return o>1&&n(s,a[0],a[1])?a=[]:o>2&&n(a[0],a[1],a[2])&&(a=[a[0]]),e(s,r(a,1),[])});return X_=i,X_}var K_,nB;function N9(){return nB||(nB=1,K_={countBy:n9(),each:i9(),eachRight:a9(),every:u9(),filter:l9(),find:c9(),findLast:h9(),flatMap:f9(),flatMapDeep:d9(),flatMapDepth:p9(),forEach:Nk(),forEachRight:Kk(),groupBy:g9(),includes:m9(),invokeMap:v9(),keyBy:_9(),map:Qu(),orderBy:x9(),partition:w9(),reduce:S9(),reduceRight:A9(),reject:R9(),sample:C9(),sampleSize:I9(),shuffle:O9(),size:F9(),some:U9(),sortBy:W9()}),K_}var Z_,iB;function sB(){if(iB)return Z_;iB=1;var r=ft(),e=function(){return r.Date.now()};return Z_=e,Z_}var J_,aB;function G9(){return aB||(aB=1,J_={now:sB()}),J_}var Q_,oB;function z9(){if(oB)return Q_;oB=1;var r=ye(),e="Expected a function";function t(n,i){if(typeof i!="function")throw new TypeError(e);return n=r(n),function(){if(--n<1)return i.apply(this,arguments)}}return Q_=t,Q_}var ey,uB;function lB(){if(uB)return ey;uB=1;var r=ZI(),e=r&&new r;return ey=e,ey}var ty,cB;function hB(){if(cB)return ty;cB=1;var r=Dt(),e=lB(),t=e?function(n,i){return e.set(n,i),n}:r;return ty=t,ty}var ry,fB;function _s(){if(fB)return ry;fB=1;var r=nt(),e=Object.create,t=(function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}})();return ry=t,ry}var ny,dB;function nl(){if(dB)return ny;dB=1;var r=_s(),e=nt();function t(n){return function(){var i=arguments;switch(i.length){case 0:return new n;case 1:return new n(i[0]);case 2:return new n(i[0],i[1]);case 3:return new n(i[0],i[1],i[2]);case 4:return new n(i[0],i[1],i[2],i[3]);case 5:return new n(i[0],i[1],i[2],i[3],i[4]);case 6:return new n(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new n(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var s=r(n.prototype),a=n.apply(s,i);return e(a)?a:s}}return ny=t,ny}var iy,pB;function H9(){if(pB)return iy;pB=1;var r=nl(),e=ft(),t=1;function n(i,s,a){var o=s&t,u=r(i);function l(){var c=this&&this!==e&&this instanceof l?u:i;return c.apply(o?a:this,arguments)}return l}return iy=n,iy}var sy,gB;function mB(){if(gB)return sy;gB=1;var r=Math.max;function e(t,n,i,s){for(var a=-1,o=t.length,u=i.length,l=-1,c=n.length,h=r(o-u,0),d=Array(c+h),f=!s;++l<c;)d[l]=n[l];for(;++a<u;)(f||a<o)&&(d[i[a]]=t[a]);for(;h--;)d[l++]=t[a++];return d}return sy=e,sy}var ay,vB;function _B(){if(vB)return ay;vB=1;var r=Math.max;function e(t,n,i,s){for(var a=-1,o=t.length,u=-1,l=i.length,c=-1,h=n.length,d=r(o-l,0),f=Array(d+h),p=!s;++a<d;)f[a]=t[a];for(var g=a;++c<h;)f[g+c]=n[c];for(;++u<l;)(p||a<o)&&(f[g+i[u]]=t[a++]);return f}return ay=e,ay}var oy,yB;function j9(){if(yB)return oy;yB=1;function r(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}return oy=r,oy}var uy,bB;function il(){if(bB)return uy;bB=1;function r(){}return uy=r,uy}var ly,xB;function dn(){if(xB)return ly;xB=1;var r=_s(),e=il(),t=4294967295;function n(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=t,this.__views__=[]}return n.prototype=r(e.prototype),n.prototype.constructor=n,ly=n,ly}var cy,wB;function hy(){if(wB)return cy;wB=1;var r=lB(),e=tv(),t=r?function(n){return r.get(n)}:e;return cy=t,cy}var fy,SB;function TB(){if(SB)return fy;SB=1;var r={};return fy=r,fy}var dy,AB;function RB(){if(AB)return dy;AB=1;var r=TB(),e=Object.prototype,t=e.hasOwnProperty;function n(i){for(var s=i.name+"",a=r[s],o=t.call(r,s)?a.length:0;o--;){var u=a[o],l=u.func;if(l==null||l==i)return u.name}return s}return dy=n,dy}var py,PB;function bi(){if(PB)return py;PB=1;var r=_s(),e=il();function t(n,i){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=void 0}return t.prototype=r(e.prototype),t.prototype.constructor=t,py=t,py}var gy,CB;function EB(){if(CB)return gy;CB=1;var r=dn(),e=bi(),t=sr();function n(i){if(i instanceof r)return i.clone();var s=new e(i.__wrapped__,i.__chain__);return s.__actions__=t(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}return gy=n,gy}var my,MB;function sl(){if(MB)return my;MB=1;var r=dn(),e=bi(),t=il(),n=_e(),i=Qe(),s=EB(),a=Object.prototype,o=a.hasOwnProperty;function u(l){if(i(l)&&!n(l)&&!(l instanceof r)){if(l instanceof e)return l;if(o.call(l,"__wrapped__"))return s(l)}return new e(l)}return u.prototype=t.prototype,u.prototype.constructor=u,my=u,my}var vy,IB;function qB(){if(IB)return vy;IB=1;var r=dn(),e=hy(),t=RB(),n=sl();function i(s){var a=t(s),o=n[a];if(typeof o!="function"||!(a in r.prototype))return!1;if(s===o)return!0;var u=e(o);return!!u&&s===u[0]}return vy=i,vy}var _y,kB;function OB(){if(kB)return _y;kB=1;var r=hB(),e=sI(),t=e(r);return _y=t,_y}var yy,BB;function $9(){if(BB)return yy;BB=1;var r=/\{\n\/\* \[wrapped with (.+)\] \*/,e=/,? & /;function t(n){var i=n.match(r);return i?i[1].split(e):[]}return yy=t,yy}var by,LB;function Y9(){if(LB)return by;LB=1;var r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function e(t,n){var i=n.length;if(!i)return t;var s=i-1;return n[s]=(i>1?"& ":"")+n[s],n=n.join(i>2?", ":" "),t.replace(r,`{
/* [wrapped with `+n+`] */
`)}return by=e,by}var xy,FB;function V9(){if(FB)return xy;FB=1;var r=yi(),e=ju(),t=1,n=2,i=8,s=16,a=32,o=64,u=128,l=256,c=512,h=[["ary",u],["bind",t],["bindKey",n],["curry",i],["curryRight",s],["flip",c],["partial",a],["partialRight",o],["rearg",l]];function d(f,p){return r(h,function(g){var m="_."+g[0];p&g[1]&&!e(f,m)&&f.push(m)}),f.sort()}return xy=d,xy}var wy,DB;function UB(){if(DB)return wy;DB=1;var r=$9(),e=Y9(),t=vp(),n=V9();function i(s,a,o){var u=a+"";return t(s,e(u,n(r(u),o)))}return wy=i,wy}var Sy,WB;function NB(){if(WB)return Sy;WB=1;var r=qB(),e=OB(),t=UB(),n=4,i=8,s=32,a=64;function o(u,l,c,h,d,f,p,g,m,_){var y=l&i,x=y?p:void 0,b=y?void 0:p,T=y?f:void 0,S=y?void 0:f;l|=y?s:a,l&=~(y?a:s),l&n||(l&=-4);var w=[u,l,d,T,x,S,b,g,m,_],M=c.apply(void 0,w);return r(u)&&e(M,w),M.placeholder=h,t(M,u,l)}return Sy=o,Sy}var Ty,GB;function ys(){if(GB)return Ty;GB=1;function r(e){var t=e;return t.placeholder}return Ty=r,Ty}var Ay,zB;function X9(){if(zB)return Ay;zB=1;var r=sr(),e=ln(),t=Math.min;function n(i,s){for(var a=i.length,o=t(s.length,a),u=r(i);o--;){var l=s[o];i[o]=e(l,a)?u[l]:void 0}return i}return Ay=n,Ay}var Ry,HB;function xi(){if(HB)return Ry;HB=1;var r="__lodash_placeholder__";function e(t,n){for(var i=-1,s=t.length,a=0,o=[];++i<s;){var u=t[i];(u===n||u===r)&&(t[i]=r,o[a++]=i)}return o}return Ry=e,Ry}var Py,jB;function Cy(){if(jB)return Py;jB=1;var r=mB(),e=_B(),t=j9(),n=nl(),i=NB(),s=ys(),a=X9(),o=xi(),u=ft(),l=1,c=2,h=8,d=16,f=128,p=512;function g(m,_,y,x,b,T,S,w,M,q){var O=_&f,k=_&l,U=_&c,N=_&(h|d),Z=_&p,G=U?void 0:n(m);function A(){for(var P=arguments.length,C=Array(P),v=P;v--;)C[v]=arguments[v];if(N)var B=s(A),F=t(C,B);if(x&&(C=r(C,x,b,N)),T&&(C=e(C,T,S,N)),P-=F,N&&P<q){var L=o(C,B);return i(m,_,g,A.placeholder,y,C,L,w,M,q-P)}var z=k?y:this,Y=U?z[m]:m;return P=C.length,w?C=a(C,w):Z&&P>1&&C.reverse(),O&&M<P&&(C.length=M),this&&this!==u&&this instanceof A&&(Y=G||n(Y)),Y.apply(z,C)}return A}return Py=g,Py}var Ey,$B;function K9(){if($B)return Ey;$B=1;var r=or(),e=nl(),t=Cy(),n=NB(),i=ys(),s=xi(),a=ft();function o(u,l,c){var h=e(u);function d(){for(var f=arguments.length,p=Array(f),g=f,m=i(d);g--;)p[g]=arguments[g];var _=f<3&&p[0]!==m&&p[f-1]!==m?[]:s(p,m);if(f-=_.length,f<c)return n(u,l,t,d.placeholder,void 0,p,_,void 0,void 0,c-f);var y=this&&this!==a&&this instanceof d?h:u;return r(y,this,p)}return d}return Ey=o,Ey}var My,YB;function Z9(){if(YB)return My;YB=1;var r=or(),e=nl(),t=ft(),n=1;function i(s,a,o,u){var l=a&n,c=e(s);function h(){for(var d=-1,f=arguments.length,p=-1,g=u.length,m=Array(g+f),_=this&&this!==t&&this instanceof h?c:s;++p<g;)m[p]=u[p];for(;f--;)m[p++]=arguments[++d];return r(_,l?o:this,m)}return h}return My=i,My}var Iy,VB;function J9(){if(VB)return Iy;VB=1;var r=mB(),e=_B(),t=xi(),n="__lodash_placeholder__",i=1,s=2,a=4,o=8,u=128,l=256,c=Math.min;function h(d,f){var p=d[1],g=f[1],m=p|g,_=m<(i|s|u),y=g==u&&p==o||g==u&&p==l&&d[7].length<=f[8]||g==(u|l)&&f[7].length<=f[8]&&p==o;if(!(_||y))return d;g&i&&(d[2]=f[2],m|=p&i?0:a);var x=f[3];if(x){var b=d[3];d[3]=b?r(b,x,f[4]):x,d[4]=b?t(d[3],n):f[4]}return x=f[5],x&&(b=d[5],d[5]=b?e(b,x,f[6]):x,d[6]=b?t(d[5],n):f[6]),x=f[7],x&&(d[7]=x),g&u&&(d[8]=d[8]==null?f[8]:c(d[8],f[8])),d[9]==null&&(d[9]=f[9]),d[0]=f[0],d[1]=m,d}return Iy=h,Iy}var qy,XB;function pn(){if(XB)return qy;XB=1;var r=hB(),e=H9(),t=K9(),n=Cy(),i=Z9(),s=hy(),a=J9(),o=OB(),u=UB(),l=ye(),c="Expected a function",h=1,d=2,f=8,p=16,g=32,m=64,_=Math.max;function y(x,b,T,S,w,M,q,O){var k=b&d;if(!k&&typeof x!="function")throw new TypeError(c);var U=S?S.length:0;if(U||(b&=-97,S=w=void 0),q=q===void 0?q:_(l(q),0),O=O===void 0?O:l(O),U-=w?w.length:0,b&m){var N=S,Z=w;S=w=void 0}var G=k?void 0:s(x),A=[x,b,T,S,w,N,Z,M,q,O];if(G&&a(A,G),x=A[0],b=A[1],T=A[2],S=A[3],w=A[4],O=A[9]=A[9]===void 0?k?0:x.length:_(A[9]-U,0),!O&&b&(f|p)&&(b&=-25),!b||b==h)var P=e(x,b,T);else b==f||b==p?P=t(x,b,O):(b==g||b==(h|g))&&!w.length?P=i(x,b,T,S):P=n.apply(void 0,A);var C=G?r:o;return u(C(P,A),x,b)}return qy=y,qy}var ky,KB;function ZB(){if(KB)return ky;KB=1;var r=pn(),e=128;function t(n,i,s){return i=s?void 0:i,i=n&&i==null?n.length:i,r(n,e,void 0,void 0,void 0,void 0,i)}return ky=t,ky}var Oy,JB;function QB(){if(JB)return Oy;JB=1;var r=ye(),e="Expected a function";function t(n,i){var s;if(typeof i!="function")throw new TypeError(e);return n=r(n),function(){return--n>0&&(s=i.apply(this,arguments)),n<=1&&(i=void 0),s}}return Oy=t,Oy}var By,eL;function tL(){if(eL)return By;eL=1;var r=ge(),e=pn(),t=ys(),n=xi(),i=1,s=32,a=r(function(o,u,l){var c=i;if(l.length){var h=n(l,t(a));c|=s}return e(o,c,u,l,h)});return a.placeholder={},By=a,By}var Ly,rL;function Q9(){if(rL)return Ly;rL=1;var r=ge(),e=pn(),t=ys(),n=xi(),i=1,s=2,a=32,o=r(function(u,l,c){var h=i|s;if(c.length){var d=n(c,t(o));h|=a}return e(l,h,u,c,d)});return o.placeholder={},Ly=o,Ly}var Fy,nL;function e7(){if(nL)return Fy;nL=1;var r=pn(),e=8;function t(n,i,s){i=s?void 0:i;var a=r(n,e,void 0,void 0,void 0,void 0,void 0,i);return a.placeholder=t.placeholder,a}return t.placeholder={},Fy=t,Fy}var Dy,iL;function t7(){if(iL)return Dy;iL=1;var r=pn(),e=16;function t(n,i,s){i=s?void 0:i;var a=r(n,e,void 0,void 0,void 0,void 0,void 0,i);return a.placeholder=t.placeholder,a}return t.placeholder={},Dy=t,Dy}var Uy,sL;function aL(){if(sL)return Uy;sL=1;var r=nt(),e=sB(),t=qn(),n="Expected a function",i=Math.max,s=Math.min;function a(o,u,l){var c,h,d,f,p,g,m=0,_=!1,y=!1,x=!0;if(typeof o!="function")throw new TypeError(n);u=t(u)||0,r(l)&&(_=!!l.leading,y="maxWait"in l,d=y?i(t(l.maxWait)||0,u):d,x="trailing"in l?!!l.trailing:x);function b(N){var Z=c,G=h;return c=h=void 0,m=N,f=o.apply(G,Z),f}function T(N){return m=N,p=setTimeout(M,u),_?b(N):f}function S(N){var Z=N-g,G=N-m,A=u-Z;return y?s(A,d-G):A}function w(N){var Z=N-g,G=N-m;return g===void 0||Z>=u||Z<0||y&&G>=d}function M(){var N=e();if(w(N))return q(N);p=setTimeout(M,S(N))}function q(N){return p=void 0,x&&c?b(N):(c=h=void 0,f)}function O(){p!==void 0&&clearTimeout(p),m=0,c=g=h=p=void 0}function k(){return p===void 0?f:q(e())}function U(){var N=e(),Z=w(N);if(c=arguments,h=this,g=N,Z){if(p===void 0)return T(g);if(y)return clearTimeout(p),p=setTimeout(M,u),b(g)}return p===void 0&&(p=setTimeout(M,u)),f}return U.cancel=O,U.flush=k,U}return Uy=a,Uy}var Wy,oL;function uL(){if(oL)return Wy;oL=1;var r="Expected a function";function e(t,n,i){if(typeof t!="function")throw new TypeError(r);return setTimeout(function(){t.apply(void 0,i)},n)}return Wy=e,Wy}var Ny,lL;function r7(){if(lL)return Ny;lL=1;var r=uL(),e=ge(),t=e(function(n,i){return r(n,1,i)});return Ny=t,Ny}var Gy,cL;function n7(){if(cL)return Gy;cL=1;var r=uL(),e=ge(),t=qn(),n=e(function(i,s,a){return r(i,t(s)||0,a)});return Gy=n,Gy}var zy,hL;function i7(){if(hL)return zy;hL=1;var r=pn(),e=512;function t(n){return r(n,e)}return zy=t,zy}var Hy,fL;function s7(){if(fL)return Hy;fL=1;var r=QB();function e(t){return r(2,t)}return Hy=e,Hy}var jy,dL;function a7(){if(dL)return jy;dL=1;var r=ge(),e=r;return jy=e,jy}var $y,pL;function o7(){if(pL)return $y;pL=1;var r=or(),e=et(),t=bt(),n=he(),i=ge(),s=ar(),a=a7(),o=_e(),u=Math.min,l=a(function(c,h){h=h.length==1&&o(h[0])?e(h[0],s(n)):e(t(h,1),s(n));var d=h.length;return i(function(f){for(var p=-1,g=u(f.length,d);++p<g;)f[p]=h[p].call(this,f[p]);return r(c,this,f)})});return $y=l,$y}var Yy,gL;function mL(){if(gL)return Yy;gL=1;var r=ge(),e=pn(),t=ys(),n=xi(),i=32,s=r(function(a,o){var u=n(o,t(s));return e(a,i,void 0,o,u)});return s.placeholder={},Yy=s,Yy}var Vy,vL;function u7(){if(vL)return Vy;vL=1;var r=ge(),e=pn(),t=ys(),n=xi(),i=64,s=r(function(a,o){var u=n(o,t(s));return e(a,i,void 0,o,u)});return s.placeholder={},Vy=s,Vy}var Xy,_L;function l7(){if(_L)return Xy;_L=1;var r=pn(),e=hn(),t=256,n=e(function(i,s){return r(i,t,void 0,void 0,void 0,s)});return Xy=n,Xy}var Ky,yL;function c7(){if(yL)return Ky;yL=1;var r=ge(),e=ye(),t="Expected a function";function n(i,s){if(typeof i!="function")throw new TypeError(t);return s=s===void 0?s:e(s),r(i,s)}return Ky=n,Ky}var Zy,bL;function Dn(){if(bL)return Zy;bL=1;var r=yr();function e(t,n,i){var s=t.length;return i=i===void 0?s:i,!n&&i>=s?t:r(t,n,i)}return Zy=e,Zy}var Jy,xL;function h7(){if(xL)return Jy;xL=1;var r=or(),e=kn(),t=ge(),n=Dn(),i=ye(),s="Expected a function",a=Math.max;function o(u,l){if(typeof u!="function")throw new TypeError(s);return l=l==null?0:a(i(l),0),t(function(c){var h=c[l],d=n(c,0,l);return h&&e(d,h),r(u,this,d)})}return Jy=o,Jy}var Qy,wL;function f7(){if(wL)return Qy;wL=1;var r=aL(),e=nt(),t="Expected a function";function n(i,s,a){var o=!0,u=!0;if(typeof i!="function")throw new TypeError(t);return e(a)&&(o="leading"in a?!!a.leading:o,u="trailing"in a?!!a.trailing:u),r(i,s,{leading:o,maxWait:s,trailing:u})}return Qy=n,Qy}var eb,SL;function d7(){if(SL)return eb;SL=1;var r=ZB();function e(t){return r(t,1)}return eb=e,eb}var tb,TL;function p7(){if(TL)return tb;TL=1;var r=Lr(),e=mL();function t(n,i){return e(r(i),n)}return tb=t,tb}var rb,AL;function g7(){return AL||(AL=1,rb={after:z9(),ary:ZB(),before:QB(),bind:tL(),bindKey:Q9(),curry:e7(),curryRight:t7(),debounce:aL(),defer:r7(),delay:n7(),flip:i7(),memoize:hq(),negate:tl(),once:s7(),overArgs:o7(),partial:mL(),partialRight:u7(),rearg:l7(),rest:c7(),spread:h7(),throttle:f7(),unary:d7(),wrap:p7()}),rb}var nb,RL;function m7(){if(RL)return nb;RL=1;var r=_e();function e(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}return nb=e,nb}var ib,PL;function Fr(){if(PL)return ib;PL=1;var r=Ra(),e=fn();function t(n,i,s,a){var o=!s;s||(s={});for(var u=-1,l=i.length;++u<l;){var c=i[u],h=a?a(s[c],n[c],c,s,n):void 0;h===void 0&&(h=n[c]),o?e(s,c,h):r(s,c,h)}return s}return ib=t,ib}var sb,CL;function EL(){if(CL)return sb;CL=1;var r=Fr(),e=dt();function t(n,i){return n&&r(i,e(i),n)}return sb=t,sb}var ab,ML;function v7(){if(ML)return ab;ML=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return ab=r,ab}var ob,IL;function _7(){if(IL)return ob;IL=1;var r=nt(),e=Aa(),t=v7(),n=Object.prototype,i=n.hasOwnProperty;function s(a){if(!r(a))return t(a);var o=e(a),u=[];for(var l in a)l=="constructor"&&(o||!i.call(a,l))||u.push(l);return u}return ob=s,ob}var ub,qL;function jt(){if(qL)return ub;qL=1;var r=LI(),e=_7(),t=Lt();function n(i){return t(i)?r(i,!0):e(i)}return ub=n,ub}var lb,kL;function y7(){if(kL)return lb;kL=1;var r=Fr(),e=jt();function t(n,i){return n&&r(i,e(i),n)}return lb=t,lb}var Ea={exports:{}};Ea.exports;var OL;function BL(){return OL||(OL=1,(function(r,e){var t=ft(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===n,a=s?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var h=l.length,d=o?o(h):new l.constructor(h);return l.copy(d),d}r.exports=u})(Ea,Ea.exports)),Ea.exports}var cb,LL;function b7(){if(LL)return cb;LL=1;var r=Fr(),e=Wp();function t(n,i){return r(n,e(n),i)}return cb=t,cb}var hb,FL;function al(){if(FL)return hb;FL=1;var r=UI(),e=r(Object.getPrototypeOf,Object);return hb=e,hb}var fb,DL;function UL(){if(DL)return fb;DL=1;var r=kn(),e=al(),t=Wp(),n=Dp(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var o=[];a;)r(o,t(a)),a=e(a);return o}:n;return fb=s,fb}var db,WL;function x7(){if(WL)return db;WL=1;var r=Fr(),e=UL();function t(n,i){return r(n,e(n),i)}return db=t,db}var pb,NL;function gb(){if(NL)return pb;NL=1;var r=AI(),e=UL(),t=jt();function n(i){return r(i,t,e)}return pb=n,pb}var mb,GL;function w7(){if(GL)return mb;GL=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return mb=t,mb}var vb,zL;function _b(){if(zL)return vb;zL=1;var r=bI();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return vb=e,vb}var yb,HL;function S7(){if(HL)return yb;HL=1;var r=_b();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return yb=e,yb}var bb,jL;function T7(){if(jL)return bb;jL=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return bb=e,bb}var xb,$L;function A7(){if($L)return xb;$L=1;var r=In(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return xb=n,xb}var wb,YL;function VL(){if(YL)return wb;YL=1;var r=_b();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return wb=e,wb}var Sb,XL;function R7(){if(XL)return Sb;XL=1;var r=_b(),e=S7(),t=T7(),n=A7(),i=VL(),s="[object Boolean]",a="[object Date]",o="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",h="[object String]",d="[object Symbol]",f="[object ArrayBuffer]",p="[object DataView]",g="[object Float32Array]",m="[object Float64Array]",_="[object Int8Array]",y="[object Int16Array]",x="[object Int32Array]",b="[object Uint8Array]",T="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]";function M(q,O,k){var U=q.constructor;switch(O){case f:return r(q);case s:case a:return new U(+q);case p:return e(q,k);case g:case m:case _:case y:case x:case b:case T:case S:case w:return i(q,k);case o:return new U;case u:case h:return new U(q);case l:return t(q);case c:return new U;case d:return n(q)}}return Sb=M,Sb}var Tb,KL;function ZL(){if(KL)return Tb;KL=1;var r=_s(),e=al(),t=Aa();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return Tb=n,Tb}var Ab,JL;function P7(){if(JL)return Ab;JL=1;var r=cn(),e=Qe(),t="[object Map]";function n(i){return e(i)&&r(i)==t}return Ab=n,Ab}var Rb,QL;function eF(){if(QL)return Rb;QL=1;var r=P7(),e=ar(),t=fs(),n=t&&t.isMap,i=n?e(n):r;return Rb=i,Rb}var Pb,tF;function C7(){if(tF)return Pb;tF=1;var r=cn(),e=Qe(),t="[object Set]";function n(i){return e(i)&&r(i)==t}return Pb=n,Pb}var Cb,rF;function nF(){if(rF)return Cb;rF=1;var r=C7(),e=ar(),t=fs(),n=t&&t.isSet,i=n?e(n):r;return Cb=i,Cb}var Eb,iF;function gn(){if(iF)return Eb;iF=1;var r=Yu(),e=yi(),t=Ra(),n=EL(),i=y7(),s=BL(),a=sr(),o=b7(),u=x7(),l=HI(),c=gb(),h=cn(),d=w7(),f=R7(),p=ZL(),g=_e(),m=mi(),_=eF(),y=nt(),x=nF(),b=dt(),T=1,S=2,w=4,M="[object Arguments]",q="[object Array]",O="[object Boolean]",k="[object Date]",U="[object Error]",N="[object Function]",Z="[object GeneratorFunction]",G="[object Map]",A="[object Number]",P="[object Object]",C="[object RegExp]",v="[object Set]",B="[object String]",F="[object Symbol]",L="[object WeakMap]",z="[object ArrayBuffer]",Y="[object DataView]",V="[object Float32Array]",we="[object Float64Array]",ve="[object Int8Array]",de="[object Int16Array]",Pe="[object Int32Array]",me="[object Uint8Array]",J="[object Uint8ClampedArray]",ne="[object Uint16Array]",Q="[object Uint32Array]",X={};X[M]=X[q]=X[z]=X[Y]=X[O]=X[k]=X[V]=X[we]=X[ve]=X[de]=X[Pe]=X[G]=X[A]=X[P]=X[C]=X[v]=X[B]=X[F]=X[me]=X[J]=X[ne]=X[Q]=!0,X[U]=X[N]=X[L]=!1;function te(H,Ve,Rt,Gn,_n,Pt){var at,Dr=Ve&T,zn=Ve&S,Ts=Ve&w;if(Rt&&(at=_n?Rt(H,Gn,_n,Pt):Rt(H)),at!==void 0)return at;if(!y(H))return H;var Hn=g(H);if(Hn){if(at=d(H),!Dr)return a(H,at)}else{var Ct=h(H),Si=Ct==N||Ct==Z;if(m(H))return s(H,Dr);if(Ct==P||Ct==M||Si&&!_n){if(at=zn||Si?{}:p(H),!Dr)return zn?u(H,i(at,H)):o(H,n(at,H))}else{if(!X[Ct])return _n?H:{};at=f(H,Ct,Dr)}}Pt||(Pt=new r);var jn=Pt.get(H);if(jn)return jn;Pt.set(H,at),x(H)?H.forEach(function(R){at.add(te(R,Ve,Rt,R,H,Pt))}):_(H)&&H.forEach(function(R,I){at.set(I,te(R,Ve,Rt,I,H,Pt))});var Ur=Ts?zn?c:l:zn?keysIn:b,ja=Hn?void 0:Ur(H);return e(ja||H,function(R,I){ja&&(I=R,R=H[I]),t(at,I,te(R,Ve,Rt,I,H,Pt))}),at}return Eb=te,Eb}var Mb,sF;function E7(){if(sF)return Mb;sF=1;var r=gn(),e=4;function t(n){return r(n,e)}return Mb=t,Mb}var Ib,aF;function M7(){if(aF)return Ib;aF=1;var r=gn(),e=1,t=4;function n(i){return r(i,e|t)}return Ib=n,Ib}var qb,oF;function I7(){if(oF)return qb;oF=1;var r=gn(),e=1,t=4;function n(i,s){return s=typeof s=="function"?s:void 0,r(i,e|t,s)}return qb=n,qb}var kb,uF;function q7(){if(uF)return kb;uF=1;var r=gn(),e=4;function t(n,i){return i=typeof i=="function"?i:void 0,r(n,e,i)}return kb=t,kb}var Ob,lF;function cF(){if(lF)return Ob;lF=1;function r(e,t,n){var i=n.length;if(e==null)return!i;for(e=Object(e);i--;){var s=n[i],a=t[s],o=e[s];if(o===void 0&&!(s in e)||!a(o))return!1}return!0}return Ob=r,Ob}var Bb,hF;function k7(){if(hF)return Bb;hF=1;var r=cF(),e=dt();function t(n,i){return i==null||r(n,i,e(i))}return Bb=t,Bb}var Lb,fF;function Fb(){if(fF)return Lb;fF=1;function r(e,t){return e>t}return Lb=r,Lb}var Db,dF;function ol(){if(dF)return Db;dF=1;var r=qn();function e(t){return function(n,i){return typeof n=="string"&&typeof i=="string"||(n=r(n),i=r(i)),t(n,i)}}return Db=e,Db}var Ub,pF;function O7(){if(pF)return Ub;pF=1;var r=Fb(),e=ol(),t=e(r);return Ub=t,Ub}var Wb,gF;function B7(){if(gF)return Wb;gF=1;var r=ol(),e=r(function(t,n){return t>=n});return Wb=e,Wb}var Nb,mF;function L7(){if(mF)return Nb;mF=1;var r=Bt(),e=Qe(),t="[object ArrayBuffer]";function n(i){return e(i)&&r(i)==t}return Nb=n,Nb}var Gb,vF;function F7(){if(vF)return Gb;vF=1;var r=L7(),e=ar(),t=fs(),n=t&&t.isArrayBuffer,i=n?e(n):r;return Gb=i,Gb}var zb,_F;function D7(){if(_F)return zb;_F=1;var r=Bt(),e=Qe(),t="[object Boolean]";function n(i){return i===!0||i===!1||e(i)&&r(i)==t}return zb=n,zb}var Hb,yF;function U7(){if(yF)return Hb;yF=1;var r=Bt(),e=Qe(),t="[object Date]";function n(i){return e(i)&&r(i)==t}return Hb=n,Hb}var jb,bF;function W7(){if(bF)return jb;bF=1;var r=U7(),e=ar(),t=fs(),n=t&&t.isDate,i=n?e(n):r;return jb=i,jb}var $b,xF;function Ma(){if(xF)return $b;xF=1;var r=Bt(),e=al(),t=Qe(),n="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,u=a.call(Object);function l(c){if(!t(c)||r(c)!=n)return!1;var h=e(c);if(h===null)return!0;var d=o.call(h,"constructor")&&h.constructor;return typeof d=="function"&&d instanceof d&&a.call(d)==u}return $b=l,$b}var Yb,wF;function N7(){if(wF)return Yb;wF=1;var r=Qe(),e=Ma();function t(n){return r(n)&&n.nodeType===1&&!e(n)}return Yb=t,Yb}var Vb,SF;function G7(){if(SF)return Vb;SF=1;var r=Jp(),e=cn(),t=cs(),n=_e(),i=Lt(),s=mi(),a=Aa(),o=ds(),u="[object Map]",l="[object Set]",c=Object.prototype,h=c.hasOwnProperty;function d(f){if(f==null)return!0;if(i(f)&&(n(f)||typeof f=="string"||typeof f.splice=="function"||s(f)||o(f)||t(f)))return!f.length;var p=e(f);if(p==u||p==l)return!f.size;if(a(f))return!r(f).length;for(var g in f)if(h.call(f,g))return!1;return!0}return Vb=d,Vb}var Xb,TF;function z7(){if(TF)return Xb;TF=1;var r=Xu();function e(t,n){return r(t,n)}return Xb=e,Xb}var Kb,AF;function H7(){if(AF)return Kb;AF=1;var r=Xu();function e(t,n,i){i=typeof i=="function"?i:void 0;var s=i?i(t,n):void 0;return s===void 0?r(t,n,void 0,i):!!s}return Kb=e,Kb}var Zb,RF;function Jb(){if(RF)return Zb;RF=1;var r=Bt(),e=Qe(),t=Ma(),n="[object DOMException]",i="[object Error]";function s(a){if(!e(a))return!1;var o=r(a);return o==i||o==n||typeof a.message=="string"&&typeof a.name=="string"&&!t(a)}return Zb=s,Zb}var Qb,PF;function j7(){if(PF)return Qb;PF=1;var r=ft(),e=r.isFinite;function t(n){return typeof n=="number"&&e(n)}return Qb=t,Qb}var ex,CF;function EF(){if(CF)return ex;CF=1;var r=ye();function e(t){return typeof t=="number"&&t==r(t)}return ex=e,ex}var tx,MF;function $7(){if(MF)return tx;MF=1;var r=cg(),e=dg();function t(n,i){return n===i||r(n,i,e(i))}return tx=t,tx}var rx,IF;function Y7(){if(IF)return rx;IF=1;var r=cg(),e=dg();function t(n,i,s){return s=typeof s=="function"?s:void 0,r(n,i,e(i),s)}return rx=t,rx}var nx,qF;function kF(){if(qF)return nx;qF=1;var r=Bt(),e=Qe(),t="[object Number]";function n(i){return typeof i=="number"||e(i)&&r(i)==t}return nx=n,nx}var ix,OF;function V7(){if(OF)return ix;OF=1;var r=kF();function e(t){return r(t)&&t!=+t}return ix=e,ix}var sx,BF;function X7(){if(BF)return sx;BF=1;var r=sM(),e=un(),t=Hp(),n=r?e:t;return sx=n,sx}var ax,LF;function K7(){if(LF)return ax;LF=1;var r=cM(),e=X7(),t="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function n(i){if(e(i))throw new Error(t);return r(i)}return ax=n,ax}var ox,FF;function Z7(){if(FF)return ox;FF=1;function r(e){return e==null}return ox=r,ox}var ux,DF;function J7(){if(DF)return ux;DF=1;function r(e){return e===null}return ux=r,ux}var lx,UF;function Q7(){if(UF)return lx;UF=1;var r=Bt(),e=Qe(),t="[object RegExp]";function n(i){return e(i)&&r(i)==t}return lx=n,lx}var cx,WF;function hx(){if(WF)return cx;WF=1;var r=Q7(),e=ar(),t=fs(),n=t&&t.isRegExp,i=n?e(n):r;return cx=i,cx}var fx,NF;function eK(){if(NF)return fx;NF=1;var r=EF(),e=9007199254740991;function t(n){return r(n)&&n>=-e&&n<=e}return fx=t,fx}var dx,GF;function tK(){if(GF)return dx;GF=1;function r(e){return e===void 0}return dx=r,dx}var px,zF;function rK(){if(zF)return px;zF=1;var r=cn(),e=Qe(),t="[object WeakMap]";function n(i){return e(i)&&r(i)==t}return px=n,px}var gx,HF;function nK(){if(HF)return gx;HF=1;var r=Bt(),e=Qe(),t="[object WeakSet]";function n(i){return e(i)&&r(i)==t}return gx=n,gx}var mx,jF;function vx(){if(jF)return mx;jF=1;function r(e,t){return e<t}return mx=r,mx}var _x,$F;function iK(){if($F)return _x;$F=1;var r=vx(),e=ol(),t=e(r);return _x=t,_x}var yx,YF;function sK(){if(YF)return yx;YF=1;var r=ol(),e=r(function(t,n){return t<=n});return yx=e,yx}var bx,VF;function aK(){if(VF)return bx;VF=1;function r(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}return bx=r,bx}var xx,XF;function oK(){if(XF)return xx;XF=1;function r(e){return e.split("")}return xx=r,xx}var wx,KF;function uK(){if(KF)return wx;KF=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,s="\\ufe0e\\ufe0f",a="["+r+"]",o="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+u+")",c="[^"+r+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",p=l+"?",g="["+s+"]?",m="(?:"+f+"(?:"+[c,h,d].join("|")+")"+g+p+")*",_=g+p+m,y="(?:"+[c+o+"?",o,h,d,a].join("|")+")",x=RegExp(u+"(?="+u+")|"+y+_,"g");function b(T){return T.match(x)||[]}return wx=b,wx}var Sx,ZF;function Un(){if(ZF)return Sx;ZF=1;var r=oK(),e=ms(),t=uK();function n(i){return e(i)?t(i):r(i)}return Sx=n,Sx}var Tx,JF;function QF(){if(JF)return Tx;JF=1;var r=In(),e=sr(),t=cn(),n=Lt(),i=el(),s=aK(),a=qp(),o=Vu(),u=Un(),l=gs(),c="[object Map]",h="[object Set]",d=r?r.iterator:void 0;function f(p){if(!p)return[];if(n(p))return i(p)?u(p):e(p);if(d&&p[d])return s(p[d]());var g=t(p),m=g==c?a:g==h?o:l;return m(p)}return Tx=f,Tx}var Ax,eD;function tD(){if(eD)return Ax;eD=1;var r=Fr(),e=jt();function t(n){return r(n,e(n))}return Ax=t,Ax}var Rx,rD;function lK(){if(rD)return Rx;rD=1;var r=vi(),e=ye(),t=9007199254740991;function n(i){return i?r(e(i),-t,t):i===0?i:0}return Rx=n,Rx}var Px,nD;function cK(){return nD||(nD=1,Px={castArray:m7(),clone:E7(),cloneDeep:M7(),cloneDeepWith:I7(),cloneWith:q7(),conformsTo:k7(),eq:br(),gt:O7(),gte:B7(),isArguments:cs(),isArray:_e(),isArrayBuffer:F7(),isArrayLike:Lt(),isArrayLikeObject:Ut(),isBoolean:D7(),isBuffer:mi(),isDate:W7(),isElement:N7(),isEmpty:G7(),isEqual:z7(),isEqualWith:H7(),isError:Jb(),isFinite:j7(),isFunction:un(),isInteger:EF(),isLength:Du(),isMap:eF(),isMatch:$7(),isMatchWith:Y7(),isNaN:V7(),isNative:K7(),isNil:Z7(),isNull:J7(),isNumber:kF(),isObject:nt(),isObjectLike:Qe(),isPlainObject:Ma(),isRegExp:hx(),isSafeInteger:eK(),isSet:nF(),isString:el(),isSymbol:xr(),isTypedArray:ds(),isUndefined:tK(),isWeakMap:rK(),isWeakSet:nK(),lt:iK(),lte:sK(),toArray:QF(),toFinite:xa(),toInteger:ye(),toLength:Gq(),toNumber:qn(),toPlainObject:tD(),toSafeInteger:lK(),toString:Be()}),Px}var Cx,iD;function hK(){if(iD)return Cx;iD=1;var r=xr(),e=NaN;function t(n){return typeof n=="number"?n:r(n)?e:+n}return Cx=t,Cx}var Ex,sD;function ul(){if(sD)return Ex;sD=1;var r=hK(),e=Or();function t(n,i){return function(s,a){var o;if(s===void 0&&a===void 0)return i;if(s!==void 0&&(o=s),a!==void 0){if(o===void 0)return a;typeof s=="string"||typeof a=="string"?(s=e(s),a=e(a)):(s=r(s),a=r(a)),o=n(s,a)}return o}}return Ex=t,Ex}var Mx,aD;function fK(){if(aD)return Mx;aD=1;var r=ul(),e=r(function(t,n){return t+n},0);return Mx=e,Mx}var Ix,oD;function qx(){if(oD)return Ix;oD=1;var r=ft(),e=ye(),t=qn(),n=Be(),i=r.isFinite,s=Math.min;function a(o){var u=Math[o];return function(l,c){if(l=t(l),c=c==null?0:s(e(c),292),c&&i(l)){var h=(n(l)+"e").split("e"),d=u(h[0]+"e"+(+h[1]+c));return h=(n(d)+"e").split("e"),+(h[0]+"e"+(+h[1]-c))}return u(l)}}return Ix=a,Ix}var kx,uD;function dK(){if(uD)return kx;uD=1;var r=qx(),e=r("ceil");return kx=e,kx}var Ox,lD;function pK(){if(lD)return Ox;lD=1;var r=ul(),e=r(function(t,n){return t/n},1);return Ox=e,Ox}var Bx,cD;function gK(){if(cD)return Bx;cD=1;var r=qx(),e=r("floor");return Bx=e,Bx}var Lx,hD;function ll(){if(hD)return Lx;hD=1;var r=xr();function e(t,n,i){for(var s=-1,a=t.length;++s<a;){var o=t[s],u=n(o);if(u!=null&&(l===void 0?u===u&&!r(u):i(u,l)))var l=u,c=o}return c}return Lx=e,Lx}var Fx,fD;function mK(){if(fD)return Fx;fD=1;var r=ll(),e=Fb(),t=Dt();function n(i){return i&&i.length?r(i,t,e):void 0}return Fx=n,Fx}var Dx,dD;function vK(){if(dD)return Dx;dD=1;var r=ll(),e=Fb(),t=he();function n(i,s){return i&&i.length?r(i,t(s,2),e):void 0}return Dx=n,Dx}var Ux,pD;function Wx(){if(pD)return Ux;pD=1;function r(e,t){for(var n,i=-1,s=e.length;++i<s;){var a=t(e[i]);a!==void 0&&(n=n===void 0?a:n+a)}return n}return Ux=r,Ux}var Nx,gD;function mD(){if(gD)return Nx;gD=1;var r=Wx(),e=NaN;function t(n,i){var s=n==null?0:n.length;return s?r(n,i)/s:e}return Nx=t,Nx}var Gx,vD;function _K(){if(vD)return Gx;vD=1;var r=mD(),e=Dt();function t(n){return r(n,e)}return Gx=t,Gx}var zx,_D;function yK(){if(_D)return zx;_D=1;var r=he(),e=mD();function t(n,i){return e(n,r(i,2))}return zx=t,zx}var Hx,yD;function bK(){if(yD)return Hx;yD=1;var r=ll(),e=vx(),t=Dt();function n(i){return i&&i.length?r(i,t,e):void 0}return Hx=n,Hx}var jx,bD;function xK(){if(bD)return jx;bD=1;var r=ll(),e=he(),t=vx();function n(i,s){return i&&i.length?r(i,e(s,2),t):void 0}return jx=n,jx}var $x,xD;function wK(){if(xD)return $x;xD=1;var r=ul(),e=r(function(t,n){return t*n},1);return $x=e,$x}var Yx,wD;function SK(){if(wD)return Yx;wD=1;var r=qx(),e=r("round");return Yx=e,Yx}var Vx,SD;function TK(){if(SD)return Vx;SD=1;var r=ul(),e=r(function(t,n){return t-n},0);return Vx=e,Vx}var Xx,TD;function AK(){if(TD)return Xx;TD=1;var r=Wx(),e=Dt();function t(n){return n&&n.length?r(n,e):0}return Xx=t,Xx}var Kx,AD;function RK(){if(AD)return Kx;AD=1;var r=he(),e=Wx();function t(n,i){return n&&n.length?e(n,r(i,2)):0}return Kx=t,Kx}var Zx,RD;function PK(){return RD||(RD=1,Zx={add:fK(),ceil:dK(),divide:pK(),floor:gK(),max:mK(),maxBy:vK(),mean:_K(),meanBy:yK(),min:bK(),minBy:xK(),multiply:wK(),round:SK(),subtract:TK(),sum:AK(),sumBy:RK()}),Zx}var Jx,PD;function CK(){if(PD)return Jx;PD=1;var r=vi(),e=qn();function t(n,i,s){return s===void 0&&(s=i,i=void 0),s!==void 0&&(s=e(s),s=s===s?s:0),i!==void 0&&(i=e(i),i=i===i?i:0),r(e(n),i,s)}return Jx=t,Jx}var Qx,CD;function EK(){if(CD)return Qx;CD=1;var r=Math.max,e=Math.min;function t(n,i,s){return n>=e(i,s)&&n<r(i,s)}return Qx=t,Qx}var e0,ED;function MK(){if(ED)return e0;ED=1;var r=EK(),e=xa(),t=qn();function n(i,s,a){return s=e(s),a===void 0?(a=s,s=0):a=e(a),i=t(i),r(i,s,a)}return e0=n,e0}var t0,MD;function IK(){if(MD)return t0;MD=1;var r=I_(),e=Ft(),t=xa(),n=parseFloat,i=Math.min,s=Math.random;function a(o,u,l){if(l&&typeof l!="boolean"&&e(o,u,l)&&(u=l=void 0),l===void 0&&(typeof u=="boolean"?(l=u,u=void 0):typeof o=="boolean"&&(l=o,o=void 0)),o===void 0&&u===void 0?(o=0,u=1):(o=t(o),u===void 0?(u=o,o=0):u=t(u)),o>u){var c=o;o=u,u=c}if(l||o%1||u%1){var h=s();return i(o+h*(u-o+n("1e-"+((h+"").length-1))),u)}return r(o,u)}return t0=a,t0}var r0,ID;function qK(){return ID||(ID=1,r0={clamp:CK(),inRange:MK(),random:IK()}),r0}var n0,qD;function bs(){if(qD)return n0;qD=1;var r=ge(),e=Ft();function t(n){return r(function(i,s){var a=-1,o=s.length,u=o>1?s[o-1]:void 0,l=o>2?s[2]:void 0;for(u=n.length>3&&typeof u=="function"?(o--,u):void 0,l&&e(s[0],s[1],l)&&(u=o<3?void 0:u,o=1),i=Object(i);++a<o;){var c=s[a];c&&n(i,c,a,u)}return i})}return n0=t,n0}var i0,kD;function kK(){if(kD)return i0;kD=1;var r=Ra(),e=Fr(),t=bs(),n=Lt(),i=Aa(),s=dt(),a=Object.prototype,o=a.hasOwnProperty,u=t(function(l,c){if(i(c)||n(c)){e(c,s(c),l);return}for(var h in c)o.call(c,h)&&r(l,h,c[h])});return i0=u,i0}var s0,OD;function BD(){if(OD)return s0;OD=1;var r=Fr(),e=bs(),t=jt(),n=e(function(i,s){r(s,t(s),i)});return s0=n,s0}var a0,LD;function o0(){if(LD)return a0;LD=1;var r=Fr(),e=bs(),t=jt(),n=e(function(i,s,a,o){r(s,t(s),i,o)});return a0=n,a0}var u0,FD;function OK(){if(FD)return u0;FD=1;var r=Fr(),e=bs(),t=dt(),n=e(function(i,s,a,o){r(s,t(s),i,o)});return u0=n,u0}var l0,DD;function BK(){if(DD)return l0;DD=1;var r=Rm(),e=hn(),t=e(r);return l0=t,l0}var c0,UD;function LK(){if(UD)return c0;UD=1;var r=EL(),e=_s();function t(n,i){var s=e(n);return i==null?s:r(s,i)}return c0=t,c0}var h0,WD;function FK(){if(WD)return h0;WD=1;var r=ge(),e=br(),t=Ft(),n=jt(),i=Object.prototype,s=i.hasOwnProperty,a=r(function(o,u){o=Object(o);var l=-1,c=u.length,h=c>2?u[2]:void 0;for(h&&t(u[0],u[1],h)&&(c=1);++l<c;)for(var d=u[l],f=n(d),p=-1,g=f.length;++p<g;){var m=f[p],_=o[m];(_===void 0||e(_,i[m])&&!s.call(o,m))&&(o[m]=d[m])}return o});return h0=a,h0}var f0,ND;function GD(){if(ND)return f0;ND=1;var r=fn(),e=br();function t(n,i,s){(s!==void 0&&!e(n[i],s)||s===void 0&&!(i in n))&&r(n,i,s)}return f0=t,f0}var d0,zD;function HD(){if(zD)return d0;zD=1;function r(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return d0=r,d0}var p0,jD;function DK(){if(jD)return p0;jD=1;var r=GD(),e=BL(),t=VL(),n=sr(),i=ZL(),s=cs(),a=_e(),o=Ut(),u=mi(),l=un(),c=nt(),h=Ma(),d=ds(),f=HD(),p=tD();function g(m,_,y,x,b,T,S){var w=f(m,y),M=f(_,y),q=S.get(M);if(q){r(m,y,q);return}var O=T?T(w,M,y+"",m,_,S):void 0,k=O===void 0;if(k){var U=a(M),N=!U&&u(M),Z=!U&&!N&&d(M);O=M,U||N||Z?a(w)?O=w:o(w)?O=n(w):N?(k=!1,O=e(M,!0)):Z?(k=!1,O=t(M,!0)):O=[]:h(M)||s(M)?(O=w,s(w)?O=p(w):(!c(w)||l(w))&&(O=i(M))):k=!1}k&&(S.set(M,O),b(O,M,x,T,S),S.delete(M)),r(m,y,O)}return p0=g,p0}var g0,$D;function m0(){if($D)return g0;$D=1;var r=Yu(),e=GD(),t=Iv(),n=DK(),i=nt(),s=jt(),a=HD();function o(u,l,c,h,d){u!==l&&t(l,function(f,p){if(d||(d=new r),i(f))n(u,l,p,c,o,h,d);else{var g=h?h(a(u,p),f,p+"",u,l,d):void 0;g===void 0&&(g=f),e(u,p,g)}},s)}return g0=o,g0}var v0,YD;function UK(){if(YD)return v0;YD=1;var r=m0(),e=nt();function t(n,i,s,a,o,u){return e(n)&&e(i)&&(u.set(i,n),r(n,i,void 0,t,u),u.delete(i)),n}return v0=t,v0}var _0,VD;function XD(){if(VD)return _0;VD=1;var r=m0(),e=bs(),t=e(function(n,i,s,a){r(n,i,s,a)});return _0=t,_0}var y0,KD;function WK(){if(KD)return y0;KD=1;var r=or(),e=ge(),t=UK(),n=XD(),i=e(function(s){return s.push(void 0,t),r(n,void 0,s)});return y0=i,y0}var b0,ZD;function NK(){if(ZD)return b0;ZD=1;var r=et();function e(t,n){return r(n,function(i){return[i,t[i]]})}return b0=e,b0}var x0,JD;function GK(){if(JD)return x0;JD=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=[i,i]}),n}return x0=r,x0}var w0,QD;function eU(){if(QD)return w0;QD=1;var r=NK(),e=cn(),t=qp(),n=GK(),i="[object Map]",s="[object Set]";function a(o){return function(u){var l=e(u);return l==i?t(u):l==s?n(u):r(u,o(u))}}return w0=a,w0}var S0,tU;function rU(){if(tU)return S0;tU=1;var r=eU(),e=dt(),t=r(e);return S0=t,S0}var T0,nU;function zK(){return nU||(nU=1,T0=rU()),T0}var A0,iU;function sU(){if(iU)return A0;iU=1;var r=eU(),e=jt(),t=r(e);return A0=t,A0}var R0,aU;function HK(){return aU||(aU=1,R0=sU()),R0}var P0,oU;function jK(){return oU||(oU=1,P0=BD()),P0}var C0,uU;function $K(){return uU||(uU=1,C0=o0()),C0}var E0,lU;function cU(){if(lU)return E0;lU=1;function r(e,t,n){var i;return n(e,function(s,a,o){if(t(s,a,o))return i=a,!1}),i}return E0=r,E0}var M0,hU;function YK(){if(hU)return M0;hU=1;var r=cU(),e=Ln(),t=he();function n(i,s){return r(i,t(s,3),e)}return M0=n,M0}var I0,fU;function VK(){if(fU)return I0;fU=1;var r=cU(),e=jv(),t=he();function n(i,s){return r(i,t(s,3),e)}return I0=n,I0}var q0,dU;function XK(){if(dU)return q0;dU=1;var r=Iv(),e=Lr(),t=jt();function n(i,s){return i==null?i:r(i,e(s),t)}return q0=n,q0}var k0,pU;function KK(){if(pU)return k0;pU=1;var r=jk(),e=Lr(),t=jt();function n(i,s){return i==null?i:r(i,e(s),t)}return k0=n,k0}var O0,gU;function ZK(){if(gU)return O0;gU=1;var r=Ln(),e=Lr();function t(n,i){return n&&r(n,e(i))}return O0=t,O0}var B0,mU;function JK(){if(mU)return B0;mU=1;var r=jv(),e=Lr();function t(n,i){return n&&r(n,e(i))}return B0=t,B0}var L0,vU;function cl(){if(vU)return L0;vU=1;var r=On(),e=un();function t(n,i){return r(i,function(s){return e(n[s])})}return L0=t,L0}var F0,_U;function QK(){if(_U)return F0;_U=1;var r=cl(),e=dt();function t(n){return n==null?[]:r(n,e(n))}return F0=t,F0}var D0,yU;function eZ(){if(yU)return D0;yU=1;var r=cl(),e=jt();function t(n){return n==null?[]:r(n,e(n))}return D0=t,D0}var U0,bU;function tZ(){if(bU)return U0;bU=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n,i){return n!=null&&e.call(n,i)}return U0=t,U0}var W0,xU;function rZ(){if(xU)return W0;xU=1;var r=tZ(),e=Sq();function t(n,i){return n!=null&&e(n,i,r)}return W0=t,W0}var N0,wU;function nZ(){if(wU)return N0;wU=1;var r=Ln();function e(t,n,i,s){return r(t,function(a,o,u){n(s,i(a),o,u)}),s}return N0=e,N0}var G0,SU;function TU(){if(SU)return G0;SU=1;var r=nZ();function e(t,n){return function(i,s){return r(i,t,n(s),{})}}return G0=e,G0}var z0,AU;function iZ(){if(AU)return z0;AU=1;var r=fp(),e=TU(),t=Dt(),n=Object.prototype,i=n.toString,s=e(function(a,o,u){o!=null&&typeof o.toString!="function"&&(o=i.call(o)),a[o]=u},r(t));return z0=s,z0}var H0,RU;function sZ(){if(RU)return H0;RU=1;var r=he(),e=TU(),t=Object.prototype,n=t.hasOwnProperty,i=t.toString,s=e(function(a,o,u){o!=null&&typeof o.toString!="function"&&(o=i.call(o)),n.call(a,o)?a[o].push(u):a[o]=[u]},r);return H0=s,H0}var j0,PU;function aZ(){if(PU)return j0;PU=1;var r=Ca(),e=ge(),t=e(r);return j0=t,j0}var $0,CU;function oZ(){if(CU)return $0;CU=1;var r=fn(),e=Ln(),t=he();function n(i,s){var a={};return s=t(s,3),e(i,function(o,u,l){r(a,s(o,u,l),o)}),a}return $0=n,$0}var Y0,EU;function uZ(){if(EU)return Y0;EU=1;var r=fn(),e=Ln(),t=he();function n(i,s){var a={};return s=t(s,3),e(i,function(o,u,l){r(a,u,s(o,u,l))}),a}return Y0=n,Y0}var V0,MU;function lZ(){if(MU)return V0;MU=1;var r=m0(),e=bs(),t=e(function(n,i,s){r(n,i,s)});return V0=t,V0}var X0,IU;function cZ(){if(IU)return X0;IU=1;var r=Ma();function e(t){return r(t)?void 0:t}return X0=e,X0}var K0,qU;function hZ(){if(qU)return K0;qU=1;var r=et(),e=gn(),t=Em(),n=Bn(),i=Fr(),s=cZ(),a=hn(),o=gb(),u=1,l=2,c=4,h=a(function(d,f){var p={};if(d==null)return p;var g=!1;f=r(f,function(_){return _=n(_,d),g||(g=_.length>1),_}),i(d,o(d),p),g&&(p=e(p,u|l|c,s));for(var m=f.length;m--;)t(p,f[m]);return p});return K0=h,K0}var Z0,kU;function OU(){if(kU)return Z0;kU=1;var r=ps(),e=Pa(),t=Bn();function n(i,s,a){for(var o=-1,u=s.length,l={};++o<u;){var c=s[o],h=r(i,c);a(h,c)&&e(l,t(c,i),h)}return l}return Z0=n,Z0}var J0,BU;function LU(){if(BU)return J0;BU=1;var r=et(),e=he(),t=OU(),n=gb();function i(s,a){if(s==null)return{};var o=r(n(s),function(u){return[u]});return a=e(a),t(s,o,function(u,l){return a(u,l[0])})}return J0=i,J0}var Q0,FU;function fZ(){if(FU)return Q0;FU=1;var r=he(),e=tl(),t=LU();function n(i,s){return t(i,e(r(s)))}return Q0=n,Q0}var e1,DU;function dZ(){if(DU)return e1;DU=1;var r=OU(),e=Ig();function t(n,i){return r(n,i,function(s,a){return e(n,a)})}return e1=t,e1}var t1,UU;function pZ(){if(UU)return t1;UU=1;var r=dZ(),e=hn(),t=e(function(n,i){return n==null?{}:r(n,i)});return t1=t,t1}var r1,WU;function gZ(){if(WU)return r1;WU=1;var r=Bn(),e=un(),t=Br();function n(i,s,a){s=r(s,i);var o=-1,u=s.length;for(u||(u=1,i=void 0);++o<u;){var l=i==null?void 0:i[t(s[o])];l===void 0&&(o=u,l=a),i=e(l)?l.call(i):l}return i}return r1=n,r1}var n1,NU;function mZ(){if(NU)return n1;NU=1;var r=Pa();function e(t,n,i){return t==null?t:r(t,n,i)}return n1=e,n1}var i1,GU;function vZ(){if(GU)return i1;GU=1;var r=Pa();function e(t,n,i,s){return s=typeof s=="function"?s:void 0,t==null?t:r(t,n,i,s)}return i1=e,i1}var s1,zU;function _Z(){if(zU)return s1;zU=1;var r=yi(),e=_s(),t=Ln(),n=he(),i=al(),s=_e(),a=mi(),o=un(),u=nt(),l=ds();function c(h,d,f){var p=s(h),g=p||a(h)||l(h);if(d=n(d,4),f==null){var m=h&&h.constructor;g?f=p?new m:[]:u(h)?f=o(m)?e(i(h)):{}:f={}}return(g?r:t)(h,function(_,y,x){return d(f,_,y,x)}),f}return s1=c,s1}var a1,HU;function yZ(){if(HU)return a1;HU=1;var r=Em();function e(t,n){return t==null?!0:r(t,n)}return a1=e,a1}var o1,jU;function $U(){if(jU)return o1;jU=1;var r=ps(),e=Pa();function t(n,i,s,a){return e(n,i,s(r(n,i)),a)}return o1=t,o1}var u1,YU;function bZ(){if(YU)return u1;YU=1;var r=$U(),e=Lr();function t(n,i,s){return n==null?n:r(n,i,e(s))}return u1=t,u1}var l1,VU;function xZ(){if(VU)return l1;VU=1;var r=$U(),e=Lr();function t(n,i,s,a){return a=typeof a=="function"?a:void 0,n==null?n:r(n,i,e(s),a)}return l1=t,l1}var c1,XU;function wZ(){if(XU)return c1;XU=1;var r=h_(),e=jt();function t(n){return n==null?[]:r(n,e(n))}return c1=t,c1}var h1,KU;function SZ(){return KU||(KU=1,h1={assign:kK(),assignIn:BD(),assignInWith:o0(),assignWith:OK(),at:BK(),create:LK(),defaults:FK(),defaultsDeep:WK(),entries:zK(),entriesIn:HK(),extend:jK(),extendWith:$K(),findKey:YK(),findLastKey:VK(),forIn:XK(),forInRight:KK(),forOwn:ZK(),forOwnRight:JK(),functions:QK(),functionsIn:eZ(),get:Pg(),has:rZ(),hasIn:Ig(),invert:iZ(),invertBy:sZ(),invoke:aZ(),keys:dt(),keysIn:jt(),mapKeys:oZ(),mapValues:uZ(),merge:lZ(),mergeWith:XD(),omit:hZ(),omitBy:fZ(),pick:pZ(),pickBy:LU(),result:gZ(),set:mZ(),setWith:vZ(),toPairs:rU(),toPairsIn:sU(),transform:_Z(),unset:yZ(),update:bZ(),updateWith:xZ(),values:gs(),valuesIn:wZ()}),h1}var f1,ZU;function hl(){if(ZU)return f1;ZU=1;function r(e,t){return t(e)}return f1=r,f1}var d1,JU;function TZ(){if(JU)return d1;JU=1;var r=dn(),e=bi(),t=Rm(),n=hn(),i=ln(),s=hl(),a=n(function(o){var u=o.length,l=u?o[0]:0,c=this.__wrapped__,h=function(d){return t(d,o)};return u>1||this.__actions__.length||!(c instanceof r)||!i(l)?this.thru(h):(c=c.slice(l,+l+(u?1:0)),c.__actions__.push({func:s,args:[h],thisArg:void 0}),new e(c,this.__chain__).thru(function(d){return u&&!d.length&&d.push(void 0),d}))});return d1=a,d1}var p1,QU;function eW(){if(QU)return p1;QU=1;var r=sl();function e(t){var n=r(t);return n.__chain__=!0,n}return p1=e,p1}var g1,tW;function AZ(){if(tW)return g1;tW=1;var r=bi();function e(){return new r(this.value(),this.__chain__)}return g1=e,g1}var m1,rW;function RZ(){if(rW)return m1;rW=1;var r=QF();function e(){this.__values__===void 0&&(this.__values__=r(this.value()));var t=this.__index__>=this.__values__.length,n=t?void 0:this.__values__[this.__index__++];return{done:t,value:n}}return m1=e,m1}var v1,nW;function PZ(){if(nW)return v1;nW=1;var r=il(),e=EB();function t(n){for(var i,s=this;s instanceof r;){var a=e(s);a.__index__=0,a.__values__=void 0,i?o.__wrapped__=a:i=a;var o=a;s=s.__wrapped__}return o.__wrapped__=n,i}return v1=t,v1}var _1,iW;function CZ(){if(iW)return _1;iW=1;var r=dn(),e=bi(),t=B2(),n=hl();function i(){var s=this.__wrapped__;if(s instanceof r){var a=s;return this.__actions__.length&&(a=new r(this)),a=a.reverse(),a.__actions__.push({func:n,args:[t],thisArg:void 0}),new e(a,this.__chain__)}return this.thru(t)}return _1=i,_1}var y1,sW;function EZ(){if(sW)return y1;sW=1;function r(e,t){return t(e),e}return y1=r,y1}var b1,aW;function MZ(){if(aW)return b1;aW=1;function r(){return this}return b1=r,b1}var x1,oW;function uW(){if(oW)return x1;oW=1;var r=dn(),e=kn(),t=S_();function n(i,s){var a=i;return a instanceof r&&(a=a.value()),t(s,function(o,u){return u.func.apply(u.thisArg,e([o],u.args))},a)}return x1=n,x1}var w1,lW;function S1(){if(lW)return w1;lW=1;var r=uW();function e(){return r(this.__wrapped__,this.__actions__)}return w1=e,w1}var T1,cW;function IZ(){return cW||(cW=1,T1=S1()),T1}var A1,hW;function qZ(){return hW||(hW=1,A1=S1()),A1}var R1,fW;function kZ(){if(fW)return R1;fW=1;var r=eW();function e(){return r(this)}return R1=e,R1}var P1,dW;function OZ(){return dW||(dW=1,P1={at:TZ(),chain:eW(),commit:AZ(),lodash:sl(),next:RZ(),plant:PZ(),reverse:CZ(),tap:EZ(),thru:hl(),toIterator:MZ(),toJSON:IZ(),value:S1(),valueOf:qZ(),wrapperChain:kZ()}),P1}var C1,pW;function gW(){if(pW)return C1;pW=1;var r=Dn(),e=ms(),t=Un(),n=Be();function i(s){return function(a){a=n(a);var o=e(a)?t(a):void 0,u=o?o[0]:a.charAt(0),l=o?r(o,1).join(""):a.slice(1);return u[s]()+l}}return C1=i,C1}var E1,mW;function M1(){if(mW)return E1;mW=1;var r=gW(),e=r("toUpperCase");return E1=e,E1}var I1,vW;function _W(){if(vW)return I1;vW=1;var r=Be(),e=M1();function t(n){return e(r(n).toLowerCase())}return I1=t,I1}var q1,yW;function k1(){if(yW)return q1;yW=1;function r(e){return function(t){return e==null?void 0:e[t]}}return q1=r,q1}var O1,bW;function BZ(){if(bW)return O1;bW=1;var r=k1(),e={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},t=r(e);return O1=t,O1}var B1,xW;function wW(){if(xW)return B1;xW=1;var r=BZ(),e=Be(),t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,n="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=n+i+s,o="["+a+"]",u=RegExp(o,"g");function l(c){return c=e(c),c&&c.replace(t,r).replace(u,"")}return B1=l,B1}var L1,SW;function LZ(){if(SW)return L1;SW=1;var r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function e(t){return t.match(r)||[]}return L1=e,L1}var F1,TW;function FZ(){if(TW)return F1;TW=1;var r=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function e(t){return r.test(t)}return F1=e,F1}var D1,AW;function DZ(){if(AW)return D1;AW=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,s="\\u2700-\\u27bf",a="a-z\\xdf-\\xf6\\xf8-\\xff",o="\\xac\\xb1\\xd7\\xf7",u="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",l="\\u2000-\\u206f",c=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",h="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\ufe0e\\ufe0f",f=o+u+l+c,p="[']",g="["+f+"]",m="["+i+"]",_="\\d+",y="["+s+"]",x="["+a+"]",b="[^"+r+f+_+s+a+h+"]",T="\\ud83c[\\udffb-\\udfff]",S="(?:"+m+"|"+T+")",w="[^"+r+"]",M="(?:\\ud83c[\\udde6-\\uddff]){2}",q="[\\ud800-\\udbff][\\udc00-\\udfff]",O="["+h+"]",k="\\u200d",U="(?:"+x+"|"+b+")",N="(?:"+O+"|"+b+")",Z="(?:"+p+"(?:d|ll|m|re|s|t|ve))?",G="(?:"+p+"(?:D|LL|M|RE|S|T|VE))?",A=S+"?",P="["+d+"]?",C="(?:"+k+"(?:"+[w,M,q].join("|")+")"+P+A+")*",v="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",B="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",F=P+A+C,L="(?:"+[y,M,q].join("|")+")"+F,z=RegExp([O+"?"+x+"+"+Z+"(?="+[g,O,"$"].join("|")+")",N+"+"+G+"(?="+[g,O+U,"$"].join("|")+")",O+"?"+U+"+"+Z,O+"+"+G,B,v,_,L].join("|"),"g");function Y(V){return V.match(z)||[]}return D1=Y,D1}var U1,RW;function PW(){if(RW)return U1;RW=1;var r=LZ(),e=FZ(),t=Be(),n=DZ();function i(s,a,o){return s=t(s),a=o?void 0:a,a===void 0?e(s)?n(s):r(s):s.match(a)||[]}return U1=i,U1}var W1,CW;function xs(){if(CW)return W1;CW=1;var r=S_(),e=wW(),t=PW(),n="[']",i=RegExp(n,"g");function s(a){return function(o){return r(t(e(o).replace(i,"")),a,"")}}return W1=s,W1}var N1,EW;function UZ(){if(EW)return N1;EW=1;var r=_W(),e=xs(),t=e(function(n,i,s){return i=i.toLowerCase(),n+(s?r(i):i)});return N1=t,N1}var G1,MW;function WZ(){if(MW)return G1;MW=1;var r=vi(),e=Or(),t=ye(),n=Be();function i(s,a,o){s=n(s),a=e(a);var u=s.length;o=o===void 0?u:r(t(o),0,u);var l=o;return o-=a.length,o>=0&&s.slice(o,l)==a}return G1=i,G1}var z1,IW;function NZ(){if(IW)return z1;IW=1;var r=k1(),e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},t=r(e);return z1=t,z1}var H1,qW;function kW(){if(qW)return H1;qW=1;var r=NZ(),e=Be(),t=/[&<>"']/g,n=RegExp(t.source);function i(s){return s=e(s),s&&n.test(s)?s.replace(t,r):s}return H1=i,H1}var j1,OW;function GZ(){if(OW)return j1;OW=1;var r=Be(),e=/[\\^$.*+?()[\]{}|]/g,t=RegExp(e.source);function n(i){return i=r(i),i&&t.test(i)?i.replace(e,"\\$&"):i}return j1=n,j1}var $1,BW;function zZ(){if(BW)return $1;BW=1;var r=xs(),e=r(function(t,n,i){return t+(i?"-":"")+n.toLowerCase()});return $1=e,$1}var Y1,LW;function HZ(){if(LW)return Y1;LW=1;var r=xs(),e=r(function(t,n,i){return t+(i?" ":"")+n.toLowerCase()});return Y1=e,Y1}var V1,FW;function jZ(){if(FW)return V1;FW=1;var r=gW(),e=r("toLowerCase");return V1=e,V1}var X1,DW;function UW(){if(DW)return X1;DW=1;var r=9007199254740991,e=Math.floor;function t(n,i){var s="";if(!n||i<1||i>r)return s;do i%2&&(s+=n),i=e(i/2),i&&(n+=n);while(i);return s}return X1=t,X1}var K1,WW;function Z1(){if(WW)return K1;WW=1;var r=UW(),e=Or(),t=Dn(),n=ms(),i=vs(),s=Un(),a=Math.ceil;function o(u,l){l=l===void 0?" ":e(l);var c=l.length;if(c<2)return c?r(l,u):l;var h=r(l,a(u/i(l)));return n(l)?t(s(h),0,u).join(""):h.slice(0,u)}return K1=o,K1}var J1,NW;function $Z(){if(NW)return J1;NW=1;var r=Z1(),e=vs(),t=ye(),n=Be(),i=Math.ceil,s=Math.floor;function a(o,u,l){o=n(o),u=t(u);var c=u?e(o):0;if(!u||c>=u)return o;var h=(u-c)/2;return r(s(h),l)+o+r(i(h),l)}return J1=a,J1}var Q1,GW;function YZ(){if(GW)return Q1;GW=1;var r=Z1(),e=vs(),t=ye(),n=Be();function i(s,a,o){s=n(s),a=t(a);var u=a?e(s):0;return a&&u<a?s+r(a-u,o):s}return Q1=i,Q1}var ew,zW;function VZ(){if(zW)return ew;zW=1;var r=Z1(),e=vs(),t=ye(),n=Be();function i(s,a,o){s=n(s),a=t(a);var u=a?e(s):0;return a&&u<a?r(a-u,o)+s:s}return ew=i,ew}var tw,HW;function XZ(){if(HW)return tw;HW=1;var r=ft(),e=Be(),t=/^\s+/,n=r.parseInt;function i(s,a,o){return o||a==null?a=0:a&&(a=+a),n(e(s).replace(t,""),a||0)}return tw=i,tw}var rw,jW;function KZ(){if(jW)return rw;jW=1;var r=UW(),e=Ft(),t=ye(),n=Be();function i(s,a,o){return(o?e(s,a,o):a===void 0)?a=1:a=t(a),r(n(s),a)}return rw=i,rw}var nw,$W;function ZZ(){if($W)return nw;$W=1;var r=Be();function e(){var t=arguments,n=r(t[0]);return t.length<3?n:n.replace(t[1],t[2])}return nw=e,nw}var iw,YW;function JZ(){if(YW)return iw;YW=1;var r=xs(),e=r(function(t,n,i){return t+(i?"_":"")+n.toLowerCase()});return iw=e,iw}var sw,VW;function QZ(){if(VW)return sw;VW=1;var r=Or(),e=Dn(),t=ms(),n=Ft(),i=hx(),s=Un(),a=Be(),o=4294967295;function u(l,c,h){return h&&typeof h!="number"&&n(l,c,h)&&(c=h=void 0),h=h===void 0?o:h>>>0,h?(l=a(l),l&&(typeof c=="string"||c!=null&&!i(c))&&(c=r(c),!c&&t(l))?e(s(l),0,h):l.split(c,h)):[]}return sw=u,sw}var aw,XW;function eJ(){if(XW)return aw;XW=1;var r=xs(),e=M1(),t=r(function(n,i,s){return n+(s?" ":"")+e(i)});return aw=t,aw}var ow,KW;function tJ(){if(KW)return ow;KW=1;var r=vi(),e=Or(),t=ye(),n=Be();function i(s,a,o){return s=n(s),o=o==null?0:r(t(o),0,s.length),a=e(a),s.slice(o,o+a.length)==a}return ow=i,ow}var uw,ZW;function JW(){if(ZW)return uw;ZW=1;var r=or(),e=ge(),t=Jb(),n=e(function(i,s){try{return r(i,void 0,s)}catch(a){return t(a)?a:new Error(a)}});return uw=n,uw}var lw,QW;function rJ(){if(QW)return lw;QW=1;var r=br(),e=Object.prototype,t=e.hasOwnProperty;function n(i,s,a,o){return i===void 0||r(i,e[a])&&!t.call(o,a)?s:i}return lw=n,lw}var cw,e3;function nJ(){if(e3)return cw;e3=1;var r={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function e(t){return"\\"+r[t]}return cw=e,cw}var hw,t3;function r3(){if(t3)return hw;t3=1;var r=/<%=([\s\S]+?)%>/g;return hw=r,hw}var fw,n3;function iJ(){if(n3)return fw;n3=1;var r=/<%-([\s\S]+?)%>/g;return fw=r,fw}var dw,i3;function sJ(){if(i3)return dw;i3=1;var r=/<%([\s\S]+?)%>/g;return dw=r,dw}var pw,s3;function a3(){if(s3)return pw;s3=1;var r=kW(),e=iJ(),t=sJ(),n=r3(),i={escape:e,evaluate:t,interpolate:n,variable:"",imports:{_:{escape:r}}};return pw=i,pw}var gw,o3;function aJ(){if(o3)return gw;o3=1;var r=o0(),e=JW(),t=h_(),n=rJ(),i=nJ(),s=Jb(),a=Ft(),o=dt(),u=r3(),l=a3(),c=Be(),h=/\b__p \+= '';/g,d=/\b(__p \+=) '' \+/g,f=/(__e\(.*?\)|\b__t\)) \+\n'';/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,g=/($^)/,m=/['\n\r\u2028\u2029\\]/g,_=Object.prototype,y=_.hasOwnProperty;function x(b,T,S){var w=l.imports._.templateSettings||l;S&&a(b,T,S)&&(T=void 0),b=c(b),T=r({},T,w,n);var M=r({},T.imports,w.imports,n),q=o(M),O=t(M,q),k,U,N=0,Z=T.interpolate||g,G="__p += '",A=RegExp((T.escape||g).source+"|"+Z.source+"|"+(Z===u?p:g).source+"|"+(T.evaluate||g).source+"|$","g"),P=y.call(T,"sourceURL")?"//# sourceURL="+(T.sourceURL+"").replace(/[\r\n]/g," ")+`
`:"";b.replace(A,function(B,F,L,z,Y,V){return L||(L=z),G+=b.slice(N,V).replace(m,i),F&&(k=!0,G+=`' +
__e(`+F+`) +
'`),Y&&(U=!0,G+=`';
`+Y+`;
__p += '`),L&&(G+=`' +
((__t = (`+L+`)) == null ? '' : __t) +
'`),N=V+B.length,B}),G+=`';
`;var C=y.call(T,"variable")&&T.variable;C||(G=`with (obj) {
`+G+`
}
`),G=(U?G.replace(h,""):G).replace(d,"$1").replace(f,"$1;"),G="function("+(C||"obj")+`) {
`+(C?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+G+`return __p
}`;var v=e(function(){return Function(q,P+"return "+G).apply(void 0,O)});if(v.source=G,s(v))throw v;return v}return gw=x,gw}var mw,u3;function oJ(){if(u3)return mw;u3=1;var r=Be();function e(t){return r(t).toLowerCase()}return mw=e,mw}var vw,l3;function uJ(){if(l3)return vw;l3=1;var r=Be();function e(t){return r(t).toUpperCase()}return vw=e,vw}var _w,c3;function h3(){if(c3)return _w;c3=1;var r=hs();function e(t,n){for(var i=t.length;i--&&r(n,t[i],0)>-1;);return i}return _w=e,_w}var yw,f3;function d3(){if(f3)return yw;f3=1;var r=hs();function e(t,n){for(var i=-1,s=t.length;++i<s&&r(n,t[i],0)>-1;);return i}return yw=e,yw}var bw,p3;function lJ(){if(p3)return bw;p3=1;var r=Or(),e=Dn(),t=h3(),n=d3(),i=Un(),s=Be(),a=/^\s+|\s+$/g;function o(u,l,c){if(u=s(u),u&&(c||l===void 0))return u.replace(a,"");if(!u||!(l=r(l)))return u;var h=i(u),d=i(l),f=n(h,d),p=t(h,d)+1;return e(h,f,p).join("")}return bw=o,bw}var xw,g3;function cJ(){if(g3)return xw;g3=1;var r=Or(),e=Dn(),t=h3(),n=Un(),i=Be(),s=/\s+$/;function a(o,u,l){if(o=i(o),o&&(l||u===void 0))return o.replace(s,"");if(!o||!(u=r(u)))return o;var c=n(o),h=t(c,n(u))+1;return e(c,0,h).join("")}return xw=a,xw}var ww,m3;function hJ(){if(m3)return ww;m3=1;var r=Or(),e=Dn(),t=d3(),n=Un(),i=Be(),s=/^\s+/;function a(o,u,l){if(o=i(o),o&&(l||u===void 0))return o.replace(s,"");if(!o||!(u=r(u)))return o;var c=n(o),h=t(c,n(u));return e(c,h).join("")}return ww=a,ww}var Sw,v3;function fJ(){if(v3)return Sw;v3=1;var r=Or(),e=Dn(),t=ms(),n=nt(),i=hx(),s=vs(),a=Un(),o=ye(),u=Be(),l=30,c="...",h=/\w*$/;function d(f,p){var g=l,m=c;if(n(p)){var _="separator"in p?p.separator:_;g="length"in p?o(p.length):g,m="omission"in p?r(p.omission):m}f=u(f);var y=f.length;if(t(f)){var x=a(f);y=x.length}if(g>=y)return f;var b=g-s(m);if(b<1)return m;var T=x?e(x,0,b).join(""):f.slice(0,b);if(_===void 0)return T+m;if(x&&(b+=T.length-b),i(_)){if(f.slice(b).search(_)){var S,w=T;for(_.global||(_=RegExp(_.source,u(h.exec(_))+"g")),_.lastIndex=0;S=_.exec(w);)var M=S.index;T=T.slice(0,M===void 0?b:M)}}else if(f.indexOf(r(_),b)!=b){var q=T.lastIndexOf(_);q>-1&&(T=T.slice(0,q))}return T+m}return Sw=d,Sw}var Tw,_3;function dJ(){if(_3)return Tw;_3=1;var r=k1(),e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},t=r(e);return Tw=t,Tw}var Aw,y3;function pJ(){if(y3)return Aw;y3=1;var r=Be(),e=dJ(),t=/&(?:amp|lt|gt|quot|#39);/g,n=RegExp(t.source);function i(s){return s=r(s),s&&n.test(s)?s.replace(t,e):s}return Aw=i,Aw}var Rw,b3;function gJ(){if(b3)return Rw;b3=1;var r=xs(),e=r(function(t,n,i){return t+(i?" ":"")+n.toUpperCase()});return Rw=e,Rw}var Pw,x3;function mJ(){return x3||(x3=1,Pw={camelCase:UZ(),capitalize:_W(),deburr:wW(),endsWith:WZ(),escape:kW(),escapeRegExp:GZ(),kebabCase:zZ(),lowerCase:HZ(),lowerFirst:jZ(),pad:$Z(),padEnd:YZ(),padStart:VZ(),parseInt:XZ(),repeat:KZ(),replace:ZZ(),snakeCase:JZ(),split:QZ(),startCase:eJ(),startsWith:tJ(),template:aJ(),templateSettings:a3(),toLower:oJ(),toUpper:uJ(),trim:lJ(),trimEnd:cJ(),trimStart:hJ(),truncate:fJ(),unescape:pJ(),upperCase:gJ(),upperFirst:M1(),words:PW()}),Pw}var Cw,w3;function vJ(){if(w3)return Cw;w3=1;var r=yi(),e=fn(),t=tL(),n=hn(),i=Br(),s=n(function(a,o){return r(o,function(u){u=i(u),e(a,u,t(a[u],a))}),a});return Cw=s,Cw}var Ew,S3;function _J(){if(S3)return Ew;S3=1;var r=or(),e=et(),t=he(),n=ge(),i="Expected a function";function s(a){var o=a==null?0:a.length,u=t;return a=o?e(a,function(l){if(typeof l[1]!="function")throw new TypeError(i);return[u(l[0]),l[1]]}):[],n(function(l){for(var c=-1;++c<o;){var h=a[c];if(r(h[0],this,l))return r(h[1],this,l)}})}return Ew=s,Ew}var Mw,T3;function yJ(){if(T3)return Mw;T3=1;var r=cF(),e=dt();function t(n){var i=e(n);return function(s){return r(s,n,i)}}return Mw=t,Mw}var Iw,A3;function bJ(){if(A3)return Iw;A3=1;var r=gn(),e=yJ(),t=1;function n(i){return e(r(i,t))}return Iw=n,Iw}var qw,R3;function xJ(){if(R3)return qw;R3=1;function r(e,t){return e==null||e!==e?t:e}return qw=r,qw}var kw,P3;function C3(){if(P3)return kw;P3=1;var r=bi(),e=hn(),t=hy(),n=RB(),i=_e(),s=qB(),a="Expected a function",o=8,u=32,l=128,c=256;function h(d){return e(function(f){var p=f.length,g=p,m=r.prototype.thru;for(d&&f.reverse();g--;){var _=f[g];if(typeof _!="function")throw new TypeError(a);if(m&&!y&&n(_)=="wrapper")var y=new r([],!0)}for(g=y?g:p;++g<p;){_=f[g];var x=n(_),b=x=="wrapper"?t(_):void 0;b&&s(b[0])&&b[1]==(l|o|u|c)&&!b[4].length&&b[9]==1?y=y[n(b[0])].apply(y,b[3]):y=_.length==1&&s(_)?y[x]():y.thru(_)}return function(){var T=arguments,S=T[0];if(y&&T.length==1&&i(S))return y.plant(S).value();for(var w=0,M=p?f[w].apply(this,T):S;++w<p;)M=f[w].call(this,M);return M}})}return kw=h,kw}var Ow,E3;function wJ(){if(E3)return Ow;E3=1;var r=C3(),e=r();return Ow=e,Ow}var Bw,M3;function SJ(){if(M3)return Bw;M3=1;var r=C3(),e=r(!0);return Bw=e,Bw}var Lw,I3;function TJ(){if(I3)return Lw;I3=1;var r=gn(),e=he(),t=1;function n(i){return e(typeof i=="function"?i:r(i,t))}return Lw=n,Lw}var Fw,q3;function AJ(){if(q3)return Fw;q3=1;var r=gn(),e=uq(),t=1;function n(i){return e(r(i,t))}return Fw=n,Fw}var Dw,k3;function RJ(){if(k3)return Dw;k3=1;var r=gn(),e=Rq(),t=1;function n(i,s){return e(i,r(s,t))}return Dw=n,Dw}var Uw,O3;function PJ(){if(O3)return Uw;O3=1;var r=Ca(),e=ge(),t=e(function(n,i){return function(s){return r(s,n,i)}});return Uw=t,Uw}var Ww,B3;function CJ(){if(B3)return Ww;B3=1;var r=Ca(),e=ge(),t=e(function(n,i){return function(s){return r(n,s,i)}});return Ww=t,Ww}var Nw,L3;function F3(){if(L3)return Nw;L3=1;var r=yi(),e=kn(),t=cl(),n=sr(),i=un(),s=nt(),a=dt();function o(u,l,c){var h=a(l),d=t(l,h),f=!(s(c)&&"chain"in c)||!!c.chain,p=i(u);return r(d,function(g){var m=l[g];u[g]=m,p&&(u.prototype[g]=function(){var _=this.__chain__;if(f||_){var y=u(this.__wrapped__),x=y.__actions__=n(this.__actions__);return x.push({func:m,args:arguments,thisArg:u}),y.__chain__=_,y}return m.apply(u,e([this.value()],arguments))})}),u}return Nw=o,Nw}var Gw,D3;function EJ(){if(D3)return Gw;D3=1;var r=p2(),e=ge(),t=ye();function n(i){return i=t(i),e(function(s){return r(s,i)})}return Gw=n,Gw}var zw,U3;function Hw(){if(U3)return zw;U3=1;var r=or(),e=et(),t=he(),n=ge(),i=ar(),s=hn();function a(o){return s(function(u){return u=e(u,i(t)),n(function(l){var c=this;return o(u,function(h){return r(h,c,l)})})})}return zw=a,zw}var jw,W3;function MJ(){if(W3)return jw;W3=1;var r=et(),e=Hw(),t=e(r);return jw=t,jw}var $w,N3;function IJ(){if(N3)return $w;N3=1;var r=Qk(),e=Hw(),t=e(r);return $w=t,$w}var Yw,G3;function qJ(){if(G3)return Yw;G3=1;var r=Cp(),e=Hw(),t=e(r);return Yw=t,Yw}var Vw,z3;function kJ(){if(z3)return Vw;z3=1;var r=ps();function e(t){return function(n){return t==null?void 0:r(t,n)}}return Vw=e,Vw}var Xw,H3;function OJ(){if(H3)return Xw;H3=1;var r=Math.ceil,e=Math.max;function t(n,i,s,a){for(var o=-1,u=e(r((i-n)/(s||1)),0),l=Array(u);u--;)l[a?u:++o]=n,n+=s;return l}return Xw=t,Xw}var Kw,j3;function $3(){if(j3)return Kw;j3=1;var r=OJ(),e=Ft(),t=xa();function n(i){return function(s,a,o){return o&&typeof o!="number"&&e(s,a,o)&&(a=o=void 0),s=t(s),a===void 0?(a=s,s=0):a=t(a),o=o===void 0?s<a?1:-1:t(o),r(s,a,o,i)}}return Kw=n,Kw}var Zw,Y3;function BJ(){if(Y3)return Zw;Y3=1;var r=$3(),e=r();return Zw=e,Zw}var Jw,V3;function LJ(){if(V3)return Jw;V3=1;var r=$3(),e=r(!0);return Jw=e,Jw}var Qw,X3;function FJ(){if(X3)return Qw;X3=1;function r(){return{}}return Qw=r,Qw}var eS,K3;function DJ(){if(K3)return eS;K3=1;function r(){return""}return eS=r,eS}var tS,Z3;function UJ(){if(Z3)return tS;Z3=1;function r(){return!0}return tS=r,tS}var rS,J3;function WJ(){if(J3)return rS;J3=1;var r=Gp(),e=Lr(),t=ye(),n=9007199254740991,i=4294967295,s=Math.min;function a(o,u){if(o=t(o),o<1||o>n)return[];var l=i,c=s(o,i);u=e(u),o-=i;for(var h=r(c,u);++l<o;)u(l);return h}return rS=a,rS}var nS,Q3;function NJ(){if(Q3)return nS;Q3=1;var r=et(),e=sr(),t=_e(),n=xr(),i=pq(),s=Br(),a=Be();function o(u){return t(u)?r(u,s):n(u)?[u]:e(i(a(u)))}return nS=o,nS}var iS,eN;function GJ(){if(eN)return iS;eN=1;var r=Be(),e=0;function t(n){var i=++e;return r(n)+i}return iS=t,iS}var sS,tN;function zJ(){return tN||(tN=1,sS={attempt:JW(),bindAll:vJ(),cond:_J(),conforms:bJ(),constant:fp(),defaultTo:xJ(),flow:wJ(),flowRight:SJ(),identity:Dt(),iteratee:TJ(),matches:AJ(),matchesProperty:RJ(),method:PJ(),methodOf:CJ(),mixin:F3(),noop:tv(),nthArg:EJ(),over:MJ(),overEvery:IJ(),overSome:qJ(),property:Mq(),propertyOf:kJ(),range:BJ(),rangeRight:LJ(),stubArray:Dp(),stubFalse:Hp(),stubObject:FJ(),stubString:DJ(),stubTrue:UJ(),times:WJ(),toPath:NJ(),uniqueId:GJ()}),sS}var aS,rN;function HJ(){if(rN)return aS;rN=1;var r=dn(),e=sr();function t(){var n=new r(this.__wrapped__);return n.__actions__=e(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=e(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=e(this.__views__),n}return aS=t,aS}var oS,nN;function jJ(){if(nN)return oS;nN=1;var r=dn();function e(){if(this.__filtered__){var t=new r(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}return oS=e,oS}var uS,iN;function $J(){if(iN)return uS;iN=1;var r=Math.max,e=Math.min;function t(n,i,s){for(var a=-1,o=s.length;++a<o;){var u=s[a],l=u.size;switch(u.type){case"drop":n+=l;break;case"dropRight":i-=l;break;case"take":i=e(i,n+l);break;case"takeRight":n=r(n,i-l);break}}return{start:n,end:i}}return uS=t,uS}var lS,sN;function YJ(){if(sN)return lS;sN=1;var r=uW(),e=$J(),t=_e(),n=1,i=2,s=Math.min;function a(){var o=this.__wrapped__.value(),u=this.__dir__,l=t(o),c=u<0,h=l?o.length:0,d=e(0,h,this.__views__),f=d.start,p=d.end,g=p-f,m=c?p:f-1,_=this.__iteratees__,y=_.length,x=0,b=s(g,this.__takeCount__);if(!l||!c&&h==g&&b==g)return r(o,this.__actions__);var T=[];e:for(;g--&&x<b;){m+=u;for(var S=-1,w=o[m];++S<y;){var M=_[S],q=M.iteratee,O=M.type,k=q(w);if(O==i)w=k;else if(!k){if(O==n)continue e;break e}}T[x++]=w}return T}return lS=a,lS}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="node" -o ./npm-release`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var cS,aN;function VJ(){if(aN)return cS;aN=1;var r=e9(),e=N9(),t=G9(),n=g7(),i=cK(),s=PK(),a=qK(),o=SZ(),u=OZ(),l=mJ(),c=zJ(),h=dn(),d=bi(),f=In(),p=yi(),g=kn(),m=Ln(),_=cl(),y=Ca(),x=he(),b=ge(),T=Cy(),S=Dt(),w=_e(),M=nt(),q=dt(),O=ur(),k=HJ(),U=jJ(),N=YJ(),Z=F3(),G=tl(),A=TB(),P=hl(),C=ye(),v=sl(),B="4.17.16",F=2,L=1,z=3,Y=4294967295,V=Array.prototype,we=Object.prototype,ve=we.hasOwnProperty,de=f?f.iterator:void 0,Pe=Math.max,me=Math.min;return Z=(function(J){return function(ne,Q,X){if(X==null){var te=M(Q),H=te&&q(Q),Ve=H&&H.length&&_(Q,H);(Ve?Ve.length:te)||(X=Q,Q=ne,ne=this)}return J(ne,Q,X)}})(Z),v.after=n.after,v.ary=n.ary,v.assign=o.assign,v.assignIn=o.assignIn,v.assignInWith=o.assignInWith,v.assignWith=o.assignWith,v.at=o.at,v.before=n.before,v.bind=n.bind,v.bindAll=c.bindAll,v.bindKey=n.bindKey,v.castArray=i.castArray,v.chain=u.chain,v.chunk=r.chunk,v.compact=r.compact,v.concat=r.concat,v.cond=c.cond,v.conforms=c.conforms,v.constant=c.constant,v.countBy=e.countBy,v.create=o.create,v.curry=n.curry,v.curryRight=n.curryRight,v.debounce=n.debounce,v.defaults=o.defaults,v.defaultsDeep=o.defaultsDeep,v.defer=n.defer,v.delay=n.delay,v.difference=r.difference,v.differenceBy=r.differenceBy,v.differenceWith=r.differenceWith,v.drop=r.drop,v.dropRight=r.dropRight,v.dropRightWhile=r.dropRightWhile,v.dropWhile=r.dropWhile,v.fill=r.fill,v.filter=e.filter,v.flatMap=e.flatMap,v.flatMapDeep=e.flatMapDeep,v.flatMapDepth=e.flatMapDepth,v.flatten=r.flatten,v.flattenDeep=r.flattenDeep,v.flattenDepth=r.flattenDepth,v.flip=n.flip,v.flow=c.flow,v.flowRight=c.flowRight,v.fromPairs=r.fromPairs,v.functions=o.functions,v.functionsIn=o.functionsIn,v.groupBy=e.groupBy,v.initial=r.initial,v.intersection=r.intersection,v.intersectionBy=r.intersectionBy,v.intersectionWith=r.intersectionWith,v.invert=o.invert,v.invertBy=o.invertBy,v.invokeMap=e.invokeMap,v.iteratee=c.iteratee,v.keyBy=e.keyBy,v.keys=q,v.keysIn=o.keysIn,v.map=e.map,v.mapKeys=o.mapKeys,v.mapValues=o.mapValues,v.matches=c.matches,v.matchesProperty=c.matchesProperty,v.memoize=n.memoize,v.merge=o.merge,v.mergeWith=o.mergeWith,v.method=c.method,v.methodOf=c.methodOf,v.mixin=Z,v.negate=G,v.nthArg=c.nthArg,v.omit=o.omit,v.omitBy=o.omitBy,v.once=n.once,v.orderBy=e.orderBy,v.over=c.over,v.overArgs=n.overArgs,v.overEvery=c.overEvery,v.overSome=c.overSome,v.partial=n.partial,v.partialRight=n.partialRight,v.partition=e.partition,v.pick=o.pick,v.pickBy=o.pickBy,v.property=c.property,v.propertyOf=c.propertyOf,v.pull=r.pull,v.pullAll=r.pullAll,v.pullAllBy=r.pullAllBy,v.pullAllWith=r.pullAllWith,v.pullAt=r.pullAt,v.range=c.range,v.rangeRight=c.rangeRight,v.rearg=n.rearg,v.reject=e.reject,v.remove=r.remove,v.rest=n.rest,v.reverse=r.reverse,v.sampleSize=e.sampleSize,v.set=o.set,v.setWith=o.setWith,v.shuffle=e.shuffle,v.slice=r.slice,v.sortBy=e.sortBy,v.sortedUniq=r.sortedUniq,v.sortedUniqBy=r.sortedUniqBy,v.split=l.split,v.spread=n.spread,v.tail=r.tail,v.take=r.take,v.takeRight=r.takeRight,v.takeRightWhile=r.takeRightWhile,v.takeWhile=r.takeWhile,v.tap=u.tap,v.throttle=n.throttle,v.thru=P,v.toArray=i.toArray,v.toPairs=o.toPairs,v.toPairsIn=o.toPairsIn,v.toPath=c.toPath,v.toPlainObject=i.toPlainObject,v.transform=o.transform,v.unary=n.unary,v.union=r.union,v.unionBy=r.unionBy,v.unionWith=r.unionWith,v.uniq=r.uniq,v.uniqBy=r.uniqBy,v.uniqWith=r.uniqWith,v.unset=o.unset,v.unzip=r.unzip,v.unzipWith=r.unzipWith,v.update=o.update,v.updateWith=o.updateWith,v.values=o.values,v.valuesIn=o.valuesIn,v.without=r.without,v.words=l.words,v.wrap=n.wrap,v.xor=r.xor,v.xorBy=r.xorBy,v.xorWith=r.xorWith,v.zip=r.zip,v.zipObject=r.zipObject,v.zipObjectDeep=r.zipObjectDeep,v.zipWith=r.zipWith,v.entries=o.toPairs,v.entriesIn=o.toPairsIn,v.extend=o.assignIn,v.extendWith=o.assignInWith,Z(v,v),v.add=s.add,v.attempt=c.attempt,v.camelCase=l.camelCase,v.capitalize=l.capitalize,v.ceil=s.ceil,v.clamp=a.clamp,v.clone=i.clone,v.cloneDeep=i.cloneDeep,v.cloneDeepWith=i.cloneDeepWith,v.cloneWith=i.cloneWith,v.conformsTo=i.conformsTo,v.deburr=l.deburr,v.defaultTo=c.defaultTo,v.divide=s.divide,v.endsWith=l.endsWith,v.eq=i.eq,v.escape=l.escape,v.escapeRegExp=l.escapeRegExp,v.every=e.every,v.find=e.find,v.findIndex=r.findIndex,v.findKey=o.findKey,v.findLast=e.findLast,v.findLastIndex=r.findLastIndex,v.findLastKey=o.findLastKey,v.floor=s.floor,v.forEach=e.forEach,v.forEachRight=e.forEachRight,v.forIn=o.forIn,v.forInRight=o.forInRight,v.forOwn=o.forOwn,v.forOwnRight=o.forOwnRight,v.get=o.get,v.gt=i.gt,v.gte=i.gte,v.has=o.has,v.hasIn=o.hasIn,v.head=r.head,v.identity=S,v.includes=e.includes,v.indexOf=r.indexOf,v.inRange=a.inRange,v.invoke=o.invoke,v.isArguments=i.isArguments,v.isArray=w,v.isArrayBuffer=i.isArrayBuffer,v.isArrayLike=i.isArrayLike,v.isArrayLikeObject=i.isArrayLikeObject,v.isBoolean=i.isBoolean,v.isBuffer=i.isBuffer,v.isDate=i.isDate,v.isElement=i.isElement,v.isEmpty=i.isEmpty,v.isEqual=i.isEqual,v.isEqualWith=i.isEqualWith,v.isError=i.isError,v.isFinite=i.isFinite,v.isFunction=i.isFunction,v.isInteger=i.isInteger,v.isLength=i.isLength,v.isMap=i.isMap,v.isMatch=i.isMatch,v.isMatchWith=i.isMatchWith,v.isNaN=i.isNaN,v.isNative=i.isNative,v.isNil=i.isNil,v.isNull=i.isNull,v.isNumber=i.isNumber,v.isObject=M,v.isObjectLike=i.isObjectLike,v.isPlainObject=i.isPlainObject,v.isRegExp=i.isRegExp,v.isSafeInteger=i.isSafeInteger,v.isSet=i.isSet,v.isString=i.isString,v.isSymbol=i.isSymbol,v.isTypedArray=i.isTypedArray,v.isUndefined=i.isUndefined,v.isWeakMap=i.isWeakMap,v.isWeakSet=i.isWeakSet,v.join=r.join,v.kebabCase=l.kebabCase,v.last=O,v.lastIndexOf=r.lastIndexOf,v.lowerCase=l.lowerCase,v.lowerFirst=l.lowerFirst,v.lt=i.lt,v.lte=i.lte,v.max=s.max,v.maxBy=s.maxBy,v.mean=s.mean,v.meanBy=s.meanBy,v.min=s.min,v.minBy=s.minBy,v.stubArray=c.stubArray,v.stubFalse=c.stubFalse,v.stubObject=c.stubObject,v.stubString=c.stubString,v.stubTrue=c.stubTrue,v.multiply=s.multiply,v.nth=r.nth,v.noop=c.noop,v.now=t.now,v.pad=l.pad,v.padEnd=l.padEnd,v.padStart=l.padStart,v.parseInt=l.parseInt,v.random=a.random,v.reduce=e.reduce,v.reduceRight=e.reduceRight,v.repeat=l.repeat,v.replace=l.replace,v.result=o.result,v.round=s.round,v.sample=e.sample,v.size=e.size,v.snakeCase=l.snakeCase,v.some=e.some,v.sortedIndex=r.sortedIndex,v.sortedIndexBy=r.sortedIndexBy,v.sortedIndexOf=r.sortedIndexOf,v.sortedLastIndex=r.sortedLastIndex,v.sortedLastIndexBy=r.sortedLastIndexBy,v.sortedLastIndexOf=r.sortedLastIndexOf,v.startCase=l.startCase,v.startsWith=l.startsWith,v.subtract=s.subtract,v.sum=s.sum,v.sumBy=s.sumBy,v.template=l.template,v.times=c.times,v.toFinite=i.toFinite,v.toInteger=C,v.toLength=i.toLength,v.toLower=l.toLower,v.toNumber=i.toNumber,v.toSafeInteger=i.toSafeInteger,v.toString=i.toString,v.toUpper=l.toUpper,v.trim=l.trim,v.trimEnd=l.trimEnd,v.trimStart=l.trimStart,v.truncate=l.truncate,v.unescape=l.unescape,v.uniqueId=c.uniqueId,v.upperCase=l.upperCase,v.upperFirst=l.upperFirst,v.each=e.forEach,v.eachRight=e.forEachRight,v.first=r.head,Z(v,(function(){var J={};return m(v,function(ne,Q){ve.call(v.prototype,Q)||(J[Q]=ne)}),J})(),{chain:!1}),v.VERSION=B,(v.templateSettings=l.templateSettings).imports._=v,p(["bind","bindKey","curry","curryRight","partial","partialRight"],function(J){v[J].placeholder=v}),p(["drop","take"],function(J,ne){h.prototype[J]=function(Q){Q=Q===void 0?1:Pe(C(Q),0);var X=this.__filtered__&&!ne?new h(this):this.clone();return X.__filtered__?X.__takeCount__=me(Q,X.__takeCount__):X.__views__.push({size:me(Q,Y),type:J+(X.__dir__<0?"Right":"")}),X},h.prototype[J+"Right"]=function(Q){return this.reverse()[J](Q).reverse()}}),p(["filter","map","takeWhile"],function(J,ne){var Q=ne+1,X=Q==L||Q==z;h.prototype[J]=function(te){var H=this.clone();return H.__iteratees__.push({iteratee:x(te,3),type:Q}),H.__filtered__=H.__filtered__||X,H}}),p(["head","last"],function(J,ne){var Q="take"+(ne?"Right":"");h.prototype[J]=function(){return this[Q](1).value()[0]}}),p(["initial","tail"],function(J,ne){var Q="drop"+(ne?"":"Right");h.prototype[J]=function(){return this.__filtered__?new h(this):this[Q](1)}}),h.prototype.compact=function(){return this.filter(S)},h.prototype.find=function(J){return this.filter(J).head()},h.prototype.findLast=function(J){return this.reverse().find(J)},h.prototype.invokeMap=b(function(J,ne){return typeof J=="function"?new h(this):this.map(function(Q){return y(Q,J,ne)})}),h.prototype.reject=function(J){return this.filter(G(x(J)))},h.prototype.slice=function(J,ne){J=C(J);var Q=this;return Q.__filtered__&&(J>0||ne<0)?new h(Q):(J<0?Q=Q.takeRight(-J):J&&(Q=Q.drop(J)),ne!==void 0&&(ne=C(ne),Q=ne<0?Q.dropRight(-ne):Q.take(ne-J)),Q)},h.prototype.takeRightWhile=function(J){return this.reverse().takeWhile(J).reverse()},h.prototype.toArray=function(){return this.take(Y)},m(h.prototype,function(J,ne){var Q=/^(?:filter|find|map|reject)|While$/.test(ne),X=/^(?:head|last)$/.test(ne),te=v[X?"take"+(ne=="last"?"Right":""):ne],H=X||/^find/.test(ne);te&&(v.prototype[ne]=function(){var Ve=this.__wrapped__,Rt=X?[1]:arguments,Gn=Ve instanceof h,_n=Rt[0],Pt=Gn||w(Ve),at=function(Si){var jn=te.apply(v,g([Si],Rt));return X&&Dr?jn[0]:jn};Pt&&Q&&typeof _n=="function"&&_n.length!=1&&(Gn=Pt=!1);var Dr=this.__chain__,zn=!!this.__actions__.length,Ts=H&&!Dr,Hn=Gn&&!zn;if(!H&&Pt){Ve=Hn?Ve:new h(this);var Ct=J.apply(Ve,Rt);return Ct.__actions__.push({func:P,args:[at],thisArg:void 0}),new d(Ct,Dr)}return Ts&&Hn?J.apply(this,Rt):(Ct=this.thru(at),Ts?X?Ct.value()[0]:Ct.value():Ct)})}),p(["pop","push","shift","sort","splice","unshift"],function(J){var ne=V[J],Q=/^(?:push|sort|unshift)$/.test(J)?"tap":"thru",X=/^(?:pop|shift)$/.test(J);v.prototype[J]=function(){var te=arguments;if(X&&!this.__chain__){var H=this.value();return ne.apply(w(H)?H:[],te)}return this[Q](function(Ve){return ne.apply(w(Ve)?Ve:[],te)})}}),m(h.prototype,function(J,ne){var Q=v[ne];if(Q){var X=Q.name+"";ve.call(A,X)||(A[X]=[]),A[X].push({name:ne,func:Q})}}),A[T(void 0,F).name]=[{name:"wrapper",func:void 0}],h.prototype.clone=k,h.prototype.reverse=U,h.prototype.value=N,v.prototype.at=u.at,v.prototype.chain=u.wrapperChain,v.prototype.commit=u.commit,v.prototype.next=u.next,v.prototype.plant=u.plant,v.prototype.reverse=u.reverse,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=u.value,v.prototype.first=v.prototype.head,de&&(v.prototype[de]=u.toIterator),cS=v,cS}var XJ=VJ();const fl=Lo(XJ);function KJ(r){const e=G=>(G+.5)*r.symbolHeight,t=G=>{const A=G.symbolIndex-1,P=G.rawSymbol,C=r.initialSymbolState,v=e(A),B=new mc(v);return We({rawSymbol:P,symbolIndexOfBoard:A,symbolY:B,symbolState:C,oncomplete:()=>{}})},n=G=>G.map((P,C)=>t({rawSymbol:P,symbolIndex:C})),i=G=>u.symbols.map((A,P)=>{A.rawSymbol=G[P],A.symbolState="static"}),s=r.initialSymbols.length,a=s-2,o=yH(),u=We({symbols:n(r.initialSymbols),motion:"stopped",spinType:"normal",anticipating:!1,readyToSpin:()=>{},spinOptions:()=>({})}),l=()=>s*u.spinOptions().reelPaddingMultiplierNormal,c=()=>s*u.spinOptions().reelPaddingMultiplierAnticipated;let h=r.initialSymbols,d=()=>{},f=!1,p=0;const g=async()=>{await Ys(u.spinOptions().reelFallOutDelay*r.reelIndex)},m=async({isTurboBeforeAll:G})=>{u.spinType=G?"fast":"normal",G||await g(),await y()},_=async G=>{await Promise.all(u.symbols.map(G))},y=async()=>{u.motion="fallingOut",await _(async G=>{const A=G.symbolY.current,P=e(G.symbolIndexOfBoard+s),v=(P-A)/u.spinOptions().symbolFallOutSpeed,B=u.spinOptions().symbolFallOutInterval*(a-G.symbolIndexOfBoard);await Ys(B),G.symbolState="spin",await G.symbolY.set(P,{duration:v})}),u.motion="hanging"},x=async()=>{i(h),await _(async G=>{const A=e(G.symbolIndexOfBoard-s+.5);await G.symbolY.set(A,{duration:0})})},b=async()=>{const G=p/s-1,A=async()=>await Ys(u.spinOptions().reelFallInDelay*G);f?await A():K.isTurbo||await o.add(A),u.motion="fallingIn",await _(async P=>{const C=P.symbolY.current,v=e(P.symbolIndexOfBoard),B=v-C,F=u.spinOptions().symbolFallInInterval*(a-P.symbolIndexOfBoard),L=r.symbolHeight*u.spinOptions().symbolFallInBounceSizeMulti,z=L/u.spinOptions().symbolFallInBounceSpeed,Y=(B-L)/u.spinOptions().symbolFallInSpeed;await P.symbolY.set(v-L,{duration:Y,delay:F}),P.symbolState="land",r.onSymbolLand({rawSymbol:P.rawSymbol}),P.symbolIndexOfBoard===a-1&&d(),await P.symbolY.set(v,{duration:z,easing:t4})}),u.motion="stopped"},T=async()=>{u.motion==="hanging"||await y(),await x(),await b()},q={fast:()=>T(),normal:()=>T(),anticipated:()=>T()},O=G=>(u.spinType=G.spinType,f=G.noStop,h=G.symbols,d=G.onSpinFinishing,p={fast:0,normal:G.previousPaddingSize+l(),anticipated:G.previousPaddingSize+c()}[G.spinType],p),k=async()=>{await q[u.spinType]()},U=G=>{u.motion="stopped",G&&i(G)},N=()=>{o.interrupt()},Z=()=>{Xn(()=>{u.motion==="hanging"&&u.readyToSpin()})};return{reelIndex:r.reelIndex,symbolHeight:r.symbolHeight,onReelStopping:r.onReelStopping,reelLength:s,reelState:u,preSpin:m,prepareToSpin:O,spin:k,stop:N,setSymbolsWithRawSymbols:U,readyToSpinEffect:Z}}const hS=We({isPreSpinning:!1});function ZJ({board:r}){return{preSpin:async({paddingBoard:t})=>{hS.isPreSpinning=!0;const n=K.isTurbo;await Promise.all(r.map((i,s)=>i.preSpin({isTurboBeforeAll:n,preSpinPaddingReel:t==null?void 0:t[s]})))}}}function JJ({board:r}){async function e({revealEvent:t,paddingBoard:n}){hS.isPreSpinning&&await Promise.all(r.map(async u=>{await uH(l=>u.reelState.readyToSpin=l)})),hS.isPreSpinning=!1;const i=K.isTurbo?"fast":"normal",s=t.anticipation.some(Boolean),a=t.anticipation.findIndex(Boolean),o=({noStop:u,isAnticipated:l})=>l?"anticipated":u?"normal":i;r.reduce((u,l,c)=>{var y,x;const h=s&&c>=a,d=(((y=t.anticipation)==null?void 0:y[c])||0)>0,f=o({noStop:h,isAnticipated:d}),p=t.board[c],g=n==null?void 0:n[c],m=(x=t==null?void 0:t.paddingPositions)==null?void 0:x[c];return l.prepareToSpin({noStop:h,spinType:f,symbols:p,paddingReel:g,paddingPosition:m,previousPaddingSize:u,onSpinFinishing:()=>{var S;l.onReelStopping();const b=c+1;(((S=t.anticipation)==null?void 0:S[b])||0)>0&&(r[b].reelState.anticipating=!0)}})},0),await Promise.all(r.map(async u=>{await u.spin()}))}return{spin:e}}function QJ(){function r({board:e}){const{preSpin:t}=ZJ({board:e}),{spin:n}=JJ({board:e});return{board:e,preSpin:t,spin:n,settle:o=>e.forEach((u,l)=>{const c=(o==null?void 0:o[l])||[];u.setSymbolsWithRawSymbols(c)}),stop:()=>e.forEach(o=>o.stop()),readyToSpinEffect:()=>{e.forEach(o=>o.readyToSpinEffect())}}}return{enhanceBoard:r}}function eQ({winLevelMap:r}){return{getWinLevelDataByWinLevelAlias:t=>fl.values(r).find(i=>i.alias===t)}}const tQ={1:{level:1,alias:"zero",type:"small",text:null,presentDuration:0,sound:{sfx:void 0,bgm:void 0},animation:void 0},2:{level:2,alias:"standard",type:"small",text:null,presentDuration:.6*Kr,sound:{sfx:void 0,bgm:void 0},animation:void 0},3:{level:3,alias:"small",type:"small",text:null,presentDuration:1*Kr,sound:{sfx:void 0,bgm:void 0},animation:void 0},4:{level:4,alias:"nice",type:"medium",text:null,presentDuration:1.5*Kr,sound:{sfx:void 0,bgm:void 0},animation:void 0},5:{level:5,alias:"substantial",type:"medium",text:null,presentDuration:2*Kr,sound:{sfx:void 0,bgm:void 0},animation:void 0},6:{level:6,alias:"big",type:"big",text:"BIG WIN",presentDuration:6*Kr,sound:{sfx:void 0,bgm:"bgm_winlevel_big"},animation:{intro:"big_win_intro",idle:"big_win_idle",outro:"big_win_exit"}},7:{level:7,alias:"superwin",type:"big",text:"SUPER WIN",presentDuration:18*Kr,sound:{sfx:void 0,bgm:"bgm_winlevel_superwin"},animation:{intro:"super_win_intro",idle:"super_win_idle",outro:"super_win_exit"}},8:{level:8,alias:"mega",type:"big",text:"MEGA WIN",presentDuration:20*Kr,sound:{sfx:void 0,bgm:"bgm_winlevel_mega"},animation:{intro:"mega_win_intro",idle:"mega_win_idle",outro:"mega_win_exit"}},9:{level:9,alias:"epic",type:"big",text:"EPIC WIN!",presentDuration:26*Kr,sound:{sfx:void 0,bgm:"bgm_winlevel_epic"},animation:{intro:"epic_win_intro",idle:"epic_win_idle",outro:"epic_win_exit"}},10:{level:10,alias:"max",type:"big",text:"MAX WIN",presentDuration:32*Kr,sound:{sfx:void 0,bgm:"bgm_winlevel_max"},animation:{intro:"max_win_intro",idle:"max_win_idle",outro:"max_win_exit"}}},fS=120,dS=[[{name:"H1"},{name:"H1"},{name:"L4"},{name:"L4"},{name:"L4"}],[{name:"H1"},{name:"H1"},{name:"L4"},{name:"L4"},{name:"H3"}],[{name:"L2"},{name:"L2"},{name:"L3"},{name:"L3"},{name:"H2"}],[{name:"L3"},{name:"H2"},{name:"H2"},{name:"H5"},{name:"H5"}],[{name:"L3"},{name:"H2"},{name:"H2"},{name:"L2"},{name:"L2"}]],pS={x:dS.length,y:dS[0].length-2},gS={width:fS*pS.x,height:fS*pS.y},rQ="static",oN={reelFallInDelay:80,reelPaddingMultiplierNormal:1.25,reelPaddingMultiplierAnticipated:18,reelFallOutDelay:145},nQ={...oN,symbolFallInSpeed:3.5,symbolFallInInterval:30,symbolFallInBounceSpeed:.15,symbolFallInBounceSizeMulti:.5,symbolFallOutSpeed:3.5,symbolFallOutInterval:20},iQ={...oN,symbolFallInSpeed:7,symbolFallInInterval:0,symbolFallInBounceSpeed:.3,symbolFallInBounceSizeMulti:.25,symbolFallOutSpeed:7,symbolFallOutInterval:0},sQ={1:"sfx_scatter_stop_1",2:"sfx_scatter_stop_2",3:"sfx_scatter_stop_3",4:"sfx_scatter_stop_4",5:"sfx_scatter_stop_5"},uN=({rawSymbol:r})=>{r.name==="S"&&(Mn.broadcast({type:"soundScatterCounterIncrease"}),Mn.broadcast({type:"soundOnce",name:sQ[cN()]})),r.name==="W"&&Mn.broadcast({type:"soundOnce",name:"sfx_multiplier_landing"})},lN=fl.range(pS.x).map(r=>{const e=KJ({reelIndex:r,symbolHeight:fS,initialSymbols:dS[r],initialSymbolState:rQ,onReelStopping:()=>{Mn.broadcast({type:"soundOnce",name:"sfx_reel_stop_1",forcePlay:!K.isTurbo})},onSymbolLand:uN});return e.reelState.spinOptions=()=>e.reelState.spinType==="fast"?iQ:nQ,e}),Ia=We({board:lN,gameType:"basegame",multiplierBoard:[],scatterCounter:0}),aQ=()=>({x:Nf.mainLayout().width*.5,y:Nf.mainLayout().height*.5,anchor:{x:.5,y:.5},pivot:{x:gS.width/2,y:gS.height/2},...gS}),oQ=()=>lN.map(r=>r.reelState.symbols.map(e=>e.rawSymbol)),cN=()=>Ia.scatterCounter>5?5:Ia.scatterCounter<1?1:Ia.scatterCounter,{enhanceBoard:uQ}=QJ(),lQ=uQ({board:Ia.board}),{getWinLevelDataByWinLevelAlias:cQ}=eQ({winLevelMap:tQ}),dl={onSymbolLand:uN,boardLayout:aQ,boardRaw:oQ,scatterLandIndex:cN,enhancedBoard:lQ,getWinLevelDataByWinLevelAlias:cQ},hQ={audio:()=>ue.translate("AUDIO"),balance:()=>ue.translate("BALANCE"),win:()=>ue.translate("WIN"),bet:()=>Qt.social()?"SPIN":ue.translate("BET"),stop:()=>ue.translate("STOP"),buyBonus:()=>Qt.social()?"PLAY BONUS":ue.translate("BUY BONUS"),disable:()=>ue.translate("DISABLE"),freeSpins:()=>ue.translate("FREE SPINS"),decrease:()=>ue.translate("-"),increase:()=>ue.translate("+"),menu:()=>ue.translate("MENU"),turbo:()=>ue.translate("TURBO"),autoSpin:()=>ue.translate("AUTO SPIN"),payTable:()=>ue.translate("PAYTABLE"),info:()=>ue.translate("INFO"),settings:()=>ue.translate("SETTINGS"),soundOn:()=>ue.translate("SOUND ON"),soundOff:()=>ue.translate("SOUND OFF"),menuExit:()=>ue.translate("EXIT")},fQ={en:{SETTINGS:"SETTINGS"},zh:{SETTINGS:""}},dQ={...hQ,...v4,home:()=>ue.translate("HOME"),notTranslated:()=>ue.translate("NOT TRANSLATED")},pQ=()=>{vH({eventEmitter:Mn}),Xj({stateXstate:n8,stateXstateDerived:PE}),g4({stateLayout:i8,stateLayoutDerived:Nf}),UV({stateApp:s8})},hN=()=>({..._H(),...m4(),...Kj(),...WV(),stateGame:Ia,stateGameDerived:dl,i18nDerived:dQ});function gQ({bookEvents:r}){return r.filter(n=>n.type==="reveal").length>1}async function mQ(r,e){const t=[];for(const[n,i]of r.entries()){const s=await e(i,n,r);t.push(s)}return t}function vQ({bookEventHandlerMap:r,debug:e}){const t=async(i,s)=>{const a=r==null?void 0:r[i.type];a?(e&&console.log(i),await a(i,s)):console.error('Missing bookEventHandler in "bookEventHandlerMap" for: ',i)};return{playBookEvent:t,playBookEvents:async(i,s)=>{const a=s||{};await mQ(i,async o=>{await t(o,{...a,bookEvents:i})})}}}const _Q={winInfo:async(r,{bookEvents:e})=>{await Mn.broadcastAsync({type:"winInfo",data:r})},finalWin:async r=>{await Mn.broadcastAsync({type:"finalWin",data:r})}},{playBookEvents:yQ}=vQ({bookEventHandlerMap:_Q}),bQ=async r=>{K.winBookEventAmount=0,await yQ(r.state),Mn.broadcast({type:"stopButtonEnable"})},xQ=["updateGlobalMult","freeSpinTrigger","updateFreeSpin","setTotalWin"],wQ=r=>{const e=Number(r.event),t=r.state.filter((a,o)=>o<e),n=r.state.filter((a,o)=>o>=e),s=[{index:0,type:"createBonusSnapshot",bookEvents:t.filter(a=>xQ.includes(a.type))},...n];return{...r,state:s}},SQ=Bj({onResumeGameActive:r=>wQ(r),onResumeGameInactive:r=>{const e=fl.findLast(r.state,t=>(t==null?void 0:t.type)==="reveal");e&&dl.enhancedBoard.settle(e.board)},onNewGameStart:async()=>{K.isTurbo&&PE.isAutoBetting()||K.isSpaceHold||(K.winBookEventAmount=0,await dl.enhancedBoard.preSpin({}))},onNewGameError:()=>dl.enhancedBoard.settle(),onPlayGame:async r=>await bQ(r),checkIsBonusGame:r=>gQ({bookEvents:r.state})}),TQ=Yj(SQ),Wn=kj(TQ);function AQ(r,e){wt(e,!0);const t=hN();Yr(()=>{const{unsubscribe:a}=Wn.subscribe(o=>{t.stateXstate.value=o.value});return Wn.start(),Wn.send({type:"RENDERED"}),()=>{a(),Wn.stop()}}),t.eventEmitter.subscribeOnMount({bet:()=>Wn.send({type:"BET"}),autoBet:()=>Wn.send({type:"AUTO_BET"}),resumeBet:()=>Wn.send({type:"RESUME_BET"}),forceResult:()=>Wn.send({type:"FORCE_RESULT"})});var n=Cr(),i=lt(n);{var s=a=>{const o=jr(()=>JSON.stringify(t.stateXstate.value,void 0,2));jV(a,{get x(){return t.stateLayoutDerived.canvasSizes().width},anchor:{x:1,y:0},style:{fill:16777215},get text(){return ie(o)}})};Gt(i,a=>{e.debug&&a(s)})}Ge(r,n),St()}var RQ=Nt('<h1>Number Picker</h1> <button class="play-style">Play</button>',1),PQ=Nt('<div class="game-container"><div class="target box"><h2>Target</h2> <p></p></div> <div class="reveal box"><h2>Rolled</h2> <p> </p></div></div>'),CQ=Nt('<div class="game-container"><div class="target box"><h2>Target</h2> <p></p></div> <div class="reveal box"><h2>Rolled</h2> <p> </p></div></div> <h2>You Won!</h2> <button class="play-style">Bet Again?</button>',1),EQ=Nt('<div class="game-container"><div class="target box"><h2>Target</h2> <p></p></div> <div class="reveal box"><h2>Rolled</h2> <p> </p></div></div> <h2>You Lost</h2> <button class="play-style">Bet Again?</button>',1),MQ=Nt("<!> <!> <!> <!> <!>",1);function IQ(r,e){wt(e,!1);const t=hN();let n=Tl("start"),i=Tl(!1),s=!1,a=null,o=null,u=10,l=Tl(null),c=!1;const h=async()=>{c&&(pe(l,Math.floor(Math.random()*11)),await Ys(80),h())};function d(){ie(i)||(pe(i,!0),pe(n,"playing"),pe(l,null),a=null,o=null,s=!1,t.eventEmitter.broadcast({type:"bet"}),c=!0,h())}t.eventEmitter.subscribeOnMount({winInfo:({data:w})=>{c=!1,a=w,pe(l,a.numberRolled)},finalWin:({data:w})=>{o=w,s=o.amount>0,pe(n,s?"won":"lost"),pe(i,!1)}}),Dl();var f=MQ(),p=lt(f);AQ(p,{});var g=je(p,2);{var m=w=>{var M=RQ(),q=je(lt(M),2);mo("click",q,d),Ge(w,M)};Gt(g,w=>{ie(n)==="start"&&w(m)})}var _=je(g,2);{var y=w=>{var M=PQ(),q=gt(M),O=je(gt(q),2);O.textContent=u,pt(q);var k=je(q,2),U=je(gt(k),2),N=gt(U,!0);pt(U),pt(k),pt(M),Kn(()=>ki(N,ie(l)!==null?ie(l):"-")),Ge(w,M)};Gt(_,w=>{ie(n)=="playing"&&w(y)})}var x=je(_,2);{var b=w=>{var M=CQ(),q=lt(M),O=gt(q),k=je(gt(O),2);k.textContent=u,pt(O);var U=je(O,2),N=je(gt(U),2),Z=gt(N,!0);pt(N),pt(U),pt(q);var G=je(q,4);Kn(()=>ki(Z,ie(l)!==null?ie(l):"-")),mo("click",G,d),Ge(w,M)};Gt(x,w=>{ie(n)=="won"&&w(b)})}var T=je(x,2);{var S=w=>{var M=EQ(),q=lt(M),O=gt(q),k=je(gt(O),2);k.textContent=u,pt(O);var U=je(O,2),N=je(gt(U),2),Z=gt(N,!0);pt(N),pt(U),pt(q);var G=je(q,4);Kn(()=>{ki(Z,ie(l)!==null?ie(l):"-"),G.disabled=ie(i)}),mo("click",G,d),Ge(w,M)};Gt(T,w=>{ie(n)=="lost"&&w(S)})}Ge(r,f),St()}const qQ=(r=>r.filter(Boolean).reduce((t,n)=>fl.merge(t,n),{}))([{en:{HOME:"HOME"},zh:{HOME:""}},fQ,w4]);var kQ=Nt("<!> <!> <!> <!> <!>",1);function OQ(r,e){wt(e,!0);let t=it(!1);const n=new URL("../../stake-engine-loader.gif",fe&&fe.tagName.toUpperCase()==="SCRIPT"&&fe.src||new URL("_app/immutable/bundle.C7SXImZm.js",document.baseURI).href).href,i=new URL("../../loader.gif",fe&&fe.tagName.toUpperCase()==="SCRIPT"&&fe.src||new URL("_app/immutable/bundle.C7SXImZm.js",document.baseURI).href).href;pQ();var s=kQ(),a=lt(s);u4(a,{});var o=je(a,2);x4(o,{children:(d,f)=>{JH(d,{children:(p,g)=>{QH(p,{messagesMap:qQ,children:(m,_)=>{IQ(m,{})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var u=je(o,2);fH(u,{src:n,oncomplete:()=>pe(t,!0)});var l=je(u,2);{var c=d=>{gH(d,{src:i})};Gt(l,d=>{ie(t)&&d(c)})}var h=je(l,2);vo(h,()=>e.children),Ge(r,s),St()}const BQ=Object.freeze(Object.defineProperty({__proto__:null,component:OQ,universal:sH},Symbol.toStringTag,{value:"Module"}));var LQ=Nt("<h1> </h1> <p> </p>",1);function FQ(r,e){wt(e,!1),Dl();var t=LQ(),n=lt(t),i=gt(n,!0);pt(n);var s=je(n,2),a=gt(s,!0);pt(s),Kn(()=>{var o;ki(i,ac.status),ki(a,(o=ac.error)==null?void 0:o.message)}),Ge(r,t),St()}const DQ=Object.freeze(Object.defineProperty({__proto__:null,component:FQ},Symbol.toStringTag,{value:"Module"}));function UQ(r){}const WQ=Object.freeze(Object.defineProperty({__proto__:null,component:UQ},Symbol.toStringTag,{value:"Module"}));Te.add(u$),Te.mixin(li,l$),Te.add(AP),Te.add(RP),Te.add(TC),Te.mixin(li,RY),Te.add(FC),Te.add(jh),Te.add(UC),Te.add(HC),Te.add(jC),Te.add(nE),Te.add(eE),Te.add(XC),Te.add(lf),Te.add(ZC),Te.add(VC),Te.add(YC),Te.add(RC),Te.add(AC);const NQ=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),GQ=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));return Ue.start=iH,Object.defineProperty(Ue,Symbol.toStringTag,{value:"Module"}),Ue})({});
