const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Di2QMRDp.js","./BhT-hgCL.js","./urjGZ6_P.js","./DzrJhZ-G.js","./BoTKNYvo.js","./C2GHuDhf.js","./Cbtn6Uxl.js","./DsaH-k9p.js"])))=>i.map(i=>d[i]);
var sa=Object.defineProperty;var aa=(t,e,s)=>e in t?sa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Q=(t,e,s)=>aa(t,typeof e!="symbol"?e+"":e,s);import{f as ra,l as na,t as G,g as ee,a as U,d as ia}from"./DtPgPimb.js";import{i as oa}from"./Ou2K7hPp.js";import{y as se,j as la,a8 as ca,F as m,Q as da,aa as ha,ab as zt,h as Vt,e as ot,k as Ce,l as ua,ac as os,w as ls,ad as fa,q as cs,a7 as pa,U as ga,a2 as Gt,aq as lt,z as Ht,ar as ma,as as va,at as ba,o as ya,au as xa,av as _a,aw as Aa,ax as wa,b as ka,ay as Ea,az as Sa,a6 as La,aA as Ta,aB as Oa,D as Ra,L as Pa,p as ds,ah as Z,ag as hs,T as R,f as He,s as k,c as L,r as T,t as ne,a as us,aC as Ia,aD as mt}from"./DzrJhZ-G.js";import{_ as Yt,p as xe,i as te}from"./urjGZ6_P.js";import{s as X}from"./DjtdzJbH.js";import{b as Ba,p as Ca}from"./DoXEs51_.js";import{b as Me}from"./IwoJDuX0.js";import{e as le,E as S,a as Ma,C as xt,Q as Ye,V as Xe,N as ct,D as V,H as Fa,p as fe,a0 as ke,a1 as pe,a2 as $a,w as oe,a3 as $e,a4 as fs,a5 as Ee,a6 as ae,a7 as Ke,a8 as ps,a9 as Wa,aa as dt,ab as ja,ac as Na,y as ze}from"./BhT-hgCL.js";import{A as Ua,B as Xt,G as Da,T as gs,a as qa,b as ht}from"./BoTKNYvo.js";function Kt(t,e){return e}function za(t,e,s,a){for(var r=[],n=e.length,i=0;i<n;i++)ba(e[i].e,r,!0);var o=n>0&&r.length===0&&s!==null;if(o){var c=s.parentNode;ya(c),c.append(s),a.clear(),ie(t,e[0].prev,e[n-1].next)}xa(r,()=>{for(var h=0;h<n;h++){var l=e[h];o||(a.delete(l.k),ie(t,l.prev,l.next)),_a(l.e,!o)}})}function Qt(t,e,s,a,r,n=null){var i=t,o={flags:e,items:new Map,first:null};se&&la();var c=null,h=!1,l=da(()=>{var u=s();return pa(u)?u:u==null?[]:cs(u)});ca(()=>{var u=m(l),f=u.length;if(h&&f===0)return;h=f===0;let b=!1;if(se){var _=i.data===ha;_!==(f===0)&&(i=zt(),Vt(i),ot(!1),b=!0)}if(se){for(var j=null,C,A=0;A<f;A++){if(Ce.nodeType===8&&Ce.data===ua){i=Ce,b=!0,ot(!1);break}var B=u[A],N=a(B,A);C=ms(Ce,o,j,null,B,N,A,r,e,s),o.items.set(N,C),j=C}f>0&&Vt(zt())}se||Va(u,o,i,r,e,a,s),n!==null&&(f===0?c?os(c):c=ls(()=>n(i)):c!==null&&fa(c,()=>{c=null})),b&&ot(!0),m(l)}),se&&(i=Ce)}function Va(t,e,s,a,r,n,i){var o=t.length,c=e.items,h=e.first,l=h,u,f=null,b=[],_=[],j,C,A,B;for(B=0;B<o;B+=1){if(j=t[B],C=n(j,B),A=c.get(C),A===void 0){var N=l?l.e.nodes_start:s;f=ms(N,e,f,f===null?e.first:f.next,j,C,B,a,r,i),c.set(C,f),b=[],_=[],l=f.next;continue}if(Ga(A,j,B),(A.e.f&lt)!==0&&os(A.e),A!==l){if(u!==void 0&&u.has(A)){if(b.length<_.length){var D=_[0],J;f=D.prev;var je=b[0],ce=b[b.length-1];for(J=0;J<b.length;J+=1)Jt(b[J],D,s);for(J=0;J<_.length;J+=1)u.delete(_[J]);ie(e,je.prev,ce.next),ie(e,f,je),ie(e,ce,D),l=D,f=ce,B-=1,b=[],_=[]}else u.delete(A),Jt(A,l,s),ie(e,A.prev,A.next),ie(e,A,f===null?e.first:f.next),ie(e,f,A),f=A;continue}for(b=[],_=[];l!==null&&l.k!==C;)(l.e.f&lt)===0&&(u??(u=new Set)).add(l),_.push(l),l=l.next;if(l===null)continue;A=l}b.push(A),f=A,l=A.next}if(l!==null||u!==void 0){for(var Ne=u===void 0?[]:cs(u);l!==null;)(l.e.f&lt)===0&&Ne.push(l),l=l.next;var F=Ne.length;if(F>0){var Le=null;za(e,Ne,Le,c)}}Ht.first=e.first&&e.first.e,Ht.last=f&&f.e}function Ga(t,e,s,a){va(t.v,e),t.i=s}function ms(t,e,s,a,r,n,i,o,c,h){var l=(c&Aa)!==0,u=(c&wa)===0,f=l?u?ga(r):Gt(r):r,b=(c&ma)===0?i:Gt(i),_={i:b,v:f,k:n,a:null,e:null,prev:s,next:a};try{return _.e=ls(()=>o(t,f,b,h),se),_.e.prev=s&&s.e,_.e.next=a&&a.e,s===null?e.first=_:(s.next=_,s.e.next=_.e),a!==null&&(a.prev=_,a.e.prev=_.e),_}finally{}}function Jt(t,e,s){for(var a=t.next?t.next.e.nodes_start:s,r=e?e.e.nodes_start:s,n=t.e.nodes_start;n!==a;){var i=ka(n);r.before(n),n=i}}function ie(t,e,s){e===null?t.first=s:(e.next=s,e.e.next=s&&s.e),s!==null&&(s.prev=e,s.e.prev=e&&e.e)}function Ha(t){if(se){var e=!1,s=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var a=t.value;We(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var r=t.checked;We(t,"checked",null),t.checked=r}}};t.__on_r=s,Ea(s),ra()}}function We(t,e,s,a){var r=t.__attributes??(t.__attributes={});se&&(r[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||r[e]!==(r[e]=s)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Sa]=s),s==null?t.removeAttribute(e):typeof s!="string"&&Ya(t).includes(e)?t[e]=s:t.setAttribute(e,s))}var Zt=new Map;function Ya(t){var e=Zt.get(t.nodeName);if(e)return e;Zt.set(t.nodeName,e=[]);for(var s,a=t,r=Element.prototype;r!==a;){s=Ta(a);for(var n in s)s[n].set&&e.push(n);a=La(a)}return e}function Xa(t,e,s=e){var a=Oa();na(t,"input",r=>{var n=r?t.defaultValue:t.value;if(n=ut(t)?ft(n):n,s(n),a&&n!==(n=e())){var i=t.selectionStart,o=t.selectionEnd;t.value=n??"",o!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(o,t.value.length))}}),(se&&t.defaultValue!==t.value||Ra(e)==null&&t.value)&&s(ut(t)?ft(t.value):t.value),Pa(()=>{var r=e();ut(t)&&r===ft(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function ut(t){var e=t.type;return e==="number"||e==="range"}function ft(t){return t===""?null:+t}function Ka(t){return function(...e){var s=e[0];return s.preventDefault(),t==null?void 0:t.apply(this,e)}}const vt=[];le.handleByNamedList(S.Environment,vt);async function Qa(t){if(!t)for(let e=0;e<vt.length;e++){const s=vt[e];if(s.value.test()){await s.value.load();return}}}let Fe;function Ja(){if(typeof Fe=="boolean")return Fe;try{Fe=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Fe=!1}return Fe}var vs=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(vs||{});class Za{constructor(e){this.items=[],this._name=e}emit(e,s,a,r,n,i,o,c){const{name:h,items:l}=this;for(let u=0,f=l.length;u<f;u++)l[u][h](e,s,a,r,n,i,o,c);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const s=this.items.indexOf(e);return s!==-1&&this.items.splice(s,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const er=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],bs=class ys extends Ma{constructor(e){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const s=[...er,...this.config.runners??[]];this._addRunners(...s),this._unsafeEvalCheck()}async init(e={}){const s=e.skipExtensionImports===!0?!0:e.manageImports===!1;await Qa(s),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const a in this._systemsHash)e={...this._systemsHash[a].constructor.defaultOptions,...e};e={...ys.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let a=0;a<this.runners.init.items.length;a++)await this.runners.init.items[a].init(e);this._initOptions=e}render(e,s){let a=e;if(a instanceof xt&&(a={container:a},s&&(Ye(Xe,"passing a second argument is deprecated, please use render options instead"),a.target=s.renderTexture)),a.target||(a.target=this.view.renderTarget),a.target===this.view.renderTarget&&(this._lastObjectRendered=a.container,a.clearColor??(a.clearColor=this.background.colorRgba),a.clear??(a.clear=this.background.clearBeforeRender)),a.clearColor){const r=Array.isArray(a.clearColor)&&a.clearColor.length===4;a.clearColor=r?a.clearColor:ct.shared.setValue(a.clearColor).toArray()}a.transform||(a.container.updateLocalTransform(),a.transform=a.container.localTransform),a.container.enableRenderGroup(),this.runners.prerender.emit(a),this.runners.renderStart.emit(a),this.runners.render.emit(a),this.runners.renderEnd.emit(a),this.runners.postrender.emit(a)}resize(e,s,a){const r=this.view.resolution;this.view.resize(e,s,a),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),a!==void 0&&a!==r&&this.runners.resolutionChange.emit(a)}clear(e={}){const s=this;e.target||(e.target=s.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=vs.ALL);const{clear:a,clearColor:r,target:n}=e;ct.shared.setValue(r??this.background.colorRgba),s.renderTarget.clear(n,a,ct.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(s=>{this.runners[s]=new Za(s)})}_addSystems(e){let s;for(s in e){const a=e[s];this._addSystem(a.value,a.name)}}_addSystem(e,s){const a=new e(this);if(this[s])throw new Error(`Whoops! The name "${s}" is already in use`);this[s]=a,this._systemsHash[s]=a;for(const r in this.runners)this.runners[r].add(a);return this}_addPipes(e,s){const a=s.reduce((r,n)=>(r[n.name]=n.value,r),{});e.forEach(r=>{const n=r.value,i=r.name,o=a[i];this.renderPipes[i]=new n(this,o?new o:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(s=>{s.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Ja())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};bs.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let xs=bs,Ve;function tr(t){return Ve!==void 0||(Ve=(()=>{var s;const e={stencil:!0,failIfMajorPerformanceCaveat:t??xs.defaultOptions.failIfMajorPerformanceCaveat};try{if(!V.get().getWebGLRenderingContext())return!1;let r=V.get().createCanvas().getContext("webgl",e);const n=!!((s=r==null?void 0:r.getContextAttributes())!=null&&s.stencil);if(r){const i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch{return!1}})()),Ve}let Ge;async function sr(t={}){return Ge!==void 0||(Ge=await(async()=>{const e=V.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(t)).requestDevice(),!0}catch{return!1}})()),Ge}const es=["webgl","webgpu","canvas"];async function ar(t){let e=[];t.preference?(e.push(t.preference),es.forEach(n=>{n!==t.preference&&e.push(n)})):e=es.slice();let s,a={};for(let n=0;n<e.length;n++){const i=e[n];if(i==="webgpu"&&await sr()){const{WebGPURenderer:o}=await Yt(async()=>{const{WebGPURenderer:c}=await import("./Di2QMRDp.js");return{WebGPURenderer:c}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url);s=o,a={...t,...t.webgpu};break}else if(i==="webgl"&&tr(t.failIfMajorPerformanceCaveat??xs.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:o}=await Yt(async()=>{const{WebGLRenderer:c}=await import("./DsaH-k9p.js");return{WebGLRenderer:c}},__vite__mapDeps([7,1,2,3,5,6,4]),import.meta.url);s=o,a={...t,...t.webgl};break}else if(i==="canvas")throw a={...t},new Error("CanvasRenderer is not yet implemented")}if(delete a.webgpu,delete a.webgl,!s)throw new Error("No available renderer for the current environment");const r=new s;return await r.init(a),r}const _s="8.8.1";class As{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,_s)}static destroy(){}}As.extension=S.Application;class rr{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,_s)}destroy(){this._renderer=null}}rr.extension={type:[S.WebGLSystem,S.WebGPUSystem],name:"initHook",priority:-10};const ws=class bt{constructor(...e){this.stage=new xt,e[0]!==void 0&&Ye(Xe,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await ar(e),bt._plugins.forEach(s=>{s.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Ye(Xe,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,s=!1){const a=bt._plugins.slice(0);a.reverse(),a.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(s),this.stage=null,this.renderer.destroy(e),this.renderer=null}};ws._plugins=[];let ks=ws;le.handleByList(S.Application,ks._plugins);le.add(As);class Es extends Ua{constructor(e,s){super();const{textures:a,data:r}=e;Object.keys(r.pages).forEach(n=>{const i=r.pages[parseInt(n,10)],o=a[i.id];this.pages.push({texture:o})}),Object.keys(r.chars).forEach(n=>{const i=r.chars[n],{frame:o,source:c}=a[i.page],h=new Fa(i.x+o.x,i.y+o.y,i.width,i.height),l=new fe({source:c,frame:h});this.chars[n]={id:n.codePointAt(0),xOffset:i.xOffset,yOffset:i.yOffset,xAdvance:i.xAdvance,kerning:i.kerning??{},texture:l}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=s}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:s}=this.pages[e];s.destroy(!0)}this.pages=null}static install(e){Xt.install(e)}static uninstall(e){Xt.uninstall(e)}}const pt={test(t){return typeof t=="string"&&t.startsWith("info face=")},parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const u in e){const f=e[u].match(/^[a-z]+/gm)[0],b=e[u].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),_={};for(const j in b){const C=b[j].split("="),A=C[0],B=C[1].replace(/"/gm,""),N=parseFloat(B),D=isNaN(N)?B:N;_[A]=D}s[f].push(_)}const a={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[r]=s.info,[n]=s.common,[i]=s.distanceField??[];i&&(a.distanceField={range:parseInt(i.distanceRange,10),type:i.fieldType}),a.fontSize=parseInt(r.size,10),a.fontFamily=r.face,a.lineHeight=parseInt(n.lineHeight,10);const o=s.page;for(let u=0;u<o.length;u++)a.pages.push({id:parseInt(o[u].id,10)||0,file:o[u].file});const c={};a.baseLineOffset=a.lineHeight-parseInt(n.base,10);const h=s.char;for(let u=0;u<h.length;u++){const f=h[u],b=parseInt(f.id,10);let _=f.letter??f.char??String.fromCharCode(b);_==="space"&&(_=" "),c[b]=_,a.chars[_]={id:b,page:parseInt(f.page,10)||0,x:parseInt(f.x,10),y:parseInt(f.y,10),width:parseInt(f.width,10),height:parseInt(f.height,10),xOffset:parseInt(f.xoffset,10),yOffset:parseInt(f.yoffset,10),xAdvance:parseInt(f.xadvance,10),kerning:{}}}const l=s.kerning||[];for(let u=0;u<l.length;u++){const f=parseInt(l[u].first,10),b=parseInt(l[u].second,10),_=parseInt(l[u].amount,10);a.chars[c[b]].kerning[c[f]]=_}return a}},ts={test(t){const e=t;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(t){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},s=t.getElementsByTagName("info")[0],a=t.getElementsByTagName("common")[0],r=t.getElementsByTagName("distanceField")[0];r&&(e.distanceField={type:r.getAttribute("fieldType"),range:parseInt(r.getAttribute("distanceRange"),10)});const n=t.getElementsByTagName("page"),i=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning");e.fontSize=parseInt(s.getAttribute("size"),10),e.fontFamily=s.getAttribute("face"),e.lineHeight=parseInt(a.getAttribute("lineHeight"),10);for(let h=0;h<n.length;h++)e.pages.push({id:parseInt(n[h].getAttribute("id"),10)||0,file:n[h].getAttribute("file")});const c={};e.baseLineOffset=e.lineHeight-parseInt(a.getAttribute("base"),10);for(let h=0;h<i.length;h++){const l=i[h],u=parseInt(l.getAttribute("id"),10);let f=l.getAttribute("letter")??l.getAttribute("char")??String.fromCharCode(u);f==="space"&&(f=" "),c[u]=f,e.chars[f]={id:u,page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xOffset:parseInt(l.getAttribute("xoffset"),10),yOffset:parseInt(l.getAttribute("yoffset"),10),xAdvance:parseInt(l.getAttribute("xadvance"),10),kerning:{}}}for(let h=0;h<o.length;h++){const l=parseInt(o[h].getAttribute("first"),10),u=parseInt(o[h].getAttribute("second"),10),f=parseInt(o[h].getAttribute("amount"),10);e.chars[c[u]].kerning[c[l]]=f}return e}},ss={test(t){return typeof t=="string"&&t.includes("<font>")?ts.test(V.get().parseXML(t)):!1},parse(t){return ts.parse(V.get().parseXML(t))}},nr=[".xml",".fnt"],ir={extension:{type:S.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof Es,getCacheableAssets(t,e){const s={};return t.forEach(a=>{s[a]=e,s[`${a}-bitmap`]=e}),s[`${e.fontFamily}-bitmap`]=e,s}},or={extension:{type:S.LoadParser,priority:ke.Normal},name:"loadBitmapFont",test(t){return nr.includes(pe.extname(t).toLowerCase())},async testParse(t){return pt.test(t)||ss.test(t)},async parse(t,e,s){const a=pt.test(t)?pt.parse(t):ss.parse(t),{src:r}=e,{pages:n}=a,i=[],o=a.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let u=0;u<n.length;++u){const f=n[u].file;let b=pe.join(pe.dirname(r),f);b=$a(b,r),i.push({src:b,data:o})}const c=await s.load(i),h=i.map(u=>c[u.src]);return new Es({data:a,textures:h},r)},async load(t,e){return await(await V.get().fetch(t)).text()},async unload(t,e,s){await Promise.all(t.pages.map(a=>s.unload(a.texture.source._sourceOrigin))),t.destroy()}};class lr{constructor(e,s=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=s}add(e){e.forEach(s=>{this._assetList.push(s)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],s=Math.min(this._assetList.length,this._maxConcurrent);for(let a=0;a<s;a++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const cr={extension:{type:S.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(e=>e instanceof fe),getCacheableAssets:(t,e)=>{const s={};return t.forEach(a=>{e.forEach((r,n)=>{s[a+(n===0?"":n+1)]=r})}),s}};async function Ss(t){if("Image"in globalThis)return new Promise(e=>{const s=new Image;s.onload=()=>{e(!0)},s.onerror=()=>{e(!1)},s.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const dr={extension:{type:S.DetectionParser,priority:1},test:async()=>Ss("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")},as=["png","jpg","jpeg"],hr={extension:{type:S.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...as],remove:async t=>t.filter(e=>!as.includes(e))},ur="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function _t(t){return ur?!1:document.createElement("video").canPlayType(t)!==""}const fr={extension:{type:S.DetectionParser,priority:0},test:async()=>_t("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")},pr={extension:{type:S.DetectionParser,priority:0},test:async()=>_t("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")},gr={extension:{type:S.DetectionParser,priority:0},test:async()=>_t("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")},mr={extension:{type:S.DetectionParser,priority:0},test:async()=>Ss("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};class vr{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,s,a)=>(this._parsersValidated=!1,e[s]=a,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,s){const a={promise:null,parser:null};return a.promise=(async()=>{var i,o;let r=null,n=null;if(s.loadParser&&(n=this._parserHash[s.loadParser],n||oe(`[Assets] specified load parser "${s.loadParser}" not found while loading ${e}`)),!n){for(let c=0;c<this.parsers.length;c++){const h=this.parsers[c];if(h.load&&((i=h.test)!=null&&i.call(h,e,s,this))){n=h;break}}if(!n)return oe(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await n.load(e,s,this),a.parser=n;for(let c=0;c<this.parsers.length;c++){const h=this.parsers[c];h.parse&&h.parse&&await((o=h.testParse)==null?void 0:o.call(h,r,s,this))&&(r=await h.parse(r,s,this)||r,a.parser=h)}return r})(),a}async load(e,s){this._parsersValidated||this._validateParsers();let a=0;const r={},n=fs(e),i=$e(e,h=>({alias:[h],src:h,data:{}})),o=i.length,c=i.map(async h=>{const l=pe.toAbsolute(h.src);if(!r[h.src])try{this.promiseCache[l]||(this.promiseCache[l]=this._getLoadPromiseAndParser(l,h)),r[h.src]=await this.promiseCache[l].promise,s&&s(++a/o)}catch(u){throw delete this.promiseCache[l],delete r[h.src],new Error(`[Loader.load] Failed to load ${l}.
${u}`)}});return await Promise.all(c),n?r[i[0].src]:r}async unload(e){const a=$e(e,r=>({alias:[r],src:r})).map(async r=>{var o,c;const n=pe.toAbsolute(r.src),i=this.promiseCache[n];if(i){const h=await i.promise;delete this.promiseCache[n],await((c=(o=i.parser)==null?void 0:o.unload)==null?void 0:c.call(o,h,r,this))}});await Promise.all(a)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,s)=>(s.name?e[s.name]&&oe(`[Assets] loadParser name conflict "${s.name}"`):oe("[Assets] loadParser should have a name"),{...e,[s.name]:s}),{})}}function Se(t,e){if(Array.isArray(e)){for(const s of e)if(t.startsWith(`data:${s}`))return!0;return!1}return t.startsWith(`data:${e}`)}const br=".json",yr="application/json",xr={extension:{type:S.LoadParser,priority:ke.Low},name:"loadJson",test(t){return Se(t,yr)||Ee(t,br)},async load(t){return await(await V.get().fetch(t)).json()}},_r=".txt",Ar="text/plain",wr={name:"loadTxt",extension:{type:S.LoadParser,priority:ke.Low,name:"loadTxt"},test(t){return Se(t,Ar)||Ee(t,_r)},async load(t){return await(await V.get().fetch(t)).text()}},kr=["normal","bold","100","200","300","400","500","600","700","800","900"],Er=[".ttf",".otf",".woff",".woff2"],Sr=["font/ttf","font/otf","font/woff","font/woff2"],Lr=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Tr(t){const e=pe.extname(t),r=pe.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let n=r.length>0;for(const o of r)if(!o.match(Lr)){n=!1;break}let i=r.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const Or=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Rr(t){return Or.test(t)?t:encodeURI(t)}const Pr={extension:{type:S.LoadParser,priority:ke.Low},name:"loadWebFont",test(t){return Se(t,Sr)||Ee(t,Er)},async load(t,e){var a,r,n;const s=V.get().getFontFaceSet();if(s){const i=[],o=((a=e.data)==null?void 0:a.family)??Tr(t),c=((n=(r=e.data)==null?void 0:r.weights)==null?void 0:n.filter(l=>kr.includes(l)))??["normal"],h=e.data??{};for(let l=0;l<c.length;l++){const u=c[l],f=new FontFace(o,`url(${Rr(t)})`,{...h,weight:u});await f.load(),s.add(f),i.push(f)}return ae.set(`${o}-and-url`,{url:t,fontFaces:i}),i.length===1?i[0]:i}return oe("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>{ae.remove(`${e.family}-and-url`),V.get().getFontFaceSet().delete(e)})}};function At(t,e=1){var a;const s=(a=Ke.RETINA_PREFIX)==null?void 0:a.exec(t);return s?parseFloat(s[1]):e}function wt(t,e,s){t.label=s,t._sourceOrigin=s;const a=new fe({source:t,label:s}),r=()=>{delete e.promiseCache[s],ae.has(s)&&ae.remove(s)};return a.source.once("destroy",()=>{e.promiseCache[s]&&(oe("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),r())}),a.once("destroy",()=>{t.destroyed||(oe("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),a}const Ir=".svg",Br="image/svg+xml",Cr={extension:{type:S.LoadParser,priority:ke.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return Se(t,Br)||Ee(t,Ir)},async load(t,e,s){var a;return((a=e.data)==null?void 0:a.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?Fr(t):Mr(t,e,s,this.config.crossOrigin)},unload(t){t.destroy(!0)}};async function Mr(t,e,s,a){var C,A,B;const n=await(await V.get().fetch(t)).blob(),i=URL.createObjectURL(n),o=new Image;o.src=i,o.crossOrigin=a,await o.decode(),URL.revokeObjectURL(i);const c=document.createElement("canvas"),h=c.getContext("2d"),l=((C=e.data)==null?void 0:C.resolution)||At(t),u=((A=e.data)==null?void 0:A.width)??o.width,f=((B=e.data)==null?void 0:B.height)??o.height;c.width=u*l,c.height=f*l,h.drawImage(o,0,0,u*l,f*l);const{parseAsGraphicsContext:b,..._}=e.data??{},j=new ps({resource:c,alphaMode:"premultiply-alpha-on-upload",resolution:l,..._});return wt(j,s,t)}async function Fr(t){const s=await(await V.get().fetch(t)).text(),a=new Da;return a.svg(s),a}const $r=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Ae=null,yt=class{constructor(){Ae||(Ae=URL.createObjectURL(new Blob([$r],{type:"application/javascript"}))),this.worker=new Worker(Ae)}};yt.revokeObjectURL=function(){Ae&&(URL.revokeObjectURL(Ae),Ae=null)};const Wr=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let we=null;class Ls{constructor(){we||(we=URL.createObjectURL(new Blob([Wr],{type:"application/javascript"}))),this.worker=new Worker(we)}}Ls.revokeObjectURL=function(){we&&(URL.revokeObjectURL(we),we=null)};let rs=0,gt;class jr{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:s}=new yt;s.addEventListener("message",a=>{s.terminate(),yt.revokeObjectURL(),e(a.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,s){var a;return this._run("loadImageBitmap",[e,(a=s==null?void 0:s.data)==null?void 0:a.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){gt===void 0&&(gt=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<gt&&(this._createdWorkers++,e=new Ls().worker,e.addEventListener("message",s=>{this._complete(s.data),this._returnWorker(s.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,s){await this._initWorkers();const a=new Promise((r,n)=>{this._queue.push({id:e,arguments:s,resolve:r,reject:n})});return this._next(),a}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const s=this._queue.pop(),a=s.id;this._resolveHash[rs]={resolve:s.resolve,reject:s.reject},e.postMessage({data:s.arguments,uuid:rs++,id:a})}}const ns=new jr,Nr=[".jpeg",".jpg",".png",".webp",".avif"],Ur=["image/jpeg","image/png","image/webp","image/avif"];async function Dr(t,e){var r;const s=await V.get().fetch(t);if(!s.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${s.status} ${s.statusText}`);const a=await s.blob();return((r=e==null?void 0:e.data)==null?void 0:r.alphaMode)==="premultiplied-alpha"?createImageBitmap(a,{premultiplyAlpha:"none"}):createImageBitmap(a)}const Ts={name:"loadTextures",extension:{type:S.LoadParser,priority:ke.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Se(t,Ur)||Ee(t,Nr)},async load(t,e,s){var n;let a=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ns.isImageBitmapSupported()?a=await ns.loadImageBitmap(t,e):a=await Dr(t,e):a=await new Promise((i,o)=>{a=new Image,a.crossOrigin=this.config.crossOrigin,a.src=t,a.complete?i(a):(a.onload=()=>{i(a)},a.onerror=o)});const r=new ps({resource:a,alphaMode:"premultiply-alpha-on-upload",resolution:((n=e.data)==null?void 0:n.resolution)||At(t),...e.data});return wt(r,s,t)},unload(t){t.destroy(!0)}},Os=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],qr=Os.map(t=>`video/${t.substring(1)}`);function zr(t,e,s){s===void 0&&!e.startsWith("data:")?t.crossOrigin=Gr(e):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")}function Vr(t){return new Promise((e,s)=>{t.addEventListener("canplaythrough",a),t.addEventListener("error",r),t.load();function a(){n(),e()}function r(i){n(),s(i)}function n(){t.removeEventListener("canplaythrough",a),t.removeEventListener("error",r)}})}function Gr(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);const s=new URL(t,document.baseURI);return s.hostname!==e.hostname||s.port!==e.port||s.protocol!==e.protocol?"anonymous":""}const Hr={name:"loadVideo",extension:{type:S.LoadParser,name:"loadVideo"},test(t){const e=Se(t,qr),s=Ee(t,Os);return e||s},async load(t,e,s){var c,h;const a={...dt.defaultOptions,resolution:((c=e.data)==null?void 0:c.resolution)||At(t),alphaMode:((h=e.data)==null?void 0:h.alphaMode)||await Wa(),...e.data},r=document.createElement("video"),n={preload:a.autoLoad!==!1?"auto":void 0,"webkit-playsinline":a.playsinline!==!1?"":void 0,playsinline:a.playsinline!==!1?"":void 0,muted:a.muted===!0?"":void 0,loop:a.loop===!0?"":void 0,autoplay:a.autoPlay!==!1?"":void 0};Object.keys(n).forEach(l=>{const u=n[l];u!==void 0&&r.setAttribute(l,u)}),a.muted===!0&&(r.muted=!0),zr(r,t,a.crossorigin);const i=document.createElement("source");let o;if(t.startsWith("data:"))o=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){const l=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();o=dt.MIME_TYPES[l]||`video/${l}`}return i.src=t,o&&(i.type=o),new Promise(l=>{const u=async()=>{const f=new dt({...a,resource:r});r.removeEventListener("canplay",u),e.data.preload&&await Vr(r),l(wt(f,s,t))};r.addEventListener("canplay",u),r.appendChild(i)})},unload(t){t.destroy(!0)}},Rs={extension:{type:S.ResolveParser,name:"resolveTexture"},test:Ts.test,parse:t=>{var e;return{resolution:parseFloat(((e=Ke.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}},Yr={extension:{type:S.ResolveParser,priority:-2,name:"resolveJson"},test:t=>Ke.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:Rs.parse};class Xr{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ke,this.loader=new vr,this.cache=ae,this._backgroundLoader=new lr(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var n,i;if(this._initialized){oe("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let o=e.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const s=((n=e.texturePreference)==null?void 0:n.resolution)??1,a=typeof s=="number"?[s]:s,r=await this._detectFormats({preferredFormats:(i=e.texturePreference)==null?void 0:i.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:a}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,s){this._initialized||await this.init();const a=fs(e),r=$e(e).map(o=>{if(typeof o!="string"){const c=this.resolver.getAlias(o);return c.some(h=>!this.resolver.hasKey(h))&&this.add(o),Array.isArray(c)?c[0]:c}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),n=this.resolver.resolve(r),i=await this._mapLoadToResolve(n,s);return a?i[r[0]]:i}addBundle(e,s){this.resolver.addBundle(e,s)}async loadBundle(e,s){this._initialized||await this.init();let a=!1;typeof e=="string"&&(a=!0,e=[e]);const r=this.resolver.resolveBundle(e),n={},i=Object.keys(r);let o=0,c=0;const h=()=>{s==null||s(++o/c)},l=i.map(u=>{const f=r[u];return c+=Object.keys(f).length,this._mapLoadToResolve(f,h).then(b=>{n[u]=b})});return await Promise.all(l),a?n[e[0]]:n}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const s=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(s))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const s=this.resolver.resolveBundle(e);Object.values(s).forEach(a=>{this._backgroundLoader.add(Object.values(a))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return ae.get(e);const s={};for(let a=0;a<e.length;a++)s[a]=ae.get(e[a]);return s}async _mapLoadToResolve(e,s){const a=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const r=await this.loader.load(a,s);this._backgroundLoader.active=!0;const n={};return a.forEach(i=>{const o=r[i.src],c=[i.src];i.alias&&c.push(...i.alias),c.forEach(h=>{n[h]=o}),ae.set(c,o)}),n}async unload(e){this._initialized||await this.init();const s=$e(e).map(r=>typeof r!="string"?r.src:r),a=this.resolver.resolve(s);await this._unloadFromResolved(a)}async unloadBundle(e){this._initialized||await this.init(),e=$e(e);const s=this.resolver.resolveBundle(e),a=Object.keys(s).map(r=>this._unloadFromResolved(s[r]));await Promise.all(a)}async _unloadFromResolved(e){const s=Object.values(e);s.forEach(a=>{ae.remove(a.src)}),await this.loader.unload(s)}async _detectFormats(e){let s=[];e.preferredFormats&&(s=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const a of e.detections)e.skipDetections||await a.test()?s=await a.add(s):e.skipDetections||(s=await a.remove(s));return s=s.filter((a,r)=>s.indexOf(a)===r),s}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(s=>{s.config&&Object.keys(s.config).filter(a=>a in e).forEach(a=>{s.config[a]=e[a]})})}}const _e=new Xr;le.handleByList(S.LoadParser,_e.loader.parsers).handleByList(S.ResolveParser,_e.resolver.parsers).handleByList(S.CacheParser,_e.cache.parsers).handleByList(S.DetectionParser,_e.detections);le.add(cr,hr,dr,mr,fr,pr,gr,xr,wr,Pr,Cr,Ts,Hr,or,ir,Rs,Yr);const is={loader:S.LoadParser,resolver:S.ResolveParser,cache:S.CacheParser,detection:S.DetectionParser};le.handle(S.Asset,t=>{const e=t.ref;Object.entries(is).filter(([s])=>!!e[s]).forEach(([s,a])=>le.add(Object.assign(e[s],{extension:e[s].extension??a})))},t=>{const e=t.ref;Object.keys(is).filter(s=>!!e[s]).forEach(s=>le.remove(e[s]))});class Kr extends ja{constructor(e,s){const{text:a,resolution:r,style:n,anchor:i,width:o,height:c,roundPixels:h,...l}=e;super({...l}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=s,this.text=a??"",this.style=n,this.resolution=r??null,this.allowChildren=!1,this._anchor=new Na({_onUpdate:()=>{this.onViewUpdate()}}),i&&(this.anchor=i),this.roundPixels=h??!1,o!==void 0&&(this.width=o),c!==void 0&&(this.height=c)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var s;e||(e={}),(s=this._style)==null||s.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,s){typeof e=="object"?(s=e.height??e.width,e=e.width):s??(s=e),e!==void 0&&this._setWidth(e,this.bounds.width),s!==void 0&&this._setHeight(s,this.bounds.height)}containsPoint(e){const s=this.bounds.width,a=this.bounds.height,r=-s*this.anchor.x;let n=0;return e.x>=r&&e.x<=r+s&&(n=-a*this.anchor.y,e.y>=n&&e.y<=n+a)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}}function Qr(t,e){let s=t[0]??{};return(typeof s=="string"||t[1])&&(Ye(Xe,`use new ${e}({ text: "hi!", style }) instead`),s={text:s,style:t[1]}),s}class Jr extends Kr{constructor(...e){const s=Qr(e,"Text");super(s,gs),this.renderPipeId="text"}updateBounds(){const e=this._bounds,s=this._anchor,a=qa.measureText(this._text,this._style),{width:r,height:n}=a;e.minX=-s._x*r,e.maxX=e.minX+r,e.minY=-s._y*n,e.maxY=e.minY+n}}var Zr=G('<p style="color: red;" class="svelte-1t2q5b9"><strong class="svelte-1t2q5b9">Error:</strong> </p>'),en=G('<div class="svelte-1t2q5b9"> </div>'),tn=G('<details class="svelte-1t2q5b9"><summary class="svelte-1t2q5b9"> </summary> <!></details>'),sn=G(`<div style="
    position: fixed;
    top: 10px;
    left: 10px;
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 10px;
    border-radius: 5px;
    font-family: monospace;
    font-size: 12px;
    z-index: 2000;
    max-width: 400px;
    max-height: 300px;
    overflow-y: auto;
  " class="svelte-1t2q5b9"><h3 class="svelte-1t2q5b9">üé∞ Oma-peli Debug</h3> <p class="svelte-1t2q5b9"><strong class="svelte-1t2q5b9">Status:</strong> </p> <!> <p class="svelte-1t2q5b9"><strong class="svelte-1t2q5b9">Base:</strong> </p> <p class="svelte-1t2q5b9"><strong class="svelte-1t2q5b9">BG URL:</strong> </p> <p class="svelte-1t2q5b9"><strong class="svelte-1t2q5b9">Sample:</strong> </p> <!></div>`),an=G('<span style="color: #ffd700; font-weight: bold;" class="svelte-1t2q5b9"> </span>'),rn=G('<div style="margin: 5px 0; font-size: 1.1em;" class="svelte-1t2q5b9"> <!></div>'),nn=G(`<div style="
    position: fixed;
    top: 50%;
    right: 30px;
    transform: translateY(-50%);
    background: linear-gradient(45deg, #ffd700, #ffed4a);
    color: #333;
    padding: 20px;
    border-radius: 15px;
    font-family: Arial, sans-serif;
    text-align: center;
    z-index: 3000;
    border: 3px solid #ffb700;
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
    animation: winPulse 2s infinite;
    max-width: 350px;
  " class="svelte-1t2q5b9"><h2 style="margin: 0 0 10px 0; font-size: 2em;" class="svelte-1t2q5b9">üéâ VOITTO! üéâ</h2> <div style="font-size: 1.5em; font-weight: bold; margin: 10px 0;" class="svelte-1t2q5b9"> </div> <!> <button style="
        margin-top: 15px;
        padding: 8px 16px;
        background: #333;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1em;
      " class="svelte-1t2q5b9">Jatka pelaamista</button></div>`),on=G(`<div style="
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.95);
    color: white;
    padding: 30px;
    border-radius: 15px;
    font-family: Arial, sans-serif;
    z-index: 3000;
    border: 3px solid #ffd700;
    max-width: 600px;
    max-height: 80vh;
    overflow-y: auto;
  " class="svelte-1t2q5b9"><h2 style="margin: 0 0 20px 0; text-align: center; color: #ffd700;" class="svelte-1t2q5b9">üí∞ PAYTABLE (81 WAYS)</h2> <div style="margin-bottom: 15px; text-align: center; color: #aaa;" class="svelte-1t2q5b9">Voitot muodostuvat 81 ways -j√§rjestelm√§ll√§ (vasemmalta oikealle)<br class="svelte-1t2q5b9"> V√§hint√§√§n 3 symbolia tarvitaan voittoon<br class="svelte-1t2q5b9"> <span style="color: #ffd700;" class="svelte-1t2q5b9">Satunnainen 1x-3x kerroin lis√§t√§√§n voittoihin!</span></div> <div style="display: grid; gap: 10px;" class="svelte-1t2q5b9"><div style="background: rgba(255, 255, 255, 0.1); padding: 10px; border-radius: 8px; border-left: 4px solid #ffd700;" class="svelte-1t2q5b9"><div style="font-size: 1.2em; font-weight: bold; color: #ffd700; margin-bottom: 5px;" class="svelte-1t2q5b9">üëë PREMIUM SYMBOLS</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">g (Rockabilly): 3x=5 | 4x=25 | 5x=100</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">e (Blonde): 3x=5 | 4x=20 | 5x=75</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">f (Brunette): 3x=3 | 4x=15 | 5x=50</div></div> <div style="background: rgba(255, 255, 255, 0.1); padding: 10px; border-radius: 8px; border-left: 4px solid #00bfff;" class="svelte-1t2q5b9"><div style="font-size: 1.2em; font-weight: bold; color: #00bfff; margin-bottom: 5px;" class="svelte-1t2q5b9">üíé BLUE SYMBOLS</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">a (Hot Rod): 3x=2 | 4x=7 | 5x=25</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">b (Jacket): 3x=2 | 4x=7 | 5x=25</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">c (Roller Skates): 3x=1.5 | 4x=5 | 5x=20</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">d (Microphone): 3x=1.5 | 4x=5 | 5x=20</div></div> <div style="background: rgba(255, 255, 255, 0.1); padding: 10px; border-radius: 8px; border-left: 4px solid #ff6666;" class="svelte-1t2q5b9"><div style="font-size: 1.2em; font-weight: bold; color: #ff6666; margin-bottom: 5px;" class="svelte-1t2q5b9">üéµ RED SYMBOLS</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">i (Burger): 3x=0.5 | 4x=2 | 5x=10</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">j (Fries): 3x=0.5 | 4x=2 | 5x=10</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">k (Milkshake): 3x=0.3 | 4x=1 | 5x=5</div></div> <div style="background: rgba(255, 255, 255, 0.1); padding: 10px; border-radius: 8px; border-left: 4px solid #ff00ff;" class="svelte-1t2q5b9"><div style="font-size: 1.2em; font-weight: bold; color: #ff00ff; margin-bottom: 5px;" class="svelte-1t2q5b9">‚≠ê SPECIAL SYMBOLS</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">h (WILD) - Korvaa kaikki muut symbolit (paitsi Scatter)</div> <div style="margin: 5px 0;" class="svelte-1t2q5b9">l (SCATTER) - 5-12 symbolia = 8-15 FREE SPINS</div></div></div> <div style="margin-top: 20px; text-align: center; font-size: 0.9em; color: #aaa;" class="svelte-1t2q5b9">Kaikki voitot kerrotaan panoksella (Bet) | Satunnainen 1x-3x kerroin lis√§t√§√§n</div> <button style="
        margin-top: 20px;
        width: 100%;
        padding: 10px;
        background: #ffd700;
        color: #333;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1em;
        font-weight: bold;
      " class="svelte-1t2q5b9">Sulje</button></div>`),ln=G(`<!> <!> <!> <div class="svelte-1t2q5b9"></div> <div style="
  position: absolute;
  top: 20px;
  right: 20px;
  background: rgba(0, 0, 0, 0.85);
  color: #ffd700;
  padding: 15px 20px;
  border-radius: 10px;
  font-family: 'Courier New', monospace;
  font-size: 18px;
  font-weight: bold;
  border: 2px solid #ffd700;
  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.5);
  z-index: 1500;
  min-width: 180px;
" class="svelte-1t2q5b9"><div style="display: flex; justify-content: space-between; margin-bottom: 8px;" class="svelte-1t2q5b9"><span style="color: #fff;" class="svelte-1t2q5b9">CREDITS:</span> <span style="color: #ffd700;" class="svelte-1t2q5b9"> </span></div> <div style="display: flex; justify-content: space-between; border-top: 1px solid #555; padding-top: 8px;" class="svelte-1t2q5b9"><span style="color: #fff;" class="svelte-1t2q5b9">BET:</span> <span style="color: #00ff00;" class="svelte-1t2q5b9"> </span></div></div> <div style="
  position: absolute;
  bottom: 20px;
  left: 20px;
  background: rgba(0, 0, 0, 0.85);
  padding: 15px;
  border-radius: 10px;
  border: 2px solid #00ff00;
  z-index: 1500;
" class="svelte-1t2q5b9"><div style="color: white; font-size: 14px; margin-bottom: 10px; text-align: center; font-weight: bold;" class="svelte-1t2q5b9">BET CONTROLS</div> <div style="display: flex; gap: 10px; align-items: center;" class="svelte-1t2q5b9"><button style="
        padding: 8px 15px;
        background: #ff4444;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: background 0.2s;
      " class="bet-btn-minus svelte-1t2q5b9">-</button> <div style="
      color: #00ff00;
      font-family: 'Courier New', monospace;
      font-size: 20px;
      font-weight: bold;
      min-width: 60px;
      text-align: center;
      background: rgba(0, 255, 0, 0.1);
      padding: 5px 10px;
      border-radius: 5px;
    " class="svelte-1t2q5b9"> </div> <button style="
        padding: 8px 15px;
        background: #44ff44;
        color: #000;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: background 0.2s;
      " class="bet-btn-plus svelte-1t2q5b9">+</button> <button style="
        padding: 8px 12px;
        background: #ffd700;
        color: #000;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
        transition: background 0.2s;
      " class="bet-btn-max svelte-1t2q5b9">MAX</button></div></div> <button style="
    position: absolute;
    top: 130px;
    right: 20px;
    padding: 10px 15px;
    background-color: rgba(255, 215, 0, 0.3);
    border: 2px solid rgba(255, 215, 0, 0.7);
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    color: white;
    text-shadow: 0 0 5px rgba(0,0,0,0.8);
    z-index: 1000;
    min-width: 180px;
  " class="svelte-1t2q5b9">üí∞ PAYTABLE</button> <button class="svelte-1t2q5b9"> </button> <button title="SPIN" class="svelte-1t2q5b9"></button>`,1);function cn(t,e){ds(e,!0);const s=13,a=1445,r=1e3,n=1.75,i=-30,o=-10,c=160,h=0,l=720,u=750,f=.8,b=50,_=30,j=-40,C=1,A="height",N=Math.round(100*n),D=Math.round(N*(700/760)),je=D+10,ce=["a","b","c","d","e","f","g","h","i","j","k","l","emptyslot"],F=typeof window<"u"&&window.location.hostname.includes("github.io")?"/web-sdk/oma-peli/symbols":`${Me}/symbols`,Le={a:`${F}/Blue_hotrod.jpg`,b:`${F}/Blue_jacket.jpg`,c:`${F}/Blue_rollers.jpg`,d:`${F}/Blue_speakers.jpg`,e:`${F}/Premium_blonde.jpg`,f:`${F}/Premium_brunette.jpg`,g:`${F}/Premium_rocker.jpg`,h:`${F}/Red_bubblegum.jpg`,i:`${F}/Red_burger.jpg`,j:`${F}/Red_fries.jpg`,k:`${F}/Red_milkshake.jpg`,l:`${F}/Scatter.jpg`,emptyslot:`${F}/Emptyslot.jpg`},Qe=`${F}/bg_base.jpg`,kt=`${F}/ReelFrames.png`,Et=`${F}/RockABillyReels_logo.png`,St={spin:`${Me}/sounds/spin.mp3`,stop:`${Me}/sounds/stop.mp3`,win:`${Me}/sounds/win.mp3`};let de=Z(!0),Ue={},De=null,ge=null,Te=null,Oe=null,Re=Z("Initializing..."),me=Z(""),K=[],re=Z(1e3),q=Z(10);const Lt=1,Je=100;function Tt(p){if(p===6){const v=Math.random()<.5?"emptyslot":"h";return console.log(`Reel ${p} (MIDDLE): ${v}`),v}const g=ce.filter(v=>v!=="emptyslot"),d=g[Math.floor(Math.random()*g.length)];return console.log(`Reel ${p} (NORMAL): ${d}, available: ${g.length}`),d}function Ot(){const p=[];for(let g=0;g<s;g++)p.push(Tt(g));return p}function Ps(p){return p<3?{col:0,row:p}:p<6?{col:1,row:p-3}:p===6?{col:2,row:0}:p<10?{col:3,row:p-7}:{col:4,row:p-10}}function Pe(p,g){return p===0?g:p===1?3+g:p===2?6:p===3?7+g:p===4?10+g:-1}const Is={k:{3:.3,4:1,5:5},j:{3:.5,4:2,5:10},i:{3:.5,4:2,5:10},c:{3:1.5,4:5,5:20},d:{3:1.5,4:5,5:20},b:{3:2,4:7,5:25},a:{3:2,4:7,5:25},f:{3:3,4:15,5:50},e:{3:5,4:20,5:75},g:{3:5,4:25,5:100},h:{},l:{},emptyslot:{}};function Bs(){var O;const p=[],g=[];for(let E=0;E<s;E++)$[E]==="l"&&g.push(E);if(g.length>=5){const E=8+(g.length-5);console.log(`üé∞ SCATTER WIN! ${g.length} scatters = ${E} FREE SPINS!`),p.push({symbol:"l",count:g.length,payout:0,positions:g})}$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],$[8],$[9],$[10],$[11],$[12];const d=[];for(let E=0;E<3;E++)for(let w=0;w<3;w++)for(let P=0;P<1;P++)for(let M=0;M<3;M++)for(let x=0;x<3;x++){const W=[Pe(0,E),Pe(1,w),Pe(2,P),Pe(3,M),Pe(4,x)];d.push(W)}console.log(`Generated ${d.length} possible paths (should be 81)`);const v=new Map;for(const E of d){const w=E.map(x=>$[x]);if(w[0]==="emptyslot"||w[0]==="l")continue;let P=null;for(let x=0;x<w.length;x++)if(w[x]!=="h"&&w[x]!=="emptyslot"&&w[x]!=="l"){P=w[x];break}if(!P)continue;let M=0;for(let x=0;x<w.length;x++){const W=w[x];if(W===P||W==="h")M++;else break}if(M>=3){const x=`${P}-${M}`,W=v.get(x);W?W.count++:v.set(x,{symbol:P,length:M,count:1,examplePath:E.slice(0,M)})}}const y=[];for(const[E,w]of v.entries()){const P=(O=Is[w.symbol])==null?void 0:O[w.length];if(P!==void 0&&P>0){const M=P*m(q),x=[1,2,3],W=x[Math.floor(Math.random()*x.length)],H=M*W;console.log(`Win: ${w.length}x ${w.symbol} on ${w.count} lines = ${H} (base: ${M}, multiplier: ${W}x)`),y.push({symbol:w.symbol,count:w.length,payout:H,positions:w.examplePath,multiplier:W})}}return p.push(...y),p}let he=Z(0),Ze=Z(xe([])),ve=Z(!1),qe=Z(!1);const Cs={a:"Hot Rod",b:"Jacket",c:"Roller Skates",d:"Microphone",e:"Blonde",f:"Brunette",g:"Rockabilly",h:"WILD",i:"Burger",j:"Fries",k:"Milkshake",l:"SCATTER",emptyslot:"Empty"};function et(p){if(!m(de)||!Ue[p])return;const g=Ue[p];g.currentTime=0,g.play().catch(d=>{console.warn("√Ñ√§nen toisto ep√§onnistui:",p,d)})}function Ms(p){Ie.forEach(g=>I.stage.removeChild(g)),Ie=[],p.forEach(g=>{g.positions.forEach(d=>{const v=be[d],y=new ht().rect(0,0,N,D).fill({color:16776960,alpha:0}).stroke({color:16766720,width:4});y.x=v.container.x,y.y=v.container.y,I.stage.addChild(y),Ie.push(y);let O=0,E=1;const w=.05;I.ticker.add(()=>{O+=E*w,O>=.4&&(E=-1),O<=0&&(E=1),y.alpha=.5+O})})})}function Rt(){Ie.forEach(p=>I.stage.removeChild(p)),Ie=[]}let $=Ot(),tt,I,be=[],Ie=[];class Fs{constructor(g,d){Q(this,"index");Q(this,"container");Q(this,"offset",0);Q(this,"speed",0);Q(this,"targetSpeed",30);Q(this,"state","idle");Q(this,"stopDelay",0);Q(this,"bounceOffset",0);Q(this,"bounceSpeed",0);Q(this,"bounceFrames",0);this.index=g,this.container=d}start(g){this.state="spinning",this.speed=0,this.targetSpeed=35,this.stopDelay=g}update(){this.state!=="idle"&&(this.state==="spinning"&&(this.speed<this.targetSpeed&&(this.speed+=2),this.stopDelay>0?this.stopDelay--:this.state="slowing"),this.state==="slowing"&&(this.speed*=.92,this.speed<2.5&&(this.state="bouncing",this.bounceSpeed=-8,this.bounceFrames=0,this.speed=0,this.offset=0,et("stop"))),this.state==="bouncing"&&(this.bounceFrames++,this.bounceSpeed+=.8,this.bounceOffset+=this.bounceSpeed,this.bounceOffset>3&&(this.bounceOffset=3,this.bounceSpeed*=-.6),(this.bounceFrames>45||Math.abs(this.bounceSpeed)<.5&&Math.abs(this.bounceOffset)<1)&&(this.state="stopped",this.bounceOffset=0,this.bounceSpeed=0)),this.speed>0&&(this.offset+=this.speed,this.offset>=je&&(this.offset=0,$[this.index]=Tt(this.index))))}draw(){const g=this.container;g.removeChildren();const d=$[this.index];if(!d||!De||!De[d])return;const v=De[d];if(!v)return;const y=this.offset+this.bounceOffset,O=new ze(v);O.width=N,O.height=D,O.x=0,O.y=y,g.addChild(O)}}hs(async()=>{I=new ks,await I.init({width:a,height:r,background:"#001a33"}),tt.appendChild(I.canvas);const p={};try{R(Re,"Loading background and UI images..."),K.push(`Loading background: ${Qe}`),K.push(`Loading reel frames: ${kt}`),K.push(`Loading logo: ${Et}`),await _e.load([{alias:"background",src:Qe},{alias:"reelframes",src:kt},{alias:"logo",src:Et}]),ge=fe.from("background"),Te=fe.from("reelframes"),Oe=fe.from("logo"),console.log("‚úÖ Background texture created:",ge.width,"x",ge.height),console.log("‚úÖ Reel frames texture created:",Te.width,"x",Te.height),console.log("‚úÖ Logo texture created:",Oe.width,"x",Oe.height),K.push("‚úÖ All UI images loaded"),R(Re,"Loading symbols...");const d=[];for(const v of ce)d.push({alias:v,src:Le[v]});await _e.load(d);for(const v of ce){const y=Le[v];K.push(`Loading symbol ${v}: ${y}`);try{const O=fe.from(v);p[v]=O,console.log(`‚úÖ Symbol ${v} loaded:`,O.width,"x",O.height),K.push(`‚úÖ Symbol ${v} loaded`)}catch(O){const E=`‚ùå Failed to load symbol ${v} from ${y}: ${O}`;throw K.push(E),console.error(E),new Error(E)}}De=p,R(Re,"Assets loaded successfully!")}catch(d){R(me,`Asset loading failed: ${d}`),K.push(m(me)),console.error(m(me));return}console.log("Ladataan √§√§niefektit...");for(const[d,v]of Object.entries(St)){const y=new Audio;y.src=v,y.preload="auto",y.volume=.7,y.load(),y.addEventListener("error",()=>{console.log(`√Ñ√§nitiedostoa ei l√∂ydy: ${v} (k√§ytet√§√§n hiljaista placeholderia)`)}),Ue[d]=y}console.log("Ladataan √§√§niefektit...");for(const[d,v]of Object.entries(St)){const y=new Audio;y.src=v,y.preload="auto",y.volume=.7,y.load(),y.addEventListener("error",()=>{console.log(`√Ñ√§nitiedostoa ei l√∂ydy: ${v} (k√§ytet√§√§n hiljaista placeholderia)`)}),Ue[d]=y}if(console.log("Taustakuva ladattu, tekstuuri:",ge),ge){const d=new ze(ge);I.renderer.width/I.renderer.height;const v=d.texture.width/d.texture.height;let y;y=I.renderer.height/d.texture.height,y*=C,d.scale.set(y),d.x=(I.renderer.width-d.width)/2,d.y=(I.renderer.height-d.height)/2+j,I.stage.addChild(d),console.log("Taustakuva lis√§tty:",A,"mode, size:",d.width.toFixed(0),"x",d.height.toFixed(0),"image aspect:",v.toFixed(2),"scale:",y.toFixed(2),"pos:",d.x.toFixed(0),d.y.toFixed(0))}else console.error("Taustakuva ei ole saatavilla!");[{x:70,y:120},{x:203,y:120},{x:345,y:120},{x:487,y:120},{x:620,y:120}].map(d=>({x:d.x+i,y:d.y+o})),be=[];for(let d=0;d<s;d++){const v=Ps(d),y=v.col,O=v.row,E=300+y*(N+20),w=250+O*(D+15),P=d===6?E+h:E,M=d===6?w+c:w,x=new xt;x.x=P+i,x.y=M+o;const W=[16711680,65280,255,16776960,16711935,65535,16753920,8388736,32768,128,16744448,8388863,33023],H=new ht().rect(0,0,N,D).fill({color:W[d],alpha:.3});H.x=x.x,H.y=x.y,I.stage.addChild(H);const ue=new gs({fontFamily:"Arial",fontSize:20,fill:16777215,fontWeight:"bold",stroke:{color:0,width:2}}),z=new Jr({text:d.toString(),style:ue});z.x=x.x+5,z.y=x.y+5,I.stage.addChild(z);const Y=new ht().rect(0,0,N,D).fill(16777215);Y.x=x.x,Y.y=x.y,x.mask=Y,I.stage.addChild(Y),I.stage.addChild(x),be.push(new Fs(d,x))}if(Te){const d=new ze(Te);d.scale.set(1),d.x=250,d.y=200,I.stage.addChild(d),console.log("Reel frames lis√§tty:",d.width.toFixed(0),"x",d.height.toFixed(0))}if(Oe){const d=new ze(Oe);d.scale.set(f),d.x=(I.renderer.width-d.width)/2+b,d.y=_,I.stage.addChild(d),console.log("Logo lis√§tty p√§√§llimm√§iseen layeriin:",d.width.toFixed(0),"x",d.height.toFixed(0))}I.ticker.add($s)});function $s(){for(const p of be)p.update(),p.draw();if(!m(ve)&&be.every(p=>p.state==="stopped")){const p=Bs();console.log(`Checking wins, found ${p.length} wins`),p.length>0?(R(Ze,xe(p)),R(he,xe(p.reduce((g,d)=>g+d.payout,0))),js(m(he)),R(ve,!0),console.log(`üéâ VOITTO! ${m(he)} pistett√§! Uusi saldo: ${m(re)}`),console.log(`isShowingWin set to: ${m(ve)}, totalWin: ${m(he)}`),p.forEach(g=>{const d=g.multiplier?` (${g.multiplier}x multiplier)`:"";console.log(`${g.count}x ${g.symbol} = ${g.payout} pistett√§${d}`)}),Ms(p),et("win")):console.log("No wins found this spin")}}function Ws(){if(m(re)<m(q)){alert(`Not enough credits! Balance: ${m(re)}, Bet: ${m(q)}`);return}R(re,m(re)-m(q)),R(Ze,xe([])),R(he,0),R(ve,!1),Rt(),$=Ot(),be.forEach((p,g)=>p.start(60+g*10)),et("spin")}function js(p){R(re,m(re)+p)}function Ns(){m(q)<Je&&R(q,xe(Math.min(m(q)+1,Je)))}function Us(){m(q)>Lt&&R(q,xe(Math.max(m(q)-1,Lt)))}function Ds(){R(q,Je)}var Pt=ln(),It=He(Pt);{var qs=p=>{var g=sn(),d=k(L(g),2),v=k(L(d));T(d);var y=k(d,2);{var O=z=>{var Y=Zr(),Be=k(L(Y));T(Y),ne(()=>X(Be,` ${m(me)??""}`)),U(z,Y)};te(y,z=>{m(me)&&z(O)})}var E=k(y,2),w=k(L(E));w.nodeValue=` ${Me??""}`,T(E);var P=k(E,2),M=k(L(P));M.nodeValue=` ${Qe??""}`,T(P);var x=k(P,2),W=k(L(x));T(x);var H=k(x,2);{var ue=z=>{var Y=tn(),Be=L(Y),Qs=L(Be);T(Be);var Js=k(Be,2);Qt(Js,17,()=>K,Kt,(Zs,ea)=>{var it=en(),ta=L(it,!0);T(it),ne(()=>X(ta,m(ea))),U(Zs,it)}),T(Y),ne(()=>X(Qs,`Log (${K.length??""})`)),U(z,Y)};te(H,z=>{K.length>0&&z(ue)})}T(g),ne(()=>{X(v,` ${m(Re)??""}`),X(W,` ${Le.a??""}`)}),U(p,g)};te(It,p=>{(m(Re)!=="Assets loaded successfully!"||m(me))&&p(qs)})}var Bt=k(It,2);{var zs=p=>{var g=nn(),d=k(L(g),2),v=L(d);T(d);var y=k(d,2);Qt(y,17,()=>m(Ze),Kt,(E,w)=>{var P=rn(),M=L(P),x=k(M);{var W=H=>{var ue=an(),z=L(ue);T(ue),ne(()=>X(z,`(${m(w).multiplier??""}x kerroin!)`)),U(H,ue)};te(x,H=>{m(w).multiplier&&m(w).multiplier>1&&H(W)})}T(P),ne(()=>X(M,`${m(w).count??""} √ó ${Cs[m(w).symbol]??""} = ${m(w).payout??""} pistett√§ `)),U(E,P)});var O=k(y,2);T(g),ne(()=>X(v,`${m(he)??""} pistett√§`)),ee("click",O,()=>{R(ve,!1),Rt(),console.log("Win popup closed, ready for next spin")}),U(p,g)};te(Bt,p=>{m(he)>0&&m(ve)&&p(zs)})}var Ct=k(Bt,2);{var Vs=p=>{var g=on(),d=k(L(g),8);T(g),ee("click",d,()=>{R(qe,!1)}),U(p,g)};te(Ct,p=>{m(qe)&&p(Vs)})}var Mt=k(Ct,2);Ba(Mt,p=>tt=p,()=>tt);var st=k(Mt,2),at=L(st),Ft=k(L(at),2),Gs=L(Ft,!0);T(Ft),T(at);var $t=k(at,2),Wt=k(L($t),2),Hs=L(Wt,!0);T(Wt),T($t),T(st);var rt=k(st,2),jt=k(L(rt),2),Nt=L(jt),nt=k(Nt,2),Ys=L(nt,!0);T(nt);var Ut=k(nt,2),Xs=k(Ut,2);T(jt),T(rt);var Dt=k(rt,2),ye=k(Dt,2),Ks=L(ye,!0);T(ye);var qt=k(ye,2);We(qt,"style",`
    position: absolute;
    left: ${l}px;                    /* X-koordinaatti (s√§√§dett√§viss√§) */
    top: ${u}px;                     /* Y-koordinaatti (s√§√§dett√§viss√§) */
    width: 60px;                           /* Napin leveys */
    height: 60px;                          /* Napin korkeus */
    border-radius: 50%;                    /* Py√∂re√§ muoto */
    background-color: rgba(0,255,0,0.2);   /* Vihre√§, l√§pin√§kyv√§ */
    border: 2px solid rgba(0,255,0,0.5);   /* Vihre√§ reunus */
    cursor: pointer;                       /* K√§si-kursori hover:ssa */
    z-index: 1000;                         /* Varmista ett√§ nappi on p√§√§llimm√§isen√§ */
    font-size: 0;                          /* Piilota teksti */
  `),ne(p=>{X(Gs,p),X(Hs,m(q)),X(Ys,m(q)),We(ye,"style",`
    position: absolute;
    top: 10px;
    right: 10px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: ${(m(de)?"rgba(0,255,0,0.2)":"rgba(255,0,0,0.2)")??""};
    border: 2px solid ${(m(de)?"rgba(0,255,0,0.5)":"rgba(255,0,0,0.5)")??""};
    cursor: pointer;
    z-index: 1001;
    font-size: 20px;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
  `),We(ye,"title",m(de)?"Mykist√§ √§√§net":"Laita √§√§net p√§√§lle"),X(Ks,m(de)?"üîä":"üîá")},[()=>m(re).toLocaleString()]),ee("click",Nt,Us),ee("click",Ut,Ns),ee("click",Xs,Ds),ee("click",Dt,()=>{R(qe,!m(qe))}),ee("click",ye,()=>{R(de,!m(de))}),ee("click",qt,Ws),U(t,Pt),us()}var dn=G('<p class="error svelte-8ys286">‚ùå V√§√§r√§ salasana!</p>'),hn=G('<div class="auth-container svelte-8ys286"><div class="auth-box svelte-8ys286"><h2 class="svelte-8ys286">üé∞ Peli Access</h2> <p class="svelte-8ys286">Anna salasana p√§√§st√§ksesi peliin:</p> <form><input type="password" placeholder="Salasana..." class="password-input svelte-8ys286" autocomplete="off"> <button type="submit" class="submit-btn svelte-8ys286">Kirjaudu sis√§√§n</button></form> <!></div></div>');function un(t,e){ds(e,!1);let s=Ca(e,"isAuthenticated",12,!1),a=mt(""),r=mt(!1);const n="slot2024";function i(){m(a)===n?(s(!0),sessionStorage.setItem("gameAuthenticated","true")):(R(r,!0),R(a,""),setTimeout(()=>R(r,!1),3e3))}hs(()=>{s(sessionStorage.getItem("gameAuthenticated")==="true")}),oa();var o=ia(),c=He(o);{var h=l=>{var u=hn(),f=L(u),b=k(L(f),4),_=L(b);Ha(_),Ia(2),T(b);var j=k(b,2);{var C=A=>{var B=dn();U(A,B)};te(j,A=>{m(r)&&A(C)})}T(f),T(u),Xa(_,()=>m(a),A=>R(a,A)),ee("submit",b,Ka(i)),U(l,u)};te(c,l=>{s()||l(h)})}U(t,o),us()}var fn=G('<div style="position: fixed; top: 10px; left: 10px; z-index: 9999; color: white; font-weight: bold;">HELLO MAD CRANE üëã (oma peli k√§ynniss√§)</div> <!>',1),pn=G("<!> <!>",1);function Sn(t){let e=mt(!1);var s=pn(),a=He(s);un(a,{get isAuthenticated(){return m(e)},set isAuthenticated(i){R(e,i)},$$legacy:!0});var r=k(a,2);{var n=i=>{var o=fn(),c=k(He(o),2);cn(c,{}),U(i,o)};te(r,i=>{m(e)&&i(n)})}U(t,s)}export{xs as A,vs as C,rr as R,Za as S,_s as V,Sn as _,Ja as u};
